cscope 15 /c/QtProjects/Img2Movie -q 0000004359 0000444122
	@cmdutils.c

22 
	~<¡ršg.h
>

23 
	~<¡dšt.h
>

24 
	~<¡dlib.h
>

25 
	~<”ºo.h
>

26 
	~<m©h.h
>

32 
	~"cÚfig.h
"

33 
	~"com·t/va_cİy.h
"

34 
	~"libavfÜm©/avfÜm©.h
"

35 
	~"libavf‹r/avf‹r.h
"

36 
	~"libavdeviû/avdeviû.h
"

37 
	~"libav»§m¶e/av»§m¶e.h
"

38 
	~"libswsÿË/swsÿË.h
"

39 
	~"libsw»§m¶e/sw»§m¶e.h
"

40 
	~"libpo¡´oc/po¡´oûss.h
"

41 
	~"libavut/avas£¹.h
"

42 
	~"libavut/av¡ršg.h
"

43 
	~"libavut/b´št.h
"

44 
	~"libavut/di¥Ïy.h
"

45 
	~"libavut/m©hem©ics.h
"

46 
	~"libavut/imguts.h
"

47 
	~"libavut/libm.h
"

48 
	~"libavut/·r£uts.h
"

49 
	~"libavut/pixdesc.h
"

50 
	~"libavut/ev®.h
"

51 
	~"libavut/diù.h
"

52 
	~"libavut/İt.h
"

53 
	~"libavut/ıu.h
"

54 
	~"libavut/ffv”siÚ.h
"

55 
	~"libavut/v”siÚ.h
"

56 
	~"cmduts.h
"

57 #ià
CONFIG_NETWORK


58 
	~"libavfÜm©/ÃtwÜk.h
"

60 #ià
HAVE_SYS_RESOURCE_H


61 
	~<sys/time.h
>

62 
	~<sys/»sourû.h
>

65 
š™_»pÜt
(cÚ¡ *
’v
);

67 
AVDiùiÚ¬y
 *
	gsws_diù
;

68 
AVDiùiÚ¬y
 *
	gswr_İts
;

69 
AVDiùiÚ¬y
 *
	gfÜm©_İts
, *
	gcodec_İts
, *
	g»§m¶e_İts
;

71 
FILE
 *
	g»pÜt_fe
;

72 
	g»pÜt_fe_Ëv–
 = 
AV_LOG_DEBUG
;

73 
	ghide_bªÃr
 = 0;

75 
	$š™_İts
()

77 
	`av_diù_£t
(&
sws_diù
, "flags", "bicubic", 0);

78 
	}
}

80 
	$unš™_İts
()

82 
	`av_diù_ä“
(&
swr_İts
);

83 
	`av_diù_ä“
(&
sws_diù
);

84 
	`av_diù_ä“
(&
fÜm©_İts
);

85 
	`av_diù_ä“
(&
codec_İts
);

86 
	`av_diù_ä“
(&
»§m¶e_İts
);

87 
	}
}

89 
	$log_ÿÎback_h–p
(*
±r
, 
Ëv–
, cÚ¡ *
fmt
, 
va_li¡
 
vl
)

91 
	`vårštf
(
¡dout
, 
fmt
, 
vl
);

92 
	}
}

94 
	$log_ÿÎback_»pÜt
(*
±r
, 
Ëv–
, cÚ¡ *
fmt
, 
va_li¡
 
vl
)

96 
va_li¡
 
vl2
;

97 
lše
[1024];

98 
´št_´efix
 = 1;

100 
	`va_cİy
(
vl2
, 
vl
);

101 
	`av_log_deçuÉ_ÿÎback
(
±r
, 
Ëv–
, 
fmt
, 
vl
);

102 
	`av_log_fÜm©_lše
(
±r
, 
Ëv–
, 
fmt
, 
vl2
, 
lše
, Öše), &
´št_´efix
);

103 
	`va_’d
(
vl2
);

104 ià(
»pÜt_fe_Ëv–
 >ğ
Ëv–
) {

105 
	`åuts
(
lše
, 
»pÜt_fe
);

106 
	`fæush
(
»pÜt_fe
);

108 
	}
}

110 (*
´og¿m_ex™
)(
»t
);

112 
	`»gi¡”_ex™
((*
cb
)(
»t
))

114 
´og¿m_ex™
 = 
cb
;

115 
	}
}

117 
	$ex™_´og¿m
(
»t
)

119 ià(
´og¿m_ex™
)

120 
	`´og¿m_ex™
(
»t
);

122 
	`ex™
(
»t
);

123 
	}
}

125 
	$·r£_numb”_Ü_d›
(cÚ¡ *
cÚ‹xt
, cÚ¡ *
num¡r
, 
ty³
,

126 
mš
, 
max
)

128 *

;

129 cÚ¡ *
”rÜ
;

130 
d
 = 
	`av_¡¹od
(
num¡r
, &

);

131 ià(*

)

132 
”rÜ
 = "Expected‚umber for %s but found: %s\n";

133 ià(
d
 < 
mš
 || d > 
max
)

134 
”rÜ
 = "The value for %s was %s which is‚ot within %f - %f\n";

135 ià(
ty³
 =ğ
OPT_INT64
 && (
št64_t
)
d
 != d)

136 
”rÜ
 = "Expected int64 for %s but found %s\n";

137 ià(
ty³
 =ğ
OPT_INT
 && ()
d
 != d)

138 
”rÜ
 = "Expected int for %s but found %s\n";

140  
d
;

141 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, 
”rÜ
, 
cÚ‹xt
, 
num¡r
, 
mš
, 
max
);

142 
	`ex™_´og¿m
(1);

144 
	}
}

146 
št64_t
 
	$·r£_time_Ü_d›
(cÚ¡ *
cÚ‹xt
, cÚ¡ *
time¡r
,

147 
is_du¿tiÚ
)

149 
št64_t
 
us
;

150 ià(
	`av_·r£_time
(&
us
, 
time¡r
, 
is_du¿tiÚ
) < 0) {

151 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Invalid %s specification for %s: %s\n",

152 
is_du¿tiÚ
 ? "du¿tiÚ" : "d©e", 
cÚ‹xt
, 
time¡r
);

153 
	`ex™_´og¿m
(1);

155  
us
;

156 
	}
}

158 
	$show_h–p_İtiÚs
(cÚ¡ 
O±iÚDef
 *
İtiÚs
, cÚ¡ *
msg
, 
»q_æags
,

159 
»j_æags
, 
®t_æags
)

161 cÚ¡ 
O±iÚDef
 *
po
;

162 
fœ¡
;

164 
fœ¡
 = 1;

165 
po
 = 
İtiÚs
;…o->
Çme
;…o++) {

166 
buf
[64];

168 ià(((
po
->
æags
 & 
»q_æags
) !=„eq_flags) ||

169 (
®t_æags
 && !(
po
->
æags
 &‡lt_flags)) ||

170 (
po
->
æags
 & 
»j_æags
))

173 ià(
fœ¡
) {

174 
	`´štf
("%s\n", 
msg
);

175 
fœ¡
 = 0;

177 
	`av_¡¾ıy
(
buf
, 
po
->
Çme
, (buf));

178 ià(
po
->
¬gÇme
) {

179 
	`av_¡¾ÿt
(
buf
, " ", (buf));

180 
	`av_¡¾ÿt
(
buf
, 
po
->
¬gÇme
, (buf));

182 
	`´štf
("-%-17  %s\n", 
buf
, 
po
->
h–p
);

184 
	`´štf
("\n");

185 
	}
}

187 
	$show_h–p_chd»n
(cÚ¡ 
AVCÏss
 *
şass
, 
æags
)

189 cÚ¡ 
AVCÏss
 *
chd
 = 
NULL
;

190 ià(
şass
->
İtiÚ
) {

191 
	`av_İt_show2
(&
şass
, 
NULL
, 
æags
, 0);

192 
	`´štf
("\n");

195 
chd
 = 
	`av_İt_chd_şass_Ãxt
(
şass
, child))

196 
	`show_h–p_chd»n
(
chd
, 
æags
);

197 
	}
}

199 cÚ¡ 
O±iÚDef
 *
	$fšd_İtiÚ
(cÚ¡ 
O±iÚDef
 *
po
, cÚ¡ *
Çme
)

201 cÚ¡ *
p
 = 
	`¡rchr
(
Çme
, ':');

202 
Ën
 = 
p
 ?… - 
Çme
 : 
	`¡¾’
(name);

204 
po
->
Çme
) {

205 ià(!
	`¡ºcmp
(
Çme
, 
po
->Çme, 
Ën
è&& 
	`¡¾’
(po->name) ==†en)

207 
po
++;

209  
po
;

210 
	}
}

215 #ià
HAVE_COMMANDLINETOARGVW
 && 
defšed
(
_WIN32
)

216 
	~<wšdows.h
>

217 
	~<sh–Ïpi.h
>

219 ** 
	gwš32_¬gv_utf8
 = 
NULL
;

220 
	gwš32_¬gc
 = 0;

229 
	$´•¬e_­p_¬gum’ts
(*
¬gc_±r
, ***
¬gv_±r
)

231 *
¬g¡r_æ©
;

232 
wch¬_t
 **
¬gv_w
;

233 
i
, 
buffsize
 = 0, 
off£t
 = 0;

235 ià(
wš32_¬gv_utf8
) {

236 *
¬gc_±r
 = 
wš32_¬gc
;

237 *
¬gv_±r
 = 
wš32_¬gv_utf8
;

241 
wš32_¬gc
 = 0;

242 
¬gv_w
 = 
	`CommªdLšeToArgvW
(
	`G‘CommªdLšeW
(), &
wš32_¬gc
);

243 ià(
wš32_¬gc
 <ğ0 || !
¬gv_w
)

247 
i
 = 0; i < 
wš32_¬gc
; i++)

248 
buffsize
 +ğ
	`WideCh¬ToMuÉiBy‹
(
CP_UTF8
, 0, 
¬gv_w
[
i
], -1,

249 
NULL
, 0, NULL, NULL);

251 
wš32_¬gv_utf8
 = 
	`av_m®locz
((*è* (
wš32_¬gc
 + 1è+ 
buffsize
);

252 
¬g¡r_æ©
 = (*)
wš32_¬gv_utf8
 + (*è* (
wš32_¬gc
 + 1);

253 ià(!
wš32_¬gv_utf8
) {

254 
	`LoÿlF»e
(
¬gv_w
);

258 
i
 = 0; i < 
wš32_¬gc
; i++) {

259 
wš32_¬gv_utf8
[
i
] = &
¬g¡r_æ©
[
off£t
];

260 
off£t
 +ğ
	`WideCh¬ToMuÉiBy‹
(
CP_UTF8
, 0, 
¬gv_w
[
i
], -1,

261 &
¬g¡r_æ©
[
off£t
],

262 
buffsize
 - 
off£t
, 
NULL
, NULL);

264 
wš32_¬gv_utf8
[
i
] = 
NULL
;

265 
	`LoÿlF»e
(
¬gv_w
);

267 *
¬gc_±r
 = 
wš32_¬gc
;

268 *
¬gv_±r
 = 
wš32_¬gv_utf8
;

269 
	}
}

271 
šlše
 
	$´•¬e_­p_¬gum’ts
(*
¬gc_±r
, ***
¬gv_±r
)

274 
	}
}

277 
	$wr™e_İtiÚ
(*
İtùx
, cÚ¡ 
O±iÚDef
 *
po
, cÚ¡ *
İt
,

278 cÚ¡ *
¬g
)

282 *
d¡
 = 
po
->
æags
 & (
OPT_OFFSET
 | 
OPT_SPEC
) ?

283 (
ušt8_t
 *)
İtùx
 + 
po
->
u
.
off
 :…o->u.
d¡_±r
;

284 *
d¡couÁ
;

286 ià(
po
->
æags
 & 
OPT_SPEC
) {

287 
S³cif›rO±
 **
so
 = 
d¡
;

288 *
p
 = 
	`¡rchr
(
İt
, ':');

289 *
¡r
;

291 
d¡couÁ
 = (*)(
so
 + 1);

292 *
so
 = 
	`grow_¬¿y
(*so, (**so), 
d¡couÁ
, *dstcount + 1);

293 
¡r
 = 
	`av_¡rdup
(
p
 ?… + 1 : "");

294 ià(!
¡r
)

295  
	`AVERROR
(
ENOMEM
);

296 (*
so
)[*
d¡couÁ
 - 1].
¥ecif›r
 = 
¡r
;

297 
d¡
 = &(*
so
)[*
d¡couÁ
 - 1].
u
;

300 ià(
po
->
æags
 & 
OPT_STRING
) {

301 *
¡r
;

302 
¡r
 = 
	`av_¡rdup
(
¬g
);

303 
	`av_ä“p
(
d¡
);

304 ià(!
¡r
)

305  
	`AVERROR
(
ENOMEM
);

306 *(**)
d¡
 = 
¡r
;

307 } ià(
po
->
æags
 & 
OPT_BOOL
 ||…o->æag & 
OPT_INT
) {

308 *(*)
d¡
 = 
	`·r£_numb”_Ü_d›
(
İt
, 
¬g
, 
OPT_INT64
, 
INT_MIN
, 
INT_MAX
);

309 } ià(
po
->
æags
 & 
OPT_INT64
) {

310 *(
št64_t
 *)
d¡
 = 
	`·r£_numb”_Ü_d›
(
İt
, 
¬g
, 
OPT_INT64
, 
INT64_MIN
, 
INT64_MAX
);

311 } ià(
po
->
æags
 & 
OPT_TIME
) {

312 *(
št64_t
 *)
d¡
 = 
	`·r£_time_Ü_d›
(
İt
, 
¬g
, 1);

313 } ià(
po
->
æags
 & 
OPT_FLOAT
) {

314 *(*)
d¡
 = 
	`·r£_numb”_Ü_d›
(
İt
, 
¬g
, 
OPT_FLOAT
, -
INFINITY
, INFINITY);

315 } ià(
po
->
æags
 & 
OPT_DOUBLE
) {

316 *(*)
d¡
 = 
	`·r£_numb”_Ü_d›
(
İt
, 
¬g
, 
OPT_DOUBLE
, -
INFINITY
, INFINITY);

317 } ià(
po
->
u
.
func_¬g
) {

318 
»t
 = 
po
->
u
.
	`func_¬g
(
İtùx
, 
İt
, 
¬g
);

319 ià(
»t
 < 0) {

320 
	`av_log
(
NULL
, 
AV_LOG_ERROR
,

322 
¬g
, 
İt
, 
	`av_”r2¡r
(
»t
));

323  
»t
;

326 ià(
po
->
æags
 & 
OPT_EXIT
)

327 
	`ex™_´og¿m
(0);

330 
	}
}

332 
	$·r£_İtiÚ
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
,

333 cÚ¡ 
O±iÚDef
 *
İtiÚs
)

335 cÚ¡ 
O±iÚDef
 *
po
;

336 
»t
;

338 
po
 = 
	`fšd_İtiÚ
(
İtiÚs
, 
İt
);

339 ià(!
po
->
Çme
 && 
İt
[0] == 'n' && opt[1] == 'o') {

341 
po
 = 
	`fšd_İtiÚ
(
İtiÚs
, 
İt
 + 2);

342 ià((
po
->
Çme
 && (po->
æags
 & 
OPT_BOOL
)))

343 
¬g
 = "0";

344 } ià(
po
->
æags
 & 
OPT_BOOL
)

345 
¬g
 = "1";

347 ià(!
po
->
Çme
)

348 
po
 = 
	`fšd_İtiÚ
(
İtiÚs
, "default");

349 ià(!
po
->
Çme
) {

350 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "UÄecognized o±iÚ '%s'\n", 
İt
);

351  
	`AVERROR
(
EINVAL
);

353 ià(
po
->
æags
 & 
HAS_ARG
 && !
¬g
) {

354 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Missšg‡rgum’ˆfÜ o±iÚ '%s'\n", 
İt
);

355  
	`AVERROR
(
EINVAL
);

358 
»t
 = 
	`wr™e_İtiÚ
(
İtùx
, 
po
, 
İt
, 
¬g
);

359 ià(
»t
 < 0)

360  
»t
;

362  !!(
po
->
æags
 & 
HAS_ARG
);

363 
	}
}

365 
·r£_İtiÚs
(*
İtùx
, 
¬gc
, **
¬gv
, cÚ¡ 
O±iÚDef
 *
İtiÚs
,

366 (*
·r£_¬g_funùiÚ
)(*, const *))

368 cÚ¡ *
İt
;

369 
İtšdex
, 
hªdËİtiÚs
 = 1, 
»t
;

372 
	`´•¬e_­p_¬gum’ts
(&
¬gc
, &
¬gv
);

375 
İtšdex
 = 1;

376 
İtšdex
 < 
¬gc
) {

377 
İt
 = 
¬gv
[
İtšdex
++];

379 ià(
hªdËİtiÚs
 && 
İt
[0] == '-' && opt[1] != '\0') {

380 ià(
İt
[1] == '-' && opt[2] == '\0') {

381 
hªdËİtiÚs
 = 0;

384 
İt
++;

386 ià((
»t
 = 
	`·r£_İtiÚ
(
İtùx
, 
İt
, 
¬gv
[
İtšdex
], 
İtiÚs
)) < 0)

387 
	`ex™_´og¿m
(1);

388 
İtšdex
 +ğ
»t
;

390 ià(
·r£_¬g_funùiÚ
)

391 
	`·r£_¬g_funùiÚ
(
İtùx
, 
İt
);

394 
	}
}

396 
	$·r£_İtgroup
(*
İtùx
, 
O±iÚGroup
 *
g
)

398 
i
, 
»t
;

400 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, "Parsing‡ group of options: %s %s.\n",

401 
g
->
group_def
->
Çme
, g->
¬g
);

403 
i
 = 0; i < 
g
->
nb_İts
; i++) {

404 
O±iÚ
 *
o
 = &
g
->
İts
[
i
];

406 ià(
g
->
group_def
->
æags
 &&

407 !(
g
->
group_def
->
æags
 & 
o
->
İt
->flags)) {

408 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Option %s (%s) cannot be‡ppliedo "

411 "f™ b–Úg to.\n", 
o
->
key
, o->
İt
->
h–p
,

412 
g
->
group_def
->
Çme
, g->
¬g
);

413  
	`AVERROR
(
EINVAL
);

416 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, "Applying option %s (%s) with‡rgument %s.\n",

417 
o
->
key
, o->
İt
->
h–p
, o->
v®
);

419 
»t
 = 
	`wr™e_İtiÚ
(
İtùx
, 
o
->
İt
, o->
key
, o->
v®
);

420 ià(
»t
 < 0)

421  
»t
;

424 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, "Successfully…arsed‡ group of options.\n");

427 
	}
}

429 
	$loÿ‹_İtiÚ
(
¬gc
, **
¬gv
, cÚ¡ 
O±iÚDef
 *
İtiÚs
,

430 cÚ¡ *
İŠame
)

432 cÚ¡ 
O±iÚDef
 *
po
;

433 
i
;

435 
i
 = 1; i < 
¬gc
; i++) {

436 cÚ¡ *
cur_İt
 = 
¬gv
[
i
];

438 ià(*
cur_İt
++ != '-')

441 
po
 = 
	`fšd_İtiÚ
(
İtiÚs
, 
cur_İt
);

442 ià(!
po
->
Çme
 && 
cur_İt
[0] == 'n' && cur_opt[1] == 'o')

443 
po
 = 
	`fšd_İtiÚ
(
İtiÚs
, 
cur_İt
 + 2);

445 ià((!
po
->
Çme
 && !
	`¡rcmp
(
cur_İt
, 
İŠame
)) ||

446 (
po
->
Çme
 && !
	`¡rcmp
(
İŠame
,…o->name)))

447  
i
;

449 ià(!
po
->
Çme
 ||…o->
æags
 & 
HAS_ARG
)

450 
i
++;

453 
	}
}

455 
	$dump_¬gum’t
(cÚ¡ *
a
)

457 cÚ¡ *
p
;

459 
p
 = 
a
; *p;…++)

460 ià(!((*
p
 >= '+' && *p <= ':') || (*p >= '@' && *p <= 'Z') ||

461 *
p
 == '_' || (*p >= 'a' && *p <= 'z')))

463 ià(!*
p
) {

464 
	`åuts
(
a
, 
»pÜt_fe
);

467 
	`åutc
('"', 
»pÜt_fe
);

468 
p
 = 
a
; *p;…++) {

469 ià(*
p
 == '\\' || *p == '"' || *p == '$' || *p == '`')

470 
	`årštf
(
»pÜt_fe
, "\\%c", *
p
);

471 ià(*
p
 < ' ' || *p > '~')

472 
	`årštf
(
»pÜt_fe
, "\\x%02x", *
p
);

474 
	`åutc
(*
p
, 
»pÜt_fe
);

476 
	`åutc
('"', 
»pÜt_fe
);

477 
	}
}

479 
	$check_İtiÚs
(cÚ¡ 
O±iÚDef
 *
po
)

481 
po
->
Çme
) {

482 ià(
po
->
æags
 & 
OPT_PERFILE
)

483 
	`av_as£¹0
(
po
->
æags
 & (
OPT_INPUT
 | 
OPT_OUTPUT
));

484 
po
++;

486 
	}
}

488 
	$·r£_logËv–
(
¬gc
, **
¬gv
, cÚ¡ 
O±iÚDef
 *
İtiÚs
)

490 
idx
 = 
	`loÿ‹_İtiÚ
(
¬gc
, 
¬gv
, 
İtiÚs
, "loglevel");

491 cÚ¡ *
’v
;

493 
	`check_İtiÚs
(
İtiÚs
);

495 ià(!
idx
)

496 
idx
 = 
	`loÿ‹_İtiÚ
(
¬gc
, 
¬gv
, 
İtiÚs
, "v");

497 ià(
idx
 && 
¬gv
[idx + 1])

498 
	`İt_logËv–
(
NULL
, "logËv–", 
¬gv
[
idx
 + 1]);

499 
idx
 = 
	`loÿ‹_İtiÚ
(
¬gc
, 
¬gv
, 
İtiÚs
, "report");

500 ià((
’v
 = 
	`g‘’v
("FFREPORT")è|| 
idx
) {

501 
	`š™_»pÜt
(
’v
);

502 ià(
»pÜt_fe
) {

503 
i
;

504 
	`årštf
(
»pÜt_fe
, "Command†ine:\n");

505 
i
 = 0; i < 
¬gc
; i++) {

506 
	`dump_¬gum’t
(
¬gv
[
i
]);

507 
	`åutc
(
i
 < 
¬gc
 - 1 ? ' ' : '\n', 
»pÜt_fe
);

509 
	`fæush
(
»pÜt_fe
);

512 
idx
 = 
	`loÿ‹_İtiÚ
(
¬gc
, 
¬gv
, 
İtiÚs
, "hide_banner");

513 ià(
idx
)

514 
hide_bªÃr
 = 1;

515 
	}
}

517 cÚ¡ 
AVO±iÚ
 *
	$İt_fšd
(*
obj
, cÚ¡ *
Çme
, cÚ¡ *
un™
,

518 
İt_æags
, 
£¬ch_æags
)

520 cÚ¡ 
AVO±iÚ
 *
o
 = 
	`av_İt_fšd
(
obj
, 
Çme
, 
un™
, 
İt_æags
, 
£¬ch_æags
);

521 if(
o
 && !o->
æags
)

522  
NULL
;

523  
o
;

524 
	}
}

526 
	#FLAGS
 (
o
->
ty³
 =ğ
AV_OPT_TYPE_FLAGS
 && (
¬g
[0]=='-' ||‡rg[0]=='+')è? 
AV_DICT_APPEND
 : 0

	)

527 
	$İt_deçuÉ
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

529 cÚ¡ 
AVO±iÚ
 *
o
;

530 
cÚsumed
 = 0;

531 
İt_¡r³d
[128];

532 cÚ¡ *
p
;

533 cÚ¡ 
AVCÏss
 *
cc
 = 
	`avcodec_g‘_şass
(), *
fc
 = 
	`avfÜm©_g‘_şass
();

534 #ià
CONFIG_AVRESAMPLE


535 cÚ¡ 
AVCÏss
 *
rc
 = 
	`av»§m¶e_g‘_şass
();

537 #ià
CONFIG_SWSCALE


538 cÚ¡ 
AVCÏss
 *
sc
 = 
	`sws_g‘_şass
();

540 #ià
CONFIG_SWRESAMPLE


541 cÚ¡ 
AVCÏss
 *
swr_şass
 = 
	`swr_g‘_şass
();

544 ià(!
	`¡rcmp
(
İt
, "debug") || !strcmp(opt, "fdebug"))

545 
	`av_log_£t_Ëv–
(
AV_LOG_DEBUG
);

547 ià(!(
p
 = 
	`¡rchr
(
İt
, ':')))

548 
p
 = 
İt
 + 
	`¡¾’
(opt);

549 
	`av_¡¾ıy
(
İt_¡r³d
, 
İt
, 
	`FFMIN
((İt_¡r³d), 
p
 - opt + 1));

551 ià((
o
 = 
	`İt_fšd
(&
cc
, 
İt_¡r³d
, 
NULL
, 0,

552 
AV_OPT_SEARCH_CHILDREN
 | 
AV_OPT_SEARCH_FAKE_OBJ
)) ||

553 ((
İt
[0] == 'v' || opt[0] == 'a' || opt[0] == 's') &&

554 (
o
 = 
	`İt_fšd
(&
cc
, 
İt
 + 1, 
NULL
, 0, 
AV_OPT_SEARCH_FAKE_OBJ
)))) {

555 
	`av_diù_£t
(&
codec_İts
, 
İt
, 
¬g
, 
FLAGS
);

556 
cÚsumed
 = 1;

558 ià((
o
 = 
	`İt_fšd
(&
fc
, 
İt
, 
NULL
, 0,

559 
AV_OPT_SEARCH_CHILDREN
 | 
AV_OPT_SEARCH_FAKE_OBJ
))) {

560 
	`av_diù_£t
(&
fÜm©_İts
, 
İt
, 
¬g
, 
FLAGS
);

561 ià(
cÚsumed
)

562 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, "Routšg o±iÚ % tØbÙh codeøªd mux”†ay”\n", 
İt
);

563 
cÚsumed
 = 1;

565 #ià
CONFIG_SWSCALE


566 ià(!
cÚsumed
 && (
o
 = 
	`İt_fšd
(&
sc
, 
İt
, 
NULL
, 0,

567 
AV_OPT_SEARCH_CHILDREN
 | 
AV_OPT_SEARCH_FAKE_OBJ
))) {

568 
SwsCÚ‹xt
 *
sws
 = 
	`sws_®loc_cÚ‹xt
();

569 
»t
 = 
	`av_İt_£t
(
sws
, 
İt
, 
¬g
, 0);

570 
	`sws_ä“CÚ‹xt
(
sws
);

571 ià(!
	`¡rcmp
(
İt
, "srcw") || !strcmp(opt, "srch") ||

572 !
	`¡rcmp
(
İt
, "dstw") || !strcmp(opt, "dsth") ||

573 !
	`¡rcmp
(
İt
, "src_format") || !strcmp(opt, "dst_format")) {

574 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Directly using swscale dimensions/format options is‚ot supported,…lease usehe -s or -pix_fmt options\n");

575  
	`AVERROR
(
EINVAL
);

577 ià(
»t
 < 0) {

578 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "E¼Ü s‘tšg o±iÚ %s.\n", 
İt
);

579  
»t
;

582 
	`av_diù_£t
(&
sws_diù
, 
İt
, 
¬g
, 
FLAGS
);

584 
cÚsumed
 = 1;

587 ià(!
cÚsumed
 && !
	`¡rcmp
(
İt
, "sws_flags")) {

588 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "IgnÜšg % %s, dutØdi§bËd swsÿË\n", 
İt
, 
¬g
);

589 
cÚsumed
 = 1;

592 #ià
CONFIG_SWRESAMPLE


593 ià(!
cÚsumed
 && (
o
=
	`İt_fšd
(&
swr_şass
, 
İt
, 
NULL
, 0,

594 
AV_OPT_SEARCH_CHILDREN
 | 
AV_OPT_SEARCH_FAKE_OBJ
))) {

595 
SwrCÚ‹xt
 *
swr
 = 
	`swr_®loc
();

596 
»t
 = 
	`av_İt_£t
(
swr
, 
İt
, 
¬g
, 0);

597 
	`swr_ä“
(&
swr
);

598 ià(
»t
 < 0) {

599 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "E¼Ü s‘tšg o±iÚ %s.\n", 
İt
);

600  
»t
;

602 
	`av_diù_£t
(&
swr_İts
, 
İt
, 
¬g
, 
FLAGS
);

603 
cÚsumed
 = 1;

606 #ià
CONFIG_AVRESAMPLE


607 ià((
o
=
	`İt_fšd
(&
rc
, 
İt
, 
NULL
, 0,

608 
AV_OPT_SEARCH_CHILDREN
 | 
AV_OPT_SEARCH_FAKE_OBJ
))) {

609 
	`av_diù_£t
(&
»§m¶e_İts
, 
İt
, 
¬g
, 
FLAGS
);

610 
cÚsumed
 = 1;

614 ià(
cÚsumed
)

616  
AVERROR_OPTION_NOT_FOUND
;

617 
	}
}

624 
	$m©ch_group_£·¿tÜ
(cÚ¡ 
O±iÚGroupDef
 *
groups
, 
nb_groups
,

625 cÚ¡ *
İt
)

627 
i
;

629 
i
 = 0; i < 
nb_groups
; i++) {

630 cÚ¡ 
O±iÚGroupDef
 *
p
 = &
groups
[
i
];

631 ià(
p
->
£p
 && !
	`¡rcmp
Õ->£p, 
İt
))

632  
i
;

636 
	}
}

644 
	$fšish_group
(
O±iÚP¬£CÚ‹xt
 *
oùx
, 
group_idx
,

645 cÚ¡ *
¬g
)

647 
O±iÚGroupLi¡
 *
l
 = &
oùx
->
groups
[
group_idx
];

648 
O±iÚGroup
 *
g
;

650 
	`GROW_ARRAY
(
l
->
groups
,†->
nb_groups
);

651 
g
 = &
l
->
groups
[l->
nb_groups
 - 1];

653 *
g
 = 
oùx
->
cur_group
;

654 
g
->
¬g
 =‡rg;

655 
g
->
group_def
 = 
l
->group_def;

656 
g
->
sws_diù
 = sws_dict;

657 
g
->
swr_İts
 = swr_opts;

658 
g
->
codec_İts
 = codec_opts;

659 
g
->
fÜm©_İts
 = format_opts;

660 
g
->
»§m¶e_İts
 =„esample_opts;

662 
codec_İts
 = 
NULL
;

663 
fÜm©_İts
 = 
NULL
;

664 
»§m¶e_İts
 = 
NULL
;

665 
sws_diù
 = 
NULL
;

666 
swr_İts
 = 
NULL
;

667 
	`š™_İts
();

669 
	`mem£t
(&
oùx
->
cur_group
, 0, (octx->cur_group));

670 
	}
}

675 
	$add_İt
(
O±iÚP¬£CÚ‹xt
 *
oùx
, cÚ¡ 
O±iÚDef
 *
İt
,

676 cÚ¡ *
key
, cÚ¡ *
v®
)

678 
glob®
 = !(
İt
->
æags
 & (
OPT_PERFILE
 | 
OPT_SPEC
 | 
OPT_OFFSET
));

679 
O±iÚGroup
 *
g
 = 
glob®
 ? &
oùx
->
glob®_İts
 : &oùx->
cur_group
;

681 
	`GROW_ARRAY
(
g
->
İts
, g->
nb_İts
);

682 
g
->
İts
[g->
nb_İts
 - 1].
İt
 = opt;

683 
g
->
İts
[g->
nb_İts
 - 1].
key
 = key;

684 
g
->
İts
[g->
nb_İts
 - 1].
v®
 = val;

685 
	}
}

687 
	$š™_·r£_cÚ‹xt
(
O±iÚP¬£CÚ‹xt
 *
oùx
,

688 cÚ¡ 
O±iÚGroupDef
 *
groups
, 
nb_groups
)

690 cÚ¡ 
O±iÚGroupDef
 
glob®_group
 = { "global" };

691 
i
;

693 
	`mem£t
(
oùx
, 0, (*octx));

695 
oùx
->
nb_groups
 =‚b_groups;

696 
oùx
->
groups
 = 
	`av_m®locz_¬¿y
(oùx->
nb_groups
, (*octx->groups));

697 ià(!
oùx
->
groups
)

698 
	`ex™_´og¿m
(1);

700 
i
 = 0; i < 
oùx
->
nb_groups
; i++)

701 
oùx
->
groups
[
i
].
group_def
 = &groups[i];

703 
oùx
->
glob®_İts
.
group_def
 = &
glob®_group
;

704 
oùx
->
glob®_İts
.
¬g
 = "";

706 
	`š™_İts
();

707 
	}
}

709 
	$unš™_·r£_cÚ‹xt
(
O±iÚP¬£CÚ‹xt
 *
oùx
)

711 
i
, 
j
;

713 
i
 = 0; i < 
oùx
->
nb_groups
; i++) {

714 
O±iÚGroupLi¡
 *
l
 = &
oùx
->
groups
[
i
];

716 
j
 = 0; j < 
l
->
nb_groups
; j++) {

717 
	`av_ä“p
(&
l
->
groups
[
j
].
İts
);

718 
	`av_diù_ä“
(&
l
->
groups
[
j
].
codec_İts
);

719 
	`av_diù_ä“
(&
l
->
groups
[
j
].
fÜm©_İts
);

720 
	`av_diù_ä“
(&
l
->
groups
[
j
].
»§m¶e_İts
);

722 
	`av_diù_ä“
(&
l
->
groups
[
j
].
sws_diù
);

723 
	`av_diù_ä“
(&
l
->
groups
[
j
].
swr_İts
);

725 
	`av_ä“p
(&
l
->
groups
);

727 
	`av_ä“p
(&
oùx
->
groups
);

729 
	`av_ä“p
(&
oùx
->
cur_group
.
İts
);

730 
	`av_ä“p
(&
oùx
->
glob®_İts
.
İts
);

732 
	`unš™_İts
();

733 
	}
}

735 
	$¥l™_commªdlše
(
O±iÚP¬£CÚ‹xt
 *
oùx
, 
¬gc
, *
¬gv
[],

736 cÚ¡ 
O±iÚDef
 *
İtiÚs
,

737 cÚ¡ 
O±iÚGroupDef
 *
groups
, 
nb_groups
)

739 
İtšdex
 = 1;

740 
dashdash
 = -2;

743 
	`´•¬e_­p_¬gum’ts
(&
¬gc
, &
¬gv
);

745 
	`š™_·r£_cÚ‹xt
(
oùx
, 
groups
, 
nb_groups
);

746 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, "Splittinghe commandline.\n");

748 
İtšdex
 < 
¬gc
) {

749 cÚ¡ *
İt
 = 
¬gv
[
İtšdex
++], *
¬g
;

750 cÚ¡ 
O±iÚDef
 *
po
;

751 
»t
;

753 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, "R—dšg o±iÚ '%s' ...", 
İt
);

755 ià(
İt
[0] == '-' && opt[1] == '-' && !opt[2]) {

756 
dashdash
 = 
İtšdex
;

760 ià(
İt
[0] !ğ'-' || !İt[1] || 
dashdash
+1 =ğ
İtšdex
) {

761 
	`fšish_group
(
oùx
, 0, 
İt
);

762 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, " m©ched‡ %s.\n", 
groups
[0].
Çme
);

765 
İt
++;

767 
	#GET_ARG
(
¬g
) \

769 
¬g
 = 
¬gv
[
İtšdex
++]; \

770 ià(!
¬g
) { \

771 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Missšg‡rgum’ˆfÜ o±iÚ '%s'.\n", 
İt
);\

772  
	`AVERROR
(
EINVAL
); \

774 } 0)

	)

777 ià((
»t
 = 
	`m©ch_group_£·¿tÜ
(
groups
, 
nb_groups
, 
İt
)) >= 0) {

778 
	`GET_ARG
(
¬g
);

779 
	`fšish_group
(
oùx
, 
»t
, 
¬g
);

780 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, " matched‡s %s with‡rgument '%s'.\n",

781 
groups
[
»t
].
Çme
, 
¬g
);

786 
po
 = 
	`fšd_İtiÚ
(
İtiÚs
, 
İt
);

787 ià(
po
->
Çme
) {

788 ià(
po
->
æags
 & 
OPT_EXIT
) {

790 
¬g
 = 
¬gv
[
İtšdex
++];

791 } ià(
po
->
æags
 & 
HAS_ARG
) {

792 
	`GET_ARG
(
¬g
);

794 
¬g
 = "1";

797 
	`add_İt
(
oùx
, 
po
, 
İt
, 
¬g
);

798 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, " matched‡s option '%s' (%s) with "

799 "¬gum’ˆ'%s'.\n", 
po
->
Çme
,…o->
h–p
, 
¬g
);

804 ià(
¬gv
[
İtšdex
]) {

805 
»t
 = 
	`İt_deçuÉ
(
NULL
, 
İt
, 
¬gv
[
İtšdex
]);

806 ià(
»t
 >= 0) {

807 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, " matched‡s AVOption '%s' with "

808 "¬gum’ˆ'%s'.\n", 
İt
, 
¬gv
[
İtšdex
]);

809 
İtšdex
++;

811 } ià(
»t
 !ğ
AVERROR_OPTION_NOT_FOUND
) {

812 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Error…arsing option '%s' "

813 "w™h‡rgum’ˆ'%s'.\n", 
İt
, 
¬gv
[
İtšdex
]);

814  
»t
;

819 ià(
İt
[0] == 'n' && opt[1] == 'o' &&

820 (
po
 = 
	`fšd_İtiÚ
(
İtiÚs
, 
İt
 + 2)) &&

821 
po
->
Çme
 &&…o->
æags
 & 
OPT_BOOL
) {

822 
	`add_İt
(
oùx
, 
po
, 
İt
, "0");

823 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, " matched‡s option '%s' (%s) with "

824 "¬gum’ˆ0.\n", 
po
->
Çme
,…o->
h–p
);

828 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "UÄecognized o±iÚ '%s'.\n", 
İt
);

829  
AVERROR_OPTION_NOT_FOUND
;

832 ià(
oùx
->
cur_group
.
nb_İts
 || 
codec_İts
 || 
fÜm©_İts
 || 
»§m¶e_İts
)

833 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "Trailing options were found onhe "

836 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, "Finished splittinghe commandline.\n");

839 
	}
}

841 
	$İt_ıuæags
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

843 
»t
;

844 
æags
 = 
	`av_g‘_ıu_æags
();

846 ià((
»t
 = 
	`av_·r£_ıu_ÿps
(&
æags
, 
¬g
)) < 0)

847  
»t
;

849 
	`av_fÜû_ıu_æags
(
æags
);

851 
	}
}

853 
	$İt_logËv–
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

855 cÚ¡ sŒuù { cÚ¡ *
Çme
; 
Ëv–
; } 
log_Ëv–s
[] = {

856 { "qu›t" , 
AV_LOG_QUIET
 },

857 { "·nic" , 
AV_LOG_PANIC
 },

858 { "çl" , 
AV_LOG_FATAL
 },

859 { "”rÜ" , 
AV_LOG_ERROR
 },

860 { "w¬nšg", 
AV_LOG_WARNING
 },

861 { "šfo" , 
AV_LOG_INFO
 },

862 { "v”bo£", 
AV_LOG_VERBOSE
 },

863 { "debug" , 
AV_LOG_DEBUG
 },

864 { "Œaû" , 
AV_LOG_TRACE
 },

866 *

;

867 
Ëv–
;

868 
æags
;

869 
i
;

871 
æags
 = 
	`av_log_g‘_æags
();

872 

 = 
	`¡r¡r
(
¬g
, "repeat");

873 ià(

)

874 
æags
 &ğ~
AV_LOG_SKIP_REPEATED
;

876 
æags
 |ğ
AV_LOG_SKIP_REPEATED
;

878 
	`av_log_£t_æags
(
æags
);

879 ià(

 =ğ
¬g
)

880 
¬g
 += 6 + (arg[6]=='+');

881 if(

 && !*
¬g
)

884 
i
 = 0; i < 
	`FF_ARRAY_ELEMS
(
log_Ëv–s
); i++) {

885 ià(!
	`¡rcmp
(
log_Ëv–s
[
i
].
Çme
, 
¬g
)) {

886 
	`av_log_£t_Ëv–
(
log_Ëv–s
[
i
].
Ëv–
);

891 
Ëv–
 = 
	`¡¹Ş
(
¬g
, &

, 10);

892 ià(*

) {

893 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Invalid†oglevel \"%s\". "

894 "PossibË†ev– ¬numb” Ü:\n", 
¬g
);

895 
i
 = 0; i < 
	`FF_ARRAY_ELEMS
(
log_Ëv–s
); i++)

896 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "\"%s\"\n", 
log_Ëv–s
[
i
].
Çme
);

897 
	`ex™_´og¿m
(1);

899 
	`av_log_£t_Ëv–
(
Ëv–
);

901 
	}
}

903 
	$ex·nd_f’ame_‹m¶©e
(
AVBPršt
 *
bp
, cÚ¡ *
‹m¶©e
,

904 
tm
 *tm)

906 
c
;

908 (
c
 = *(
‹m¶©e
++))) {

909 ià(
c
 == '%') {

910 ià(!(
c
 = *(
‹m¶©e
++)))

912 
c
) {

914 
	`av_b´štf
(
bp
, "%s", 
´og¿m_Çme
);

917 
	`av_b´štf
(
bp
, "%04d%02d%02d-%02d%02d%02d",

918 
tm
->
tm_y—r
 + 1900,m->
tm_mÚ
 + 1,m->
tm_mday
,

919 
tm
->
tm_hour
,m->
tm_mš
,m->
tm_£c
);

922 
	`av_b´št_ch¬s
(
bp
, 
c
, 1);

926 
	`av_b´št_ch¬s
(
bp
, 
c
, 1);

929 
	}
}

931 
	$š™_»pÜt
(cÚ¡ *
’v
)

933 *
f’ame_‹m¶©e
 = 
NULL
;

934 *
key
, *
v®
;

935 
»t
, 
couÁ
 = 0;

936 
time_t
 
now
;

937 
tm
 *tm;

938 
AVBPršt
 
f’ame
;

940 ià(
»pÜt_fe
)

942 
	`time
(&
now
);

943 
tm
 = 
	`loÿÉime
(&
now
);

945 
’v
 && *env) {

946 ià((
»t
 = 
	`av_İt_g‘_key_v®ue
(&
’v
, "=", ":", 0, &
key
, &
v®
)) < 0) {

947 ià(
couÁ
)

948 
	`av_log
(
NULL
, 
AV_LOG_ERROR
,

950 
	`av_”r2¡r
(
»t
));

953 ià(*
’v
)

954 
’v
++;

955 
couÁ
++;

956 ià(!
	`¡rcmp
(
key
, "file")) {

957 
	`av_ä“
(
f’ame_‹m¶©e
);

958 
f’ame_‹m¶©e
 = 
v®
;

959 
v®
 = 
NULL
;

960 } ià(!
	`¡rcmp
(
key
, "level")) {

961 *

;

962 
»pÜt_fe_Ëv–
 = 
	`¡¹Ş
(
v®
, &

, 10);

963 ià(*

) {

964 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Invalid„eport file†evel\n");

965 
	`ex™_´og¿m
(1);

968 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "UnknowÀkey '%s' iÀFFREPORT\n", 
key
);

970 
	`av_ä“
(
v®
);

971 
	`av_ä“
(
key
);

974 
	`av_b´št_š™
(&
f’ame
, 0, 1);

975 
	`ex·nd_f’ame_‹m¶©e
(&
f’ame
,

976 
	`av_x_if_nuÎ
(
f’ame_‹m¶©e
, "%p-%t.log"), 
tm
);

977 
	`av_ä“
(
f’ame_‹m¶©e
);

978 ià(!
	`av_b´št_is_com¶‘e
(&
f’ame
)) {

979 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Out of memory building„eport file‚ame\n");

980  
	`AVERROR
(
ENOMEM
);

983 
»pÜt_fe
 = 
	`fİ’
(
f’ame
.
¡r
, "w");

984 ià(!
»pÜt_fe
) {

985 
»t
 = 
	`AVERROR
(
”ºo
);

986 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Failedo open„eport \"%s\": %s\n",

987 
f’ame
.
¡r
, 
	`¡»¼Ü
(
”ºo
));

988  
»t
;

990 
	`av_log_£t_ÿÎback
(
log_ÿÎback_»pÜt
);

991 
	`av_log
(
NULL
, 
AV_LOG_INFO
,

994 
´og¿m_Çme
,

995 
tm
->
tm_y—r
 + 1900,m->
tm_mÚ
 + 1,m->
tm_mday
,

996 
tm
->
tm_hour
,m->
tm_mš
,m->
tm_£c
,

997 
f’ame
.
¡r
);

998 
	`av_b´št_fš®ize
(&
f’ame
, 
NULL
);

1000 
	}
}

1002 
	$İt_»pÜt
(cÚ¡ *
İt
)

1004  
	`š™_»pÜt
(
NULL
);

1005 
	}
}

1007 
	$İt_max_®loc
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1009 *

;

1010 
size_t
 
max
;

1012 
max
 = 
	`¡¹Ş
(
¬g
, &

, 10);

1013 ià(*

) {

1014 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Inv®id max_®loø\"%s\".\n", 
¬g
);

1015 
	`ex™_´og¿m
(1);

1017 
	`av_max_®loc
(
max
);

1019 
	}
}

1021 
	$İt_tim–im™
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1023 #ià
HAVE_SETRLIMIT


1024 
lim
 = 
	`·r£_numb”_Ü_d›
(
İt
, 
¬g
, 
OPT_INT64
, 0, 
INT_MAX
);

1025 
¾im™
 
¾
 = { 
lim
,†im + 1 };

1026 ià(
	`£Œlim™
(
RLIMIT_CPU
, &
¾
))

1027 
	`³¼Ü
("setrlimit");

1029 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "-% nÙ im¶em’‹d oÀthi OS\n", 
İt
);

1032 
	}
}

1034 
	$´št_”rÜ
(cÚ¡ *
f’ame
, 
”r
)

1036 
”rbuf
[128];

1037 cÚ¡ *
”rbuf_±r
 = 
”rbuf
;

1039 ià(
	`av_¡»¼Ü
(
”r
, 
”rbuf
, (errbuf)) < 0)

1040 
”rbuf_±r
 = 
	`¡»¼Ü
(
	`AVUNERROR
(
”r
));

1041 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "%s: %s\n", 
f’ame
, 
”rbuf_±r
);

1042 
	}
}

1044 
	gw¬Ãd_cfg
 = 0;

1046 
	#INDENT
 1

	)

1047 
	#SHOW_VERSION
 2

	)

1048 
	#SHOW_CONFIG
 4

	)

1049 
	#SHOW_COPYRIGHT
 8

	)

1051 
	#PRINT_LIB_INFO
(
libÇme
, 
LIBNAME
, 
æags
, 
Ëv–
) \

1052 ià(
CONFIG_
##
LIBNAME
) { \

1053 cÚ¡ *
šd’t
 = 
æags
 & 
INDENT
? " " : ""; \

1054 ià(
æags
 & 
SHOW_VERSION
) { \

1055 
v”siÚ
 = 
libÇme
##
	`_v”siÚ
(); \

1056 
	`av_log
(
NULL
, 
Ëv–
, \

1058 
šd’t
, #libname, \

1059 
LIB
##
LIBNAME
##
_VERSION_MAJOR
, \

1060 
LIB
##
LIBNAME
##
_VERSION_MINOR
, \

1061 
LIB
##
LIBNAME
##
_VERSION_MICRO
, \

1062 
	`AV_VERSION_MAJOR
(
v”siÚ
), 
	`AV_VERSION_MINOR
(version),\

1063 
	`AV_VERSION_MICRO
(
v”siÚ
)); \

1065 ià(
æags
 & 
SHOW_CONFIG
) { \

1066 cÚ¡ *
cfg
 = 
libÇme
##
	`_cÚfigu¿tiÚ
(); \

1067 ià(
	`¡rcmp
(
FFMPEG_CONFIGURATION
, 
cfg
)) { \

1068 ià(!
w¬Ãd_cfg
) { \

1069 
	`av_log
(
NULL
, 
Ëv–
, \

1071 
šd’t
); \

1072 
w¬Ãd_cfg
 = 1; \

1074 
	`av_log
(
NULL
, 
Ëv–
, "%s%-11s configuration: %s\n", \

1075 
šd’t
, #libÇme, 
cfg
); \

1079 

	)

1080 
	$´št_®l_libs_šfo
(
æags
, 
Ëv–
)

1082 
	`PRINT_LIB_INFO
(
avut
, 
AVUTIL
, 
æags
, 
Ëv–
);

1083 
	`PRINT_LIB_INFO
(
avcodec
, 
AVCODEC
, 
æags
, 
Ëv–
);

1084 
	`PRINT_LIB_INFO
(
avfÜm©
, 
AVFORMAT
, 
æags
, 
Ëv–
);

1085 
	`PRINT_LIB_INFO
(
avdeviû
, 
AVDEVICE
, 
æags
, 
Ëv–
);

1086 
	`PRINT_LIB_INFO
(
avf‹r
, 
AVFILTER
, 
æags
, 
Ëv–
);

1087 
	`PRINT_LIB_INFO
(
av»§m¶e
, 
AVRESAMPLE
, 
æags
, 
Ëv–
);

1088 
	`PRINT_LIB_INFO
(
swsÿË
, 
SWSCALE
, 
æags
, 
Ëv–
);

1089 
	`PRINT_LIB_INFO
(
sw»§m¶e
, 
SWRESAMPLE
, 
æags
, 
Ëv–
);

1090 
	`PRINT_LIB_INFO
(
po¡´oc
, 
POSTPROC
, 
æags
, 
Ëv–
);

1091 
	}
}

1093 
	$´št_´og¿m_šfo
(
æags
, 
Ëv–
)

1095 cÚ¡ *
šd’t
 = 
æags
 & 
INDENT
? " " : "";

1097 
	`av_log
(
NULL
, 
Ëv–
, "% v”siÚ " 
FFMPEG_VERSION
, 
´og¿m_Çme
);

1098 ià(
æags
 & 
SHOW_COPYRIGHT
)

1099 
	`av_log
(
NULL
, 
Ëv–
, " Copyright (c) %d-%dhe FFmpeg developers",

1100 
´og¿m_bœth_y—r
, 
CONFIG_THIS_YEAR
);

1101 
	`av_log
(
NULL
, 
Ëv–
, "\n");

1102 
	`av_log
(
NULL
, 
Ëv–
, "%sbuˆw™h %s\n", 
šd’t
, 
CC_IDENT
);

1104 
	`av_log
(
NULL
, 
Ëv–
, "%scÚfigu¿tiÚ: " 
FFMPEG_CONFIGURATION
 "\n", 
šd’t
);

1105 
	}
}

1107 
	$´št_budcÚf
(
æags
, 
Ëv–
)

1109 cÚ¡ *
šd’t
 = 
æags
 & 
INDENT
 ? " " : "";

1110 
¡r
[] = { 
FFMPEG_CONFIGURATION
 };

1111 *
cÚæi¡
, *
»move_tde
, *
¥l™cÚf
;

1115 (
cÚæi¡
 = 
	`¡r¡r
(
¡r
, " --")è!ğ
NULL
) {

1116 
	`¡ºıy
(
cÚæi¡
, "~--", 3);

1121 (
»move_tde
 = 
	`¡r¡r
(
¡r
, "pkg-cÚfig~")è!ğ
NULL
) {

1122 
	`¡ºıy
(
»move_tde
, "pkg-config ", 11);

1125 
¥l™cÚf
 = 
	`¡¹ok
(
¡r
, "~");

1126 
	`av_log
(
NULL
, 
Ëv–
, "\n%scÚfigu¿tiÚ:\n", 
šd’t
);

1127 
¥l™cÚf
 !ğ
NULL
) {

1128 
	`av_log
(
NULL
, 
Ëv–
, "%s%s%s\n", 
šd’t
, ind’t, 
¥l™cÚf
);

1129 
¥l™cÚf
 = 
	`¡¹ok
(
NULL
, "~");

1131 
	}
}

1133 
	$show_bªÃr
(
¬gc
, **
¬gv
, cÚ¡ 
O±iÚDef
 *
İtiÚs
)

1135 
idx
 = 
	`loÿ‹_İtiÚ
(
¬gc
, 
¬gv
, 
İtiÚs
, "version");

1136 ià(
hide_bªÃr
 || 
idx
)

1139 
	`´št_´og¿m_šfo
 (
INDENT
|
SHOW_COPYRIGHT
, 
AV_LOG_INFO
);

1140 
	`´št_®l_libs_šfo
(
INDENT
|
SHOW_CONFIG
, 
AV_LOG_INFO
);

1141 
	`´št_®l_libs_šfo
(
INDENT
|
SHOW_VERSION
, 
AV_LOG_INFO
);

1142 
	}
}

1144 
	$show_v”siÚ
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1146 
	`av_log_£t_ÿÎback
(
log_ÿÎback_h–p
);

1147 
	`´št_´og¿m_šfo
 (
SHOW_COPYRIGHT
, 
AV_LOG_INFO
);

1148 
	`´št_®l_libs_šfo
(
SHOW_VERSION
, 
AV_LOG_INFO
);

1151 
	}
}

1153 
	$show_budcÚf
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1155 
	`av_log_£t_ÿÎback
(
log_ÿÎback_h–p
);

1156 
	`´št_budcÚf
 (
INDENT
|0, 
AV_LOG_INFO
);

1159 
	}
}

1161 
	$show_liûn£
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1163 #ià
CONFIG_NONFREE


1164 
	`´štf
(

1167 
´og¿m_Çme
 );

1168 #–ià
CONFIG_GPLV3


1169 
	`´štf
(

1182 
´og¿m_Çme
,…rogram_name,…rogram_name );

1183 #–ià
CONFIG_GPL


1184 
	`´štf
(

1198 
´og¿m_Çme
,…rogram_name,…rogram_name );

1199 #–ià
CONFIG_LGPLV3


1200 
	`´štf
(

1213 
´og¿m_Çme
,…rogram_name,…rogram_name );

1215 
	`´štf
(

1229 
´og¿m_Çme
,…rogram_name,…rogram_name );

1233 
	}
}

1235 
	$is_deviû
(cÚ¡ 
AVCÏss
 *
avşass
)

1237 ià(!
avşass
)

1239  
	`AV_IS_INPUT_DEVICE
(
avşass
->
ÿ‹gÜy
è|| 
	`AV_IS_OUTPUT_DEVICE
(avclass->category);

1240 
	}
}

1242 
	$show_fÜm©s_deviûs
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
, 
deviû_Úly
)

1244 
AVIÅutFÜm©
 *
ifmt
 = 
NULL
;

1245 
AVOuutFÜm©
 *
ofmt
 = 
NULL
;

1246 cÚ¡ *
Ï¡_Çme
;

1247 
is_dev
;

1249 
	`´štf
("%s\n"

1252 " --\n", 
deviû_Úly
 ? "Devices:" : "File formats:");

1253 
Ï¡_Çme
 = "000";

1255 
decode
 = 0;

1256 
’code
 = 0;

1257 cÚ¡ *
Çme
 = 
NULL
;

1258 cÚ¡ *
lÚg_Çme
 = 
NULL
;

1260 (
ofmt
 = 
	`av_ofÜm©_Ãxt
(ofmt))) {

1261 
is_dev
 = 
	`is_deviû
(
ofmt
->
´iv_şass
);

1262 ià(!
is_dev
 && 
deviû_Úly
)

1264 ià((!
Çme
 || 
	`¡rcmp
(
ofmt
->name,‚ame) < 0) &&

1265 
	`¡rcmp
(
ofmt
->
Çme
, 
Ï¡_Çme
) > 0) {

1266 
Çme
 = 
ofmt
->name;

1267 
lÚg_Çme
 = 
ofmt
->long_name;

1268 
’code
 = 1;

1271 (
ifmt
 = 
	`av_ifÜm©_Ãxt
(ifmt))) {

1272 
is_dev
 = 
	`is_deviû
(
ifmt
->
´iv_şass
);

1273 ià(!
is_dev
 && 
deviû_Úly
)

1275 ià((!
Çme
 || 
	`¡rcmp
(
ifmt
->name,‚ame) < 0) &&

1276 
	`¡rcmp
(
ifmt
->
Çme
, 
Ï¡_Çme
) > 0) {

1277 
Çme
 = 
ifmt
->name;

1278 
lÚg_Çme
 = 
ifmt
->long_name;

1279 
’code
 = 0;

1281 ià(
Çme
 && 
	`¡rcmp
(
ifmt
->name,‚ame) == 0)

1282 
decode
 = 1;

1284 ià(!
Çme
)

1286 
Ï¡_Çme
 = 
Çme
;

1288 
	`´štf
(" %s%s %-15s %s\n",

1289 
decode
 ? "D" : " ",

1290 
’code
 ? "E" : " ",

1291 
Çme
,

1292 
lÚg_Çme
 ?†ong_name:" ");

1295 
	}
}

1297 
	$show_fÜm©s
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1299  
	`show_fÜm©s_deviûs
(
İtùx
, 
İt
, 
¬g
, 0);

1300 
	}
}

1302 
	$show_deviûs
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1304  
	`show_fÜm©s_deviûs
(
İtùx
, 
İt
, 
¬g
, 1);

1305 
	}
}

1307 
	#PRINT_CODEC_SUPPORTED
(
codec
, 
f›ld
, 
ty³
, 
li¡_Çme
, 
‹rm
, 
g‘_Çme
) \

1308 ià(
codec
->
f›ld
) { \

1309 cÚ¡ 
ty³
 *
p
 = 
codec
->
f›ld
; \

1311 
	`´štf
(" SuµÜ‹d " 
li¡_Çme
 ":"); \

1312 *
p
 !ğ
‹rm
) { \

1313 
	`g‘_Çme
(*
p
); \

1314 
	`´štf
(" %s", 
Çme
); \

1315 
p
++; \

1317 
	`´štf
("\n"); \

1319 

	)

1320 
	$´št_codec
(cÚ¡ 
AVCodec
 *
c
)

1322 
’cod”
 = 
	`av_codec_is_’cod”
(
c
);

1324 
	`´štf
("% % [%s]:\n", 
’cod”
 ? "Encod”" : "Decod”", 
c
->
Çme
,

1325 
c
->
lÚg_Çme
 ? c->long_name : "");

1327 
	`´štf
(" General capabilities: ");

1328 ià(
c
->
ÿ·b™›s
 & 
AV_CODEC_CAP_DRAW_HORIZ_BAND
)

1329 
	`´štf
("horizband ");

1330 ià(
c
->
ÿ·b™›s
 & 
AV_CODEC_CAP_DR1
)

1331 
	`´štf
("dr1 ");

1332 ià(
c
->
ÿ·b™›s
 & 
AV_CODEC_CAP_TRUNCATED
)

1333 
	`´štf
("trunc ");

1334 ià(
c
->
ÿ·b™›s
 & 
AV_CODEC_CAP_DELAY
)

1335 
	`´štf
("delay ");

1336 ià(
c
->
ÿ·b™›s
 & 
AV_CODEC_CAP_SMALL_LAST_FRAME
)

1337 
	`´štf
("small ");

1338 ià(
c
->
ÿ·b™›s
 & 
AV_CODEC_CAP_SUBFRAMES
)

1339 
	`´štf
("subframes ");

1340 ià(
c
->
ÿ·b™›s
 & 
AV_CODEC_CAP_EXPERIMENTAL
)

1341 
	`´štf
("exp ");

1342 ià(
c
->
ÿ·b™›s
 & 
AV_CODEC_CAP_CHANNEL_CONF
)

1343 
	`´štf
("chconf ");

1344 ià(
c
->
ÿ·b™›s
 & 
AV_CODEC_CAP_PARAM_CHANGE
)

1345 
	`´štf
("paramchange ");

1346 ià(
c
->
ÿ·b™›s
 & 
AV_CODEC_CAP_VARIABLE_FRAME_SIZE
)

1347 
	`´štf
("variable ");

1348 ià(
c
->
ÿ·b™›s
 & (
AV_CODEC_CAP_FRAME_THREADS
 |

1349 
AV_CODEC_CAP_SLICE_THREADS
 |

1350 
AV_CODEC_CAP_AUTO_THREADS
))

1351 
	`´štf
("threads ");

1352 ià(!
c
->
ÿ·b™›s
)

1353 
	`´štf
("none");

1354 
	`´štf
("\n");

1356 ià(
c
->
ty³
 =ğ
AVMEDIA_TYPE_VIDEO
 ||

1357 
c
->
ty³
 =ğ
AVMEDIA_TYPE_AUDIO
) {

1358 
	`´štf
(" Threading capabilities: ");

1359 
c
->
ÿ·b™›s
 & (
AV_CODEC_CAP_FRAME_THREADS
 |

1360 
AV_CODEC_CAP_SLICE_THREADS
 |

1361 
AV_CODEC_CAP_AUTO_THREADS
)) {

1362 
AV_CODEC_CAP_FRAME_THREADS
 |

1363 
AV_CODEC_CAP_SLICE_THREADS
: 
	`´štf
("frame‡nd slice"); ;

1364 
AV_CODEC_CAP_FRAME_THREADS
: 
	`´štf
("frame"); ;

1365 
AV_CODEC_CAP_SLICE_THREADS
: 
	`´štf
("slice"); ;

1366 
AV_CODEC_CAP_AUTO_THREADS
 : 
	`´štf
("auto"); ;

1367 : 
	`´štf
("none"); ;

1369 
	`´štf
("\n");

1372 ià(
c
->
suµÜ‹d_äam”©es
) {

1373 cÚ¡ 
AVR©iÚ®
 *
ås
 = 
c
->
suµÜ‹d_äam”©es
;

1375 
	`´štf
(" Supported framerates:");

1376 
ås
->
num
) {

1377 
	`´štf
(" %d/%d", 
ås
->
num
, fps->
d’
);

1378 
ås
++;

1380 
	`´štf
("\n");

1382 
	`PRINT_CODEC_SUPPORTED
(
c
, 
pix_fmts
, 
AVPix–FÜm©
, "pixel formats",

1383 
AV_PIX_FMT_NONE
, 
GET_PIX_FMT_NAME
);

1384 
	`PRINT_CODEC_SUPPORTED
(
c
, 
suµÜ‹d_§m¶”©es
, , "sample„ates", 0,

1385 
GET_SAMPLE_RATE_NAME
);

1386 
	`PRINT_CODEC_SUPPORTED
(
c
, 
§m¶e_fmts
, 
AVSam¶eFÜm©
, "sample formats",

1387 
AV_SAMPLE_FMT_NONE
, 
GET_SAMPLE_FMT_NAME
);

1388 
	`PRINT_CODEC_SUPPORTED
(
c
, 
chªÃl_Ïyouts
, 
ušt64_t
, "channel†ayouts",

1389 0, 
GET_CH_LAYOUT_DESC
);

1391 ià(
c
->
´iv_şass
) {

1392 
	`show_h–p_chd»n
(
c
->
´iv_şass
,

1393 
AV_OPT_FLAG_ENCODING_PARAM
 |

1394 
AV_OPT_FLAG_DECODING_PARAM
);

1396 
	}
}

1398 
	$g‘_medŸ_ty³_ch¬
(
AVMedŸTy³
 
ty³
)

1400 
ty³
) {

1401 
AVMEDIA_TYPE_VIDEO
:  'V';

1402 
AVMEDIA_TYPE_AUDIO
:  'A';

1403 
AVMEDIA_TYPE_DATA
:  'D';

1404 
AVMEDIA_TYPE_SUBTITLE
:  'S';

1405 
AVMEDIA_TYPE_ATTACHMENT
: 'T';

1408 
	}
}

1410 cÚ¡ 
AVCodec
 *
	$Ãxt_codec_fÜ_id
(
AVCodecID
 
id
, cÚ¡ 
AVCodec
 *
´ev
,

1411 
’cod”
)

1413 (
´ev
 = 
	`av_codec_Ãxt
(prev))) {

1414 ià(
´ev
->
id
 == id &&

1415 (
’cod”
 ? 
	`av_codec_is_’cod”
(
´ev
è: 
	`av_codec_is_decod”
(prev)))

1416  
´ev
;

1418  
NULL
;

1419 
	}
}

1421 
	$com·»_codec_desc
(cÚ¡ *
a
, cÚ¡ *
b
)

1423 cÚ¡ 
AVCodecDesütÜ
 * cÚ¡ *
da
 = 
a
;

1424 cÚ¡ 
AVCodecDesütÜ
 * cÚ¡ *
db
 = 
b
;

1426  (*
da
)->
ty³
 !ğ(*
db
)->ty³ ? 
	`FFDIFFSIGN
((*da)->type, (*db)->type) :

1427 
	`¡rcmp
((*
da
)->
Çme
, (*
db
)->name);

1428 
	}
}

1430 
	$g‘_codecs_sÜ‹d
(cÚ¡ 
AVCodecDesütÜ
 ***
rcodecs
)

1432 cÚ¡ 
AVCodecDesütÜ
 *
desc
 = 
NULL
;

1433 cÚ¡ 
AVCodecDesütÜ
 **
codecs
;

1434 
nb_codecs
 = 0, 
i
 = 0;

1436 (
desc
 = 
	`avcodec_desütÜ_Ãxt
(desc)))

1437 
nb_codecs
++;

1438 ià(!(
codecs
 = 
	`av_ÿÎoc
(
nb_codecs
, (*codecs)))) {

1439 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Out of memory\n");

1440 
	`ex™_´og¿m
(1);

1442 
desc
 = 
NULL
;

1443 (
desc
 = 
	`avcodec_desütÜ_Ãxt
(desc)))

1444 
codecs
[
i
++] = 
desc
;

1445 
	`av_as£¹0
(
i
 =ğ
nb_codecs
);

1446 
	`qsÜt
(
codecs
, 
nb_codecs
, (*codecs), 
com·»_codec_desc
);

1447 *
rcodecs
 = 
codecs
;

1448  
nb_codecs
;

1449 
	}
}

1451 
	$´št_codecs_fÜ_id
(
AVCodecID
 
id
, 
’cod”
)

1453 cÚ¡ 
AVCodec
 *
codec
 = 
NULL
;

1455 
	`´štf
(" (%s: ", 
’cod”
 ? "encoders" : "decoders");

1457 (
codec
 = 
	`Ãxt_codec_fÜ_id
(
id
, codec, 
’cod”
)))

1458 
	`´štf
("% ", 
codec
->
Çme
);

1460 
	`´štf
(")");

1461 
	}
}

1463 
	$show_codecs
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1465 cÚ¡ 
AVCodecDesütÜ
 **
codecs
;

1466 
i
, 
nb_codecs
 = 
	`g‘_codecs_sÜ‹d
(&
codecs
);

1468 
	`´štf
("Codecs:\n"

1478 
i
 = 0; i < 
nb_codecs
; i++) {

1479 cÚ¡ 
AVCodecDesütÜ
 *
desc
 = 
codecs
[
i
];

1480 cÚ¡ 
AVCodec
 *
codec
 = 
NULL
;

1482 ià(
	`¡r¡r
(
desc
->
Çme
, "_deprecated"))

1485 
	`´štf
(" ");

1486 
	`´štf
(
	`avcodec_fšd_decod”
(
desc
->
id
) ? "D" : ".");

1487 
	`´štf
(
	`avcodec_fšd_’cod”
(
desc
->
id
) ? "E" : ".");

1489 
	`´štf
("%c", 
	`g‘_medŸ_ty³_ch¬
(
desc
->
ty³
));

1490 
	`´štf
((
desc
->
´İs
 & 
AV_CODEC_PROP_INTRA_ONLY
) ? "I" : ".");

1491 
	`´štf
((
desc
->
´İs
 & 
AV_CODEC_PROP_LOSSY
) ? "L" : ".");

1492 
	`´štf
((
desc
->
´İs
 & 
AV_CODEC_PROP_LOSSLESS
) ? "S" : ".");

1494 
	`´štf
(" %-20 %s", 
desc
->
Çme
, desc->
lÚg_Çme
 ? desc->long_name : "");

1498 (
codec
 = 
	`Ãxt_codec_fÜ_id
(
desc
->
id
, codec, 0))) {

1499 ià(
	`¡rcmp
(
codec
->
Çme
, 
desc
->name)) {

1500 
	`´št_codecs_fÜ_id
(
desc
->
id
, 0);

1504 
codec
 = 
NULL
;

1505 (
codec
 = 
	`Ãxt_codec_fÜ_id
(
desc
->
id
, codec, 1))) {

1506 ià(
	`¡rcmp
(
codec
->
Çme
, 
desc
->name)) {

1507 
	`´št_codecs_fÜ_id
(
desc
->
id
, 1);

1512 
	`´štf
("\n");

1514 
	`av_ä“
(
codecs
);

1516 
	}
}

1518 
	$´št_codecs
(
’cod”
)

1520 cÚ¡ 
AVCodecDesütÜ
 **
codecs
;

1521 
i
, 
nb_codecs
 = 
	`g‘_codecs_sÜ‹d
(&
codecs
);

1523 
	`´štf
("%s:\n"

1533 
’cod”
 ? "Encoders" : "Decoders");

1534 
i
 = 0; i < 
nb_codecs
; i++) {

1535 cÚ¡ 
AVCodecDesütÜ
 *
desc
 = 
codecs
[
i
];

1536 cÚ¡ 
AVCodec
 *
codec
 = 
NULL
;

1538 (
codec
 = 
	`Ãxt_codec_fÜ_id
(
desc
->
id
, codec, 
’cod”
))) {

1539 
	`´štf
(" %c", 
	`g‘_medŸ_ty³_ch¬
(
desc
->
ty³
));

1540 
	`´štf
((
codec
->
ÿ·b™›s
 & 
AV_CODEC_CAP_FRAME_THREADS
) ? "F" : ".");

1541 
	`´štf
((
codec
->
ÿ·b™›s
 & 
AV_CODEC_CAP_SLICE_THREADS
) ? "S" : ".");

1542 
	`´štf
((
codec
->
ÿ·b™›s
 & 
AV_CODEC_CAP_EXPERIMENTAL
) ? "X" : ".");

1543 
	`´štf
((
codec
->
ÿ·b™›s
 & 
AV_CODEC_CAP_DRAW_HORIZ_BAND
)?"B" : ".");

1544 
	`´štf
((
codec
->
ÿ·b™›s
 & 
AV_CODEC_CAP_DR1
) ? "D" : ".");

1546 
	`´štf
(" %-20 %s", 
codec
->
Çme
, codec->
lÚg_Çme
 ? codec->long_name : "");

1547 ià(
	`¡rcmp
(
codec
->
Çme
, 
desc
->name))

1548 
	`´štf
(" (codeø%s)", 
desc
->
Çme
);

1550 
	`´štf
("\n");

1553 
	`av_ä“
(
codecs
);

1554 
	}
}

1556 
	$show_decod”s
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1558 
	`´št_codecs
(0);

1560 
	}
}

1562 
	$show_’cod”s
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1564 
	`´št_codecs
(1);

1566 
	}
}

1568 
	$show_bsfs
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1570 
AVB™SŒ—mF‹r
 *
bsf
 = 
NULL
;

1572 
	`´štf
("Bitstream filters:\n");

1573 (
bsf
 = 
	`av_b™¡»am_f‹r_Ãxt
(bsf)))

1574 
	`´štf
("%s\n", 
bsf
->
Çme
);

1575 
	`´štf
("\n");

1577 
	}
}

1579 
	$show_´ÙocŞs
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1581 *
İaque
 = 
NULL
;

1582 cÚ¡ *
Çme
;

1584 
	`´štf
("Supported file…rotocols:\n"

1586 (
Çme
 = 
	`avio_’um_´ÙocŞs
(&
İaque
, 0)))

1587 
	`´štf
(" %s\n", 
Çme
);

1588 
	`´štf
("Output:\n");

1589 (
Çme
 = 
	`avio_’um_´ÙocŞs
(&
İaque
, 1)))

1590 
	`´štf
(" %s\n", 
Çme
);

1592 
	}
}

1594 
	$show_f‹rs
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1596 #ià
CONFIG_AVFILTER


1597 cÚ¡ 
AVF‹r
 *
f‹r
 = 
NULL
;

1598 
desü
[64], *
desü_cur
;

1599 
i
, 
j
;

1600 cÚ¡ 
AVF‹rPad
 *
·d
;

1602 
	`´štf
("Filters:\n"

1610 (
f‹r
 = 
	`avf‹r_Ãxt
(filter))) {

1611 
desü_cur
 = 
desü
;

1612 
i
 = 0; i < 2; i++) {

1613 ià(
i
) {

1614 *(
desü_cur
++) = '-';

1615 *(
desü_cur
++) = '>';

1617 
·d
 = 
i
 ? 
f‹r
->
ouuts
 : f‹r->
šputs
;

1618 
j
 = 0; 
·d
 && 
	`avf‹r_·d_g‘_Çme
(pad, j); j++) {

1619 ià(
desü_cur
 >ğ
desü
 + (descr) - 4)

1621 *(
desü_cur
++èğ
	`g‘_medŸ_ty³_ch¬
(
	`avf‹r_·d_g‘_ty³
(
·d
, 
j
));

1623 ià(!
j
)

1624 *(
desü_cur
++èğ((!
i
 && (
f‹r
->
æags
 & 
AVFILTER_FLAG_DYNAMIC_INPUTS
)) ||

1625 Ğ
i
 && (
f‹r
->
æags
 & 
AVFILTER_FLAG_DYNAMIC_OUTPUTS
))) ? 'N' : '|';

1627 *
desü_cur
 = 0;

1628 
	`´štf
(" %c%c%c %-17s %-10s %s\n",

1629 
f‹r
->
æags
 & 
AVFILTER_FLAG_SUPPORT_TIMELINE
 ? 'T' : '.',

1630 
f‹r
->
æags
 & 
AVFILTER_FLAG_SLICE_THREADS
 ? 'S' : '.',

1631 
f‹r
->
´oûss_commªd
 ? 'C' : '.',

1632 
f‹r
->
Çme
, 
desü
, f‹r->
desütiÚ
);

1635 
	`´štf
("No filters‡vailable:†ibavfilter disabled\n");

1638 
	}
}

1640 
	$show_cŞÜs
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1642 cÚ¡ *
Çme
;

1643 cÚ¡ 
ušt8_t
 *
rgb
;

1644 
i
;

1646 
	`´štf
("%-32s #RRGGBB\n", "name");

1648 
i
 = 0; 
Çme
 = 
	`av_g‘_known_cŞÜ_Çme
(i, &
rgb
); i++)

1649 
	`´štf
("%-32 #%02x%02x%02x\n", 
Çme
, 
rgb
[0],„gb[1],„gb[2]);

1652 
	}
}

1654 
	$show_pix_fmts
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1656 cÚ¡ 
AVPixFmtDesütÜ
 *
pix_desc
 = 
NULL
;

1658 
	`´štf
("Pixel formats:\n"

1667 #ià!
CONFIG_SWSCALE


1668 
	#sws_isSuµÜ‹dIÅut
(
x
è0

	)

1669 
	#sws_isSuµÜ‹dOuut
(
x
è0

	)

1672 (
pix_desc
 = 
	`av_pix_fmt_desc_Ãxt
(pix_desc))) {

1673 
AVPix–FÜm©
 
pix_fmt
 = 
	`av_pix_fmt_desc_g‘_id
(
pix_desc
);

1674 
	`´štf
("%c%c%c%c%c %-16s %d %2d\n",

1675 
	`sws_isSuµÜ‹dIÅut
 (
pix_fmt
) ? 'I' : '.',

1676 
	`sws_isSuµÜ‹dOuut
(
pix_fmt
) ? 'O' : '.',

1677 
pix_desc
->
æags
 & 
AV_PIX_FMT_FLAG_HWACCEL
 ? 'H' : '.',

1678 
pix_desc
->
æags
 & 
AV_PIX_FMT_FLAG_PAL
 ? 'P' : '.',

1679 
pix_desc
->
æags
 & 
AV_PIX_FMT_FLAG_BITSTREAM
 ? 'B' : '.',

1680 
pix_desc
->
Çme
,

1681 
pix_desc
->
nb_compÚ’ts
,

1682 
	`av_g‘_b™s_³r_pix–
(
pix_desc
));

1685 
	}
}

1687 
	$show_Ïyouts
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1689 
i
 = 0;

1690 
ušt64_t
 
Ïyout
, 
j
;

1691 cÚ¡ *
Çme
, *
desü
;

1693 
	`´štf
("Individual channels:\n"

1695 
i
 = 0; i < 63; i++) {

1696 
Çme
 = 
	`av_g‘_chªÃl_Çme
((
ušt64_t
)1 << 
i
);

1697 ià(!
Çme
)

1699 
desü
 = 
	`av_g‘_chªÃl_desütiÚ
((
ušt64_t
)1 << 
i
);

1700 
	`´štf
("%-14 %s\n", 
Çme
, 
desü
);

1702 
	`´štf
("\nStandard channel†ayouts:\n"

1704 
i
 = 0; !
	`av_g‘_¡ªd¬d_chªÃl_Ïyout
(i, &
Ïyout
, &
Çme
); i++) {

1705 ià(
Çme
) {

1706 
	`´štf
("%-14 ", 
Çme
);

1707 
j
 = 1; j; j <<= 1)

1708 ià((
Ïyout
 & 
j
))

1709 
	`´štf
("%s%s", (
Ïyout
 & (
j
 - 1)è? "+" : "", 
	`av_g‘_chªÃl_Çme
(j));

1710 
	`´štf
("\n");

1714 
	}
}

1716 
	$show_§m¶e_fmts
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1718 
i
;

1719 
fmt_¡r
[128];

1720 
i
 = -1; i < 
AV_SAMPLE_FMT_NB
; i++)

1721 
	`´štf
("%s\n", 
	`av_g‘_§m¶e_fmt_¡ršg
(
fmt_¡r
, (fmt_¡r), 
i
));

1723 
	}
}

1725 
	$show_h–p_codec
(cÚ¡ *
Çme
, 
’cod”
)

1727 cÚ¡ 
AVCodecDesütÜ
 *
desc
;

1728 cÚ¡ 
AVCodec
 *
codec
;

1730 ià(!
Çme
) {

1731 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "No codec‚ame specified.\n");

1735 
codec
 = 
’cod”
 ? 
	`avcodec_fšd_’cod”_by_Çme
(
Çme
) :

1736 
	`avcodec_fšd_decod”_by_Çme
(
Çme
);

1738 ià(
codec
)

1739 
	`´št_codec
(
codec
);

1740 ià((
desc
 = 
	`avcodec_desütÜ_g‘_by_Çme
(
Çme
))) {

1741 
´š‹d
 = 0;

1743 (
codec
 = 
	`Ãxt_codec_fÜ_id
(
desc
->
id
, codec, 
’cod”
))) {

1744 
´š‹d
 = 1;

1745 
	`´št_codec
(
codec
);

1748 ià(!
´š‹d
) {

1749 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Codec '%s' is knowno FFmpeg, "

1752 
Çme
, 
’cod”
 ? "encoders" : "decoders");

1755 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Codec '%s' is‚ot„ecognized by FFmpeg.\n",

1756 
Çme
);

1758 
	}
}

1760 
	$show_h–p_demux”
(cÚ¡ *
Çme
)

1762 cÚ¡ 
AVIÅutFÜm©
 *
fmt
 = 
	`av_fšd_šput_fÜm©
(
Çme
);

1764 ià(!
fmt
) {

1765 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "UnknowÀfÜm© '%s'.\n", 
Çme
);

1769 
	`´štf
("Demux” % [%s]:\n", 
fmt
->
Çme
, fmt->
lÚg_Çme
);

1771 ià(
fmt
->
ex‹nsiÚs
)

1772 
	`´štf
(" CommÚƒx‹nsiÚs: %s.\n", 
fmt
->
ex‹nsiÚs
);

1774 ià(
fmt
->
´iv_şass
)

1775 
	`show_h–p_chd»n
(
fmt
->
´iv_şass
, 
AV_OPT_FLAG_DECODING_PARAM
);

1776 
	}
}

1778 
	$show_h–p_mux”
(cÚ¡ *
Çme
)

1780 cÚ¡ 
AVCodecDesütÜ
 *
desc
;

1781 cÚ¡ 
AVOuutFÜm©
 *
fmt
 = 
	`av_guess_fÜm©
(
Çme
, 
NULL
, NULL);

1783 ià(!
fmt
) {

1784 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "UnknowÀfÜm© '%s'.\n", 
Çme
);

1788 
	`´štf
("Mux” % [%s]:\n", 
fmt
->
Çme
, fmt->
lÚg_Çme
);

1790 ià(
fmt
->
ex‹nsiÚs
)

1791 
	`´štf
(" CommÚƒx‹nsiÚs: %s.\n", 
fmt
->
ex‹nsiÚs
);

1792 ià(
fmt
->
mime_ty³
)

1793 
	`´štf
(" Mimty³: %s.\n", 
fmt
->
mime_ty³
);

1794 ià(
fmt
->
video_codec
 !ğ
AV_CODEC_ID_NONE
 &&

1795 (
desc
 = 
	`avcodec_desütÜ_g‘
(
fmt
->
video_codec
))) {

1796 
	`´štf
(" DeçuÉ videØcodec: %s.\n", 
desc
->
Çme
);

1798 ià(
fmt
->
audio_codec
 !ğ
AV_CODEC_ID_NONE
 &&

1799 (
desc
 = 
	`avcodec_desütÜ_g‘
(
fmt
->
audio_codec
))) {

1800 
	`´štf
(" DeçuÉ‡udiØcodec: %s.\n", 
desc
->
Çme
);

1802 ià(
fmt
->
subt™Ë_codec
 !ğ
AV_CODEC_ID_NONE
 &&

1803 (
desc
 = 
	`avcodec_desütÜ_g‘
(
fmt
->
subt™Ë_codec
))) {

1804 
	`´štf
(" DeçuÉ subt™Ë codec: %s.\n", 
desc
->
Çme
);

1807 ià(
fmt
->
´iv_şass
)

1808 
	`show_h–p_chd»n
(
fmt
->
´iv_şass
, 
AV_OPT_FLAG_ENCODING_PARAM
);

1809 
	}
}

1811 #ià
CONFIG_AVFILTER


1812 
	$show_h–p_f‹r
(cÚ¡ *
Çme
)

1814 #ià
CONFIG_AVFILTER


1815 cÚ¡ 
AVF‹r
 *
f
 = 
	`avf‹r_g‘_by_Çme
(
Çme
);

1816 
i
, 
couÁ
;

1818 ià(!
Çme
) {

1819 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "No filter‚ame specified.\n");

1821 } ià(!
f
) {

1822 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "UnknowÀf‹¸'%s'.\n", 
Çme
);

1826 
	`´štf
("F‹¸%s\n", 
f
->
Çme
);

1827 ià(
f
->
desütiÚ
)

1828 
	`´štf
(" %s\n", 
f
->
desütiÚ
);

1830 ià(
f
->
æags
 & 
AVFILTER_FLAG_SLICE_THREADS
)

1831 
	`´štf
(" slicehreading supported\n");

1833 
	`´štf
(" Inputs:\n");

1834 
couÁ
 = 
	`avf‹r_·d_couÁ
(
f
->
šputs
);

1835 
i
 = 0; i < 
couÁ
; i++) {

1836 
	`´štf
(" #%d: % (%s)\n", 
i
, 
	`avf‹r_·d_g‘_Çme
(
f
->
šputs
, i),

1837 
	`medŸ_ty³_¡ršg
(
	`avf‹r_·d_g‘_ty³
(
f
->
šputs
, 
i
)));

1839 ià(
f
->
æags
 & 
AVFILTER_FLAG_DYNAMIC_INPUTS
)

1840 
	`´štf
(" dynamic (depending onhe options)\n");

1841 ià(!
couÁ
)

1842 
	`´štf
("‚one (source filter)\n");

1844 
	`´štf
(" Outputs:\n");

1845 
couÁ
 = 
	`avf‹r_·d_couÁ
(
f
->
ouuts
);

1846 
i
 = 0; i < 
couÁ
; i++) {

1847 
	`´štf
(" #%d: % (%s)\n", 
i
, 
	`avf‹r_·d_g‘_Çme
(
f
->
ouuts
, i),

1848 
	`medŸ_ty³_¡ršg
(
	`avf‹r_·d_g‘_ty³
(
f
->
ouuts
, 
i
)));

1850 ià(
f
->
æags
 & 
AVFILTER_FLAG_DYNAMIC_OUTPUTS
)

1851 
	`´štf
(" dynamic (depending onhe options)\n");

1852 ià(!
couÁ
)

1853 
	`´štf
("‚one (sink filter)\n");

1855 ià(
f
->
´iv_şass
)

1856 
	`show_h–p_chd»n
(
f
->
´iv_şass
, 
AV_OPT_FLAG_VIDEO_PARAM
 | 
AV_OPT_FLAG_FILTERING_PARAM
 |

1857 
AV_OPT_FLAG_AUDIO_PARAM
);

1858 ià(
f
->
æags
 & 
AVFILTER_FLAG_SUPPORT_TIMELINE
)

1859 
	`´štf
("This filter has support forimelinehroughhe 'enable' option.\n");

1861 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Build without†ibavfilter; "

1864 
	}
}

1867 
	$show_h–p
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1869 *
tİic
, *
·r
;

1870 
	`av_log_£t_ÿÎback
(
log_ÿÎback_h–p
);

1872 
tİic
 = 
	`av_¡rdup
(
¬g
 ?‡rg : "");

1873 ià(!
tİic
)

1874  
	`AVERROR
(
ENOMEM
);

1875 
·r
 = 
	`¡rchr
(
tİic
, '=');

1876 ià(
·r
)

1877 *
·r
++ = 0;

1879 ià(!*
tİic
) {

1880 
	`show_h–p_deçuÉ
(
tİic
, 
·r
);

1881 } ià(!
	`¡rcmp
(
tİic
, "decoder")) {

1882 
	`show_h–p_codec
(
·r
, 0);

1883 } ià(!
	`¡rcmp
(
tİic
, "encoder")) {

1884 
	`show_h–p_codec
(
·r
, 1);

1885 } ià(!
	`¡rcmp
(
tİic
, "demuxer")) {

1886 
	`show_h–p_demux”
(
·r
);

1887 } ià(!
	`¡rcmp
(
tİic
, "muxer")) {

1888 
	`show_h–p_mux”
(
·r
);

1889 #ià
CONFIG_AVFILTER


1890 } ià(!
	`¡rcmp
(
tİic
, "filter")) {

1891 
	`show_h–p_f‹r
(
·r
);

1894 
	`show_h–p_deçuÉ
(
tİic
, 
·r
);

1897 
	`av_ä“p
(&
tİic
);

1899 
	}
}

1901 
	$»ad_ye¢o
()

1903 
c
 = 
	`g‘ch¬
();

1904 
ye¢o
 = (
	`av_touµ”
(
c
) == 'Y');

1906 
c
 !ğ'\n' && c !ğ
EOF
)

1907 
c
 = 
	`g‘ch¬
();

1909  
ye¢o
;

1910 
	}
}

1912 
FILE
 *
	$g‘_´e£t_fe
(*
f’ame
, 
size_t
 
f’ame_size
,

1913 cÚ¡ *
´e£t_Çme
, 
is_·th
,

1914 cÚ¡ *
codec_Çme
)

1916 
FILE
 *
f
 = 
NULL
;

1917 
i
;

1918 cÚ¡ *
ba£
[3] = { 
	`g‘’v
("FFMPEG_DATADIR"),

1919 
	`g‘’v
("HOME"),

1920 
FFMPEG_DATADIR
, };

1922 ià(
is_·th
) {

1923 
	`av_¡¾ıy
(
f’ame
, 
´e£t_Çme
, 
f’ame_size
);

1924 
f
 = 
	`fİ’
(
f’ame
, "r");

1926 #ifdeà
_WIN32


1927 
d©adœ
[
MAX_PATH
], *
ls
;

1928 
ba£
[2] = 
NULL
;

1930 ià(
	`G‘ModuËFeNameA
(
	`G‘ModuËHªdËA
(
NULL
), 
d©adœ
, (datadir) - 1))

1932 
ls
 = 
d©adœ
;† < d©adœ + 
	`¡¾’
(datadir);†s++)

1933 ià(*
ls
 == '\\') *ls = '/';

1935 ià(
ls
 = 
	`¡¼chr
(
d©adœ
, '/'))

1937 *
ls
 = 0;

1938 
	`¡ºÿt
(
d©adœ
, "/få»£ts", (d©adœè- 1 - 
	`¡¾’
(datadir));

1939 
ba£
[2] = 
d©adœ
;

1943 
i
 = 0; i < 3 && !
f
; i++) {

1944 ià(!
ba£
[
i
])

1946 
	`¢´štf
(
f’ame
, 
f’ame_size
, "%s%s/%s.få»£t", 
ba£
[
i
],

1947 
i
 !ğ1 ? "" : "/.ffm³g", 
´e£t_Çme
);

1948 
f
 = 
	`fİ’
(
f’ame
, "r");

1949 ià(!
f
 && 
codec_Çme
) {

1950 
	`¢´štf
(
f’ame
, 
f’ame_size
,

1952 
ba£
[
i
], i !ğ1 ? "" : "/.ffm³g", 
codec_Çme
,

1953 
´e£t_Çme
);

1954 
f
 = 
	`fİ’
(
f’ame
, "r");

1959  
f
;

1960 
	}
}

1962 
	$check_¡»am_¥ecif›r
(
AVFÜm©CÚ‹xt
 *
s
, 
AVSŒ—m
 *
¡
, cÚ¡ *
¥ec
)

1964 
»t
 = 
	`avfÜm©_m©ch_¡»am_¥ecif›r
(
s
, 
¡
, 
¥ec
);

1965 ià(
»t
 < 0)

1966 
	`av_log
(
s
, 
AV_LOG_ERROR
, "Inv®id sŒ—m s³cif›r: %s.\n", 
¥ec
);

1967  
»t
;

1968 
	}
}

1970 
AVDiùiÚ¬y
 *
	$f‹r_codec_İts
(
AVDiùiÚ¬y
 *
İts
, 
AVCodecID
 
codec_id
,

1971 
AVFÜm©CÚ‹xt
 *
s
, 
AVSŒ—m
 *
¡
, 
AVCodec
 *
codec
)

1973 
AVDiùiÚ¬y
 *
»t
 = 
NULL
;

1974 
AVDiùiÚ¬yEÁry
 *
t
 = 
NULL
;

1975 
æags
 = 
s
->
ofÜm©
 ? 
AV_OPT_FLAG_ENCODING_PARAM


1976 : 
AV_OPT_FLAG_DECODING_PARAM
;

1977 
´efix
 = 0;

1978 cÚ¡ 
AVCÏss
 *
cc
 = 
	`avcodec_g‘_şass
();

1980 ià(!
codec
)

1981 
codec
 = 
s
->
ofÜm©
 ? 
	`avcodec_fšd_’cod”
(
codec_id
)

1982 : 
	`avcodec_fšd_decod”
(
codec_id
);

1984 
¡
->
codec
->
codec_ty³
) {

1985 
AVMEDIA_TYPE_VIDEO
:

1986 
´efix
 = 'v';

1987 
æags
 |ğ
AV_OPT_FLAG_VIDEO_PARAM
;

1989 
AVMEDIA_TYPE_AUDIO
:

1990 
´efix
 = 'a';

1991 
æags
 |ğ
AV_OPT_FLAG_AUDIO_PARAM
;

1993 
AVMEDIA_TYPE_SUBTITLE
:

1994 
´efix
 = 's';

1995 
æags
 |ğ
AV_OPT_FLAG_SUBTITLE_PARAM
;

1999 
t
 = 
	`av_diù_g‘
(
İts
, "",, 
AV_DICT_IGNORE_SUFFIX
)) {

2000 *
p
 = 
	`¡rchr
(
t
->
key
, ':');

2003 ià(
p
)

2004 
	`check_¡»am_¥ecif›r
(
s
, 
¡
, 
p
 + 1)) {

2005 1: *
p
 = 0; ;

2007 : 
	`ex™_´og¿m
(1);

2010 ià(
	`av_İt_fšd
(&
cc
, 
t
->
key
, 
NULL
, 
æags
, 
AV_OPT_SEARCH_FAKE_OBJ
) ||

2011 !
codec
 ||

2012 (
codec
->
´iv_şass
 &&

2013 
	`av_İt_fšd
(&
codec
->
´iv_şass
, 
t
->
key
, 
NULL
, 
æags
,

2014 
AV_OPT_SEARCH_FAKE_OBJ
)))

2015 
	`av_diù_£t
(&
»t
, 
t
->
key
,->
v®ue
, 0);

2016 ià(
t
->
key
[0] =ğ
´efix
 &&

2017 
	`av_İt_fšd
(&
cc
, 
t
->
key
 + 1, 
NULL
, 
æags
,

2018 
AV_OPT_SEARCH_FAKE_OBJ
))

2019 
	`av_diù_£t
(&
»t
, 
t
->
key
 + 1,->
v®ue
, 0);

2021 ià(
p
)

2022 *
p
 = ':';

2024  
»t
;

2025 
	}
}

2027 
AVDiùiÚ¬y
 **
	$£tup_fšd_¡»am_šfo_İts
(
AVFÜm©CÚ‹xt
 *
s
,

2028 
AVDiùiÚ¬y
 *
codec_İts
)

2030 
i
;

2031 
AVDiùiÚ¬y
 **
İts
;

2033 ià(!
s
->
nb_¡»ams
)

2034  
NULL
;

2035 
İts
 = 
	`av_m®locz_¬¿y
(
s
->
nb_¡»ams
, (*opts));

2036 ià(!
İts
) {

2037 
	`av_log
(
NULL
, 
AV_LOG_ERROR
,

2039  
NULL
;

2041 
i
 = 0; i < 
s
->
nb_¡»ams
; i++)

2042 
İts
[
i
] = 
	`f‹r_codec_İts
(
codec_İts
, 
s
->
¡»ams
[i]->
codec
->
codec_id
,

2043 
s
, s->
¡»ams
[
i
], 
NULL
);

2044  
İts
;

2045 
	}
}

2047 *
	$grow_¬¿y
(*
¬¿y
, 
–em_size
, *
size
, 
Ãw_size
)

2049 ià(
Ãw_size
 >ğ
INT_MAX
 / 
–em_size
) {

2050 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Arrayoo big.\n");

2051 
	`ex™_´og¿m
(1);

2053 ià(*
size
 < 
Ãw_size
) {

2054 
ušt8_t
 *
tmp
 = 
	`av_»®loc_¬¿y
(
¬¿y
, 
Ãw_size
, 
–em_size
);

2055 ià(!
tmp
) {

2056 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Could‚ot‡lloc buffer.\n");

2057 
	`ex™_´og¿m
(1);

2059 
	`mem£t
(
tmp
 + *
size
*
–em_size
, 0, (
Ãw_size
-*size) *ƒlem_size);

2060 *
size
 = 
Ãw_size
;

2061  
tmp
;

2063  
¬¿y
;

2064 
	}
}

2066 
	$g‘_rÙ©iÚ
(
AVSŒ—m
 *
¡
)

2068 
AVDiùiÚ¬yEÁry
 *
rÙ©e_g
 = 
	`av_diù_g‘
(
¡
->
m‘ad©a
, "rÙ©e", 
NULL
, 0);

2069 
ušt8_t
* 
di¥Ïym©rix
 = 
	`av_¡»am_g‘_side_d©a
(
¡
,

2070 
AV_PKT_DATA_DISPLAYMATRIX
, 
NULL
);

2071 
th‘a
 = 0;

2073 ià(
rÙ©e_g
 && *rÙ©e_g->
v®ue
 && 
	`¡rcmp
(rotate_tag->value, "0")) {

2074 *

;

2075 
th‘a
 = 
	`av_¡¹od
(
rÙ©e_g
->
v®ue
, &

);

2076 ià(*

)

2077 
th‘a
 = 0;

2079 ià(
di¥Ïym©rix
 && !
th‘a
)

2080 
th‘a
 = -
	`av_di¥Ïy_rÙ©iÚ_g‘
((
št32_t
*è
di¥Ïym©rix
);

2082 
th‘a
 -ğ360*
	`æoÜ
(theta/360 + 0.9/360);

2084 ià(
	`çbs
(
th‘a
 - 90*
	`round
(theta/90)) > 2)

2085 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "Odd„otation‡ngle.\n"

2090  
th‘a
;

2091 
	}
}

2093 #ià
CONFIG_AVDEVICE


2094 
	$´št_deviû_sourûs
(
AVIÅutFÜm©
 *
fmt
, 
AVDiùiÚ¬y
 *
İts
)

2096 
»t
, 
i
;

2097 
AVDeviûInfoLi¡
 *
deviû_li¡
 = 
NULL
;

2099 ià(!
fmt
 || !fmt->
´iv_şass
 || !
	`AV_IS_INPUT_DEVICE
(fmt->´iv_şass->
ÿ‹gÜy
))

2100  
	`AVERROR
(
EINVAL
);

2102 
	`´štf
("Audo-d‘eùed sourû fÜ %s:\n", 
fmt
->
Çme
);

2103 ià(!
fmt
->
g‘_deviû_li¡
) {

2104 
»t
 = 
	`AVERROR
(
ENOSYS
);

2105 
	`´štf
("Cannot†ist sources. Not implemented.\n");

2106 
ç
;

2109 ià((
»t
 = 
	`avdeviû_li¡_šput_sourûs
(
fmt
, 
NULL
, 
İts
, &
deviû_li¡
)) < 0) {

2110 
	`´štf
("Cannot†ist sources.\n");

2111 
ç
;

2114 
i
 = 0; i < 
deviû_li¡
->
nb_deviûs
; i++) {

2115 
	`´štf
("% % [%s]\n", 
deviû_li¡
->
deçuÉ_deviû
 =ğ
i
 ? "*" : " ",

2116 
deviû_li¡
->
deviûs
[
i
]->
deviû_Çme
, deviû_li¡->deviûs[i]->
deviû_desütiÚ
);

2119 
ç
:

2120 
	`avdeviû_ä“_li¡_deviûs
(&
deviû_li¡
);

2121  
»t
;

2122 
	}
}

2124 
	$´št_deviû_sšks
(
AVOuutFÜm©
 *
fmt
, 
AVDiùiÚ¬y
 *
İts
)

2126 
»t
, 
i
;

2127 
AVDeviûInfoLi¡
 *
deviû_li¡
 = 
NULL
;

2129 ià(!
fmt
 || !fmt->
´iv_şass
 || !
	`AV_IS_OUTPUT_DEVICE
(fmt->´iv_şass->
ÿ‹gÜy
))

2130  
	`AVERROR
(
EINVAL
);

2132 
	`´štf
("Audo-d‘eùed sšk fÜ %s:\n", 
fmt
->
Çme
);

2133 ià(!
fmt
->
g‘_deviû_li¡
) {

2134 
»t
 = 
	`AVERROR
(
ENOSYS
);

2135 
	`´štf
("Cannot†ist sinks. Not implemented.\n");

2136 
ç
;

2139 ià((
»t
 = 
	`avdeviû_li¡_ouut_sšks
(
fmt
, 
NULL
, 
İts
, &
deviû_li¡
)) < 0) {

2140 
	`´štf
("Cannot†ist sinks.\n");

2141 
ç
;

2144 
i
 = 0; i < 
deviû_li¡
->
nb_deviûs
; i++) {

2145 
	`´štf
("% % [%s]\n", 
deviû_li¡
->
deçuÉ_deviû
 =ğ
i
 ? "*" : " ",

2146 
deviû_li¡
->
deviûs
[
i
]->
deviû_Çme
, deviû_li¡->deviûs[i]->
deviû_desütiÚ
);

2149 
ç
:

2150 
	`avdeviû_ä“_li¡_deviûs
(&
deviû_li¡
);

2151  
»t
;

2152 
	}
}

2154 
	$show_sšks_sourûs_·r£_¬g
(cÚ¡ *
¬g
, **
dev
, 
AVDiùiÚ¬y
 **
İts
)

2156 
»t
;

2157 ià(
¬g
) {

2158 *
İts_¡r
 = 
NULL
;

2159 
	`av_as£¹0
(
dev
 && 
İts
);

2160 *
dev
 = 
	`av_¡rdup
(
¬g
);

2161 ià(!*
dev
)

2162  
	`AVERROR
(
ENOMEM
);

2163 ià((
İts_¡r
 = 
	`¡rchr
(*
dev
, ','))) {

2164 *(
İts_¡r
++) = '\0';

2165 ià(
İts_¡r
[0] && ((
»t
 = 
	`av_diù_·r£_¡ršg
(
İts
, opts_str, "=", ":", 0)) < 0)) {

2166 
	`av_ä“p
(
dev
);

2167  
»t
;

2171 
	`´štf
("\nDevice‚ame is‚ot…rovided.\n"

2174 
	}
}

2176 
	$show_sourûs
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2178 
AVIÅutFÜm©
 *
fmt
 = 
NULL
;

2179 *
dev
 = 
NULL
;

2180 
AVDiùiÚ¬y
 *
İts
 = 
NULL
;

2181 
»t
 = 0;

2182 
”rÜ_Ëv–
 = 
	`av_log_g‘_Ëv–
();

2184 
	`av_log_£t_Ëv–
(
AV_LOG_ERROR
);

2186 ià((
»t
 = 
	`show_sšks_sourûs_·r£_¬g
(
¬g
, &
dev
, &
İts
)) < 0)

2187 
ç
;

2190 
fmt
 = 
	`av_šput_audio_deviû_Ãxt
(fmt);

2191 ià(
fmt
) {

2192 ià(!
	`¡rcmp
(
fmt
->
Çme
, "lavfi"))

2194 ià(
dev
 && !
	`av_m©ch_Çme
(dev, 
fmt
->
Çme
))

2196 
	`´št_deviû_sourûs
(
fmt
, 
İts
);

2198 } 
fmt
);

2200 
fmt
 = 
	`av_šput_video_deviû_Ãxt
(fmt);

2201 ià(
fmt
) {

2202 ià(
dev
 && !
	`av_m©ch_Çme
(dev, 
fmt
->
Çme
))

2204 
	`´št_deviû_sourûs
(
fmt
, 
İts
);

2206 } 
fmt
);

2207 
ç
:

2208 
	`av_diù_ä“
(&
İts
);

2209 
	`av_ä“
(
dev
);

2210 
	`av_log_£t_Ëv–
(
”rÜ_Ëv–
);

2211  
»t
;

2212 
	}
}

2214 
	$show_sšks
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2216 
AVOuutFÜm©
 *
fmt
 = 
NULL
;

2217 *
dev
 = 
NULL
;

2218 
AVDiùiÚ¬y
 *
İts
 = 
NULL
;

2219 
»t
 = 0;

2220 
”rÜ_Ëv–
 = 
	`av_log_g‘_Ëv–
();

2222 
	`av_log_£t_Ëv–
(
AV_LOG_ERROR
);

2224 ià((
»t
 = 
	`show_sšks_sourûs_·r£_¬g
(
¬g
, &
dev
, &
İts
)) < 0)

2225 
ç
;

2228 
fmt
 = 
	`av_ouut_audio_deviû_Ãxt
(fmt);

2229 ià(
fmt
) {

2230 ià(
dev
 && !
	`av_m©ch_Çme
(dev, 
fmt
->
Çme
))

2232 
	`´št_deviû_sšks
(
fmt
, 
İts
);

2234 } 
fmt
);

2236 
fmt
 = 
	`av_ouut_video_deviû_Ãxt
(fmt);

2237 ià(
fmt
) {

2238 ià(
dev
 && !
	`av_m©ch_Çme
(dev, 
fmt
->
Çme
))

2240 
	`´št_deviû_sšks
(
fmt
, 
İts
);

2242 } 
fmt
);

2243 
ç
:

2244 
	`av_diù_ä“
(&
İts
);

2245 
	`av_ä“
(
dev
);

2246 
	`av_log_£t_Ëv–
(
”rÜ_Ëv–
);

2247  
»t
;

2248 
	}
}

	@cmdutils.h

22 #iâdeà
CMDUTILS_H


23 
	#CMDUTILS_H


	)

25 
	~<¡dšt.h
>

27 
	~"cÚfig.h
"

28 
	~"libavcodec/avcodec.h
"

29 
	~"libavf‹r/avf‹r.h
"

30 
	~"libavfÜm©/avfÜm©.h
"

31 
	~"libswsÿË/swsÿË.h
"

33 #ifdeà
_WIN32


34 #undeà
maš


40 cÚ¡ 
´og¿m_Çme
[];

45 cÚ¡ 
´og¿m_bœth_y—r
;

47 
AVCodecCÚ‹xt
 *
avcodec_İts
[
AVMEDIA_TYPE_NB
];

48 
AVFÜm©CÚ‹xt
 *
avfÜm©_İts
;

49 
AVDiùiÚ¬y
 *
sws_diù
;

50 
AVDiùiÚ¬y
 *
swr_İts
;

51 
AVDiùiÚ¬y
 *
fÜm©_İts
, *
codec_İts
, *
»§m¶e_İts
;

52 
hide_bªÃr
;

57 
»gi¡”_ex™
((*
cb
)(
»t
));

62 
	$ex™_´og¿m
(
»t
è
av_nÜ‘uº
;

68 
	`š™_İts
();

73 
	`unš™_İts
();

79 
	`log_ÿÎback_h–p
(* 
±r
, 
Ëv–
, cÚ¡ * 
fmt
, 
va_li¡
 
vl
);

84 
	`İt_ıuæags
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

90 
	`İt_deçuÉ
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

95 
	`İt_logËv–
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

97 
	`İt_»pÜt
(cÚ¡ *
İt
);

99 
	`İt_max_®loc
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

101 
	`İt_codec_debug
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

103 #ià
CONFIG_OPENCL


104 
	`İt_İ’ş
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

106 
	`İt_İ’ş_b’ch
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

112 
	`İt_tim–im™
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

127 
	`·r£_numb”_Ü_d›
(cÚ¡ *
cÚ‹xt
, cÚ¡ *
num¡r
, 
ty³
,

128 
mš
, 
max
);

144 
št64_t
 
	`·r£_time_Ü_d›
(cÚ¡ *
cÚ‹xt
, cÚ¡ *
time¡r
,

145 
is_du¿tiÚ
);

147 
	sS³cif›rO±
 {

148 *
¥ecif›r
;

150 
ušt8_t
 *
¡r
;

151 
i
;

152 
št64_t
 
i64
;

153 
f
;

154 
dbl
;

155 } 
u
;

156 } 
	tS³cif›rO±
;

158 
	sO±iÚDef
 {

159 cÚ¡ *
Çme
;

160 
æags
;

161 
	#HAS_ARG
 0x0001

	)

162 
	#OPT_BOOL
 0x0002

	)

163 
	#OPT_EXPERT
 0x0004

	)

164 
	#OPT_STRING
 0x0008

	)

165 
	#OPT_VIDEO
 0x0010

	)

166 
	#OPT_AUDIO
 0x0020

	)

167 
	#OPT_INT
 0x0080

	)

168 
	#OPT_FLOAT
 0x0100

	)

169 
	#OPT_SUBTITLE
 0x0200

	)

170 
	#OPT_INT64
 0x0400

	)

171 
	#OPT_EXIT
 0x0800

	)

172 
	#OPT_DATA
 0x1000

	)

173 
	#OPT_PERFILE
 0x2000

	)

175 
	#OPT_OFFSET
 0x4000

	)

176 
	#OPT_SPEC
 0x8000

	)

179 
	#OPT_TIME
 0x10000

	)

180 
	#OPT_DOUBLE
 0x20000

	)

181 
	#OPT_INPUT
 0x40000

	)

182 
	#OPT_OUTPUT
 0x80000

	)

184 *
d¡_±r
;

185 (*
func_¬g
)(*, const *, const *);

186 
size_t
 
off
;

187 } 
u
;

188 cÚ¡ *
h–p
;

189 cÚ¡ *
¬gÇme
;

190 } 
	tO±iÚDef
;

201 
	`show_h–p_İtiÚs
(cÚ¡ 
O±iÚDef
 *
İtiÚs
, cÚ¡ *
msg
, 
»q_æags
,

202 
»j_æags
, 
®t_æags
);

208 
	`show_h–p_chd»n
(cÚ¡ 
AVCÏss
 *
şass1
, 
æags
);

214 
	`show_h–p_deçuÉ
(cÚ¡ *
İt
, cÚ¡ *
¬g
);

219 
	`show_h–p
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

233 
	`·r£_İtiÚs
(*
İtùx
, 
¬gc
, **
¬gv
, cÚ¡ 
O±iÚDef
 *
İtiÚs
,

234 (* 
·r£_¬g_funùiÚ
)(*
İtùx
, const *));

241 
	`·r£_İtiÚ
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
,

242 cÚ¡ 
O±iÚDef
 *
İtiÚs
);

249 
	sO±iÚ
 {

250 cÚ¡ 
O±iÚDef
 *
İt
;

251 cÚ¡ *
key
;

252 cÚ¡ *
v®
;

253 } 
	tO±iÚ
;

255 
	sO±iÚGroupDef
 {

257 cÚ¡ *
Çme
;

262 cÚ¡ *
£p
;

267 
æags
;

268 } 
	tO±iÚGroupDef
;

270 
	sO±iÚGroup
 {

271 cÚ¡ 
O±iÚGroupDef
 *
group_def
;

272 cÚ¡ *
¬g
;

274 
O±iÚ
 *
İts
;

275 
nb_İts
;

277 
AVDiùiÚ¬y
 *
codec_İts
;

278 
AVDiùiÚ¬y
 *
fÜm©_İts
;

279 
AVDiùiÚ¬y
 *
»§m¶e_İts
;

280 
AVDiùiÚ¬y
 *
sws_diù
;

281 
AVDiùiÚ¬y
 *
swr_İts
;

282 } 
	tO±iÚGroup
;

288 
	sO±iÚGroupLi¡
 {

289 cÚ¡ 
O±iÚGroupDef
 *
group_def
;

291 
O±iÚGroup
 *
groups
;

292 
nb_groups
;

293 } 
	tO±iÚGroupLi¡
;

295 
	sO±iÚP¬£CÚ‹xt
 {

296 
O±iÚGroup
 
glob®_İts
;

298 
O±iÚGroupLi¡
 *
groups
;

299 
nb_groups
;

302 
O±iÚGroup
 
cur_group
;

303 } 
	tO±iÚP¬£CÚ‹xt
;

310 
	`·r£_İtgroup
(*
İtùx
, 
O±iÚGroup
 *
g
);

330 
	`¥l™_commªdlše
(
O±iÚP¬£CÚ‹xt
 *
oùx
, 
¬gc
, *
¬gv
[],

331 cÚ¡ 
O±iÚDef
 *
İtiÚs
,

332 cÚ¡ 
O±iÚGroupDef
 *
groups
, 
nb_groups
);

337 
	`unš™_·r£_cÚ‹xt
(
O±iÚP¬£CÚ‹xt
 *
oùx
);

342 
	`·r£_logËv–
(
¬gc
, **
¬gv
, cÚ¡ 
O±iÚDef
 *
İtiÚs
);

347 
	`loÿ‹_İtiÚ
(
¬gc
, **
¬gv
, cÚ¡ 
O±iÚDef
 *
İtiÚs
,

348 cÚ¡ *
İŠame
);

359 
	`check_¡»am_¥ecif›r
(
AVFÜm©CÚ‹xt
 *
s
, 
AVSŒ—m
 *
¡
, cÚ¡ *
¥ec
);

375 
AVDiùiÚ¬y
 *
	`f‹r_codec_İts
(AVDiùiÚ¬y *
İts
, 
AVCodecID
 
codec_id
,

376 
AVFÜm©CÚ‹xt
 *
s
, 
AVSŒ—m
 *
¡
, 
AVCodec
 *
codec
);

389 
AVDiùiÚ¬y
 **
	`£tup_fšd_¡»am_šfo_İts
(
AVFÜm©CÚ‹xt
 *
s
,

390 
AVDiùiÚ¬y
 *
codec_İts
);

401 
	`´št_”rÜ
(cÚ¡ *
f’ame
, 
”r
);

408 
	`show_bªÃr
(
¬gc
, **
¬gv
, cÚ¡ 
O±iÚDef
 *
İtiÚs
);

416 
	`show_v”siÚ
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

423 
	`show_budcÚf
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

430 
	`show_liûn£
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

437 
	`show_fÜm©s
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

444 
	`show_deviûs
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

446 #ià
CONFIG_AVDEVICE


451 
	`show_sšks
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

457 
	`show_sourûs
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

465 
	`show_codecs
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

471 
	`show_decod”s
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

477 
	`show_’cod”s
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

484 
	`show_f‹rs
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

491 
	`show_bsfs
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

498 
	`show_´ÙocŞs
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

505 
	`show_pix_fmts
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

512 
	`show_Ïyouts
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

518 
	`show_§m¶e_fmts
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

524 
	`show_cŞÜs
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
);

530 
	`»ad_ye¢o
();

550 
FILE
 *
	`g‘_´e£t_fe
(*
f’ame
, 
size_t
 
f’ame_size
,

551 cÚ¡ *
´e£t_Çme
, 
is_·th
, cÚ¡ *
codec_Çme
);

563 *
	`grow_¬¿y
(*
¬¿y
, 
–em_size
, *
size
, 
Ãw_size
);

565 
	#medŸ_ty³_¡ršg
 
av_g‘_medŸ_ty³_¡ršg


	)

567 
	#GROW_ARRAY
(
¬¿y
, 
nb_–ems
)\

568 
¬¿y
 = 
	`grow_¬¿y
×¼ay, (*¬¿y), &
nb_–ems
,‚b_–em + 1)

	)

570 
	#GET_PIX_FMT_NAME
(
pix_fmt
)\

571 cÚ¡ *
Çme
 = 
	`av_g‘_pix_fmt_Çme
(
pix_fmt
);

	)

573 
	#GET_SAMPLE_FMT_NAME
(
§m¶e_fmt
)\

574 cÚ¡ *
Çme
 = 
	`av_g‘_§m¶e_fmt_Çme
(
§m¶e_fmt
)

	)

576 
	#GET_SAMPLE_RATE_NAME
(
¿‹
)\

577 
Çme
[16];\

578 
	`¢´štf
(
Çme
, Òame), "%d", 
¿‹
);

	)

580 
	#GET_CH_LAYOUT_NAME
(
ch_Ïyout
)\

581 
Çme
[16];\

582 
	`¢´štf
(
Çme
, Òame), "0x%"
PRIx64
, 
ch_Ïyout
);

	)

584 
	#GET_CH_LAYOUT_DESC
(
ch_Ïyout
)\

585 
Çme
[128];\

586 
	`av_g‘_chªÃl_Ïyout_¡ršg
(
Çme
, Òame), 0, 
ch_Ïyout
);

	)

588 
	`g‘_rÙ©iÚ
(
AVSŒ—m
 *
¡
);

	@cmdutils_common_opts.h

1 { "L" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_liûn£
}, "show†icense" },

2 { "h" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_h–p
}, "show help", "topic" },

3 { "?" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_h–p
}, "show help", "topic" },

4 { "h–p" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_h–p
}, "show help", "topic" },

5 { "-h–p" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_h–p
}, "show help", "topic" },

6 { "v”siÚ" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_v”siÚ
}, "show version" },

7 { "budcÚf" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_budcÚf
}, "show build configuration" },

8 { "fÜm©s" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_fÜm©s
 }, "show‡vailable formats" },

9 { "deviûs" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_deviûs
 }, "show‡vailable devices" },

10 { "codecs" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_codecs
 }, "show‡vailable codecs" },

11 { "decod”s" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_decod”s
 }, "show‡vailable decoders" },

12 { "’cod”s" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_’cod”s
 }, "show‡vailableƒncoders" },

13 { "bsfs" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_bsfs
 }, "show‡vailable bit stream filters" },

14 { "´ÙocŞs" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_´ÙocŞs
}, "show‡vailable…rotocols" },

15 { "f‹rs" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_f‹rs
 }, "show‡vailable filters" },

16 { "pix_fmts" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_pix_fmts
 }, "show‡vailable…ixel formats" },

17 { "Ïyouts" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_Ïyouts
 }, "show standard channel†ayouts" },

18 { "§m¶e_fmts", 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_§m¶e_fmts
 }, "show‡vailable‡udio sample formats" },

19 { "cŞÜs" , 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
show_cŞÜs
 }, "show‡vailable color‚ames" },

20 { "logËv–" , 
	gHAS_ARG
, {.
	gfunc_¬g
 = 
İt_logËv–
}, "set†ogging†evel", "loglevel" },

21 { "v", 
	gHAS_ARG
, {.
	gfunc_¬g
 = 
İt_logËv–
}, "set†ogging†evel", "loglevel" },

22 { "»pÜt" , 0, {(*)
	gİt_»pÜt
}, "generate‡„eport" },

23 { "max_®loc" , 
	gHAS_ARG
, {.
	gfunc_¬g
 = 
İt_max_®loc
}, "set maximum size of‡ single‡llocated block", "bytes" },

24 { "ıuæags" , 
	gHAS_ARG
 | 
	gOPT_EXPERT
, { .
	gfunc_¬g
 = 
İt_ıuæags
 }, "force specific cpu flags", "flags" },

25 { "hide_bªÃr", 
	gOPT_BOOL
 | 
	gOPT_EXPERT
, {&
	ghide_bªÃr
}, "do‚ot show…rogram banner", "hide_banner" },

26 #ià
CONFIG_OPENCL


27 { "İ’ş_b’ch", 
	gOPT_EXIT
, {.
	gfunc_¬g
 = 
İt_İ’ş_b’ch
}, "run benchmark on‡ll OpenCL devices‡nd show„esults" },

28 { "İ’ş_İtiÚs", 
	gHAS_ARG
, {.
	gfunc_¬g
 = 
İt_İ’ş
}, "set OpenCLƒnvironment options" },

30 #ià
CONFIG_AVDEVICE


31 { "sourûs" , 
	gOPT_EXIT
 | 
	gHAS_ARG
, { .
	gfunc_¬g
 = 
show_sourûs
 },

33 { "sšks" , 
	gOPT_EXIT
 | 
	gHAS_ARG
, { .
	gfunc_¬g
 = 
show_sšks
 },

	@config.h

2 #iâdeà
FFMPEG_CONFIG_H


3 
	#FFMPEG_CONFIG_H


	)

4 
	#FFMPEG_CONFIGURATION
 "--´efix=/mšgw32 --rg‘-os=mšgw32 --¬ch=i686 --di§bË-debug --di§bË-¡©iø--’abË-av»§m¶--’abË-dxva2 --’abË-d3d11v¨--’abË-fÚtcÚfig --’abË-gnu --’abË-g¶ --’abË-libas --’abË-libblu¿y --’abË-libÿÿ --’abË-libûÉ --’abË-libdÿdeø--’abË-libä“ty³ --’abË-libgsm --’abË-libmod¶ug --’abË-libmp3Ïm--’abË-libİ’cÜe_amºb --’abË-libİ’cÜe_amrwb --’abË-libİu --’abË-lib¹m°--’abË-libschrÛdšg” --’abË-lib¥“x --’abË-libtheÜ¨--’abË-libvÜbi --’abË-libx264 --’abË-libx265 --’abË-libxvid --’abË-libvpx --’abË-İ’® --’abË-libwav·ck --’abË-piø--’abË-po¡´oø--’abË-ruÁime-ıud‘eù --’abË-sh¬ed --’abË-¡©iø--’abË-sw»§m¶--’abË-v”siÚ3 --’abË-zlib --di§bË-doc"

	)

5 
	#FFMPEG_LICENSE
 "GPL v”siÚ 3 o¸Ï‹r"

	)

6 
	#CONFIG_THIS_YEAR
 2016

	)

7 
	#FFMPEG_DATADIR
 "/mšgw32/sh¬e/ffm³g"

	)

8 
	#AVCONV_DATADIR
 "/mšgw32/sh¬e/ffm³g"

	)

9 
	#CC_IDENT
 "gcø5.4.0 (Rev1, Buˆby MSYS2…rojeù)"

	)

10 
	#av_»¡riù
 
»¡riù


	)

11 
	#EXTERN_PREFIX
 "_"

	)

12 
	#EXTERN_ASM
 
_


	)

13 
	#BUILDSUF
 ""

	)

14 
	#SLIBSUF
 ".dÎ"

	)

15 
	#HAVE_MMX2
 
HAVE_MMXEXT


	)

16 
	#SWS_MAX_FILTER_SIZE
 256

	)

17 
	#ARCH_AARCH64
 0

	)

18 
	#ARCH_ALPHA
 0

	)

19 
	#ARCH_ARM
 0

	)

20 
	#ARCH_AVR32
 0

	)

21 
	#ARCH_AVR32_AP
 0

	)

22 
	#ARCH_AVR32_UC
 0

	)

23 
	#ARCH_BFIN
 0

	)

24 
	#ARCH_IA64
 0

	)

25 
	#ARCH_M68K
 0

	)

26 
	#ARCH_MIPS
 0

	)

27 
	#ARCH_MIPS64
 0

	)

28 
	#ARCH_PARISC
 0

	)

29 
	#ARCH_PPC
 0

	)

30 
	#ARCH_PPC64
 0

	)

31 
	#ARCH_S390
 0

	)

32 
	#ARCH_SH4
 0

	)

33 
	#ARCH_SPARC
 0

	)

34 
	#ARCH_SPARC64
 0

	)

35 
	#ARCH_TILEGX
 0

	)

36 
	#ARCH_TILEPRO
 0

	)

37 
	#ARCH_TOMI
 0

	)

38 
	#ARCH_X86
 1

	)

39 
	#ARCH_X86_32
 1

	)

40 
	#ARCH_X86_64
 0

	)

41 
	#HAVE_ARMV5TE
 0

	)

42 
	#HAVE_ARMV6
 0

	)

43 
	#HAVE_ARMV6T2
 0

	)

44 
	#HAVE_ARMV8
 0

	)

45 
	#HAVE_NEON
 0

	)

46 
	#HAVE_VFP
 0

	)

47 
	#HAVE_VFPV3
 0

	)

48 
	#HAVE_SETEND
 0

	)

49 
	#HAVE_ALTIVEC
 0

	)

50 
	#HAVE_DCBZL
 0

	)

51 
	#HAVE_LDBRX
 0

	)

52 
	#HAVE_POWER8
 0

	)

53 
	#HAVE_PPC4XX
 0

	)

54 
	#HAVE_VSX
 0

	)

55 
	#HAVE_AESNI
 1

	)

56 
	#HAVE_AMD3DNOW
 1

	)

57 
	#HAVE_AMD3DNOWEXT
 1

	)

58 
	#HAVE_AVX
 1

	)

59 
	#HAVE_AVX2
 1

	)

60 
	#HAVE_FMA3
 1

	)

61 
	#HAVE_FMA4
 1

	)

62 
	#HAVE_MMX
 1

	)

63 
	#HAVE_MMXEXT
 1

	)

64 
	#HAVE_SSE
 1

	)

65 
	#HAVE_SSE2
 1

	)

66 
	#HAVE_SSE3
 1

	)

67 
	#HAVE_SSE4
 1

	)

68 
	#HAVE_SSE42
 1

	)

69 
	#HAVE_SSSE3
 1

	)

70 
	#HAVE_XOP
 1

	)

71 
	#HAVE_CPUNOP
 1

	)

72 
	#HAVE_I686
 1

	)

73 
	#HAVE_MIPSFPU
 0

	)

74 
	#HAVE_MIPS32R2
 0

	)

75 
	#HAVE_MIPS32R5
 0

	)

76 
	#HAVE_MIPS64R2
 0

	)

77 
	#HAVE_MIPS32R6
 0

	)

78 
	#HAVE_MIPS64R6
 0

	)

79 
	#HAVE_MIPSDSP
 0

	)

80 
	#HAVE_MIPSDSPR2
 0

	)

81 
	#HAVE_MSA
 0

	)

82 
	#HAVE_LOONGSON2
 1

	)

83 
	#HAVE_LOONGSON3
 1

	)

84 
	#HAVE_MMI
 0

	)

85 
	#HAVE_ARMV5TE_EXTERNAL
 0

	)

86 
	#HAVE_ARMV6_EXTERNAL
 0

	)

87 
	#HAVE_ARMV6T2_EXTERNAL
 0

	)

88 
	#HAVE_ARMV8_EXTERNAL
 0

	)

89 
	#HAVE_NEON_EXTERNAL
 0

	)

90 
	#HAVE_VFP_EXTERNAL
 0

	)

91 
	#HAVE_VFPV3_EXTERNAL
 0

	)

92 
	#HAVE_SETEND_EXTERNAL
 0

	)

93 
	#HAVE_ALTIVEC_EXTERNAL
 0

	)

94 
	#HAVE_DCBZL_EXTERNAL
 0

	)

95 
	#HAVE_LDBRX_EXTERNAL
 0

	)

96 
	#HAVE_POWER8_EXTERNAL
 0

	)

97 
	#HAVE_PPC4XX_EXTERNAL
 0

	)

98 
	#HAVE_VSX_EXTERNAL
 0

	)

99 
	#HAVE_AESNI_EXTERNAL
 1

	)

100 
	#HAVE_AMD3DNOW_EXTERNAL
 1

	)

101 
	#HAVE_AMD3DNOWEXT_EXTERNAL
 1

	)

102 
	#HAVE_AVX_EXTERNAL
 1

	)

103 
	#HAVE_AVX2_EXTERNAL
 1

	)

104 
	#HAVE_FMA3_EXTERNAL
 1

	)

105 
	#HAVE_FMA4_EXTERNAL
 1

	)

106 
	#HAVE_MMX_EXTERNAL
 1

	)

107 
	#HAVE_MMXEXT_EXTERNAL
 1

	)

108 
	#HAVE_SSE_EXTERNAL
 1

	)

109 
	#HAVE_SSE2_EXTERNAL
 1

	)

110 
	#HAVE_SSE3_EXTERNAL
 1

	)

111 
	#HAVE_SSE4_EXTERNAL
 1

	)

112 
	#HAVE_SSE42_EXTERNAL
 1

	)

113 
	#HAVE_SSSE3_EXTERNAL
 1

	)

114 
	#HAVE_XOP_EXTERNAL
 1

	)

115 
	#HAVE_CPUNOP_EXTERNAL
 0

	)

116 
	#HAVE_I686_EXTERNAL
 0

	)

117 
	#HAVE_MIPSFPU_EXTERNAL
 0

	)

118 
	#HAVE_MIPS32R2_EXTERNAL
 0

	)

119 
	#HAVE_MIPS32R5_EXTERNAL
 0

	)

120 
	#HAVE_MIPS64R2_EXTERNAL
 0

	)

121 
	#HAVE_MIPS32R6_EXTERNAL
 0

	)

122 
	#HAVE_MIPS64R6_EXTERNAL
 0

	)

123 
	#HAVE_MIPSDSP_EXTERNAL
 0

	)

124 
	#HAVE_MIPSDSPR2_EXTERNAL
 0

	)

125 
	#HAVE_MSA_EXTERNAL
 0

	)

126 
	#HAVE_LOONGSON2_EXTERNAL
 0

	)

127 
	#HAVE_LOONGSON3_EXTERNAL
 0

	)

128 
	#HAVE_MMI_EXTERNAL
 0

	)

129 
	#HAVE_ARMV5TE_INLINE
 0

	)

130 
	#HAVE_ARMV6_INLINE
 0

	)

131 
	#HAVE_ARMV6T2_INLINE
 0

	)

132 
	#HAVE_ARMV8_INLINE
 0

	)

133 
	#HAVE_NEON_INLINE
 0

	)

134 
	#HAVE_VFP_INLINE
 0

	)

135 
	#HAVE_VFPV3_INLINE
 0

	)

136 
	#HAVE_SETEND_INLINE
 0

	)

137 
	#HAVE_ALTIVEC_INLINE
 0

	)

138 
	#HAVE_DCBZL_INLINE
 0

	)

139 
	#HAVE_LDBRX_INLINE
 0

	)

140 
	#HAVE_POWER8_INLINE
 0

	)

141 
	#HAVE_PPC4XX_INLINE
 0

	)

142 
	#HAVE_VSX_INLINE
 0

	)

143 
	#HAVE_AESNI_INLINE
 1

	)

144 
	#HAVE_AMD3DNOW_INLINE
 1

	)

145 
	#HAVE_AMD3DNOWEXT_INLINE
 1

	)

146 
	#HAVE_AVX_INLINE
 1

	)

147 
	#HAVE_AVX2_INLINE
 1

	)

148 
	#HAVE_FMA3_INLINE
 1

	)

149 
	#HAVE_FMA4_INLINE
 1

	)

150 
	#HAVE_MMX_INLINE
 1

	)

151 
	#HAVE_MMXEXT_INLINE
 1

	)

152 
	#HAVE_SSE_INLINE
 1

	)

153 
	#HAVE_SSE2_INLINE
 1

	)

154 
	#HAVE_SSE3_INLINE
 1

	)

155 
	#HAVE_SSE4_INLINE
 1

	)

156 
	#HAVE_SSE42_INLINE
 1

	)

157 
	#HAVE_SSSE3_INLINE
 1

	)

158 
	#HAVE_XOP_INLINE
 1

	)

159 
	#HAVE_CPUNOP_INLINE
 0

	)

160 
	#HAVE_I686_INLINE
 0

	)

161 
	#HAVE_MIPSFPU_INLINE
 0

	)

162 
	#HAVE_MIPS32R2_INLINE
 0

	)

163 
	#HAVE_MIPS32R5_INLINE
 0

	)

164 
	#HAVE_MIPS64R2_INLINE
 0

	)

165 
	#HAVE_MIPS32R6_INLINE
 0

	)

166 
	#HAVE_MIPS64R6_INLINE
 0

	)

167 
	#HAVE_MIPSDSP_INLINE
 0

	)

168 
	#HAVE_MIPSDSPR2_INLINE
 0

	)

169 
	#HAVE_MSA_INLINE
 0

	)

170 
	#HAVE_LOONGSON2_INLINE
 0

	)

171 
	#HAVE_LOONGSON3_INLINE
 0

	)

172 
	#HAVE_MMI_INLINE
 0

	)

173 
	#HAVE_ALIGNED_STACK
 1

	)

174 
	#HAVE_FAST_64BIT
 0

	)

175 
	#HAVE_FAST_CLZ
 1

	)

176 
	#HAVE_FAST_CMOV
 0

	)

177 
	#HAVE_LOCAL_ALIGNED_8
 1

	)

178 
	#HAVE_LOCAL_ALIGNED_16
 1

	)

179 
	#HAVE_LOCAL_ALIGNED_32
 1

	)

180 
	#HAVE_SIMD_ALIGN_16
 1

	)

181 
	#HAVE_ATOMICS_GCC
 1

	)

182 
	#HAVE_ATOMICS_SUNCC
 0

	)

183 
	#HAVE_ATOMICS_WIN32
 1

	)

184 
	#HAVE_ATOMIC_CAS_PTR
 0

	)

185 
	#HAVE_ATOMIC_COMPARE_EXCHANGE
 1

	)

186 
	#HAVE_MACHINE_RW_BARRIER
 0

	)

187 
	#HAVE_MEMORYBARRIER
 1

	)

188 
	#HAVE_MM_EMPTY
 0

	)

189 
	#HAVE_RDTSC
 1

	)

190 
	#HAVE_SARESTART
 0

	)

191 
	#HAVE_SYNC_VAL_COMPARE_AND_SWAP
 1

	)

192 
	#HAVE_CABS
 1

	)

193 
	#HAVE_CEXP
 1

	)

194 
	#HAVE_INLINE_ASM
 1

	)

195 
	#HAVE_SYMVER
 1

	)

196 
	#HAVE_YASM
 1

	)

197 
	#HAVE_BIGENDIAN
 0

	)

198 
	#HAVE_FAST_UNALIGNED
 1

	)

199 
	#HAVE_INCOMPATIBLE_LIBAV_ABI
 0

	)

200 
	#HAVE_ALSA_ASOUNDLIB_H
 0

	)

201 
	#HAVE_ALTIVEC_H
 0

	)

202 
	#HAVE_ARPA_INET_H
 0

	)

203 
	#HAVE_ASM_TYPES_H
 0

	)

204 
	#HAVE_CDIO_PARANOIA_H
 0

	)

205 
	#HAVE_CDIO_PARANOIA_PARANOIA_H
 0

	)

206 
	#HAVE_DEV_BKTR_IOCTL_BT848_H
 0

	)

207 
	#HAVE_DEV_BKTR_IOCTL_METEOR_H
 0

	)

208 
	#HAVE_DEV_IC_BT8XX_H
 0

	)

209 
	#HAVE_DEV_VIDEO_BKTR_IOCTL_BT848_H
 0

	)

210 
	#HAVE_DEV_VIDEO_METEOR_IOCTL_METEOR_H
 0

	)

211 
	#HAVE_DIRECT_H
 1

	)

212 
	#HAVE_DIRENT_H
 1

	)

213 
	#HAVE_DLFCN_H
 0

	)

214 
	#HAVE_D3D11_H
 1

	)

215 
	#HAVE_DXVA_H
 1

	)

216 
	#HAVE_ES2_GL_H
 0

	)

217 
	#HAVE_GSM_H
 1

	)

218 
	#HAVE_IO_H
 1

	)

219 
	#HAVE_MACH_MACH_TIME_H
 0

	)

220 
	#HAVE_MACHINE_IOCTL_BT848_H
 0

	)

221 
	#HAVE_MACHINE_IOCTL_METEOR_H
 0

	)

222 
	#HAVE_MALLOC_H
 1

	)

223 
	#HAVE_OPENCV2_CORE_CORE_C_H
 0

	)

224 
	#HAVE_OPENJPEG_2_1_OPENJPEG_H
 0

	)

225 
	#HAVE_OPENJPEG_2_0_OPENJPEG_H
 0

	)

226 
	#HAVE_OPENJPEG_1_5_OPENJPEG_H
 0

	)

227 
	#HAVE_OPENGL_GL3_H
 0

	)

228 
	#HAVE_POLL_H
 0

	)

229 
	#HAVE_SNDIO_H
 0

	)

230 
	#HAVE_SOUNDCARD_H
 0

	)

231 
	#HAVE_SYS_MMAN_H
 0

	)

232 
	#HAVE_SYS_PARAM_H
 1

	)

233 
	#HAVE_SYS_RESOURCE_H
 0

	)

234 
	#HAVE_SYS_SELECT_H
 0

	)

235 
	#HAVE_SYS_SOUNDCARD_H
 0

	)

236 
	#HAVE_SYS_TIME_H
 1

	)

237 
	#HAVE_SYS_UN_H
 0

	)

238 
	#HAVE_SYS_VIDEOIO_H
 0

	)

239 
	#HAVE_TERMIOS_H
 0

	)

240 
	#HAVE_UDPLITE_H
 0

	)

241 
	#HAVE_UNISTD_H
 1

	)

242 
	#HAVE_VALGRIND_VALGRIND_H
 0

	)

243 
	#HAVE_WINDOWS_H
 1

	)

244 
	#HAVE_WINSOCK2_H
 1

	)

245 
	#HAVE_INTRINSICS_NEON
 0

	)

246 
	#HAVE_ATANF
 1

	)

247 
	#HAVE_ATAN2F
 1

	)

248 
	#HAVE_CBRT
 1

	)

249 
	#HAVE_CBRTF
 1

	)

250 
	#HAVE_COPYSIGN
 1

	)

251 
	#HAVE_COSF
 1

	)

252 
	#HAVE_ERF
 1

	)

253 
	#HAVE_EXP2
 1

	)

254 
	#HAVE_EXP2F
 1

	)

255 
	#HAVE_EXPF
 1

	)

256 
	#HAVE_HYPOT
 1

	)

257 
	#HAVE_ISFINITE
 1

	)

258 
	#HAVE_ISINF
 1

	)

259 
	#HAVE_ISNAN
 1

	)

260 
	#HAVE_LDEXPF
 1

	)

261 
	#HAVE_LLRINT
 1

	)

262 
	#HAVE_LLRINTF
 1

	)

263 
	#HAVE_LOG2
 1

	)

264 
	#HAVE_LOG2F
 1

	)

265 
	#HAVE_LOG10F
 1

	)

266 
	#HAVE_LRINT
 1

	)

267 
	#HAVE_LRINTF
 1

	)

268 
	#HAVE_POWF
 1

	)

269 
	#HAVE_RINT
 1

	)

270 
	#HAVE_ROUND
 1

	)

271 
	#HAVE_ROUNDF
 1

	)

272 
	#HAVE_SINF
 1

	)

273 
	#HAVE_TRUNC
 1

	)

274 
	#HAVE_TRUNCF
 1

	)

275 
	#HAVE_ACCESS
 1

	)

276 
	#HAVE_ALIGNED_MALLOC
 1

	)

277 
	#HAVE_ARC4RANDOM
 0

	)

278 
	#HAVE_CLOCK_GETTIME
 1

	)

279 
	#HAVE_CLOSESOCKET
 1

	)

280 
	#HAVE_COMMANDLINETOARGVW
 1

	)

281 
	#HAVE_COTASKMEMFREE
 1

	)

282 
	#HAVE_CRYPTGENRANDOM
 1

	)

283 
	#HAVE_DLOPEN
 0

	)

284 
	#HAVE_FCNTL
 0

	)

285 
	#HAVE_FLT_LIM
 1

	)

286 
	#HAVE_FORK
 0

	)

287 
	#HAVE_GETADDRINFO
 1

	)

288 
	#HAVE_GETHRTIME
 0

	)

289 
	#HAVE_GETOPT
 1

	)

290 
	#HAVE_GETPROCESSAFFINITYMASK
 1

	)

292 
	#HAVE_GETPROCESSTIMES
 1

	)

293 
	#HAVE_GETRUSAGE
 0

	)

294 
	#HAVE_GETSYSTEMTIMEASFILETIME
 1

	)

295 
	#HAVE_GETTIMEOFDAY
 1

	)

296 
	#HAVE_GLOB
 0

	)

297 
	#HAVE_GLXGETPROCADDRESS
 0

	)

298 
	#HAVE_GMTIME_R
 1

	)

299 
	#HAVE_INET_ATON
 0

	)

300 
	#HAVE_ISATTY
 1

	)

301 
	#HAVE_JACK_PORT_GET_LATENCY_RANGE
 0

	)

302 
	#HAVE_KBHIT
 1

	)

304 
	#HAVE_LSTAT
 0

	)

305 
	#HAVE_LZO1X_999_COMPRESS
 0

	)

306 
	#HAVE_MACH_ABSOLUTE_TIME
 0

	)

307 
	#HAVE_MAPVIEWOFFILE
 1

	)

308 
	#HAVE_MEMALIGN
 0

	)

309 
	#HAVE_MKSTEMP
 1

	)

310 
	#HAVE_MMAP
 0

	)

311 
	#HAVE_MPROTECT
 1

	)

312 
	#HAVE_NANOSLEEP
 1

	)

313 
	#HAVE_PEEKNAMEDPIPE
 1

	)

314 
	#HAVE_POSIX_MEMALIGN
 0

	)

315 
	#HAVE_PTHREAD_CANCEL
 0

	)

316 
	#HAVE_SCHED_GETAFFINITY
 0

	)

317 
	#HAVE_SETCONSOLETEXTATTRIBUTE
 1

	)

318 
	#HAVE_SETCONSOLECTRLHANDLER
 1

	)

319 
	#HAVE_SETMODE
 1

	)

320 
	#HAVE_SETRLIMIT
 0

	)

321 
	#HAVE_SLEEP
 1

	)

322 
	#HAVE_STRERROR_R
 0

	)

323 
	#HAVE_SYSCONF
 0

	)

324 
	#HAVE_SYSCTL
 0

	)

325 
	#HAVE_USLEEP
 1

	)

326 
	#HAVE_UTGETOSTYPEFROMSTRING
 0

	)

327 
	#HAVE_VIRTUALALLOC
 1

	)

328 
	#HAVE_WGLGETPROCADDRESS
 0

	)

329 
	#HAVE_PTHREADS
 0

	)

330 
	#HAVE_OS2THREADS
 0

	)

331 
	#HAVE_W32THREADS
 1

	)

332 
	#HAVE_AS_DN_DIRECTIVE
 0

	)

333 
	#HAVE_AS_FUNC
 0

	)

334 
	#HAVE_AS_OBJECT_ARCH
 0

	)

335 
	#HAVE_ASM_MOD_Q
 0

	)

336 
	#HAVE_ATTRIBUTE_MAY_ALIAS
 1

	)

337 
	#HAVE_ATTRIBUTE_PACKED
 1

	)

338 
	#HAVE_EBP_AVAILABLE
 1

	)

339 
	#HAVE_EBX_AVAILABLE
 1

	)

340 
	#HAVE_GNU_AS
 0

	)

341 
	#HAVE_GNU_WINDRES
 1

	)

342 
	#HAVE_IBM_ASM
 0

	)

343 
	#HAVE_INLINE_ASM_DIRECT_SYMBOL_REFS
 1

	)

344 
	#HAVE_INLINE_ASM_LABELS
 1

	)

345 
	#HAVE_INLINE_ASM_NONLOCAL_LABELS
 1

	)

346 
	#HAVE_PRAGMA_DEPRECATED
 1

	)

347 
	#HAVE_RSYNC_CONTIMEOUT
 0

	)

348 
	#HAVE_SYMVER_ASM_LABEL
 1

	)

349 
	#HAVE_SYMVER_GNU_ASM
 0

	)

350 
	#HAVE_VFP_ARGS
 0

	)

351 
	#HAVE_XFORM_ASM
 0

	)

352 
	#HAVE_XMM_CLOBBERS
 0

	)

353 
	#HAVE_CONDITION_VARIABLE_PTR
 1

	)

354 
	#HAVE_SOCKLEN_T
 1

	)

355 
	#HAVE_STRUCT_ADDRINFO
 1

	)

356 
	#HAVE_STRUCT_GROUP_SOURCE_REQ
 1

	)

357 
	#HAVE_STRUCT_IP_MREQ_SOURCE
 1

	)

358 
	#HAVE_STRUCT_IPV6_MREQ
 1

	)

359 
	#HAVE_STRUCT_POLLFD
 0

	)

360 
	#HAVE_STRUCT_RUSAGE_RU_MAXRSS
 0

	)

361 
	#HAVE_STRUCT_SCTP_EVENT_SUBSCRIBE
 0

	)

362 
	#HAVE_STRUCT_SOCKADDR_IN6
 1

	)

363 
	#HAVE_STRUCT_SOCKADDR_SA_LEN
 0

	)

364 
	#HAVE_STRUCT_SOCKADDR_STORAGE
 1

	)

365 
	#HAVE_STRUCT_STAT_ST_MTIM_TV_NSEC
 0

	)

366 
	#HAVE_STRUCT_V4L2_FRMIVALENUM_DISCRETE
 0

	)

367 
	#HAVE_ATOMICS_NATIVE
 1

	)

368 
	#HAVE_DOS_PATHS
 1

	)

369 
	#HAVE_DXVA2_LIB
 1

	)

370 
	#HAVE_DXVA2API_COBJ
 1

	)

371 
	#HAVE_LIBC_MSVCRT
 0

	)

372 
	#HAVE_LIBDC1394_1
 0

	)

373 
	#HAVE_LIBDC1394_2
 0

	)

374 
	#HAVE_MAKEINFO
 1

	)

375 
	#HAVE_MAKEINFO_HTML
 1

	)

376 
	#HAVE_PERL
 1

	)

377 
	#HAVE_POD2MAN
 1

	)

378 
	#HAVE_SDL
 1

	)

379 
	#HAVE_SECTION_DATA_REL_RO
 0

	)

380 
	#HAVE_TEXI2HTML
 0

	)

381 
	#HAVE_THREADS
 1

	)

382 
	#HAVE_VAAPI_X11
 0

	)

383 
	#HAVE_VDPAU_X11
 0

	)

384 
	#HAVE_WINRT
 0

	)

385 
	#HAVE_XLIB
 0

	)

386 
	#CONFIG_BSFS
 1

	)

387 
	#CONFIG_DECODERS
 1

	)

388 
	#CONFIG_ENCODERS
 1

	)

389 
	#CONFIG_HWACCELS
 1

	)

390 
	#CONFIG_PARSERS
 1

	)

391 
	#CONFIG_INDEVS
 1

	)

392 
	#CONFIG_OUTDEVS
 1

	)

393 
	#CONFIG_FILTERS
 1

	)

394 
	#CONFIG_DEMUXERS
 1

	)

395 
	#CONFIG_MUXERS
 1

	)

396 
	#CONFIG_PROTOCOLS
 1

	)

397 
	#CONFIG_DOC
 0

	)

398 
	#CONFIG_HTMLPAGES
 1

	)

399 
	#CONFIG_MANPAGES
 1

	)

400 
	#CONFIG_PODPAGES
 1

	)

401 
	#CONFIG_TXTPAGES
 1

	)

402 
	#CONFIG_AVIO_READING_EXAMPLE
 1

	)

403 
	#CONFIG_AVIO_DIR_CMD_EXAMPLE
 1

	)

404 
	#CONFIG_DECODING_ENCODING_EXAMPLE
 1

	)

405 
	#CONFIG_DEMUXING_DECODING_EXAMPLE
 1

	)

406 
	#CONFIG_EXTRACT_MVS_EXAMPLE
 1

	)

407 
	#CONFIG_FILTER_AUDIO_EXAMPLE
 1

	)

408 
	#CONFIG_FILTERING_AUDIO_EXAMPLE
 1

	)

409 
	#CONFIG_FILTERING_VIDEO_EXAMPLE
 1

	)

410 
	#CONFIG_METADATA_EXAMPLE
 1

	)

411 
	#CONFIG_MUXING_EXAMPLE
 1

	)

412 
	#CONFIG_QSVDEC_EXAMPLE
 0

	)

413 
	#CONFIG_REMUXING_EXAMPLE
 1

	)

414 
	#CONFIG_RESAMPLING_AUDIO_EXAMPLE
 1

	)

415 
	#CONFIG_SCALING_VIDEO_EXAMPLE
 1

	)

416 
	#CONFIG_TRANSCODE_AAC_EXAMPLE
 1

	)

417 
	#CONFIG_TRANSCODING_EXAMPLE
 1

	)

418 
	#CONFIG_AVISYNTH
 0

	)

419 
	#CONFIG_BZLIB
 1

	)

420 
	#CONFIG_CHROMAPRINT
 0

	)

421 
	#CONFIG_CRYSTALHD
 0

	)

422 
	#CONFIG_DECKLINK
 0

	)

423 
	#CONFIG_FREI0R
 0

	)

424 
	#CONFIG_GCRYPT
 0

	)

425 
	#CONFIG_GMP
 0

	)

426 
	#CONFIG_GNUTLS
 1

	)

427 
	#CONFIG_ICONV
 1

	)

428 
	#CONFIG_LADSPA
 0

	)

429 
	#CONFIG_LIBASS
 1

	)

430 
	#CONFIG_LIBBLURAY
 1

	)

431 
	#CONFIG_LIBBS2B
 0

	)

432 
	#CONFIG_LIBCACA
 1

	)

433 
	#CONFIG_LIBCDIO
 0

	)

434 
	#CONFIG_LIBCELT
 1

	)

435 
	#CONFIG_LIBDC1394
 0

	)

436 
	#CONFIG_LIBDCADEC
 1

	)

437 
	#CONFIG_LIBFAAC
 0

	)

438 
	#CONFIG_LIBFDK_AAC
 0

	)

439 
	#CONFIG_LIBFLITE
 0

	)

440 
	#CONFIG_LIBFONTCONFIG
 1

	)

441 
	#CONFIG_LIBFREETYPE
 1

	)

442 
	#CONFIG_LIBFRIBIDI
 0

	)

443 
	#CONFIG_LIBGME
 0

	)

444 
	#CONFIG_LIBGSM
 1

	)

445 
	#CONFIG_LIBIEC61883
 0

	)

446 
	#CONFIG_LIBILBC
 0

	)

447 
	#CONFIG_LIBKVAZAAR
 0

	)

448 
	#CONFIG_LIBMFX
 0

	)

449 
	#CONFIG_LIBMODPLUG
 1

	)

450 
	#CONFIG_LIBMP3LAME
 1

	)

451 
	#CONFIG_LIBNUT
 0

	)

452 
	#CONFIG_LIBOPENCORE_AMRNB
 1

	)

453 
	#CONFIG_LIBOPENCORE_AMRWB
 1

	)

454 
	#CONFIG_LIBOPENCV
 0

	)

455 
	#CONFIG_LIBOPENH264
 0

	)

456 
	#CONFIG_LIBOPENJPEG
 0

	)

457 
	#CONFIG_LIBOPUS
 1

	)

458 
	#CONFIG_LIBPULSE
 0

	)

459 
	#CONFIG_LIBRTMP
 1

	)

460 
	#CONFIG_LIBRUBBERBAND
 0

	)

461 
	#CONFIG_LIBSCHROEDINGER
 1

	)

462 
	#CONFIG_LIBSHINE
 0

	)

463 
	#CONFIG_LIBSMBCLIENT
 0

	)

464 
	#CONFIG_LIBSNAPPY
 0

	)

465 
	#CONFIG_LIBSOXR
 0

	)

466 
	#CONFIG_LIBSPEEX
 1

	)

467 
	#CONFIG_LIBSSH
 0

	)

468 
	#CONFIG_LIBTESSERACT
 0

	)

469 
	#CONFIG_LIBTHEORA
 1

	)

470 
	#CONFIG_LIBTWOLAME
 0

	)

471 
	#CONFIG_LIBUTVIDEO
 0

	)

472 
	#CONFIG_LIBV4L2
 0

	)

473 
	#CONFIG_LIBVIDSTAB
 0

	)

474 
	#CONFIG_LIBVO_AMRWBENC
 0

	)

475 
	#CONFIG_LIBVORBIS
 1

	)

476 
	#CONFIG_LIBVPX
 1

	)

477 
	#CONFIG_LIBWAVPACK
 1

	)

478 
	#CONFIG_LIBWEBP
 0

	)

479 
	#CONFIG_LIBX264
 1

	)

480 
	#CONFIG_LIBX265
 1

	)

481 
	#CONFIG_LIBXAVS
 0

	)

482 
	#CONFIG_LIBXCB
 0

	)

483 
	#CONFIG_LIBXCB_SHM
 0

	)

484 
	#CONFIG_LIBXCB_SHAPE
 0

	)

485 
	#CONFIG_LIBXCB_XFIXES
 0

	)

486 
	#CONFIG_LIBXVID
 1

	)

487 
	#CONFIG_LIBZIMG
 0

	)

488 
	#CONFIG_LIBZMQ
 0

	)

489 
	#CONFIG_LIBZVBI
 0

	)

490 
	#CONFIG_LZMA
 1

	)

491 
	#CONFIG_MMAL
 0

	)

492 
	#CONFIG_NETCDF
 0

	)

493 
	#CONFIG_NVENC
 0

	)

494 
	#CONFIG_OPENAL
 1

	)

495 
	#CONFIG_OPENCL
 0

	)

496 
	#CONFIG_OPENGL
 0

	)

497 
	#CONFIG_OPENSSL
 0

	)

498 
	#CONFIG_SCHANNEL
 1

	)

499 
	#CONFIG_SDL
 1

	)

500 
	#CONFIG_SECURETRANSPORT
 0

	)

501 
	#CONFIG_X11GRAB
 0

	)

502 
	#CONFIG_XLIB
 0

	)

503 
	#CONFIG_ZLIB
 1

	)

504 
	#CONFIG_FTRAPV
 0

	)

505 
	#CONFIG_GRAY
 0

	)

506 
	#CONFIG_HARDCODED_TABLES
 0

	)

507 
	#CONFIG_RUNTIME_CPUDETECT
 1

	)

508 
	#CONFIG_SAFE_BITSTREAM_READER
 1

	)

509 
	#CONFIG_SHARED
 1

	)

510 
	#CONFIG_SMALL
 0

	)

511 
	#CONFIG_STATIC
 1

	)

512 
	#CONFIG_SWSCALE_ALPHA
 1

	)

513 
	#CONFIG_D3D11VA
 1

	)

514 
	#CONFIG_DXVA2
 1

	)

515 
	#CONFIG_VAAPI
 0

	)

516 
	#CONFIG_VDA
 0

	)

517 
	#CONFIG_VDPAU
 0

	)

518 
	#CONFIG_VIDEOTOOLBOX
 0

	)

519 
	#CONFIG_XVMC
 0

	)

520 
	#CONFIG_GPL
 1

	)

521 
	#CONFIG_NONFREE
 0

	)

522 
	#CONFIG_VERSION3
 1

	)

523 
	#CONFIG_AVCODEC
 1

	)

524 
	#CONFIG_AVDEVICE
 1

	)

525 
	#CONFIG_AVFILTER
 1

	)

526 
	#CONFIG_AVFORMAT
 1

	)

527 
	#CONFIG_AVRESAMPLE
 1

	)

528 
	#CONFIG_AVUTIL
 1

	)

529 
	#CONFIG_POSTPROC
 1

	)

530 
	#CONFIG_SWRESAMPLE
 1

	)

531 
	#CONFIG_SWSCALE
 1

	)

532 
	#CONFIG_FFPLAY
 1

	)

533 
	#CONFIG_FFPROBE
 1

	)

534 
	#CONFIG_FFSERVER
 0

	)

535 
	#CONFIG_FFMPEG
 1

	)

536 
	#CONFIG_DCT
 1

	)

537 
	#CONFIG_DWT
 1

	)

538 
	#CONFIG_ERROR_RESILIENCE
 1

	)

539 
	#CONFIG_FAAN
 1

	)

540 
	#CONFIG_FAST_UNALIGNED
 1

	)

541 
	#CONFIG_FFT
 1

	)

542 
	#CONFIG_LSP
 1

	)

543 
	#CONFIG_LZO
 1

	)

544 
	#CONFIG_MDCT
 1

	)

545 
	#CONFIG_PIXELUTILS
 1

	)

546 
	#CONFIG_NETWORK
 1

	)

547 
	#CONFIG_RDFT
 1

	)

548 
	#CONFIG_FONTCONFIG
 1

	)

549 
	#CONFIG_INCOMPATIBLE_LIBAV_ABI
 0

	)

550 
	#CONFIG_MEMALIGN_HACK
 0

	)

551 
	#CONFIG_MEMORY_POISONING
 0

	)

552 
	#CONFIG_NEON_CLOBBER_TEST
 0

	)

553 
	#CONFIG_PIC
 1

	)

554 
	#CONFIG_POD2MAN
 1

	)

555 
	#CONFIG_RAISE_MAJOR
 0

	)

556 
	#CONFIG_THUMB
 0

	)

557 
	#CONFIG_VALGRIND_BACKTRACE
 0

	)

558 
	#CONFIG_XMM_CLOBBER_TEST
 0

	)

559 
	#CONFIG_AANDCTTABLES
 1

	)

560 
	#CONFIG_AC3DSP
 1

	)

561 
	#CONFIG_AUDIO_FRAME_QUEUE
 1

	)

562 
	#CONFIG_AUDIODSP
 1

	)

563 
	#CONFIG_BLOCKDSP
 1

	)

564 
	#CONFIG_BSWAPDSP
 1

	)

565 
	#CONFIG_CABAC
 1

	)

566 
	#CONFIG_DIRAC_PARSE
 1

	)

567 
	#CONFIG_DVPROFILE
 1

	)

568 
	#CONFIG_EXIF
 1

	)

569 
	#CONFIG_FAANDCT
 1

	)

570 
	#CONFIG_FAANIDCT
 1

	)

571 
	#CONFIG_FDCTDSP
 1

	)

572 
	#CONFIG_FLACDSP
 1

	)

573 
	#CONFIG_FMTCONVERT
 1

	)

574 
	#CONFIG_FRAME_THREAD_ENCODER
 1

	)

575 
	#CONFIG_G722DSP
 1

	)

576 
	#CONFIG_GOLOMB
 1

	)

577 
	#CONFIG_GPLV3
 1

	)

578 
	#CONFIG_H263DSP
 1

	)

579 
	#CONFIG_H264CHROMA
 1

	)

580 
	#CONFIG_H264DSP
 1

	)

581 
	#CONFIG_H264PRED
 1

	)

582 
	#CONFIG_H264QPEL
 1

	)

583 
	#CONFIG_HPELDSP
 1

	)

584 
	#CONFIG_HUFFMAN
 1

	)

585 
	#CONFIG_HUFFYUVDSP
 1

	)

586 
	#CONFIG_HUFFYUVENCDSP
 1

	)

587 
	#CONFIG_IDCTDSP
 1

	)

588 
	#CONFIG_IIRFILTER
 1

	)

589 
	#CONFIG_IMDCT15
 1

	)

590 
	#CONFIG_INTRAX8
 1

	)

591 
	#CONFIG_IVIDSP
 1

	)

592 
	#CONFIG_JPEGTABLES
 1

	)

593 
	#CONFIG_LGPLV3
 0

	)

594 
	#CONFIG_LIBX262
 0

	)

595 
	#CONFIG_LLAUDDSP
 1

	)

596 
	#CONFIG_LLVIDDSP
 1

	)

597 
	#CONFIG_LPC
 1

	)

598 
	#CONFIG_LZF
 1

	)

599 
	#CONFIG_ME_CMP
 1

	)

600 
	#CONFIG_MPEG_ER
 1

	)

601 
	#CONFIG_MPEGAUDIO
 1

	)

602 
	#CONFIG_MPEGAUDIODSP
 1

	)

603 
	#CONFIG_MPEGVIDEO
 1

	)

604 
	#CONFIG_MPEGVIDEOENC
 1

	)

605 
	#CONFIG_MSS34DSP
 1

	)

606 
	#CONFIG_PIXBLOCKDSP
 1

	)

607 
	#CONFIG_QPELDSP
 1

	)

608 
	#CONFIG_QSV
 0

	)

609 
	#CONFIG_QSVDEC
 0

	)

610 
	#CONFIG_QSVENC
 0

	)

611 
	#CONFIG_RANGECODER
 1

	)

612 
	#CONFIG_RIFFDEC
 1

	)

613 
	#CONFIG_RIFFENC
 1

	)

614 
	#CONFIG_RTPDEC
 1

	)

615 
	#CONFIG_RTPENC_CHAIN
 1

	)

616 
	#CONFIG_RV34DSP
 1

	)

617 
	#CONFIG_SINEWIN
 1

	)

618 
	#CONFIG_SNAPPY
 1

	)

619 
	#CONFIG_STARTCODE
 1

	)

620 
	#CONFIG_TEXTUREDSP
 1

	)

621 
	#CONFIG_TEXTUREDSPENC
 0

	)

622 
	#CONFIG_TPELDSP
 1

	)

623 
	#CONFIG_VIDEODSP
 1

	)

624 
	#CONFIG_VP3DSP
 1

	)

625 
	#CONFIG_VP56DSP
 1

	)

626 
	#CONFIG_VP8DSP
 1

	)

627 
	#CONFIG_WMA_FREQS
 1

	)

628 
	#CONFIG_WMV2DSP
 1

	)

629 
	#CONFIG_AAC_ADTSTOASC_BSF
 1

	)

630 
	#CONFIG_CHOMP_BSF
 1

	)

631 
	#CONFIG_DUMP_EXTRADATA_BSF
 1

	)

632 
	#CONFIG_H264_MP4TOANNEXB_BSF
 1

	)

633 
	#CONFIG_HEVC_MP4TOANNEXB_BSF
 1

	)

634 
	#CONFIG_IMX_DUMP_HEADER_BSF
 1

	)

635 
	#CONFIG_MJPEG2JPEG_BSF
 1

	)

636 
	#CONFIG_MJPEGA_DUMP_HEADER_BSF
 1

	)

637 
	#CONFIG_MP3_HEADER_DECOMPRESS_BSF
 1

	)

638 
	#CONFIG_MPEG4_UNPACK_BFRAMES_BSF
 1

	)

639 
	#CONFIG_MOV2TEXTSUB_BSF
 1

	)

640 
	#CONFIG_NOISE_BSF
 1

	)

641 
	#CONFIG_REMOVE_EXTRADATA_BSF
 1

	)

642 
	#CONFIG_TEXT2MOVSUB_BSF
 1

	)

643 
	#CONFIG_AASC_DECODER
 1

	)

644 
	#CONFIG_AIC_DECODER
 1

	)

645 
	#CONFIG_ALIAS_PIX_DECODER
 1

	)

646 
	#CONFIG_AMV_DECODER
 1

	)

647 
	#CONFIG_ANM_DECODER
 1

	)

648 
	#CONFIG_ANSI_DECODER
 1

	)

649 
	#CONFIG_APNG_DECODER
 1

	)

650 
	#CONFIG_ASV1_DECODER
 1

	)

651 
	#CONFIG_ASV2_DECODER
 1

	)

652 
	#CONFIG_AURA_DECODER
 1

	)

653 
	#CONFIG_AURA2_DECODER
 1

	)

654 
	#CONFIG_AVRP_DECODER
 1

	)

655 
	#CONFIG_AVRN_DECODER
 1

	)

656 
	#CONFIG_AVS_DECODER
 1

	)

657 
	#CONFIG_AVUI_DECODER
 1

	)

658 
	#CONFIG_AYUV_DECODER
 1

	)

659 
	#CONFIG_BETHSOFTVID_DECODER
 1

	)

660 
	#CONFIG_BFI_DECODER
 1

	)

661 
	#CONFIG_BINK_DECODER
 1

	)

662 
	#CONFIG_BMP_DECODER
 1

	)

663 
	#CONFIG_BMV_VIDEO_DECODER
 1

	)

664 
	#CONFIG_BRENDER_PIX_DECODER
 1

	)

665 
	#CONFIG_C93_DECODER
 1

	)

666 
	#CONFIG_CAVS_DECODER
 1

	)

667 
	#CONFIG_CDGRAPHICS_DECODER
 1

	)

668 
	#CONFIG_CDXL_DECODER
 1

	)

669 
	#CONFIG_CFHD_DECODER
 1

	)

670 
	#CONFIG_CINEPAK_DECODER
 1

	)

671 
	#CONFIG_CLJR_DECODER
 1

	)

672 
	#CONFIG_CLLC_DECODER
 1

	)

673 
	#CONFIG_COMFORTNOISE_DECODER
 1

	)

674 
	#CONFIG_CPIA_DECODER
 1

	)

675 
	#CONFIG_CSCD_DECODER
 1

	)

676 
	#CONFIG_CYUV_DECODER
 1

	)

677 
	#CONFIG_DDS_DECODER
 1

	)

678 
	#CONFIG_DFA_DECODER
 1

	)

679 
	#CONFIG_DIRAC_DECODER
 1

	)

680 
	#CONFIG_DNXHD_DECODER
 1

	)

681 
	#CONFIG_DPX_DECODER
 1

	)

682 
	#CONFIG_DSICINVIDEO_DECODER
 1

	)

683 
	#CONFIG_DVAUDIO_DECODER
 1

	)

684 
	#CONFIG_DVVIDEO_DECODER
 1

	)

685 
	#CONFIG_DXA_DECODER
 1

	)

686 
	#CONFIG_DXTORY_DECODER
 1

	)

687 
	#CONFIG_DXV_DECODER
 1

	)

688 
	#CONFIG_EACMV_DECODER
 1

	)

689 
	#CONFIG_EAMAD_DECODER
 1

	)

690 
	#CONFIG_EATGQ_DECODER
 1

	)

691 
	#CONFIG_EATGV_DECODER
 1

	)

692 
	#CONFIG_EATQI_DECODER
 1

	)

693 
	#CONFIG_EIGHTBPS_DECODER
 1

	)

694 
	#CONFIG_EIGHTSVX_EXP_DECODER
 1

	)

695 
	#CONFIG_EIGHTSVX_FIB_DECODER
 1

	)

696 
	#CONFIG_ESCAPE124_DECODER
 1

	)

697 
	#CONFIG_ESCAPE130_DECODER
 1

	)

698 
	#CONFIG_EXR_DECODER
 1

	)

699 
	#CONFIG_FFV1_DECODER
 1

	)

700 
	#CONFIG_FFVHUFF_DECODER
 1

	)

701 
	#CONFIG_FIC_DECODER
 1

	)

702 
	#CONFIG_FLASHSV_DECODER
 1

	)

703 
	#CONFIG_FLASHSV2_DECODER
 1

	)

704 
	#CONFIG_FLIC_DECODER
 1

	)

705 
	#CONFIG_FLV_DECODER
 1

	)

706 
	#CONFIG_FOURXM_DECODER
 1

	)

707 
	#CONFIG_FRAPS_DECODER
 1

	)

708 
	#CONFIG_FRWU_DECODER
 1

	)

709 
	#CONFIG_G2M_DECODER
 1

	)

710 
	#CONFIG_GIF_DECODER
 1

	)

711 
	#CONFIG_H261_DECODER
 1

	)

712 
	#CONFIG_H263_DECODER
 1

	)

713 
	#CONFIG_H263I_DECODER
 1

	)

714 
	#CONFIG_H263P_DECODER
 1

	)

715 
	#CONFIG_H264_DECODER
 1

	)

716 
	#CONFIG_H264_CRYSTALHD_DECODER
 0

	)

717 
	#CONFIG_H264_MMAL_DECODER
 0

	)

718 
	#CONFIG_H264_QSV_DECODER
 0

	)

719 
	#CONFIG_H264_VDA_DECODER
 0

	)

720 
	#CONFIG_H264_VDPAU_DECODER
 0

	)

721 
	#CONFIG_HAP_DECODER
 1

	)

722 
	#CONFIG_HEVC_DECODER
 1

	)

723 
	#CONFIG_HEVC_QSV_DECODER
 0

	)

724 
	#CONFIG_HNM4_VIDEO_DECODER
 1

	)

725 
	#CONFIG_HQ_HQA_DECODER
 1

	)

726 
	#CONFIG_HQX_DECODER
 1

	)

727 
	#CONFIG_HUFFYUV_DECODER
 1

	)

728 
	#CONFIG_IDCIN_DECODER
 1

	)

729 
	#CONFIG_IFF_ILBM_DECODER
 1

	)

730 
	#CONFIG_INDEO2_DECODER
 1

	)

731 
	#CONFIG_INDEO3_DECODER
 1

	)

732 
	#CONFIG_INDEO4_DECODER
 1

	)

733 
	#CONFIG_INDEO5_DECODER
 1

	)

734 
	#CONFIG_INTERPLAY_VIDEO_DECODER
 1

	)

735 
	#CONFIG_JPEG2000_DECODER
 1

	)

736 
	#CONFIG_JPEGLS_DECODER
 1

	)

737 
	#CONFIG_JV_DECODER
 1

	)

738 
	#CONFIG_KGV1_DECODER
 1

	)

739 
	#CONFIG_KMVC_DECODER
 1

	)

740 
	#CONFIG_LAGARITH_DECODER
 1

	)

741 
	#CONFIG_LOCO_DECODER
 1

	)

742 
	#CONFIG_MDEC_DECODER
 1

	)

743 
	#CONFIG_MIMIC_DECODER
 1

	)

744 
	#CONFIG_MJPEG_DECODER
 1

	)

745 
	#CONFIG_MJPEGB_DECODER
 1

	)

746 
	#CONFIG_MMVIDEO_DECODER
 1

	)

747 
	#CONFIG_MOTIONPIXELS_DECODER
 1

	)

748 
	#CONFIG_MPEG_XVMC_DECODER
 0

	)

749 
	#CONFIG_MPEG1VIDEO_DECODER
 1

	)

750 
	#CONFIG_MPEG2VIDEO_DECODER
 1

	)

751 
	#CONFIG_MPEG4_DECODER
 1

	)

752 
	#CONFIG_MPEG4_CRYSTALHD_DECODER
 0

	)

753 
	#CONFIG_MPEG4_MMAL_DECODER
 0

	)

754 
	#CONFIG_MPEG4_VDPAU_DECODER
 0

	)

755 
	#CONFIG_MPEGVIDEO_DECODER
 1

	)

756 
	#CONFIG_MPEG_VDPAU_DECODER
 0

	)

757 
	#CONFIG_MPEG1_VDPAU_DECODER
 0

	)

758 
	#CONFIG_MPEG2_MMAL_DECODER
 0

	)

759 
	#CONFIG_MPEG2_CRYSTALHD_DECODER
 0

	)

760 
	#CONFIG_MPEG2_QSV_DECODER
 0

	)

761 
	#CONFIG_MSA1_DECODER
 1

	)

762 
	#CONFIG_MSMPEG4_CRYSTALHD_DECODER
 0

	)

763 
	#CONFIG_MSMPEG4V1_DECODER
 1

	)

764 
	#CONFIG_MSMPEG4V2_DECODER
 1

	)

765 
	#CONFIG_MSMPEG4V3_DECODER
 1

	)

766 
	#CONFIG_MSRLE_DECODER
 1

	)

767 
	#CONFIG_MSS1_DECODER
 1

	)

768 
	#CONFIG_MSS2_DECODER
 1

	)

769 
	#CONFIG_MSVIDEO1_DECODER
 1

	)

770 
	#CONFIG_MSZH_DECODER
 1

	)

771 
	#CONFIG_MTS2_DECODER
 1

	)

772 
	#CONFIG_MVC1_DECODER
 1

	)

773 
	#CONFIG_MVC2_DECODER
 1

	)

774 
	#CONFIG_MXPEG_DECODER
 1

	)

775 
	#CONFIG_NUV_DECODER
 1

	)

776 
	#CONFIG_PAF_VIDEO_DECODER
 1

	)

777 
	#CONFIG_PAM_DECODER
 1

	)

778 
	#CONFIG_PBM_DECODER
 1

	)

779 
	#CONFIG_PCX_DECODER
 1

	)

780 
	#CONFIG_PGM_DECODER
 1

	)

781 
	#CONFIG_PGMYUV_DECODER
 1

	)

782 
	#CONFIG_PICTOR_DECODER
 1

	)

783 
	#CONFIG_PNG_DECODER
 1

	)

784 
	#CONFIG_PPM_DECODER
 1

	)

785 
	#CONFIG_PRORES_DECODER
 1

	)

786 
	#CONFIG_PRORES_LGPL_DECODER
 1

	)

787 
	#CONFIG_PTX_DECODER
 1

	)

788 
	#CONFIG_QDRAW_DECODER
 1

	)

789 
	#CONFIG_QPEG_DECODER
 1

	)

790 
	#CONFIG_QTRLE_DECODER
 1

	)

791 
	#CONFIG_R10K_DECODER
 1

	)

792 
	#CONFIG_R210_DECODER
 1

	)

793 
	#CONFIG_RAWVIDEO_DECODER
 1

	)

794 
	#CONFIG_RL2_DECODER
 1

	)

795 
	#CONFIG_ROQ_DECODER
 1

	)

796 
	#CONFIG_RPZA_DECODER
 1

	)

797 
	#CONFIG_RSCC_DECODER
 1

	)

798 
	#CONFIG_RV10_DECODER
 1

	)

799 
	#CONFIG_RV20_DECODER
 1

	)

800 
	#CONFIG_RV30_DECODER
 1

	)

801 
	#CONFIG_RV40_DECODER
 1

	)

802 
	#CONFIG_S302M_DECODER
 1

	)

803 
	#CONFIG_SANM_DECODER
 1

	)

804 
	#CONFIG_SCREENPRESSO_DECODER
 1

	)

805 
	#CONFIG_SDX2_DPCM_DECODER
 1

	)

806 
	#CONFIG_SGI_DECODER
 1

	)

807 
	#CONFIG_SGIRLE_DECODER
 1

	)

808 
	#CONFIG_SMACKER_DECODER
 1

	)

809 
	#CONFIG_SMC_DECODER
 1

	)

810 
	#CONFIG_SMVJPEG_DECODER
 1

	)

811 
	#CONFIG_SNOW_DECODER
 1

	)

812 
	#CONFIG_SP5X_DECODER
 1

	)

813 
	#CONFIG_SUNRAST_DECODER
 1

	)

814 
	#CONFIG_SVQ1_DECODER
 1

	)

815 
	#CONFIG_SVQ3_DECODER
 1

	)

816 
	#CONFIG_TARGA_DECODER
 1

	)

817 
	#CONFIG_TARGA_Y216_DECODER
 1

	)

818 
	#CONFIG_TDSC_DECODER
 1

	)

819 
	#CONFIG_THEORA_DECODER
 1

	)

820 
	#CONFIG_THP_DECODER
 1

	)

821 
	#CONFIG_TIERTEXSEQVIDEO_DECODER
 1

	)

822 
	#CONFIG_TIFF_DECODER
 1

	)

823 
	#CONFIG_TMV_DECODER
 1

	)

824 
	#CONFIG_TRUEMOTION1_DECODER
 1

	)

825 
	#CONFIG_TRUEMOTION2_DECODER
 1

	)

826 
	#CONFIG_TSCC_DECODER
 1

	)

827 
	#CONFIG_TSCC2_DECODER
 1

	)

828 
	#CONFIG_TXD_DECODER
 1

	)

829 
	#CONFIG_ULTI_DECODER
 1

	)

830 
	#CONFIG_UTVIDEO_DECODER
 1

	)

831 
	#CONFIG_V210_DECODER
 1

	)

832 
	#CONFIG_V210X_DECODER
 1

	)

833 
	#CONFIG_V308_DECODER
 1

	)

834 
	#CONFIG_V408_DECODER
 1

	)

835 
	#CONFIG_V410_DECODER
 1

	)

836 
	#CONFIG_VB_DECODER
 1

	)

837 
	#CONFIG_VBLE_DECODER
 1

	)

838 
	#CONFIG_VC1_DECODER
 1

	)

839 
	#CONFIG_VC1_CRYSTALHD_DECODER
 0

	)

840 
	#CONFIG_VC1_VDPAU_DECODER
 0

	)

841 
	#CONFIG_VC1IMAGE_DECODER
 1

	)

842 
	#CONFIG_VC1_MMAL_DECODER
 0

	)

843 
	#CONFIG_VC1_QSV_DECODER
 0

	)

844 
	#CONFIG_VCR1_DECODER
 1

	)

845 
	#CONFIG_VMDVIDEO_DECODER
 1

	)

846 
	#CONFIG_VMNC_DECODER
 1

	)

847 
	#CONFIG_VP3_DECODER
 1

	)

848 
	#CONFIG_VP5_DECODER
 1

	)

849 
	#CONFIG_VP6_DECODER
 1

	)

850 
	#CONFIG_VP6A_DECODER
 1

	)

851 
	#CONFIG_VP6F_DECODER
 1

	)

852 
	#CONFIG_VP7_DECODER
 1

	)

853 
	#CONFIG_VP8_DECODER
 1

	)

854 
	#CONFIG_VP9_DECODER
 1

	)

855 
	#CONFIG_VQA_DECODER
 1

	)

856 
	#CONFIG_WEBP_DECODER
 1

	)

857 
	#CONFIG_WMV1_DECODER
 1

	)

858 
	#CONFIG_WMV2_DECODER
 1

	)

859 
	#CONFIG_WMV3_DECODER
 1

	)

860 
	#CONFIG_WMV3_CRYSTALHD_DECODER
 0

	)

861 
	#CONFIG_WMV3_VDPAU_DECODER
 0

	)

862 
	#CONFIG_WMV3IMAGE_DECODER
 1

	)

863 
	#CONFIG_WNV1_DECODER
 1

	)

864 
	#CONFIG_XAN_WC3_DECODER
 1

	)

865 
	#CONFIG_XAN_WC4_DECODER
 1

	)

866 
	#CONFIG_XBM_DECODER
 1

	)

867 
	#CONFIG_XFACE_DECODER
 1

	)

868 
	#CONFIG_XL_DECODER
 1

	)

869 
	#CONFIG_XWD_DECODER
 1

	)

870 
	#CONFIG_Y41P_DECODER
 1

	)

871 
	#CONFIG_YOP_DECODER
 1

	)

872 
	#CONFIG_YUV4_DECODER
 1

	)

873 
	#CONFIG_ZERO12V_DECODER
 1

	)

874 
	#CONFIG_ZEROCODEC_DECODER
 1

	)

875 
	#CONFIG_ZLIB_DECODER
 1

	)

876 
	#CONFIG_ZMBV_DECODER
 1

	)

877 
	#CONFIG_AAC_DECODER
 1

	)

878 
	#CONFIG_AAC_FIXED_DECODER
 1

	)

879 
	#CONFIG_AAC_LATM_DECODER
 1

	)

880 
	#CONFIG_AC3_DECODER
 1

	)

881 
	#CONFIG_AC3_FIXED_DECODER
 1

	)

882 
	#CONFIG_ALAC_DECODER
 1

	)

883 
	#CONFIG_ALS_DECODER
 1

	)

884 
	#CONFIG_AMRNB_DECODER
 1

	)

885 
	#CONFIG_AMRWB_DECODER
 1

	)

886 
	#CONFIG_APE_DECODER
 1

	)

887 
	#CONFIG_ATRAC1_DECODER
 1

	)

888 
	#CONFIG_ATRAC3_DECODER
 1

	)

889 
	#CONFIG_ATRAC3P_DECODER
 1

	)

890 
	#CONFIG_BINKAUDIO_DCT_DECODER
 1

	)

891 
	#CONFIG_BINKAUDIO_RDFT_DECODER
 1

	)

892 
	#CONFIG_BMV_AUDIO_DECODER
 1

	)

893 
	#CONFIG_COOK_DECODER
 1

	)

894 
	#CONFIG_DCA_DECODER
 1

	)

895 
	#CONFIG_DSD_LSBF_DECODER
 1

	)

896 
	#CONFIG_DSD_MSBF_DECODER
 1

	)

897 
	#CONFIG_DSD_LSBF_PLANAR_DECODER
 1

	)

898 
	#CONFIG_DSD_MSBF_PLANAR_DECODER
 1

	)

899 
	#CONFIG_DSICINAUDIO_DECODER
 1

	)

900 
	#CONFIG_DSS_SP_DECODER
 1

	)

901 
	#CONFIG_EAC3_DECODER
 1

	)

902 
	#CONFIG_EVRC_DECODER
 1

	)

903 
	#CONFIG_FFWAVESYNTH_DECODER
 1

	)

904 
	#CONFIG_FLAC_DECODER
 1

	)

905 
	#CONFIG_G723_1_DECODER
 1

	)

906 
	#CONFIG_G729_DECODER
 1

	)

907 
	#CONFIG_GSM_DECODER
 1

	)

908 
	#CONFIG_GSM_MS_DECODER
 1

	)

909 
	#CONFIG_IAC_DECODER
 1

	)

910 
	#CONFIG_IMC_DECODER
 1

	)

911 
	#CONFIG_INTERPLAY_ACM_DECODER
 1

	)

912 
	#CONFIG_MACE3_DECODER
 1

	)

913 
	#CONFIG_MACE6_DECODER
 1

	)

914 
	#CONFIG_METASOUND_DECODER
 1

	)

915 
	#CONFIG_MLP_DECODER
 1

	)

916 
	#CONFIG_MP1_DECODER
 1

	)

917 
	#CONFIG_MP1FLOAT_DECODER
 1

	)

918 
	#CONFIG_MP2_DECODER
 1

	)

919 
	#CONFIG_MP2FLOAT_DECODER
 1

	)

920 
	#CONFIG_MP3_DECODER
 1

	)

921 
	#CONFIG_MP3FLOAT_DECODER
 1

	)

922 
	#CONFIG_MP3ADU_DECODER
 1

	)

923 
	#CONFIG_MP3ADUFLOAT_DECODER
 1

	)

924 
	#CONFIG_MP3ON4_DECODER
 1

	)

925 
	#CONFIG_MP3ON4FLOAT_DECODER
 1

	)

926 
	#CONFIG_MPC7_DECODER
 1

	)

927 
	#CONFIG_MPC8_DECODER
 1

	)

928 
	#CONFIG_NELLYMOSER_DECODER
 1

	)

929 
	#CONFIG_ON2AVC_DECODER
 1

	)

930 
	#CONFIG_OPUS_DECODER
 1

	)

931 
	#CONFIG_PAF_AUDIO_DECODER
 1

	)

932 
	#CONFIG_QCELP_DECODER
 1

	)

933 
	#CONFIG_QDM2_DECODER
 1

	)

934 
	#CONFIG_RA_144_DECODER
 1

	)

935 
	#CONFIG_RA_288_DECODER
 1

	)

936 
	#CONFIG_RALF_DECODER
 1

	)

937 
	#CONFIG_SHORTEN_DECODER
 1

	)

938 
	#CONFIG_SIPR_DECODER
 1

	)

939 
	#CONFIG_SMACKAUD_DECODER
 1

	)

940 
	#CONFIG_SONIC_DECODER
 1

	)

941 
	#CONFIG_TAK_DECODER
 1

	)

942 
	#CONFIG_TRUEHD_DECODER
 1

	)

943 
	#CONFIG_TRUESPEECH_DECODER
 1

	)

944 
	#CONFIG_TTA_DECODER
 1

	)

945 
	#CONFIG_TWINVQ_DECODER
 1

	)

946 
	#CONFIG_VMDAUDIO_DECODER
 1

	)

947 
	#CONFIG_VORBIS_DECODER
 1

	)

948 
	#CONFIG_WAVPACK_DECODER
 1

	)

949 
	#CONFIG_WMALOSSLESS_DECODER
 1

	)

950 
	#CONFIG_WMAPRO_DECODER
 1

	)

951 
	#CONFIG_WMAV1_DECODER
 1

	)

952 
	#CONFIG_WMAV2_DECODER
 1

	)

953 
	#CONFIG_WMAVOICE_DECODER
 1

	)

954 
	#CONFIG_WS_SND1_DECODER
 1

	)

955 
	#CONFIG_XMA1_DECODER
 1

	)

956 
	#CONFIG_XMA2_DECODER
 1

	)

957 
	#CONFIG_PCM_ALAW_DECODER
 1

	)

958 
	#CONFIG_PCM_BLURAY_DECODER
 1

	)

959 
	#CONFIG_PCM_DVD_DECODER
 1

	)

960 
	#CONFIG_PCM_F32BE_DECODER
 1

	)

961 
	#CONFIG_PCM_F32LE_DECODER
 1

	)

962 
	#CONFIG_PCM_F64BE_DECODER
 1

	)

963 
	#CONFIG_PCM_F64LE_DECODER
 1

	)

964 
	#CONFIG_PCM_LXF_DECODER
 1

	)

965 
	#CONFIG_PCM_MULAW_DECODER
 1

	)

966 
	#CONFIG_PCM_S8_DECODER
 1

	)

967 
	#CONFIG_PCM_S8_PLANAR_DECODER
 1

	)

968 
	#CONFIG_PCM_S16BE_DECODER
 1

	)

969 
	#CONFIG_PCM_S16BE_PLANAR_DECODER
 1

	)

970 
	#CONFIG_PCM_S16LE_DECODER
 1

	)

971 
	#CONFIG_PCM_S16LE_PLANAR_DECODER
 1

	)

972 
	#CONFIG_PCM_S24BE_DECODER
 1

	)

973 
	#CONFIG_PCM_S24DAUD_DECODER
 1

	)

974 
	#CONFIG_PCM_S24LE_DECODER
 1

	)

975 
	#CONFIG_PCM_S24LE_PLANAR_DECODER
 1

	)

976 
	#CONFIG_PCM_S32BE_DECODER
 1

	)

977 
	#CONFIG_PCM_S32LE_DECODER
 1

	)

978 
	#CONFIG_PCM_S32LE_PLANAR_DECODER
 1

	)

979 
	#CONFIG_PCM_U8_DECODER
 1

	)

980 
	#CONFIG_PCM_U16BE_DECODER
 1

	)

981 
	#CONFIG_PCM_U16LE_DECODER
 1

	)

982 
	#CONFIG_PCM_U24BE_DECODER
 1

	)

983 
	#CONFIG_PCM_U24LE_DECODER
 1

	)

984 
	#CONFIG_PCM_U32BE_DECODER
 1

	)

985 
	#CONFIG_PCM_U32LE_DECODER
 1

	)

986 
	#CONFIG_PCM_ZORK_DECODER
 1

	)

987 
	#CONFIG_INTERPLAY_DPCM_DECODER
 1

	)

988 
	#CONFIG_ROQ_DPCM_DECODER
 1

	)

989 
	#CONFIG_SOL_DPCM_DECODER
 1

	)

990 
	#CONFIG_XAN_DPCM_DECODER
 1

	)

991 
	#CONFIG_ADPCM_4XM_DECODER
 1

	)

992 
	#CONFIG_ADPCM_ADX_DECODER
 1

	)

993 
	#CONFIG_ADPCM_AFC_DECODER
 1

	)

994 
	#CONFIG_ADPCM_AICA_DECODER
 1

	)

995 
	#CONFIG_ADPCM_CT_DECODER
 1

	)

996 
	#CONFIG_ADPCM_DTK_DECODER
 1

	)

997 
	#CONFIG_ADPCM_EA_DECODER
 1

	)

998 
	#CONFIG_ADPCM_EA_MAXIS_XA_DECODER
 1

	)

999 
	#CONFIG_ADPCM_EA_R1_DECODER
 1

	)

1000 
	#CONFIG_ADPCM_EA_R2_DECODER
 1

	)

1001 
	#CONFIG_ADPCM_EA_R3_DECODER
 1

	)

1002 
	#CONFIG_ADPCM_EA_XAS_DECODER
 1

	)

1003 
	#CONFIG_ADPCM_G722_DECODER
 1

	)

1004 
	#CONFIG_ADPCM_G726_DECODER
 1

	)

1005 
	#CONFIG_ADPCM_G726LE_DECODER
 1

	)

1006 
	#CONFIG_ADPCM_IMA_AMV_DECODER
 1

	)

1007 
	#CONFIG_ADPCM_IMA_APC_DECODER
 1

	)

1008 
	#CONFIG_ADPCM_IMA_DK3_DECODER
 1

	)

1009 
	#CONFIG_ADPCM_IMA_DK4_DECODER
 1

	)

1010 
	#CONFIG_ADPCM_IMA_EA_EACS_DECODER
 1

	)

1011 
	#CONFIG_ADPCM_IMA_EA_SEAD_DECODER
 1

	)

1012 
	#CONFIG_ADPCM_IMA_ISS_DECODER
 1

	)

1013 
	#CONFIG_ADPCM_IMA_OKI_DECODER
 1

	)

1014 
	#CONFIG_ADPCM_IMA_QT_DECODER
 1

	)

1015 
	#CONFIG_ADPCM_IMA_RAD_DECODER
 1

	)

1016 
	#CONFIG_ADPCM_IMA_SMJPEG_DECODER
 1

	)

1017 
	#CONFIG_ADPCM_IMA_WAV_DECODER
 1

	)

1018 
	#CONFIG_ADPCM_IMA_WS_DECODER
 1

	)

1019 
	#CONFIG_ADPCM_MS_DECODER
 1

	)

1020 
	#CONFIG_ADPCM_PSX_DECODER
 1

	)

1021 
	#CONFIG_ADPCM_SBPRO_2_DECODER
 1

	)

1022 
	#CONFIG_ADPCM_SBPRO_3_DECODER
 1

	)

1023 
	#CONFIG_ADPCM_SBPRO_4_DECODER
 1

	)

1024 
	#CONFIG_ADPCM_SWF_DECODER
 1

	)

1025 
	#CONFIG_ADPCM_THP_DECODER
 1

	)

1026 
	#CONFIG_ADPCM_THP_LE_DECODER
 1

	)

1027 
	#CONFIG_ADPCM_VIMA_DECODER
 1

	)

1028 
	#CONFIG_ADPCM_XA_DECODER
 1

	)

1029 
	#CONFIG_ADPCM_YAMAHA_DECODER
 1

	)

1030 
	#CONFIG_SSA_DECODER
 1

	)

1031 
	#CONFIG_ASS_DECODER
 1

	)

1032 
	#CONFIG_CCAPTION_DECODER
 1

	)

1033 
	#CONFIG_DVBSUB_DECODER
 1

	)

1034 
	#CONFIG_DVDSUB_DECODER
 1

	)

1035 
	#CONFIG_JACOSUB_DECODER
 1

	)

1036 
	#CONFIG_MICRODVD_DECODER
 1

	)

1037 
	#CONFIG_MOVTEXT_DECODER
 1

	)

1038 
	#CONFIG_MPL2_DECODER
 1

	)

1039 
	#CONFIG_PGSSUB_DECODER
 1

	)

1040 
	#CONFIG_PJS_DECODER
 1

	)

1041 
	#CONFIG_REALTEXT_DECODER
 1

	)

1042 
	#CONFIG_SAMI_DECODER
 1

	)

1043 
	#CONFIG_SRT_DECODER
 1

	)

1044 
	#CONFIG_STL_DECODER
 1

	)

1045 
	#CONFIG_SUBRIP_DECODER
 1

	)

1046 
	#CONFIG_SUBVIEWER_DECODER
 1

	)

1047 
	#CONFIG_SUBVIEWER1_DECODER
 1

	)

1048 
	#CONFIG_TEXT_DECODER
 1

	)

1049 
	#CONFIG_VPLAYER_DECODER
 1

	)

1050 
	#CONFIG_WEBVTT_DECODER
 1

	)

1051 
	#CONFIG_XSUB_DECODER
 1

	)

1052 
	#CONFIG_LIBCELT_DECODER
 1

	)

1053 
	#CONFIG_LIBDCADEC_DECODER
 1

	)

1054 
	#CONFIG_LIBFDK_AAC_DECODER
 0

	)

1055 
	#CONFIG_LIBGSM_DECODER
 1

	)

1056 
	#CONFIG_LIBGSM_MS_DECODER
 1

	)

1057 
	#CONFIG_LIBILBC_DECODER
 0

	)

1058 
	#CONFIG_LIBOPENCORE_AMRNB_DECODER
 1

	)

1059 
	#CONFIG_LIBOPENCORE_AMRWB_DECODER
 1

	)

1060 
	#CONFIG_LIBOPENJPEG_DECODER
 0

	)

1061 
	#CONFIG_LIBOPUS_DECODER
 1

	)

1062 
	#CONFIG_LIBSCHROEDINGER_DECODER
 1

	)

1063 
	#CONFIG_LIBSPEEX_DECODER
 1

	)

1064 
	#CONFIG_LIBUTVIDEO_DECODER
 0

	)

1065 
	#CONFIG_LIBVORBIS_DECODER
 1

	)

1066 
	#CONFIG_LIBVPX_VP8_DECODER
 1

	)

1067 
	#CONFIG_LIBVPX_VP9_DECODER
 1

	)

1068 
	#CONFIG_LIBZVBI_TELETEXT_DECODER
 0

	)

1069 
	#CONFIG_BINTEXT_DECODER
 1

	)

1070 
	#CONFIG_XBIN_DECODER
 1

	)

1071 
	#CONFIG_IDF_DECODER
 1

	)

1072 
	#CONFIG_AA_DEMUXER
 1

	)

1073 
	#CONFIG_AAC_DEMUXER
 1

	)

1074 
	#CONFIG_AC3_DEMUXER
 1

	)

1075 
	#CONFIG_ACM_DEMUXER
 1

	)

1076 
	#CONFIG_ACT_DEMUXER
 1

	)

1077 
	#CONFIG_ADF_DEMUXER
 1

	)

1078 
	#CONFIG_ADP_DEMUXER
 1

	)

1079 
	#CONFIG_ADS_DEMUXER
 1

	)

1080 
	#CONFIG_ADX_DEMUXER
 1

	)

1081 
	#CONFIG_AEA_DEMUXER
 1

	)

1082 
	#CONFIG_AFC_DEMUXER
 1

	)

1083 
	#CONFIG_AIFF_DEMUXER
 1

	)

1084 
	#CONFIG_AMR_DEMUXER
 1

	)

1085 
	#CONFIG_ANM_DEMUXER
 1

	)

1086 
	#CONFIG_APC_DEMUXER
 1

	)

1087 
	#CONFIG_APE_DEMUXER
 1

	)

1088 
	#CONFIG_APNG_DEMUXER
 1

	)

1089 
	#CONFIG_AQTITLE_DEMUXER
 1

	)

1090 
	#CONFIG_ASF_DEMUXER
 1

	)

1091 
	#CONFIG_ASF_O_DEMUXER
 1

	)

1092 
	#CONFIG_ASS_DEMUXER
 1

	)

1093 
	#CONFIG_AST_DEMUXER
 1

	)

1094 
	#CONFIG_AU_DEMUXER
 1

	)

1095 
	#CONFIG_AVI_DEMUXER
 1

	)

1096 
	#CONFIG_AVISYNTH_DEMUXER
 0

	)

1097 
	#CONFIG_AVR_DEMUXER
 1

	)

1098 
	#CONFIG_AVS_DEMUXER
 1

	)

1099 
	#CONFIG_BETHSOFTVID_DEMUXER
 1

	)

1100 
	#CONFIG_BFI_DEMUXER
 1

	)

1101 
	#CONFIG_BINTEXT_DEMUXER
 1

	)

1102 
	#CONFIG_BINK_DEMUXER
 1

	)

1103 
	#CONFIG_BIT_DEMUXER
 1

	)

1104 
	#CONFIG_BMV_DEMUXER
 1

	)

1105 
	#CONFIG_BFSTM_DEMUXER
 1

	)

1106 
	#CONFIG_BRSTM_DEMUXER
 1

	)

1107 
	#CONFIG_BOA_DEMUXER
 1

	)

1108 
	#CONFIG_C93_DEMUXER
 1

	)

1109 
	#CONFIG_CAF_DEMUXER
 1

	)

1110 
	#CONFIG_CAVSVIDEO_DEMUXER
 1

	)

1111 
	#CONFIG_CDG_DEMUXER
 1

	)

1112 
	#CONFIG_CDXL_DEMUXER
 1

	)

1113 
	#CONFIG_CINE_DEMUXER
 1

	)

1114 
	#CONFIG_CONCAT_DEMUXER
 1

	)

1115 
	#CONFIG_DATA_DEMUXER
 1

	)

1116 
	#CONFIG_DAUD_DEMUXER
 1

	)

1117 
	#CONFIG_DCSTR_DEMUXER
 1

	)

1118 
	#CONFIG_DFA_DEMUXER
 1

	)

1119 
	#CONFIG_DIRAC_DEMUXER
 1

	)

1120 
	#CONFIG_DNXHD_DEMUXER
 1

	)

1121 
	#CONFIG_DSF_DEMUXER
 1

	)

1122 
	#CONFIG_DSICIN_DEMUXER
 1

	)

1123 
	#CONFIG_DSS_DEMUXER
 1

	)

1124 
	#CONFIG_DTS_DEMUXER
 1

	)

1125 
	#CONFIG_DTSHD_DEMUXER
 1

	)

1126 
	#CONFIG_DV_DEMUXER
 1

	)

1127 
	#CONFIG_DVBSUB_DEMUXER
 1

	)

1128 
	#CONFIG_DXA_DEMUXER
 1

	)

1129 
	#CONFIG_EA_DEMUXER
 1

	)

1130 
	#CONFIG_EA_CDATA_DEMUXER
 1

	)

1131 
	#CONFIG_EAC3_DEMUXER
 1

	)

1132 
	#CONFIG_EPAF_DEMUXER
 1

	)

1133 
	#CONFIG_FFM_DEMUXER
 1

	)

1134 
	#CONFIG_FFMETADATA_DEMUXER
 1

	)

1135 
	#CONFIG_FILMSTRIP_DEMUXER
 1

	)

1136 
	#CONFIG_FLAC_DEMUXER
 1

	)

1137 
	#CONFIG_FLIC_DEMUXER
 1

	)

1138 
	#CONFIG_FLV_DEMUXER
 1

	)

1139 
	#CONFIG_LIVE_FLV_DEMUXER
 1

	)

1140 
	#CONFIG_FOURXM_DEMUXER
 1

	)

1141 
	#CONFIG_FRM_DEMUXER
 1

	)

1142 
	#CONFIG_FSB_DEMUXER
 1

	)

1143 
	#CONFIG_G722_DEMUXER
 1

	)

1144 
	#CONFIG_G723_1_DEMUXER
 1

	)

1145 
	#CONFIG_G729_DEMUXER
 1

	)

1146 
	#CONFIG_GENH_DEMUXER
 1

	)

1147 
	#CONFIG_GIF_DEMUXER
 1

	)

1148 
	#CONFIG_GSM_DEMUXER
 1

	)

1149 
	#CONFIG_GXF_DEMUXER
 1

	)

1150 
	#CONFIG_H261_DEMUXER
 1

	)

1151 
	#CONFIG_H263_DEMUXER
 1

	)

1152 
	#CONFIG_H264_DEMUXER
 1

	)

1153 
	#CONFIG_HEVC_DEMUXER
 1

	)

1154 
	#CONFIG_HLS_DEMUXER
 1

	)

1155 
	#CONFIG_HNM_DEMUXER
 1

	)

1156 
	#CONFIG_ICO_DEMUXER
 1

	)

1157 
	#CONFIG_IDCIN_DEMUXER
 1

	)

1158 
	#CONFIG_IDF_DEMUXER
 1

	)

1159 
	#CONFIG_IFF_DEMUXER
 1

	)

1160 
	#CONFIG_ILBC_DEMUXER
 1

	)

1161 
	#CONFIG_IMAGE2_DEMUXER
 1

	)

1162 
	#CONFIG_IMAGE2PIPE_DEMUXER
 1

	)

1163 
	#CONFIG_IMAGE2_ALIAS_PIX_DEMUXER
 1

	)

1164 
	#CONFIG_IMAGE2_BRENDER_PIX_DEMUXER
 1

	)

1165 
	#CONFIG_INGENIENT_DEMUXER
 1

	)

1166 
	#CONFIG_IPMOVIE_DEMUXER
 1

	)

1167 
	#CONFIG_IRCAM_DEMUXER
 1

	)

1168 
	#CONFIG_ISS_DEMUXER
 1

	)

1169 
	#CONFIG_IV8_DEMUXER
 1

	)

1170 
	#CONFIG_IVF_DEMUXER
 1

	)

1171 
	#CONFIG_IVR_DEMUXER
 1

	)

1172 
	#CONFIG_JACOSUB_DEMUXER
 1

	)

1173 
	#CONFIG_JV_DEMUXER
 1

	)

1174 
	#CONFIG_LMLM4_DEMUXER
 1

	)

1175 
	#CONFIG_LOAS_DEMUXER
 1

	)

1176 
	#CONFIG_LRC_DEMUXER
 1

	)

1177 
	#CONFIG_LVF_DEMUXER
 1

	)

1178 
	#CONFIG_LXF_DEMUXER
 1

	)

1179 
	#CONFIG_M4V_DEMUXER
 1

	)

1180 
	#CONFIG_MATROSKA_DEMUXER
 1

	)

1181 
	#CONFIG_MGSTS_DEMUXER
 1

	)

1182 
	#CONFIG_MICRODVD_DEMUXER
 1

	)

1183 
	#CONFIG_MJPEG_DEMUXER
 1

	)

1184 
	#CONFIG_MLP_DEMUXER
 1

	)

1185 
	#CONFIG_MLV_DEMUXER
 1

	)

1186 
	#CONFIG_MM_DEMUXER
 1

	)

1187 
	#CONFIG_MMF_DEMUXER
 1

	)

1188 
	#CONFIG_MOV_DEMUXER
 1

	)

1189 
	#CONFIG_MP3_DEMUXER
 1

	)

1190 
	#CONFIG_MPC_DEMUXER
 1

	)

1191 
	#CONFIG_MPC8_DEMUXER
 1

	)

1192 
	#CONFIG_MPEGPS_DEMUXER
 1

	)

1193 
	#CONFIG_MPEGTS_DEMUXER
 1

	)

1194 
	#CONFIG_MPEGTSRAW_DEMUXER
 1

	)

1195 
	#CONFIG_MPEGVIDEO_DEMUXER
 1

	)

1196 
	#CONFIG_MPJPEG_DEMUXER
 1

	)

1197 
	#CONFIG_MPL2_DEMUXER
 1

	)

1198 
	#CONFIG_MPSUB_DEMUXER
 1

	)

1199 
	#CONFIG_MSF_DEMUXER
 1

	)

1200 
	#CONFIG_MSNWC_TCP_DEMUXER
 1

	)

1201 
	#CONFIG_MTV_DEMUXER
 1

	)

1202 
	#CONFIG_MV_DEMUXER
 1

	)

1203 
	#CONFIG_MVI_DEMUXER
 1

	)

1204 
	#CONFIG_MXF_DEMUXER
 1

	)

1205 
	#CONFIG_MXG_DEMUXER
 1

	)

1206 
	#CONFIG_NC_DEMUXER
 1

	)

1207 
	#CONFIG_NISTSPHERE_DEMUXER
 1

	)

1208 
	#CONFIG_NSV_DEMUXER
 1

	)

1209 
	#CONFIG_NUT_DEMUXER
 1

	)

1210 
	#CONFIG_NUV_DEMUXER
 1

	)

1211 
	#CONFIG_OGG_DEMUXER
 1

	)

1212 
	#CONFIG_OMA_DEMUXER
 1

	)

1213 
	#CONFIG_PAF_DEMUXER
 1

	)

1214 
	#CONFIG_PCM_ALAW_DEMUXER
 1

	)

1215 
	#CONFIG_PCM_MULAW_DEMUXER
 1

	)

1216 
	#CONFIG_PCM_F64BE_DEMUXER
 1

	)

1217 
	#CONFIG_PCM_F64LE_DEMUXER
 1

	)

1218 
	#CONFIG_PCM_F32BE_DEMUXER
 1

	)

1219 
	#CONFIG_PCM_F32LE_DEMUXER
 1

	)

1220 
	#CONFIG_PCM_S32BE_DEMUXER
 1

	)

1221 
	#CONFIG_PCM_S32LE_DEMUXER
 1

	)

1222 
	#CONFIG_PCM_S24BE_DEMUXER
 1

	)

1223 
	#CONFIG_PCM_S24LE_DEMUXER
 1

	)

1224 
	#CONFIG_PCM_S16BE_DEMUXER
 1

	)

1225 
	#CONFIG_PCM_S16LE_DEMUXER
 1

	)

1226 
	#CONFIG_PCM_S8_DEMUXER
 1

	)

1227 
	#CONFIG_PCM_U32BE_DEMUXER
 1

	)

1228 
	#CONFIG_PCM_U32LE_DEMUXER
 1

	)

1229 
	#CONFIG_PCM_U24BE_DEMUXER
 1

	)

1230 
	#CONFIG_PCM_U24LE_DEMUXER
 1

	)

1231 
	#CONFIG_PCM_U16BE_DEMUXER
 1

	)

1232 
	#CONFIG_PCM_U16LE_DEMUXER
 1

	)

1233 
	#CONFIG_PCM_U8_DEMUXER
 1

	)

1234 
	#CONFIG_PJS_DEMUXER
 1

	)

1235 
	#CONFIG_PMP_DEMUXER
 1

	)

1236 
	#CONFIG_PVA_DEMUXER
 1

	)

1237 
	#CONFIG_PVF_DEMUXER
 1

	)

1238 
	#CONFIG_QCP_DEMUXER
 1

	)

1239 
	#CONFIG_R3D_DEMUXER
 1

	)

1240 
	#CONFIG_RAWVIDEO_DEMUXER
 1

	)

1241 
	#CONFIG_REALTEXT_DEMUXER
 1

	)

1242 
	#CONFIG_REDSPARK_DEMUXER
 1

	)

1243 
	#CONFIG_RL2_DEMUXER
 1

	)

1244 
	#CONFIG_RM_DEMUXER
 1

	)

1245 
	#CONFIG_ROQ_DEMUXER
 1

	)

1246 
	#CONFIG_RPL_DEMUXER
 1

	)

1247 
	#CONFIG_RSD_DEMUXER
 1

	)

1248 
	#CONFIG_RSO_DEMUXER
 1

	)

1249 
	#CONFIG_RTP_DEMUXER
 1

	)

1250 
	#CONFIG_RTSP_DEMUXER
 1

	)

1251 
	#CONFIG_SAMI_DEMUXER
 1

	)

1252 
	#CONFIG_SAP_DEMUXER
 1

	)

1253 
	#CONFIG_SBG_DEMUXER
 1

	)

1254 
	#CONFIG_SDP_DEMUXER
 1

	)

1255 
	#CONFIG_SDR2_DEMUXER
 1

	)

1256 
	#CONFIG_SEGAFILM_DEMUXER
 1

	)

1257 
	#CONFIG_SHORTEN_DEMUXER
 1

	)

1258 
	#CONFIG_SIFF_DEMUXER
 1

	)

1259 
	#CONFIG_SLN_DEMUXER
 1

	)

1260 
	#CONFIG_SMACKER_DEMUXER
 1

	)

1261 
	#CONFIG_SMJPEG_DEMUXER
 1

	)

1262 
	#CONFIG_SMUSH_DEMUXER
 1

	)

1263 
	#CONFIG_SOL_DEMUXER
 1

	)

1264 
	#CONFIG_SOX_DEMUXER
 1

	)

1265 
	#CONFIG_SPDIF_DEMUXER
 1

	)

1266 
	#CONFIG_SRT_DEMUXER
 1

	)

1267 
	#CONFIG_STR_DEMUXER
 1

	)

1268 
	#CONFIG_STL_DEMUXER
 1

	)

1269 
	#CONFIG_SUBVIEWER1_DEMUXER
 1

	)

1270 
	#CONFIG_SUBVIEWER_DEMUXER
 1

	)

1271 
	#CONFIG_SUP_DEMUXER
 1

	)

1272 
	#CONFIG_SVAG_DEMUXER
 1

	)

1273 
	#CONFIG_SWF_DEMUXER
 1

	)

1274 
	#CONFIG_TAK_DEMUXER
 1

	)

1275 
	#CONFIG_TEDCAPTIONS_DEMUXER
 1

	)

1276 
	#CONFIG_THP_DEMUXER
 1

	)

1277 
	#CONFIG_THREEDOSTR_DEMUXER
 1

	)

1278 
	#CONFIG_TIERTEXSEQ_DEMUXER
 1

	)

1279 
	#CONFIG_TMV_DEMUXER
 1

	)

1280 
	#CONFIG_TRUEHD_DEMUXER
 1

	)

1281 
	#CONFIG_TTA_DEMUXER
 1

	)

1282 
	#CONFIG_TXD_DEMUXER
 1

	)

1283 
	#CONFIG_TTY_DEMUXER
 1

	)

1284 
	#CONFIG_V210_DEMUXER
 1

	)

1285 
	#CONFIG_V210X_DEMUXER
 1

	)

1286 
	#CONFIG_VAG_DEMUXER
 1

	)

1287 
	#CONFIG_VC1_DEMUXER
 1

	)

1288 
	#CONFIG_VC1T_DEMUXER
 1

	)

1289 
	#CONFIG_VIVO_DEMUXER
 1

	)

1290 
	#CONFIG_VMD_DEMUXER
 1

	)

1291 
	#CONFIG_VOBSUB_DEMUXER
 1

	)

1292 
	#CONFIG_VOC_DEMUXER
 1

	)

1293 
	#CONFIG_VPK_DEMUXER
 1

	)

1294 
	#CONFIG_VPLAYER_DEMUXER
 1

	)

1295 
	#CONFIG_VQF_DEMUXER
 1

	)

1296 
	#CONFIG_W64_DEMUXER
 1

	)

1297 
	#CONFIG_WAV_DEMUXER
 1

	)

1298 
	#CONFIG_WC3_DEMUXER
 1

	)

1299 
	#CONFIG_WEBM_DASH_MANIFEST_DEMUXER
 1

	)

1300 
	#CONFIG_WEBVTT_DEMUXER
 1

	)

1301 
	#CONFIG_WSAUD_DEMUXER
 1

	)

1302 
	#CONFIG_WSVQA_DEMUXER
 1

	)

1303 
	#CONFIG_WTV_DEMUXER
 1

	)

1304 
	#CONFIG_WVE_DEMUXER
 1

	)

1305 
	#CONFIG_WV_DEMUXER
 1

	)

1306 
	#CONFIG_XA_DEMUXER
 1

	)

1307 
	#CONFIG_XBIN_DEMUXER
 1

	)

1308 
	#CONFIG_XMV_DEMUXER
 1

	)

1309 
	#CONFIG_XVAG_DEMUXER
 1

	)

1310 
	#CONFIG_XWMA_DEMUXER
 1

	)

1311 
	#CONFIG_YOP_DEMUXER
 1

	)

1312 
	#CONFIG_YUV4MPEGPIPE_DEMUXER
 1

	)

1313 
	#CONFIG_IMAGE_BMP_PIPE_DEMUXER
 1

	)

1314 
	#CONFIG_IMAGE_DDS_PIPE_DEMUXER
 1

	)

1315 
	#CONFIG_IMAGE_DPX_PIPE_DEMUXER
 1

	)

1316 
	#CONFIG_IMAGE_EXR_PIPE_DEMUXER
 1

	)

1317 
	#CONFIG_IMAGE_J2K_PIPE_DEMUXER
 1

	)

1318 
	#CONFIG_IMAGE_JPEG_PIPE_DEMUXER
 1

	)

1319 
	#CONFIG_IMAGE_JPEGLS_PIPE_DEMUXER
 1

	)

1320 
	#CONFIG_IMAGE_PICTOR_PIPE_DEMUXER
 1

	)

1321 
	#CONFIG_IMAGE_PNG_PIPE_DEMUXER
 1

	)

1322 
	#CONFIG_IMAGE_QDRAW_PIPE_DEMUXER
 1

	)

1323 
	#CONFIG_IMAGE_SGI_PIPE_DEMUXER
 1

	)

1324 
	#CONFIG_IMAGE_SUNRAST_PIPE_DEMUXER
 1

	)

1325 
	#CONFIG_IMAGE_TIFF_PIPE_DEMUXER
 1

	)

1326 
	#CONFIG_IMAGE_WEBP_PIPE_DEMUXER
 1

	)

1327 
	#CONFIG_LIBGME_DEMUXER
 0

	)

1328 
	#CONFIG_LIBMODPLUG_DEMUXER
 1

	)

1329 
	#CONFIG_LIBNUT_DEMUXER
 0

	)

1330 
	#CONFIG_A64MULTI_ENCODER
 1

	)

1331 
	#CONFIG_A64MULTI5_ENCODER
 1

	)

1332 
	#CONFIG_ALIAS_PIX_ENCODER
 1

	)

1333 
	#CONFIG_AMV_ENCODER
 1

	)

1334 
	#CONFIG_APNG_ENCODER
 1

	)

1335 
	#CONFIG_ASV1_ENCODER
 1

	)

1336 
	#CONFIG_ASV2_ENCODER
 1

	)

1337 
	#CONFIG_AVRP_ENCODER
 1

	)

1338 
	#CONFIG_AVUI_ENCODER
 1

	)

1339 
	#CONFIG_AYUV_ENCODER
 1

	)

1340 
	#CONFIG_BMP_ENCODER
 1

	)

1341 
	#CONFIG_CINEPAK_ENCODER
 1

	)

1342 
	#CONFIG_CLJR_ENCODER
 1

	)

1343 
	#CONFIG_COMFORTNOISE_ENCODER
 1

	)

1344 
	#CONFIG_DNXHD_ENCODER
 1

	)

1345 
	#CONFIG_DPX_ENCODER
 1

	)

1346 
	#CONFIG_DVVIDEO_ENCODER
 1

	)

1347 
	#CONFIG_FFV1_ENCODER
 1

	)

1348 
	#CONFIG_FFVHUFF_ENCODER
 1

	)

1349 
	#CONFIG_FLASHSV_ENCODER
 1

	)

1350 
	#CONFIG_FLASHSV2_ENCODER
 1

	)

1351 
	#CONFIG_FLV_ENCODER
 1

	)

1352 
	#CONFIG_GIF_ENCODER
 1

	)

1353 
	#CONFIG_H261_ENCODER
 1

	)

1354 
	#CONFIG_H263_ENCODER
 1

	)

1355 
	#CONFIG_H263P_ENCODER
 1

	)

1356 
	#CONFIG_HAP_ENCODER
 0

	)

1357 
	#CONFIG_HUFFYUV_ENCODER
 1

	)

1358 
	#CONFIG_JPEG2000_ENCODER
 1

	)

1359 
	#CONFIG_JPEGLS_ENCODER
 1

	)

1360 
	#CONFIG_LJPEG_ENCODER
 1

	)

1361 
	#CONFIG_MJPEG_ENCODER
 1

	)

1362 
	#CONFIG_MPEG1VIDEO_ENCODER
 1

	)

1363 
	#CONFIG_MPEG2VIDEO_ENCODER
 1

	)

1364 
	#CONFIG_MPEG4_ENCODER
 1

	)

1365 
	#CONFIG_MSMPEG4V2_ENCODER
 1

	)

1366 
	#CONFIG_MSMPEG4V3_ENCODER
 1

	)

1367 
	#CONFIG_MSVIDEO1_ENCODER
 1

	)

1368 
	#CONFIG_PAM_ENCODER
 1

	)

1369 
	#CONFIG_PBM_ENCODER
 1

	)

1370 
	#CONFIG_PCX_ENCODER
 1

	)

1371 
	#CONFIG_PGM_ENCODER
 1

	)

1372 
	#CONFIG_PGMYUV_ENCODER
 1

	)

1373 
	#CONFIG_PNG_ENCODER
 1

	)

1374 
	#CONFIG_PPM_ENCODER
 1

	)

1375 
	#CONFIG_PRORES_ENCODER
 1

	)

1376 
	#CONFIG_PRORES_AW_ENCODER
 1

	)

1377 
	#CONFIG_PRORES_KS_ENCODER
 1

	)

1378 
	#CONFIG_QTRLE_ENCODER
 1

	)

1379 
	#CONFIG_R10K_ENCODER
 1

	)

1380 
	#CONFIG_R210_ENCODER
 1

	)

1381 
	#CONFIG_RAWVIDEO_ENCODER
 1

	)

1382 
	#CONFIG_ROQ_ENCODER
 1

	)

1383 
	#CONFIG_RV10_ENCODER
 1

	)

1384 
	#CONFIG_RV20_ENCODER
 1

	)

1385 
	#CONFIG_S302M_ENCODER
 1

	)

1386 
	#CONFIG_SGI_ENCODER
 1

	)

1387 
	#CONFIG_SNOW_ENCODER
 1

	)

1388 
	#CONFIG_SUNRAST_ENCODER
 1

	)

1389 
	#CONFIG_SVQ1_ENCODER
 1

	)

1390 
	#CONFIG_TARGA_ENCODER
 1

	)

1391 
	#CONFIG_TIFF_ENCODER
 1

	)

1392 
	#CONFIG_UTVIDEO_ENCODER
 1

	)

1393 
	#CONFIG_V210_ENCODER
 1

	)

1394 
	#CONFIG_V308_ENCODER
 1

	)

1395 
	#CONFIG_V408_ENCODER
 1

	)

1396 
	#CONFIG_V410_ENCODER
 1

	)

1397 
	#CONFIG_VC2_ENCODER
 1

	)

1398 
	#CONFIG_WRAPPED_AVFRAME_ENCODER
 1

	)

1399 
	#CONFIG_WMV1_ENCODER
 1

	)

1400 
	#CONFIG_WMV2_ENCODER
 1

	)

1401 
	#CONFIG_XBM_ENCODER
 1

	)

1402 
	#CONFIG_XFACE_ENCODER
 1

	)

1403 
	#CONFIG_XWD_ENCODER
 1

	)

1404 
	#CONFIG_Y41P_ENCODER
 1

	)

1405 
	#CONFIG_YUV4_ENCODER
 1

	)

1406 
	#CONFIG_ZLIB_ENCODER
 1

	)

1407 
	#CONFIG_ZMBV_ENCODER
 1

	)

1408 
	#CONFIG_AAC_ENCODER
 1

	)

1409 
	#CONFIG_AC3_ENCODER
 1

	)

1410 
	#CONFIG_AC3_FIXED_ENCODER
 1

	)

1411 
	#CONFIG_ALAC_ENCODER
 1

	)

1412 
	#CONFIG_DCA_ENCODER
 1

	)

1413 
	#CONFIG_EAC3_ENCODER
 1

	)

1414 
	#CONFIG_FLAC_ENCODER
 1

	)

1415 
	#CONFIG_G723_1_ENCODER
 1

	)

1416 
	#CONFIG_MP2_ENCODER
 1

	)

1417 
	#CONFIG_MP2FIXED_ENCODER
 1

	)

1418 
	#CONFIG_NELLYMOSER_ENCODER
 1

	)

1419 
	#CONFIG_RA_144_ENCODER
 1

	)

1420 
	#CONFIG_SONIC_ENCODER
 1

	)

1421 
	#CONFIG_SONIC_LS_ENCODER
 1

	)

1422 
	#CONFIG_TTA_ENCODER
 1

	)

1423 
	#CONFIG_VORBIS_ENCODER
 1

	)

1424 
	#CONFIG_WAVPACK_ENCODER
 1

	)

1425 
	#CONFIG_WMAV1_ENCODER
 1

	)

1426 
	#CONFIG_WMAV2_ENCODER
 1

	)

1427 
	#CONFIG_PCM_ALAW_ENCODER
 1

	)

1428 
	#CONFIG_PCM_F32BE_ENCODER
 1

	)

1429 
	#CONFIG_PCM_F32LE_ENCODER
 1

	)

1430 
	#CONFIG_PCM_F64BE_ENCODER
 1

	)

1431 
	#CONFIG_PCM_F64LE_ENCODER
 1

	)

1432 
	#CONFIG_PCM_MULAW_ENCODER
 1

	)

1433 
	#CONFIG_PCM_S8_ENCODER
 1

	)

1434 
	#CONFIG_PCM_S8_PLANAR_ENCODER
 1

	)

1435 
	#CONFIG_PCM_S16BE_ENCODER
 1

	)

1436 
	#CONFIG_PCM_S16BE_PLANAR_ENCODER
 1

	)

1437 
	#CONFIG_PCM_S16LE_ENCODER
 1

	)

1438 
	#CONFIG_PCM_S16LE_PLANAR_ENCODER
 1

	)

1439 
	#CONFIG_PCM_S24BE_ENCODER
 1

	)

1440 
	#CONFIG_PCM_S24DAUD_ENCODER
 1

	)

1441 
	#CONFIG_PCM_S24LE_ENCODER
 1

	)

1442 
	#CONFIG_PCM_S24LE_PLANAR_ENCODER
 1

	)

1443 
	#CONFIG_PCM_S32BE_ENCODER
 1

	)

1444 
	#CONFIG_PCM_S32LE_ENCODER
 1

	)

1445 
	#CONFIG_PCM_S32LE_PLANAR_ENCODER
 1

	)

1446 
	#CONFIG_PCM_U8_ENCODER
 1

	)

1447 
	#CONFIG_PCM_U16BE_ENCODER
 1

	)

1448 
	#CONFIG_PCM_U16LE_ENCODER
 1

	)

1449 
	#CONFIG_PCM_U24BE_ENCODER
 1

	)

1450 
	#CONFIG_PCM_U24LE_ENCODER
 1

	)

1451 
	#CONFIG_PCM_U32BE_ENCODER
 1

	)

1452 
	#CONFIG_PCM_U32LE_ENCODER
 1

	)

1453 
	#CONFIG_ROQ_DPCM_ENCODER
 1

	)

1454 
	#CONFIG_ADPCM_ADX_ENCODER
 1

	)

1455 
	#CONFIG_ADPCM_G722_ENCODER
 1

	)

1456 
	#CONFIG_ADPCM_G726_ENCODER
 1

	)

1457 
	#CONFIG_ADPCM_IMA_QT_ENCODER
 1

	)

1458 
	#CONFIG_ADPCM_IMA_WAV_ENCODER
 1

	)

1459 
	#CONFIG_ADPCM_MS_ENCODER
 1

	)

1460 
	#CONFIG_ADPCM_SWF_ENCODER
 1

	)

1461 
	#CONFIG_ADPCM_YAMAHA_ENCODER
 1

	)

1462 
	#CONFIG_SSA_ENCODER
 1

	)

1463 
	#CONFIG_ASS_ENCODER
 1

	)

1464 
	#CONFIG_DVBSUB_ENCODER
 1

	)

1465 
	#CONFIG_DVDSUB_ENCODER
 1

	)

1466 
	#CONFIG_MOVTEXT_ENCODER
 1

	)

1467 
	#CONFIG_SRT_ENCODER
 1

	)

1468 
	#CONFIG_SUBRIP_ENCODER
 1

	)

1469 
	#CONFIG_TEXT_ENCODER
 1

	)

1470 
	#CONFIG_WEBVTT_ENCODER
 1

	)

1471 
	#CONFIG_XSUB_ENCODER
 1

	)

1472 
	#CONFIG_LIBFAAC_ENCODER
 0

	)

1473 
	#CONFIG_LIBFDK_AAC_ENCODER
 0

	)

1474 
	#CONFIG_LIBGSM_ENCODER
 1

	)

1475 
	#CONFIG_LIBGSM_MS_ENCODER
 1

	)

1476 
	#CONFIG_LIBILBC_ENCODER
 0

	)

1477 
	#CONFIG_LIBMP3LAME_ENCODER
 1

	)

1478 
	#CONFIG_LIBOPENCORE_AMRNB_ENCODER
 1

	)

1479 
	#CONFIG_LIBOPENJPEG_ENCODER
 0

	)

1480 
	#CONFIG_LIBOPUS_ENCODER
 1

	)

1481 
	#CONFIG_LIBSCHROEDINGER_ENCODER
 1

	)

1482 
	#CONFIG_LIBSHINE_ENCODER
 0

	)

1483 
	#CONFIG_LIBSPEEX_ENCODER
 1

	)

1484 
	#CONFIG_LIBTHEORA_ENCODER
 1

	)

1485 
	#CONFIG_LIBTWOLAME_ENCODER
 0

	)

1486 
	#CONFIG_LIBUTVIDEO_ENCODER
 0

	)

1487 
	#CONFIG_LIBVO_AMRWBENC_ENCODER
 0

	)

1488 
	#CONFIG_LIBVORBIS_ENCODER
 1

	)

1489 
	#CONFIG_LIBVPX_VP8_ENCODER
 1

	)

1490 
	#CONFIG_LIBVPX_VP9_ENCODER
 1

	)

1491 
	#CONFIG_LIBWAVPACK_ENCODER
 1

	)

1492 
	#CONFIG_LIBWEBP_ANIM_ENCODER
 0

	)

1493 
	#CONFIG_LIBWEBP_ENCODER
 0

	)

1494 
	#CONFIG_LIBX262_ENCODER
 0

	)

1495 
	#CONFIG_LIBX264_ENCODER
 1

	)

1496 
	#CONFIG_LIBX264RGB_ENCODER
 1

	)

1497 
	#CONFIG_LIBX265_ENCODER
 1

	)

1498 
	#CONFIG_LIBXAVS_ENCODER
 0

	)

1499 
	#CONFIG_LIBXVID_ENCODER
 1

	)

1500 
	#CONFIG_LIBOPENH264_ENCODER
 0

	)

1501 
	#CONFIG_H264_QSV_ENCODER
 0

	)

1502 
	#CONFIG_NVENC_ENCODER
 0

	)

1503 
	#CONFIG_NVENC_H264_ENCODER
 0

	)

1504 
	#CONFIG_NVENC_HEVC_ENCODER
 0

	)

1505 
	#CONFIG_HEVC_QSV_ENCODER
 0

	)

1506 
	#CONFIG_LIBKVAZAAR_ENCODER
 0

	)

1507 
	#CONFIG_MPEG2_QSV_ENCODER
 0

	)

1508 
	#CONFIG_ACOMPRESSOR_FILTER
 1

	)

1509 
	#CONFIG_ACROSSFADE_FILTER
 1

	)

1510 
	#CONFIG_ADELAY_FILTER
 1

	)

1511 
	#CONFIG_AECHO_FILTER
 1

	)

1512 
	#CONFIG_AEMPHASIS_FILTER
 1

	)

1513 
	#CONFIG_AEVAL_FILTER
 1

	)

1514 
	#CONFIG_AFADE_FILTER
 1

	)

1515 
	#CONFIG_AFFTFILT_FILTER
 1

	)

1516 
	#CONFIG_AFORMAT_FILTER
 1

	)

1517 
	#CONFIG_AGATE_FILTER
 1

	)

1518 
	#CONFIG_AINTERLEAVE_FILTER
 1

	)

1519 
	#CONFIG_ALIMITER_FILTER
 1

	)

1520 
	#CONFIG_ALLPASS_FILTER
 1

	)

1521 
	#CONFIG_AMERGE_FILTER
 1

	)

1522 
	#CONFIG_AMETADATA_FILTER
 1

	)

1523 
	#CONFIG_AMIX_FILTER
 1

	)

1524 
	#CONFIG_ANEQUALIZER_FILTER
 1

	)

1525 
	#CONFIG_ANULL_FILTER
 1

	)

1526 
	#CONFIG_APAD_FILTER
 1

	)

1527 
	#CONFIG_APERMS_FILTER
 1

	)

1528 
	#CONFIG_APHASER_FILTER
 1

	)

1529 
	#CONFIG_APULSATOR_FILTER
 1

	)

1530 
	#CONFIG_AREALTIME_FILTER
 1

	)

1531 
	#CONFIG_ARESAMPLE_FILTER
 1

	)

1532 
	#CONFIG_AREVERSE_FILTER
 1

	)

1533 
	#CONFIG_ASELECT_FILTER
 1

	)

1534 
	#CONFIG_ASENDCMD_FILTER
 1

	)

1535 
	#CONFIG_ASETNSAMPLES_FILTER
 1

	)

1536 
	#CONFIG_ASETPTS_FILTER
 1

	)

1537 
	#CONFIG_ASETRATE_FILTER
 1

	)

1538 
	#CONFIG_ASETTB_FILTER
 1

	)

1539 
	#CONFIG_ASHOWINFO_FILTER
 1

	)

1540 
	#CONFIG_ASPLIT_FILTER
 1

	)

1541 
	#CONFIG_ASTATS_FILTER
 1

	)

1542 
	#CONFIG_ASTREAMSELECT_FILTER
 1

	)

1543 
	#CONFIG_ASYNCTS_FILTER
 1

	)

1544 
	#CONFIG_ATEMPO_FILTER
 1

	)

1545 
	#CONFIG_ATRIM_FILTER
 1

	)

1546 
	#CONFIG_AZMQ_FILTER
 0

	)

1547 
	#CONFIG_BANDPASS_FILTER
 1

	)

1548 
	#CONFIG_BANDREJECT_FILTER
 1

	)

1549 
	#CONFIG_BASS_FILTER
 1

	)

1550 
	#CONFIG_BIQUAD_FILTER
 1

	)

1551 
	#CONFIG_BS2B_FILTER
 0

	)

1552 
	#CONFIG_CHANNELMAP_FILTER
 1

	)

1553 
	#CONFIG_CHANNELSPLIT_FILTER
 1

	)

1554 
	#CONFIG_CHORUS_FILTER
 1

	)

1555 
	#CONFIG_COMPAND_FILTER
 1

	)

1556 
	#CONFIG_COMPENSATIONDELAY_FILTER
 1

	)

1557 
	#CONFIG_DCSHIFT_FILTER
 1

	)

1558 
	#CONFIG_DYNAUDNORM_FILTER
 1

	)

1559 
	#CONFIG_EARWAX_FILTER
 1

	)

1560 
	#CONFIG_EBUR128_FILTER
 1

	)

1561 
	#CONFIG_EQUALIZER_FILTER
 1

	)

1562 
	#CONFIG_EXTRASTEREO_FILTER
 1

	)

1563 
	#CONFIG_FLANGER_FILTER
 1

	)

1564 
	#CONFIG_HIGHPASS_FILTER
 1

	)

1565 
	#CONFIG_JOIN_FILTER
 1

	)

1566 
	#CONFIG_LADSPA_FILTER
 0

	)

1567 
	#CONFIG_LOWPASS_FILTER
 1

	)

1568 
	#CONFIG_PAN_FILTER
 1

	)

1569 
	#CONFIG_REPLAYGAIN_FILTER
 1

	)

1570 
	#CONFIG_RESAMPLE_FILTER
 1

	)

1571 
	#CONFIG_RUBBERBAND_FILTER
 0

	)

1572 
	#CONFIG_SIDECHAINCOMPRESS_FILTER
 1

	)

1573 
	#CONFIG_SIDECHAINGATE_FILTER
 1

	)

1574 
	#CONFIG_SILENCEDETECT_FILTER
 1

	)

1575 
	#CONFIG_SILENCEREMOVE_FILTER
 1

	)

1576 
	#CONFIG_SOFALIZER_FILTER
 0

	)

1577 
	#CONFIG_STEREOTOOLS_FILTER
 1

	)

1578 
	#CONFIG_STEREOWIDEN_FILTER
 1

	)

1579 
	#CONFIG_TREBLE_FILTER
 1

	)

1580 
	#CONFIG_TREMOLO_FILTER
 1

	)

1581 
	#CONFIG_VIBRATO_FILTER
 1

	)

1582 
	#CONFIG_VOLUME_FILTER
 1

	)

1583 
	#CONFIG_VOLUMEDETECT_FILTER
 1

	)

1584 
	#CONFIG_AEVALSRC_FILTER
 1

	)

1585 
	#CONFIG_ANOISESRC_FILTER
 1

	)

1586 
	#CONFIG_ANULLSRC_FILTER
 1

	)

1587 
	#CONFIG_FLITE_FILTER
 0

	)

1588 
	#CONFIG_SINE_FILTER
 1

	)

1589 
	#CONFIG_ANULLSINK_FILTER
 1

	)

1590 
	#CONFIG_ALPHAEXTRACT_FILTER
 1

	)

1591 
	#CONFIG_ALPHAMERGE_FILTER
 1

	)

1592 
	#CONFIG_ATADENOISE_FILTER
 1

	)

1593 
	#CONFIG_ASS_FILTER
 1

	)

1594 
	#CONFIG_BBOX_FILTER
 1

	)

1595 
	#CONFIG_BLACKDETECT_FILTER
 1

	)

1596 
	#CONFIG_BLACKFRAME_FILTER
 1

	)

1597 
	#CONFIG_BLEND_FILTER
 1

	)

1598 
	#CONFIG_BOXBLUR_FILTER
 1

	)

1599 
	#CONFIG_CHROMAKEY_FILTER
 1

	)

1600 
	#CONFIG_CODECVIEW_FILTER
 1

	)

1601 
	#CONFIG_COLORBALANCE_FILTER
 1

	)

1602 
	#CONFIG_COLORCHANNELMIXER_FILTER
 1

	)

1603 
	#CONFIG_COLORKEY_FILTER
 1

	)

1604 
	#CONFIG_COLORLEVELS_FILTER
 1

	)

1605 
	#CONFIG_COLORMATRIX_FILTER
 1

	)

1606 
	#CONFIG_CONVOLUTION_FILTER
 1

	)

1607 
	#CONFIG_COPY_FILTER
 1

	)

1608 
	#CONFIG_COVER_RECT_FILTER
 1

	)

1609 
	#CONFIG_CROP_FILTER
 1

	)

1610 
	#CONFIG_CROPDETECT_FILTER
 1

	)

1611 
	#CONFIG_CURVES_FILTER
 1

	)

1612 
	#CONFIG_DCTDNOIZ_FILTER
 1

	)

1613 
	#CONFIG_DEBAND_FILTER
 1

	)

1614 
	#CONFIG_DECIMATE_FILTER
 1

	)

1615 
	#CONFIG_DEFLATE_FILTER
 1

	)

1616 
	#CONFIG_DEJUDDER_FILTER
 1

	)

1617 
	#CONFIG_DELOGO_FILTER
 1

	)

1618 
	#CONFIG_DESHAKE_FILTER
 1

	)

1619 
	#CONFIG_DETELECINE_FILTER
 1

	)

1620 
	#CONFIG_DILATION_FILTER
 1

	)

1621 
	#CONFIG_DISPLACE_FILTER
 1

	)

1622 
	#CONFIG_DRAWBOX_FILTER
 1

	)

1623 
	#CONFIG_DRAWGRAPH_FILTER
 1

	)

1624 
	#CONFIG_DRAWGRID_FILTER
 1

	)

1625 
	#CONFIG_DRAWTEXT_FILTER
 1

	)

1626 
	#CONFIG_EDGEDETECT_FILTER
 1

	)

1627 
	#CONFIG_ELBG_FILTER
 1

	)

1628 
	#CONFIG_EQ_FILTER
 1

	)

1629 
	#CONFIG_EROSION_FILTER
 1

	)

1630 
	#CONFIG_EXTRACTPLANES_FILTER
 1

	)

1631 
	#CONFIG_FADE_FILTER
 1

	)

1632 
	#CONFIG_FFTFILT_FILTER
 1

	)

1633 
	#CONFIG_FIELD_FILTER
 1

	)

1634 
	#CONFIG_FIELDMATCH_FILTER
 1

	)

1635 
	#CONFIG_FIELDORDER_FILTER
 1

	)

1636 
	#CONFIG_FIND_RECT_FILTER
 1

	)

1637 
	#CONFIG_FORMAT_FILTER
 1

	)

1638 
	#CONFIG_FPS_FILTER
 1

	)

1639 
	#CONFIG_FRAMEPACK_FILTER
 1

	)

1640 
	#CONFIG_FRAMERATE_FILTER
 1

	)

1641 
	#CONFIG_FRAMESTEP_FILTER
 1

	)

1642 
	#CONFIG_FREI0R_FILTER
 0

	)

1643 
	#CONFIG_FSPP_FILTER
 1

	)

1644 
	#CONFIG_GEQ_FILTER
 1

	)

1645 
	#CONFIG_GRADFUN_FILTER
 1

	)

1646 
	#CONFIG_HALDCLUT_FILTER
 1

	)

1647 
	#CONFIG_HFLIP_FILTER
 1

	)

1648 
	#CONFIG_HISTEQ_FILTER
 1

	)

1649 
	#CONFIG_HISTOGRAM_FILTER
 1

	)

1650 
	#CONFIG_HQDN3D_FILTER
 1

	)

1651 
	#CONFIG_HQX_FILTER
 1

	)

1652 
	#CONFIG_HSTACK_FILTER
 1

	)

1653 
	#CONFIG_HUE_FILTER
 1

	)

1654 
	#CONFIG_IDET_FILTER
 1

	)

1655 
	#CONFIG_IL_FILTER
 1

	)

1656 
	#CONFIG_INFLATE_FILTER
 1

	)

1657 
	#CONFIG_INTERLACE_FILTER
 1

	)

1658 
	#CONFIG_INTERLEAVE_FILTER
 1

	)

1659 
	#CONFIG_KERNDEINT_FILTER
 1

	)

1660 
	#CONFIG_LENSCORRECTION_FILTER
 1

	)

1661 
	#CONFIG_LUT3D_FILTER
 1

	)

1662 
	#CONFIG_LUT_FILTER
 1

	)

1663 
	#CONFIG_LUTRGB_FILTER
 1

	)

1664 
	#CONFIG_LUTYUV_FILTER
 1

	)

1665 
	#CONFIG_MASKEDMERGE_FILTER
 1

	)

1666 
	#CONFIG_MCDEINT_FILTER
 1

	)

1667 
	#CONFIG_MERGEPLANES_FILTER
 1

	)

1668 
	#CONFIG_METADATA_FILTER
 1

	)

1669 
	#CONFIG_MPDECIMATE_FILTER
 1

	)

1670 
	#CONFIG_NEGATE_FILTER
 1

	)

1671 
	#CONFIG_NNEDI_FILTER
 1

	)

1672 
	#CONFIG_NOFORMAT_FILTER
 1

	)

1673 
	#CONFIG_NOISE_FILTER
 1

	)

1674 
	#CONFIG_NULL_FILTER
 1

	)

1675 
	#CONFIG_OCR_FILTER
 0

	)

1676 
	#CONFIG_OCV_FILTER
 0

	)

1677 
	#CONFIG_OVERLAY_FILTER
 1

	)

1678 
	#CONFIG_OWDENOISE_FILTER
 1

	)

1679 
	#CONFIG_PAD_FILTER
 1

	)

1680 
	#CONFIG_PALETTEGEN_FILTER
 1

	)

1681 
	#CONFIG_PALETTEUSE_FILTER
 1

	)

1682 
	#CONFIG_PERMS_FILTER
 1

	)

1683 
	#CONFIG_PERSPECTIVE_FILTER
 1

	)

1684 
	#CONFIG_PHASE_FILTER
 1

	)

1685 
	#CONFIG_PIXDESCTEST_FILTER
 1

	)

1686 
	#CONFIG_PP_FILTER
 1

	)

1687 
	#CONFIG_PP7_FILTER
 1

	)

1688 
	#CONFIG_PSNR_FILTER
 1

	)

1689 
	#CONFIG_PULLUP_FILTER
 1

	)

1690 
	#CONFIG_QP_FILTER
 1

	)

1691 
	#CONFIG_RANDOM_FILTER
 1

	)

1692 
	#CONFIG_REALTIME_FILTER
 1

	)

1693 
	#CONFIG_REMOVEGRAIN_FILTER
 1

	)

1694 
	#CONFIG_REMOVELOGO_FILTER
 1

	)

1695 
	#CONFIG_REPEATFIELDS_FILTER
 1

	)

1696 
	#CONFIG_REVERSE_FILTER
 1

	)

1697 
	#CONFIG_ROTATE_FILTER
 1

	)

1698 
	#CONFIG_SAB_FILTER
 1

	)

1699 
	#CONFIG_SCALE_FILTER
 1

	)

1700 
	#CONFIG_SCALE2REF_FILTER
 1

	)

1701 
	#CONFIG_SELECT_FILTER
 1

	)

1702 
	#CONFIG_SELECTIVECOLOR_FILTER
 1

	)

1703 
	#CONFIG_SENDCMD_FILTER
 1

	)

1704 
	#CONFIG_SEPARATEFIELDS_FILTER
 1

	)

1705 
	#CONFIG_SETDAR_FILTER
 1

	)

1706 
	#CONFIG_SETFIELD_FILTER
 1

	)

1707 
	#CONFIG_SETPTS_FILTER
 1

	)

1708 
	#CONFIG_SETSAR_FILTER
 1

	)

1709 
	#CONFIG_SETTB_FILTER
 1

	)

1710 
	#CONFIG_SHOWINFO_FILTER
 1

	)

1711 
	#CONFIG_SHOWPALETTE_FILTER
 1

	)

1712 
	#CONFIG_SHUFFLEFRAMES_FILTER
 1

	)

1713 
	#CONFIG_SHUFFLEPLANES_FILTER
 1

	)

1714 
	#CONFIG_SIGNALSTATS_FILTER
 1

	)

1715 
	#CONFIG_SMARTBLUR_FILTER
 1

	)

1716 
	#CONFIG_SPLIT_FILTER
 1

	)

1717 
	#CONFIG_SPP_FILTER
 1

	)

1718 
	#CONFIG_SSIM_FILTER
 1

	)

1719 
	#CONFIG_STEREO3D_FILTER
 1

	)

1720 
	#CONFIG_STREAMSELECT_FILTER
 1

	)

1721 
	#CONFIG_SUBTITLES_FILTER
 1

	)

1722 
	#CONFIG_SUPER2XSAI_FILTER
 1

	)

1723 
	#CONFIG_SWAPRECT_FILTER
 1

	)

1724 
	#CONFIG_SWAPUV_FILTER
 1

	)

1725 
	#CONFIG_TBLEND_FILTER
 1

	)

1726 
	#CONFIG_TELECINE_FILTER
 1

	)

1727 
	#CONFIG_THUMBNAIL_FILTER
 1

	)

1728 
	#CONFIG_TILE_FILTER
 1

	)

1729 
	#CONFIG_TINTERLACE_FILTER
 1

	)

1730 
	#CONFIG_TRANSPOSE_FILTER
 1

	)

1731 
	#CONFIG_TRIM_FILTER
 1

	)

1732 
	#CONFIG_UNSHARP_FILTER
 1

	)

1733 
	#CONFIG_USPP_FILTER
 1

	)

1734 
	#CONFIG_VECTORSCOPE_FILTER
 1

	)

1735 
	#CONFIG_VFLIP_FILTER
 1

	)

1736 
	#CONFIG_VIDSTABDETECT_FILTER
 0

	)

1737 
	#CONFIG_VIDSTABTRANSFORM_FILTER
 0

	)

1738 
	#CONFIG_VIGNETTE_FILTER
 1

	)

1739 
	#CONFIG_VSTACK_FILTER
 1

	)

1740 
	#CONFIG_W3FDIF_FILTER
 1

	)

1741 
	#CONFIG_WAVEFORM_FILTER
 1

	)

1742 
	#CONFIG_XBR_FILTER
 1

	)

1743 
	#CONFIG_YADIF_FILTER
 1

	)

1744 
	#CONFIG_ZMQ_FILTER
 0

	)

1745 
	#CONFIG_ZOOMPAN_FILTER
 1

	)

1746 
	#CONFIG_ZSCALE_FILTER
 0

	)

1747 
	#CONFIG_ALLRGB_FILTER
 1

	)

1748 
	#CONFIG_ALLYUV_FILTER
 1

	)

1749 
	#CONFIG_CELLAUTO_FILTER
 1

	)

1750 
	#CONFIG_COLOR_FILTER
 1

	)

1751 
	#CONFIG_FREI0R_SRC_FILTER
 0

	)

1752 
	#CONFIG_HALDCLUTSRC_FILTER
 1

	)

1753 
	#CONFIG_LIFE_FILTER
 1

	)

1754 
	#CONFIG_MANDELBROT_FILTER
 1

	)

1755 
	#CONFIG_MPTESTSRC_FILTER
 1

	)

1756 
	#CONFIG_NULLSRC_FILTER
 1

	)

1757 
	#CONFIG_RGBTESTSRC_FILTER
 1

	)

1758 
	#CONFIG_SMPTEBARS_FILTER
 1

	)

1759 
	#CONFIG_SMPTEHDBARS_FILTER
 1

	)

1760 
	#CONFIG_TESTSRC_FILTER
 1

	)

1761 
	#CONFIG_TESTSRC2_FILTER
 1

	)

1762 
	#CONFIG_NULLSINK_FILTER
 1

	)

1763 
	#CONFIG_ADRAWGRAPH_FILTER
 1

	)

1764 
	#CONFIG_AHISTOGRAM_FILTER
 1

	)

1765 
	#CONFIG_APHASEMETER_FILTER
 1

	)

1766 
	#CONFIG_AVECTORSCOPE_FILTER
 1

	)

1767 
	#CONFIG_CONCAT_FILTER
 1

	)

1768 
	#CONFIG_SHOWCQT_FILTER
 1

	)

1769 
	#CONFIG_SHOWFREQS_FILTER
 1

	)

1770 
	#CONFIG_SHOWSPECTRUM_FILTER
 1

	)

1771 
	#CONFIG_SHOWSPECTRUMPIC_FILTER
 1

	)

1772 
	#CONFIG_SHOWVOLUME_FILTER
 1

	)

1773 
	#CONFIG_SHOWWAVES_FILTER
 1

	)

1774 
	#CONFIG_SHOWWAVESPIC_FILTER
 1

	)

1775 
	#CONFIG_SPECTRUMSYNTH_FILTER
 1

	)

1776 
	#CONFIG_AMOVIE_FILTER
 1

	)

1777 
	#CONFIG_MOVIE_FILTER
 1

	)

1778 
	#CONFIG_H263_VAAPI_HWACCEL
 0

	)

1779 
	#CONFIG_H263_VIDEOTOOLBOX_HWACCEL
 0

	)

1780 
	#CONFIG_H264_D3D11VA_HWACCEL
 1

	)

1781 
	#CONFIG_H264_DXVA2_HWACCEL
 1

	)

1782 
	#CONFIG_H264_MMAL_HWACCEL
 0

	)

1783 
	#CONFIG_H264_QSV_HWACCEL
 0

	)

1784 
	#CONFIG_H264_VAAPI_HWACCEL
 0

	)

1785 
	#CONFIG_H264_VDA_HWACCEL
 0

	)

1786 
	#CONFIG_H264_VDA_OLD_HWACCEL
 0

	)

1787 
	#CONFIG_H264_VDPAU_HWACCEL
 0

	)

1788 
	#CONFIG_H264_VIDEOTOOLBOX_HWACCEL
 0

	)

1789 
	#CONFIG_HEVC_D3D11VA_HWACCEL
 1

	)

1790 
	#CONFIG_HEVC_DXVA2_HWACCEL
 1

	)

1791 
	#CONFIG_HEVC_QSV_HWACCEL
 0

	)

1792 
	#CONFIG_HEVC_VAAPI_HWACCEL
 0

	)

1793 
	#CONFIG_HEVC_VDPAU_HWACCEL
 0

	)

1794 
	#CONFIG_MPEG1_XVMC_HWACCEL
 0

	)

1795 
	#CONFIG_MPEG1_VDPAU_HWACCEL
 0

	)

1796 
	#CONFIG_MPEG1_VIDEOTOOLBOX_HWACCEL
 0

	)

1797 
	#CONFIG_MPEG2_XVMC_HWACCEL
 0

	)

1798 
	#CONFIG_MPEG2_D3D11VA_HWACCEL
 1

	)

1799 
	#CONFIG_MPEG2_DXVA2_HWACCEL
 1

	)

1800 
	#CONFIG_MPEG2_MMAL_HWACCEL
 0

	)

1801 
	#CONFIG_MPEG2_QSV_HWACCEL
 0

	)

1802 
	#CONFIG_MPEG2_VAAPI_HWACCEL
 0

	)

1803 
	#CONFIG_MPEG2_VDPAU_HWACCEL
 0

	)

1804 
	#CONFIG_MPEG2_VIDEOTOOLBOX_HWACCEL
 0

	)

1805 
	#CONFIG_MPEG4_MMAL_HWACCEL
 0

	)

1806 
	#CONFIG_MPEG4_VAAPI_HWACCEL
 0

	)

1807 
	#CONFIG_MPEG4_VDPAU_HWACCEL
 0

	)

1808 
	#CONFIG_MPEG4_VIDEOTOOLBOX_HWACCEL
 0

	)

1809 
	#CONFIG_VC1_D3D11VA_HWACCEL
 1

	)

1810 
	#CONFIG_VC1_DXVA2_HWACCEL
 1

	)

1811 
	#CONFIG_VC1_VAAPI_HWACCEL
 0

	)

1812 
	#CONFIG_VC1_VDPAU_HWACCEL
 0

	)

1813 
	#CONFIG_VC1_MMAL_HWACCEL
 0

	)

1814 
	#CONFIG_VC1_QSV_HWACCEL
 0

	)

1815 
	#CONFIG_VP9_D3D11VA_HWACCEL
 1

	)

1816 
	#CONFIG_VP9_DXVA2_HWACCEL
 1

	)

1817 
	#CONFIG_VP9_VAAPI_HWACCEL
 0

	)

1818 
	#CONFIG_WMV3_D3D11VA_HWACCEL
 1

	)

1819 
	#CONFIG_WMV3_DXVA2_HWACCEL
 1

	)

1820 
	#CONFIG_WMV3_VAAPI_HWACCEL
 0

	)

1821 
	#CONFIG_WMV3_VDPAU_HWACCEL
 0

	)

1822 
	#CONFIG_ALSA_INDEV
 0

	)

1823 
	#CONFIG_AVFOUNDATION_INDEV
 0

	)

1824 
	#CONFIG_BKTR_INDEV
 0

	)

1825 
	#CONFIG_DECKLINK_INDEV
 0

	)

1826 
	#CONFIG_DSHOW_INDEV
 1

	)

1827 
	#CONFIG_DV1394_INDEV
 0

	)

1828 
	#CONFIG_FBDEV_INDEV
 0

	)

1829 
	#CONFIG_GDIGRAB_INDEV
 1

	)

1830 
	#CONFIG_IEC61883_INDEV
 0

	)

1831 
	#CONFIG_JACK_INDEV
 0

	)

1832 
	#CONFIG_LAVFI_INDEV
 1

	)

1833 
	#CONFIG_OPENAL_INDEV
 1

	)

1834 
	#CONFIG_OSS_INDEV
 0

	)

1835 
	#CONFIG_PULSE_INDEV
 0

	)

1836 
	#CONFIG_QTKIT_INDEV
 0

	)

1837 
	#CONFIG_SNDIO_INDEV
 0

	)

1838 
	#CONFIG_V4L2_INDEV
 0

	)

1839 
	#CONFIG_VFWCAP_INDEV
 1

	)

1840 
	#CONFIG_X11GRAB_INDEV
 0

	)

1841 
	#CONFIG_X11GRAB_XCB_INDEV
 0

	)

1842 
	#CONFIG_LIBCDIO_INDEV
 0

	)

1843 
	#CONFIG_LIBDC1394_INDEV
 0

	)

1844 
	#CONFIG_A64_MUXER
 1

	)

1845 
	#CONFIG_AC3_MUXER
 1

	)

1846 
	#CONFIG_ADTS_MUXER
 1

	)

1847 
	#CONFIG_ADX_MUXER
 1

	)

1848 
	#CONFIG_AIFF_MUXER
 1

	)

1849 
	#CONFIG_AMR_MUXER
 1

	)

1850 
	#CONFIG_APNG_MUXER
 1

	)

1851 
	#CONFIG_ASF_MUXER
 1

	)

1852 
	#CONFIG_ASS_MUXER
 1

	)

1853 
	#CONFIG_AST_MUXER
 1

	)

1854 
	#CONFIG_ASF_STREAM_MUXER
 1

	)

1855 
	#CONFIG_AU_MUXER
 1

	)

1856 
	#CONFIG_AVI_MUXER
 1

	)

1857 
	#CONFIG_AVM2_MUXER
 1

	)

1858 
	#CONFIG_BIT_MUXER
 1

	)

1859 
	#CONFIG_CAF_MUXER
 1

	)

1860 
	#CONFIG_CAVSVIDEO_MUXER
 1

	)

1861 
	#CONFIG_CRC_MUXER
 1

	)

1862 
	#CONFIG_DASH_MUXER
 1

	)

1863 
	#CONFIG_DATA_MUXER
 1

	)

1864 
	#CONFIG_DAUD_MUXER
 1

	)

1865 
	#CONFIG_DIRAC_MUXER
 1

	)

1866 
	#CONFIG_DNXHD_MUXER
 1

	)

1867 
	#CONFIG_DTS_MUXER
 1

	)

1868 
	#CONFIG_DV_MUXER
 1

	)

1869 
	#CONFIG_EAC3_MUXER
 1

	)

1870 
	#CONFIG_F4V_MUXER
 1

	)

1871 
	#CONFIG_FFM_MUXER
 1

	)

1872 
	#CONFIG_FFMETADATA_MUXER
 1

	)

1873 
	#CONFIG_FILMSTRIP_MUXER
 1

	)

1874 
	#CONFIG_FLAC_MUXER
 1

	)

1875 
	#CONFIG_FLV_MUXER
 1

	)

1876 
	#CONFIG_FRAMECRC_MUXER
 1

	)

1877 
	#CONFIG_FRAMEMD5_MUXER
 1

	)

1878 
	#CONFIG_G722_MUXER
 1

	)

1879 
	#CONFIG_G723_1_MUXER
 1

	)

1880 
	#CONFIG_GIF_MUXER
 1

	)

1881 
	#CONFIG_GXF_MUXER
 1

	)

1882 
	#CONFIG_H261_MUXER
 1

	)

1883 
	#CONFIG_H263_MUXER
 1

	)

1884 
	#CONFIG_H264_MUXER
 1

	)

1885 
	#CONFIG_HDS_MUXER
 1

	)

1886 
	#CONFIG_HEVC_MUXER
 1

	)

1887 
	#CONFIG_HLS_MUXER
 1

	)

1888 
	#CONFIG_ICO_MUXER
 1

	)

1889 
	#CONFIG_ILBC_MUXER
 1

	)

1890 
	#CONFIG_IMAGE2_MUXER
 1

	)

1891 
	#CONFIG_IMAGE2PIPE_MUXER
 1

	)

1892 
	#CONFIG_IPOD_MUXER
 1

	)

1893 
	#CONFIG_IRCAM_MUXER
 1

	)

1894 
	#CONFIG_ISMV_MUXER
 1

	)

1895 
	#CONFIG_IVF_MUXER
 1

	)

1896 
	#CONFIG_JACOSUB_MUXER
 1

	)

1897 
	#CONFIG_LATM_MUXER
 1

	)

1898 
	#CONFIG_LRC_MUXER
 1

	)

1899 
	#CONFIG_M4V_MUXER
 1

	)

1900 
	#CONFIG_MD5_MUXER
 1

	)

1901 
	#CONFIG_MATROSKA_MUXER
 1

	)

1902 
	#CONFIG_MATROSKA_AUDIO_MUXER
 1

	)

1903 
	#CONFIG_MICRODVD_MUXER
 1

	)

1904 
	#CONFIG_MJPEG_MUXER
 1

	)

1905 
	#CONFIG_MLP_MUXER
 1

	)

1906 
	#CONFIG_MMF_MUXER
 1

	)

1907 
	#CONFIG_MOV_MUXER
 1

	)

1908 
	#CONFIG_MP2_MUXER
 1

	)

1909 
	#CONFIG_MP3_MUXER
 1

	)

1910 
	#CONFIG_MP4_MUXER
 1

	)

1911 
	#CONFIG_MPEG1SYSTEM_MUXER
 1

	)

1912 
	#CONFIG_MPEG1VCD_MUXER
 1

	)

1913 
	#CONFIG_MPEG1VIDEO_MUXER
 1

	)

1914 
	#CONFIG_MPEG2DVD_MUXER
 1

	)

1915 
	#CONFIG_MPEG2SVCD_MUXER
 1

	)

1916 
	#CONFIG_MPEG2VIDEO_MUXER
 1

	)

1917 
	#CONFIG_MPEG2VOB_MUXER
 1

	)

1918 
	#CONFIG_MPEGTS_MUXER
 1

	)

1919 
	#CONFIG_MPJPEG_MUXER
 1

	)

1920 
	#CONFIG_MXF_MUXER
 1

	)

1921 
	#CONFIG_MXF_D10_MUXER
 1

	)

1922 
	#CONFIG_MXF_OPATOM_MUXER
 1

	)

1923 
	#CONFIG_NULL_MUXER
 1

	)

1924 
	#CONFIG_NUT_MUXER
 1

	)

1925 
	#CONFIG_OGA_MUXER
 1

	)

1926 
	#CONFIG_OGG_MUXER
 1

	)

1927 
	#CONFIG_OMA_MUXER
 1

	)

1928 
	#CONFIG_OPUS_MUXER
 1

	)

1929 
	#CONFIG_PCM_ALAW_MUXER
 1

	)

1930 
	#CONFIG_PCM_MULAW_MUXER
 1

	)

1931 
	#CONFIG_PCM_F64BE_MUXER
 1

	)

1932 
	#CONFIG_PCM_F64LE_MUXER
 1

	)

1933 
	#CONFIG_PCM_F32BE_MUXER
 1

	)

1934 
	#CONFIG_PCM_F32LE_MUXER
 1

	)

1935 
	#CONFIG_PCM_S32BE_MUXER
 1

	)

1936 
	#CONFIG_PCM_S32LE_MUXER
 1

	)

1937 
	#CONFIG_PCM_S24BE_MUXER
 1

	)

1938 
	#CONFIG_PCM_S24LE_MUXER
 1

	)

1939 
	#CONFIG_PCM_S16BE_MUXER
 1

	)

1940 
	#CONFIG_PCM_S16LE_MUXER
 1

	)

1941 
	#CONFIG_PCM_S8_MUXER
 1

	)

1942 
	#CONFIG_PCM_U32BE_MUXER
 1

	)

1943 
	#CONFIG_PCM_U32LE_MUXER
 1

	)

1944 
	#CONFIG_PCM_U24BE_MUXER
 1

	)

1945 
	#CONFIG_PCM_U24LE_MUXER
 1

	)

1946 
	#CONFIG_PCM_U16BE_MUXER
 1

	)

1947 
	#CONFIG_PCM_U16LE_MUXER
 1

	)

1948 
	#CONFIG_PCM_U8_MUXER
 1

	)

1949 
	#CONFIG_PSP_MUXER
 1

	)

1950 
	#CONFIG_RAWVIDEO_MUXER
 1

	)

1951 
	#CONFIG_RM_MUXER
 1

	)

1952 
	#CONFIG_ROQ_MUXER
 1

	)

1953 
	#CONFIG_RSO_MUXER
 1

	)

1954 
	#CONFIG_RTP_MUXER
 1

	)

1955 
	#CONFIG_RTP_MPEGTS_MUXER
 1

	)

1956 
	#CONFIG_RTSP_MUXER
 1

	)

1957 
	#CONFIG_SAP_MUXER
 1

	)

1958 
	#CONFIG_SEGMENT_MUXER
 1

	)

1959 
	#CONFIG_STREAM_SEGMENT_MUXER
 1

	)

1960 
	#CONFIG_SINGLEJPEG_MUXER
 1

	)

1961 
	#CONFIG_SMJPEG_MUXER
 1

	)

1962 
	#CONFIG_SMOOTHSTREAMING_MUXER
 1

	)

1963 
	#CONFIG_SOX_MUXER
 1

	)

1964 
	#CONFIG_SPX_MUXER
 1

	)

1965 
	#CONFIG_SPDIF_MUXER
 1

	)

1966 
	#CONFIG_SRT_MUXER
 1

	)

1967 
	#CONFIG_SWF_MUXER
 1

	)

1968 
	#CONFIG_TEE_MUXER
 1

	)

1969 
	#CONFIG_TG2_MUXER
 1

	)

1970 
	#CONFIG_TGP_MUXER
 1

	)

1971 
	#CONFIG_MKVTIMESTAMP_V2_MUXER
 1

	)

1972 
	#CONFIG_TRUEHD_MUXER
 1

	)

1973 
	#CONFIG_UNCODEDFRAMECRC_MUXER
 1

	)

1974 
	#CONFIG_VC1_MUXER
 1

	)

1975 
	#CONFIG_VC1T_MUXER
 1

	)

1976 
	#CONFIG_VOC_MUXER
 1

	)

1977 
	#CONFIG_W64_MUXER
 1

	)

1978 
	#CONFIG_WAV_MUXER
 1

	)

1979 
	#CONFIG_WEBM_MUXER
 1

	)

1980 
	#CONFIG_WEBM_DASH_MANIFEST_MUXER
 1

	)

1981 
	#CONFIG_WEBM_CHUNK_MUXER
 1

	)

1982 
	#CONFIG_WEBP_MUXER
 1

	)

1983 
	#CONFIG_WEBVTT_MUXER
 1

	)

1984 
	#CONFIG_WTV_MUXER
 1

	)

1985 
	#CONFIG_WV_MUXER
 1

	)

1986 
	#CONFIG_YUV4MPEGPIPE_MUXER
 1

	)

1987 
	#CONFIG_CHROMAPRINT_MUXER
 0

	)

1988 
	#CONFIG_LIBNUT_MUXER
 0

	)

1989 
	#CONFIG_ALSA_OUTDEV
 0

	)

1990 
	#CONFIG_CACA_OUTDEV
 1

	)

1991 
	#CONFIG_DECKLINK_OUTDEV
 0

	)

1992 
	#CONFIG_FBDEV_OUTDEV
 0

	)

1993 
	#CONFIG_OPENGL_OUTDEV
 0

	)

1994 
	#CONFIG_OSS_OUTDEV
 0

	)

1995 
	#CONFIG_PULSE_OUTDEV
 0

	)

1996 
	#CONFIG_SDL_OUTDEV
 1

	)

1997 
	#CONFIG_SNDIO_OUTDEV
 0

	)

1998 
	#CONFIG_V4L2_OUTDEV
 0

	)

1999 
	#CONFIG_XV_OUTDEV
 0

	)

2000 
	#CONFIG_AAC_PARSER
 1

	)

2001 
	#CONFIG_AAC_LATM_PARSER
 1

	)

2002 
	#CONFIG_AC3_PARSER
 1

	)

2003 
	#CONFIG_ADX_PARSER
 1

	)

2004 
	#CONFIG_BMP_PARSER
 1

	)

2005 
	#CONFIG_CAVSVIDEO_PARSER
 1

	)

2006 
	#CONFIG_COOK_PARSER
 1

	)

2007 
	#CONFIG_DCA_PARSER
 1

	)

2008 
	#CONFIG_DIRAC_PARSER
 1

	)

2009 
	#CONFIG_DNXHD_PARSER
 1

	)

2010 
	#CONFIG_DPX_PARSER
 1

	)

2011 
	#CONFIG_DVAUDIO_PARSER
 1

	)

2012 
	#CONFIG_DVBSUB_PARSER
 1

	)

2013 
	#CONFIG_DVDSUB_PARSER
 1

	)

2014 
	#CONFIG_DVD_NAV_PARSER
 1

	)

2015 
	#CONFIG_FLAC_PARSER
 1

	)

2016 
	#CONFIG_G729_PARSER
 1

	)

2017 
	#CONFIG_GSM_PARSER
 1

	)

2018 
	#CONFIG_H261_PARSER
 1

	)

2019 
	#CONFIG_H263_PARSER
 1

	)

2020 
	#CONFIG_H264_PARSER
 1

	)

2021 
	#CONFIG_HEVC_PARSER
 1

	)

2022 
	#CONFIG_MJPEG_PARSER
 1

	)

2023 
	#CONFIG_MLP_PARSER
 1

	)

2024 
	#CONFIG_MPEG4VIDEO_PARSER
 1

	)

2025 
	#CONFIG_MPEGAUDIO_PARSER
 1

	)

2026 
	#CONFIG_MPEGVIDEO_PARSER
 1

	)

2027 
	#CONFIG_OPUS_PARSER
 1

	)

2028 
	#CONFIG_PNG_PARSER
 1

	)

2029 
	#CONFIG_PNM_PARSER
 1

	)

2030 
	#CONFIG_RV30_PARSER
 1

	)

2031 
	#CONFIG_RV40_PARSER
 1

	)

2032 
	#CONFIG_TAK_PARSER
 1

	)

2033 
	#CONFIG_VC1_PARSER
 1

	)

2034 
	#CONFIG_VORBIS_PARSER
 1

	)

2035 
	#CONFIG_VP3_PARSER
 1

	)

2036 
	#CONFIG_VP8_PARSER
 1

	)

2037 
	#CONFIG_VP9_PARSER
 1

	)

2038 
	#CONFIG_ASYNC_PROTOCOL
 1

	)

2039 
	#CONFIG_BLURAY_PROTOCOL
 1

	)

2040 
	#CONFIG_CACHE_PROTOCOL
 1

	)

2041 
	#CONFIG_CONCAT_PROTOCOL
 1

	)

2042 
	#CONFIG_CRYPTO_PROTOCOL
 1

	)

2043 
	#CONFIG_DATA_PROTOCOL
 1

	)

2044 
	#CONFIG_FFRTMPCRYPT_PROTOCOL
 0

	)

2045 
	#CONFIG_FFRTMPHTTP_PROTOCOL
 0

	)

2046 
	#CONFIG_FILE_PROTOCOL
 1

	)

2047 
	#CONFIG_FTP_PROTOCOL
 1

	)

2048 
	#CONFIG_GOPHER_PROTOCOL
 1

	)

2049 
	#CONFIG_HLS_PROTOCOL
 1

	)

2050 
	#CONFIG_HTTP_PROTOCOL
 1

	)

2051 
	#CONFIG_HTTPPROXY_PROTOCOL
 1

	)

2052 
	#CONFIG_HTTPS_PROTOCOL
 1

	)

2053 
	#CONFIG_ICECAST_PROTOCOL
 1

	)

2054 
	#CONFIG_MMSH_PROTOCOL
 1

	)

2055 
	#CONFIG_MMST_PROTOCOL
 1

	)

2056 
	#CONFIG_MD5_PROTOCOL
 1

	)

2057 
	#CONFIG_PIPE_PROTOCOL
 1

	)

2058 
	#CONFIG_RTMP_PROTOCOL
 0

	)

2059 
	#CONFIG_RTMPE_PROTOCOL
 0

	)

2060 
	#CONFIG_RTMPS_PROTOCOL
 0

	)

2061 
	#CONFIG_RTMPT_PROTOCOL
 0

	)

2062 
	#CONFIG_RTMPTE_PROTOCOL
 0

	)

2063 
	#CONFIG_RTMPTS_PROTOCOL
 0

	)

2064 
	#CONFIG_RTP_PROTOCOL
 1

	)

2065 
	#CONFIG_SCTP_PROTOCOL
 0

	)

2066 
	#CONFIG_SRTP_PROTOCOL
 1

	)

2067 
	#CONFIG_SUBFILE_PROTOCOL
 1

	)

2068 
	#CONFIG_TCP_PROTOCOL
 1

	)

2069 
	#CONFIG_TLS_SCHANNEL_PROTOCOL
 1

	)

2070 
	#CONFIG_TLS_SECURETRANSPORT_PROTOCOL
 0

	)

2071 
	#CONFIG_TLS_GNUTLS_PROTOCOL
 0

	)

2072 
	#CONFIG_TLS_OPENSSL_PROTOCOL
 0

	)

2073 
	#CONFIG_UDP_PROTOCOL
 1

	)

2074 
	#CONFIG_UDPLITE_PROTOCOL
 1

	)

2075 
	#CONFIG_UNIX_PROTOCOL
 0

	)

2076 
	#CONFIG_LIBRTMP_PROTOCOL
 1

	)

2077 
	#CONFIG_LIBRTMPE_PROTOCOL
 1

	)

2078 
	#CONFIG_LIBRTMPS_PROTOCOL
 1

	)

2079 
	#CONFIG_LIBRTMPT_PROTOCOL
 1

	)

2080 
	#CONFIG_LIBRTMPTE_PROTOCOL
 1

	)

2081 
	#CONFIG_LIBSSH_PROTOCOL
 0

	)

2082 
	#CONFIG_LIBSMBCLIENT_PROTOCOL
 0

	)

	@ffmpeg.c

26 
	~"cÚfig.h
"

27 
	~<ùy³.h
>

28 
	~<¡ršg.h
>

29 
	~<m©h.h
>

30 
	~<¡dlib.h
>

31 
	~<”ºo.h
>

32 
	~<lim™s.h
>

33 
	~<¡dšt.h
>

35 #ià
HAVE_IO_H


36 
	~<io.h
>

38 #ià
HAVE_UNISTD_H


39 
	~<uni¡d.h
>

42 
	~"libavfÜm©/avfÜm©.h
"

43 
	~"libavdeviû/avdeviû.h
"

44 
	~"libsw»§m¶e/sw»§m¶e.h
"

45 
	~"libavut/İt.h
"

46 
	~"libavut/chªÃl_Ïyout.h
"

47 
	~"libavut/·r£uts.h
"

48 
	~"libavut/§m¶efmt.h
"

49 
	~"libavut/fifo.h
"

50 
	~"libavut/š‹º®.h
"

51 
	~"libavut/šŒ—dwr™e.h
"

52 
	~"libavut/diù.h
"

53 
	~"libavut/m©hem©ics.h
"

54 
	~"libavut/pixdesc.h
"

55 
	~"libavut/av¡ršg.h
"

56 
	~"libavut/libm.h
"

57 
	~"libavut/imguts.h
"

58 
	~"libavut/time¡amp.h
"

59 
	~"libavut/b´št.h
"

60 
	~"libavut/time.h
"

61 
	~"libavut/th»admes§ge.h
"

62 
	~"libavcodec/m©hİs.h
"

63 
	~"libavfÜm©/os_suµÜt.h
"

65 
	~"libavf‹r/avf‹r.h
"

66 
	~"libavf‹r/bufãr¤c.h
"

67 
	~"libavf‹r/bufãrsšk.h
"

69 #ià
HAVE_SYS_RESOURCE_H


70 
	~<sys/time.h
>

71 
	~<sys/ty³s.h
>

72 
	~<sys/»sourû.h
>

73 #–ià
HAVE_GETPROCESSTIMES


74 
	~<wšdows.h
>

76 #ià
HAVE_GETPROCESSMEMORYINFO


77 
	~<wšdows.h
>

78 
	~<p§pi.h
>

80 #ià
HAVE_SETCONSOLECTRLHANDLER


81 
	~<wšdows.h
>

85 #ià
HAVE_SYS_SELECT_H


86 
	~<sys/£Ëù.h
>

89 #ià
HAVE_TERMIOS_H


90 
	~<fú.h
>

91 
	~<sys/ioùl.h
>

92 
	~<sys/time.h
>

93 
	~<‹rmios.h
>

94 #–ià
HAVE_KBHIT


95 
	~<cÚio.h
>

98 #ià
HAVE_PTHREADS


99 
	~<±h»ad.h
>

102 
	~<time.h
>

104 
	~"ffm³g.h
"

105 
	~"cmduts.h
"

107 
	~"libavut/avas£¹.h
"

109 cÚ¡ 
	g´og¿m_Çme
[] = "ffmpeg";

110 cÚ¡ 
	g´og¿m_bœth_y—r
 = 2000;

112 
FILE
 *
	gv¡©s_fe
;

114 cÚ¡ *cÚ¡ 
	gfÜûd_keyäames_cÚ¡_Çmes
[] = {

120 
NULL


123 
do_video_¡©s
(
OuutSŒ—m
 *
o¡
, 
äame_size
);

124 
št64_t
 
g‘utime
();

125 
št64_t
 
g‘maxrss
();

127 
	grun_as_d«mÚ
 = 0;

128 
	gnb_äames_dup
 = 0;

129 
	gnb_äames_drİ
 = 0;

130 
št64_t
 
	gdecode_”rÜ_¡©
[2];

132 
	gcu¼’t_time
;

133 
AVIOCÚ‹xt
 *
	g´og»ss_avio
 = 
NULL
;

135 
ušt8_t
 *
	gsubt™Ë_out
;

137 
IÅutSŒ—m
 **
	gšput_¡»ams
 = 
NULL
;

138 
	gnb_šput_¡»ams
 = 0;

139 
IÅutFe
 **
	gšput_fes
 = 
NULL
;

140 
	gnb_šput_fes
 = 0;

142 
OuutSŒ—m
 **
	gouut_¡»ams
 = 
NULL
;

143 
	gnb_ouut_¡»ams
 = 0;

144 
OuutFe
 **
	gouut_fes
 = 
NULL
;

145 
	gnb_ouut_fes
 = 0;

147 
F‹rG¿ph
 **
	gf‹rg¿phs
;

148 
	gnb_f‹rg¿phs
;

150 #ià
HAVE_TERMIOS_H


153 
‹rmios
 
	gŞd‰y
;

154 
	g»¡Üe_‰y
;

157 #ià
HAVE_PTHREADS


158 
ä“_šput_th»ads
();

166 
	$sub2video_g‘_bÏnk_äame
(
IÅutSŒ—m
 *
i¡
)

168 
»t
;

169 
AVF¿me
 *
äame
 = 
i¡
->
sub2video
.frame;

171 
	`av_äame_uÄef
(
äame
);

172 
i¡
->
sub2video
.
äame
->
width
 = i¡->
dec_ùx
->width ? i¡->dec_ùx->width : i¡->sub2video.
w
;

173 
i¡
->
sub2video
.
äame
->
height
 = i¡->
dec_ùx
->heighˆ? i¡->dec_ùx->heighˆ: i¡->sub2video.
h
;

174 
i¡
->
sub2video
.
äame
->
fÜm©
 = 
AV_PIX_FMT_RGB32
;

175 ià((
»t
 = 
	`av_äame_g‘_bufãr
(
äame
, 32)) < 0)

176  
»t
;

177 
	`mem£t
(
äame
->
d©a
[0], 0, f¿me->
height
 * f¿me->
lšesize
[0]);

179 
	}
}

181 
	$sub2video_cİy_»ù
(
ušt8_t
 *
d¡
, 
d¡_lšesize
, 
w
, 
h
,

182 
AVSubt™ËReù
 *
r
)

184 
ušt32_t
 *
·l
, *
d¡2
;

185 
ušt8_t
 *
¤c
, *
¤c2
;

186 
x
, 
y
;

188 ià(
r
->
ty³
 !ğ
SUBTITLE_BITMAP
) {

189 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "sub2video:‚on-bitmap subtitle\n");

192 ià(
r
->
x
 < 0 ||„->x +„->
w
 > w ||„->
y
 < 0 ||„->y +„->
h
 > h) {

193 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "sub2video:„ectangle (%d %d %d %d) overflowing %d %d\n",

194 
r
->
x
,„->
y
,„->
w
,„->
h
, w, h

199 
d¡
 +ğ
r
->
y
 * 
d¡_lšesize
 +„->
x
 * 4;

200 
¤c
 = 
r
->
più
.
d©a
[0];

201 
·l
 = (
ušt32_t
 *)
r
->
più
.
d©a
[1];

202 
y
 = 0; y < 
r
->
h
; y++) {

203 
d¡2
 = (
ušt32_t
 *)
d¡
;

204 
¤c2
 = 
¤c
;

205 
x
 = 0; x < 
r
->
w
; x++)

206 *(
d¡2
++èğ
·l
[*(
¤c2
++)];

207 
d¡
 +ğ
d¡_lšesize
;

208 
¤c
 +ğ
r
->
più
.
lšesize
[0];

210 
	}
}

212 
	$sub2video_push_»f
(
IÅutSŒ—m
 *
i¡
, 
št64_t
 
±s
)

214 
AVF¿me
 *
äame
 = 
i¡
->
sub2video
.frame;

215 
i
;

217 
	`av_as£¹1
(
äame
->
d©a
[0]);

218 
i¡
->
sub2video
.
Ï¡_±s
 = 
äame
->
±s
 =…ts;

219 
i
 = 0; i < 
i¡
->
nb_f‹rs
; i++)

220 
	`av_bufãr¤c_add_äame_æags
(
i¡
->
f‹rs
[
i
]->
f‹r
, 
äame
,

221 
AV_BUFFERSRC_FLAG_KEEP_REF
 |

222 
AV_BUFFERSRC_FLAG_PUSH
);

223 
	}
}

225 
	$sub2video_upd©e
(
IÅutSŒ—m
 *
i¡
, 
AVSubt™Ë
 *
sub
)

227 
AVF¿me
 *
äame
 = 
i¡
->
sub2video
.frame;

228 
št8_t
 *
d¡
;

229 
d¡_lšesize
;

230 
num_»ùs
, 
i
;

231 
št64_t
 
±s
, 
’d_±s
;

233 ià(!
äame
)

235 ià(
sub
) {

236 
±s
 = 
	`av_»sÿË_q
(
sub
->± + sub->
¡¬t_di¥Ïy_time
 * 1000LL,

237 
AV_TIME_BASE_Q
, 
i¡
->
¡
->
time_ba£
);

238 
’d_±s
 = 
	`av_»sÿË_q
(
sub
->
±s
 + sub->
’d_di¥Ïy_time
 * 1000LL,

239 
AV_TIME_BASE_Q
, 
i¡
->
¡
->
time_ba£
);

240 
num_»ùs
 = 
sub
->num_rects;

242 
±s
 = 
i¡
->
sub2video
.
’d_±s
;

243 
’d_±s
 = 
INT64_MAX
;

244 
num_»ùs
 = 0;

246 ià(
	`sub2video_g‘_bÏnk_äame
(
i¡
) < 0) {

247 
	`av_log
(
i¡
->
dec_ùx
, 
AV_LOG_ERROR
,

251 
d¡
 = 
äame
->
d©a
 [0];

252 
d¡_lšesize
 = 
äame
->
lšesize
[0];

253 
i
 = 0; i < 
num_»ùs
; i++)

254 
	`sub2video_cİy_»ù
(
d¡
, 
d¡_lšesize
, 
äame
->
width
, f¿me->
height
, 
sub
->
»ùs
[
i
]);

255 
	`sub2video_push_»f
(
i¡
, 
±s
);

256 
i¡
->
sub2video
.
’d_±s
 =ƒnd_pts;

257 
	}
}

259 
	$sub2video_h—¹b—t
(
IÅutSŒ—m
 *
i¡
, 
št64_t
 
±s
)

261 
IÅutFe
 *
šfe
 = 
šput_fes
[
i¡
->
fe_šdex
];

262 
i
, 
j
, 
nb_»qs
;

263 
št64_t
 
±s2
;

269 
i
 = 0; i < 
šfe
->
nb_¡»ams
; i++) {

270 
IÅutSŒ—m
 *
i¡2
 = 
šput_¡»ams
[
šfe
->
i¡_šdex
 + 
i
];

271 ià(!
i¡2
->
sub2video
.
äame
)

275 
±s2
 = 
	`av_»sÿË_q
(
±s
, 
i¡
->
¡
->
time_ba£
, 
i¡2
->st->time_base) - 1;

277 ià(
±s2
 <ğ
i¡2
->
sub2video
.
Ï¡_±s
)

279 ià(
±s2
 >ğ
i¡2
->
sub2video
.
’d_±s
 || !i¡2->sub2video.
äame
->
d©a
[0])

280 
	`sub2video_upd©e
(
i¡2
, 
NULL
);

281 
j
 = 0, 
nb_»qs
 = 0; j < 
i¡2
->
nb_f‹rs
; j++)

282 
nb_»qs
 +ğ
	`av_bufãr¤c_g‘_nb_çed_»que¡s
(
i¡2
->
f‹rs
[
j
]->
f‹r
);

283 ià(
nb_»qs
)

284 
	`sub2video_push_»f
(
i¡2
, 
±s2
);

286 
	}
}

288 
	$sub2video_æush
(
IÅutSŒ—m
 *
i¡
)

290 
i
;

292 ià(
i¡
->
sub2video
.
’d_±s
 < 
INT64_MAX
)

293 
	`sub2video_upd©e
(
i¡
, 
NULL
);

294 
i
 = 0; i < 
i¡
->
nb_f‹rs
; i++)

295 
	`av_bufãr¤c_add_äame
(
i¡
->
f‹rs
[
i
]->
f‹r
, 
NULL
);

296 
	}
}

300 
	$‹rm_ex™_sig§ã
()

302 #ià
HAVE_TERMIOS_H


303 if(
»¡Üe_‰y
)

304 
	`tc£‰r
 (0, 
TCSANOW
, &
Şd‰y
);

306 
	}
}

308 
	$‹rm_ex™
()

310 
	`av_log
(
NULL
, 
AV_LOG_QUIET
, "%s", "");

311 
	`‹rm_ex™_sig§ã
();

312 
	}
}

314 vŞ©
	g»ûived_sig‹rm
 = 0;

315 vŞ©
	g»ûived_nb_sigÇls
 = 0;

316 vŞ©
	gŒªscode_š™_dÚe
 = 0;

317 vŞ©
	gffm³g_ex™ed
 = 0;

318 
	gmaš_»tuº_code
 = 0;

321 
	$sig‹rm_hªdËr
(
sig
)

323 
»ûived_sig‹rm
 = 
sig
;

324 
»ûived_nb_sigÇls
++;

325 
	`‹rm_ex™_sig§ã
();

326 if(
»ûived_nb_sigÇls
 > 3) {

327 
	`wr™e
(2 , "Received > 3 system signals, hardƒxiting\n",

328 
	`¡¾’
("Received > 3 system signals, hardƒxiting\n"));

330 
	`ex™
(123);

332 
	}
}

334 #ià
HAVE_SETCONSOLECTRLHANDLER


335 
BOOL
 
WINAPI
 
	$CŒlHªdËr
(
DWORD
 
fdwCŒlTy³
)

337 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, "\nReûived wšdow sigÇÈ%ld\n", 
fdwCŒlTy³
);

339 
fdwCŒlTy³
)

341 
CTRL_C_EVENT
:

342 
CTRL_BREAK_EVENT
:

343 
	`sig‹rm_hªdËr
(
SIGINT
);

344  
TRUE
;

346 
CTRL_CLOSE_EVENT
:

347 
CTRL_LOGOFF_EVENT
:

348 
CTRL_SHUTDOWN_EVENT
:

349 
	`sig‹rm_hªdËr
(
SIGTERM
);

354 !
ffm³g_ex™ed
) {

355 
	`SË•
(0);

357  
TRUE
;

360 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Reûived unknowÀwšdow sigÇÈ%ld\n", 
fdwCŒlTy³
);

361  
FALSE
;

363 
	}
}

366 
	$‹rm_š™
()

368 #ià
HAVE_TERMIOS_H


369 if(!
run_as_d«mÚ
){

370 
‹rmios
 
‰y
;

371 ià(
	`tcg‘©Œ
 (0, &
‰y
) == 0) {

372 
Şd‰y
 = 
‰y
;

373 
»¡Üe_‰y
 = 1;

375 
‰y
.
c_iæag
 &ğ~(
IGNBRK
|
BRKINT
|
PARMRK
|
ISTRIP


376 |
INLCR
|
IGNCR
|
ICRNL
|
IXON
);

377 
‰y
.
c_oæag
 |ğ
OPOST
;

378 
‰y
.
c_læag
 &ğ~(
ECHO
|
ECHONL
|
ICANON
|
IEXTEN
);

379 
‰y
.
c_cæag
 &ğ~(
CSIZE
|
PARENB
);

380 
‰y
.
c_cæag
 |ğ
CS8
;

381 
‰y
.
c_cc
[
VMIN
] = 1;

382 
‰y
.
c_cc
[
VTIME
] = 0;

384 
	`tc£‰r
 (0, 
TCSANOW
, &
‰y
);

386 
	`sigÇl
(
SIGQUIT
, 
sig‹rm_hªdËr
);

390 
	`sigÇl
(
SIGINT
 , 
sig‹rm_hªdËr
);

391 
	`sigÇl
(
SIGTERM
, 
sig‹rm_hªdËr
);

392 #ifdeà
SIGXCPU


393 
	`sigÇl
(
SIGXCPU
, 
sig‹rm_hªdËr
);

395 #ià
HAVE_SETCONSOLECTRLHANDLER


396 
	`S‘CÚsŞeCŒlHªdËr
((
PHANDLER_ROUTINE
è
CŒlHªdËr
, 
TRUE
);

398 
	}
}

401 
	$»ad_key
()

403 
ch
;

404 #ià
HAVE_TERMIOS_H


405 
n
 = 1;

406 
timev®
 
tv
;

407 
fd_£t
 
rfds
;

409 
	`FD_ZERO
(&
rfds
);

410 
	`FD_SET
(0, &
rfds
);

411 
tv
.
tv_£c
 = 0;

412 
tv
.
tv_u£c
 = 0;

413 
n
 = 
	`£Ëù
(1, &
rfds
, 
NULL
, NULL, &
tv
);

414 ià(
n
 > 0) {

415 
n
 = 
	`»ad
(0, &
ch
, 1);

416 ià(
n
 == 1)

417  
ch
;

419  
n
;

421 #–ià
HAVE_KBHIT


422 #ià
HAVE_PEEKNAMEDPIPE


423 
is_pe
;

424 
HANDLE
 
šput_hªdË
;

425 
DWORD
 
dw
, 
nch¬s
;

426 if(!
šput_hªdË
){

427 
šput_hªdË
 = 
	`G‘StdHªdË
(
STD_INPUT_HANDLE
);

428 
is_pe
 = !
	`G‘CÚsŞeMode
(
šput_hªdË
, &
dw
);

431 ià(
is_pe
) {

433 ià(!
	`P“kNamedPe
(
šput_hªdË
, 
NULL
, 0, NULL, &
nch¬s
, NULL)) {

438 if(
nch¬s
 != 0) {

439 
	`»ad
(0, &
ch
, 1);

440  
ch
;

446 if(
	`kbh™
())

447 (
	`g‘ch
());

450 
	}
}

452 
	$decode_š‹¼u±_cb
(*
ùx
)

454  
»ûived_nb_sigÇls
 > 
Œªscode_š™_dÚe
;

455 
	}
}

457 cÚ¡ 
AVIOIÁ”ru±CB
 
	gšt_cb
 = { 
decode_š‹¼u±_cb
, 
NULL
 };

459 
	$ffm³g_ş—nup
(
»t
)

461 
i
, 
j
;

463 ià(
do_b’chm¬k
) {

464 
maxrss
 = 
	`g‘maxrss
() / 1024;

465 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "b’ch: maxrss=%ikB\n", 
maxrss
);

468 
i
 = 0; i < 
nb_f‹rg¿phs
; i++) {

469 
F‹rG¿ph
 *
fg
 = 
f‹rg¿phs
[
i
];

470 
	`avf‹r_g¿ph_ä“
(&
fg
->
g¿ph
);

471 
j
 = 0; j < 
fg
->
nb_šputs
; j++) {

472 
	`av_ä“p
(&
fg
->
šputs
[
j
]->
Çme
);

473 
	`av_ä“p
(&
fg
->
šputs
[
j
]);

475 
	`av_ä“p
(&
fg
->
šputs
);

476 
j
 = 0; j < 
fg
->
nb_ouuts
; j++) {

477 
	`av_ä“p
(&
fg
->
ouuts
[
j
]->
Çme
);

478 
	`av_ä“p
(&
fg
->
ouuts
[
j
]);

480 
	`av_ä“p
(&
fg
->
ouuts
);

481 
	`av_ä“p
(&
fg
->
g¿ph_desc
);

483 
	`av_ä“p
(&
f‹rg¿phs
[
i
]);

485 
	`av_ä“p
(&
f‹rg¿phs
);

487 
	`av_ä“p
(&
subt™Ë_out
);

490 
i
 = 0; i < 
nb_ouut_fes
; i++) {

491 
OuutFe
 *
of
 = 
ouut_fes
[
i
];

492 
AVFÜm©CÚ‹xt
 *
s
;

493 ià(!
of
)

495 
s
 = 
of
->
ùx
;

496 ià(
s
 && s->
ofÜm©
 && !(s->ofÜm©->
æags
 & 
AVFMT_NOFILE
))

497 
	`avio_şo£p
(&
s
->
pb
);

498 
	`avfÜm©_ä“_cÚ‹xt
(
s
);

499 
	`av_diù_ä“
(&
of
->
İts
);

501 
	`av_ä“p
(&
ouut_fes
[
i
]);

503 
i
 = 0; i < 
nb_ouut_¡»ams
; i++) {

504 
OuutSŒ—m
 *
o¡
 = 
ouut_¡»ams
[
i
];

505 
AVB™SŒ—mF‹rCÚ‹xt
 *
bsfc
;

507 ià(!
o¡
)

510 
bsfc
 = 
o¡
->
b™¡»am_f‹rs
;

511 
bsfc
) {

512 
AVB™SŒ—mF‹rCÚ‹xt
 *
Ãxt
 = 
bsfc
->next;

513 
	`av_b™¡»am_f‹r_şo£
(
bsfc
);

514 
bsfc
 = 
Ãxt
;

516 
o¡
->
b™¡»am_f‹rs
 = 
NULL
;

517 
	`av_äame_ä“
(&
o¡
->
f‹»d_äame
);

518 
	`av_äame_ä“
(&
o¡
->
Ï¡_äame
);

520 
	`av_·r£r_şo£
(
o¡
->
·r£r
);

522 
	`av_ä“p
(&
o¡
->
fÜûd_keyäames
);

523 
	`av_ex´_ä“
(
o¡
->
fÜûd_keyäames_³x´
);

524 
	`av_ä“p
(&
o¡
->
avf‹r
);

525 
	`av_ä“p
(&
o¡
->
logfe_´efix
);

527 
	`av_ä“p
(&
o¡
->
audio_chªÃls_m­
);

528 
o¡
->
audio_chªÃls_m­³d
 = 0;

530 
	`av_diù_ä“
(&
o¡
->
sws_diù
);

532 
	`avcodec_ä“_cÚ‹xt
(&
o¡
->
’c_ùx
);

534 
	`av_ä“p
(&
ouut_¡»ams
[
i
]);

536 #ià
HAVE_PTHREADS


537 
	`ä“_šput_th»ads
();

539 
i
 = 0; i < 
nb_šput_fes
; i++) {

540 
	`avfÜm©_şo£_šput
(&
šput_fes
[
i
]->
ùx
);

541 
	`av_ä“p
(&
šput_fes
[
i
]);

543 
i
 = 0; i < 
nb_šput_¡»ams
; i++) {

544 
IÅutSŒ—m
 *
i¡
 = 
šput_¡»ams
[
i
];

546 
	`av_äame_ä“
(&
i¡
->
decoded_äame
);

547 
	`av_äame_ä“
(&
i¡
->
f‹r_äame
);

548 
	`av_diù_ä“
(&
i¡
->
decod”_İts
);

549 
	`avsubt™Ë_ä“
(&
i¡
->
´ev_sub
.
subt™Ë
);

550 
	`av_äame_ä“
(&
i¡
->
sub2video
.
äame
);

551 
	`av_ä“p
(&
i¡
->
f‹rs
);

552 
	`av_ä“p
(&
i¡
->
hwacûl_deviû
);

554 
	`avcodec_ä“_cÚ‹xt
(&
i¡
->
dec_ùx
);

556 
	`av_ä“p
(&
šput_¡»ams
[
i
]);

559 ià(
v¡©s_fe
) {

560 ià(
	`fşo£
(
v¡©s_fe
))

561 
	`av_log
(
NULL
, 
AV_LOG_ERROR
,

563 
	`av_”r2¡r
(
	`AVERROR
(
”ºo
)));

565 
	`av_ä“p
(&
v¡©s_f’ame
);

567 
	`av_ä“p
(&
šput_¡»ams
);

568 
	`av_ä“p
(&
šput_fes
);

569 
	`av_ä“p
(&
ouut_¡»ams
);

570 
	`av_ä“p
(&
ouut_fes
);

572 
	`unš™_İts
();

574 
	`avfÜm©_ÃtwÜk_deš™
();

576 ià(
»ûived_sig‹rm
) {

577 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "Exiting‚ormally,„eceived signal %d.\n",

578 (è
»ûived_sig‹rm
);

579 } ià(
»t
 && 
Œªscode_š™_dÚe
) {

580 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "Conversion failed!\n");

582 
	`‹rm_ex™
();

583 
ffm³g_ex™ed
 = 1;

584 
	}
}

586 
	$»move_avİtiÚs
(
AVDiùiÚ¬y
 **
a
, AVDiùiÚ¬y *
b
)

588 
AVDiùiÚ¬yEÁry
 *
t
 = 
NULL
;

590 (
t
 = 
	`av_diù_g‘
(
b
, "",, 
AV_DICT_IGNORE_SUFFIX
))) {

591 
	`av_diù_£t
(
a
, 
t
->
key
, 
NULL
, 
AV_DICT_MATCH_CASE
);

593 
	}
}

595 
	$as£¹_avİtiÚs
(
AVDiùiÚ¬y
 *
m
)

597 
AVDiùiÚ¬yEÁry
 *
t
;

598 ià((
t
 = 
	`av_diù_g‘
(
m
, "", 
NULL
, 
AV_DICT_IGNORE_SUFFIX
))) {

599 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "O±iÚ % nÙ found.\n", 
t
->
key
);

600 
	`ex™_´og¿m
(1);

602 
	}
}

604 
	$abÜt_codec_ex³rim’l
(
AVCodec
 *
c
, 
’cod”
)

606 
	`ex™_´og¿m
(1);

607 
	}
}

609 
	$upd©e_b’chm¬k
(cÚ¡ *
fmt
, ...)

611 ià(
do_b’chm¬k_®l
) {

612 
št64_t
 
t
 = 
	`g‘utime
();

613 
va_li¡
 
va
;

614 
buf
[1024];

616 ià(
fmt
) {

617 
	`va_¡¬t
(
va
, 
fmt
);

618 
	`v¢´štf
(
buf
, (buf), 
fmt
, 
va
);

619 
	`va_’d
(
va
);

620 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "b’ch: %8"
PRIu64
" % \n", 
t
 - 
cu¼’t_time
, 
buf
);

622 
cu¼’t_time
 = 
t
;

624 
	}
}

626 
	$şo£_®l_ouut_¡»ams
(
OuutSŒ—m
 *
o¡
, 
OSTFšished
 
this_¡»am
, OSTFšished 
Ùh”s
)

628 
i
;

629 
i
 = 0; i < 
nb_ouut_¡»ams
; i++) {

630 
OuutSŒ—m
 *
o¡2
 = 
ouut_¡»ams
[
i
];

631 
o¡2
->
fšished
 |ğ
o¡
 =ğo¡2 ? 
this_¡»am
 : 
Ùh”s
;

633 
	}
}

635 
	$wr™e_äame
(
AVFÜm©CÚ‹xt
 *
s
, 
AVPack‘
 *
pkt
, 
OuutSŒ—m
 *
o¡
)

637 
AVB™SŒ—mF‹rCÚ‹xt
 *
bsfc
 = 
o¡
->
b™¡»am_f‹rs
;

638 
AVCodecCÚ‹xt
 *
avùx
 = 
o¡
->
’codšg_Ãeded
 ? o¡->
’c_ùx
 : o¡->
¡
->
codec
;

639 
»t
;

641 ià(!
o¡
->
¡
->
codec
->
exŒad©a_size
 && o¡->
’c_ùx
->extradata_size) {

642 
o¡
->
¡
->
codec
->
exŒad©a
 = 
	`av_m®locz
(o¡->
’c_ùx
->
exŒad©a_size
 + 
AV_INPUT_BUFFER_PADDING_SIZE
);

643 ià(
o¡
->
¡
->
codec
->
exŒad©a
) {

644 
	`memıy
(
o¡
->
¡
->
codec
->
exŒad©a
, o¡->
’c_ùx
->exŒad©a, o¡->’c_ùx->
exŒad©a_size
);

645 
o¡
->
¡
->
codec
->
exŒad©a_size
 = o¡->
’c_ùx
->extradata_size;

649 ià((
avùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
 && 
video_sync_m‘hod
 =ğ
VSYNC_DROP
) ||

650 (
avùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_AUDIO
 && 
audio_sync_m‘hod
 < 0))

651 
pkt
->
±s
 =…kt->
dts
 = 
AV_NOPTS_VALUE
;

660 ià(!(
avùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
 &&‡vùx->
codec
)) {

661 ià(
o¡
->
äame_numb”
 >ğo¡->
max_äames
) {

662 
	`av_·ck‘_uÄef
(
pkt
);

665 
o¡
->
äame_numb”
++;

667 ià(
avùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
) {

668 
i
;

669 
ušt8_t
 *
sd
 = 
	`av_·ck‘_g‘_side_d©a
(
pkt
, 
AV_PKT_DATA_QUALITY_STATS
,

670 
NULL
);

671 
o¡
->
qu®™y
 = 
sd
 ? 
	`AV_RL32
(sd) : -1;

672 
o¡
->
più_ty³
 = 
sd
 ? sd[4] : 
AV_PICTURE_TYPE_NONE
;

674 
i
 = 0; i<
	`FF_ARRAY_ELEMS
(
o¡
->
”rÜ
); i++) {

675 ià(
sd
 && 
i
 < sd[5])

676 
o¡
->
”rÜ
[
i
] = 
	`AV_RL64
(
sd
 + 8 + 8*i);

678 
o¡
->
”rÜ
[
i
] = -1;

681 ià(
o¡
->
äame_¿‹
.
num
 && o¡->
is_cä
) {

682 ià(
pkt
->
du¿tiÚ
 > 0)

683 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "Overriding…acket duration by frame„ate,his should‚ot happen\n");

684 
pkt
->
du¿tiÚ
 = 
	`av_»sÿË_q
(1, 
	`av_šv_q
(
o¡
->
äame_¿‹
),

685 
o¡
->
¡
->
time_ba£
);

689 ià(
bsfc
)

690 
	`av_·ck‘_¥l™_side_d©a
(
pkt
);

692 ià((
»t
 = 
	`av_­¶y_b™¡»am_f‹rs
(
avùx
, 
pkt
, 
bsfc
)) < 0) {

693 
	`´št_”rÜ
("", 
»t
);

694 ià(
ex™_Ú_”rÜ
)

695 
	`ex™_´og¿m
(1);

698 ià(!(
s
->
ofÜm©
->
æags
 & 
AVFMT_NOTIMESTAMPS
)) {

699 ià(
pkt
->
dts
 !ğ
AV_NOPTS_VALUE
 &&

700 
pkt
->
±s
 !ğ
AV_NOPTS_VALUE
 &&

701 
pkt
->
dts
 >…kt->
±s
) {

702 
	`av_log
(
s
, 
AV_LOG_WARNING
, "Inv®id DTS: %"
PRId64
" PTS: %"PRId64" in output stream %d:%d,„eplacing by guess\n",

703 
pkt
->
dts
,…kt->
±s
,

704 
o¡
->
fe_šdex
, o¡->
¡
->
šdex
);

705 
pkt
->
±s
 =

706 
pkt
->
dts
 =…kt->
±s
 +…kt->dt + 
o¡
->
Ï¡_mux_dts
 + 1

707 - 
	`FFMIN3
(
pkt
->
±s
,…kt->
dts
, 
o¡
->
Ï¡_mux_dts
 + 1)

708 - 
	`FFMAX3
(
pkt
->
±s
,…kt->
dts
, 
o¡
->
Ï¡_mux_dts
 + 1);

711 (
avùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_AUDIO
 ||‡vùx->codec_ty³ =ğ
AVMEDIA_TYPE_VIDEO
) &&

712 
pkt
->
dts
 !ğ
AV_NOPTS_VALUE
 &&

713 
o¡
->
Ï¡_mux_dts
 !ğ
AV_NOPTS_VALUE
) {

714 
št64_t
 
max
 = 
o¡
->
Ï¡_mux_dts
 + !(
s
->
ofÜm©
->
æags
 & 
AVFMT_TS_NONSTRICT
);

715 ià(
pkt
->
dts
 < 
max
) {

716 
logËv–
 = 
max
 - 
pkt
->
dts
 > 2 || 
avùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
 ? 
AV_LOG_WARNING
 : 
AV_LOG_DEBUG
;

717 
	`av_log
(
s
, 
logËv–
, "Non-monotonous DTS in output stream "

718 "%d:%d;…»vious: %"
PRId64
", current: %"PRId64"; ",

719 
o¡
->
fe_šdex
, o¡->
¡
->
šdex
, o¡->
Ï¡_mux_dts
, 
pkt
->
dts
);

720 ià(
ex™_Ú_”rÜ
) {

721 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "aborting.\n");

722 
	`ex™_´og¿m
(1);

724 
	`av_log
(
s
, 
logËv–
, "chªgšgØ%"
PRId64
". This may„esult "

726 
max
);

727 if(
pkt
->
±s
 >ğpkt->
dts
)

728 
pkt
->
±s
 = 
	`FFMAX
Õkt->±s, 
max
);

729 
pkt
->
dts
 = 
max
;

733 
o¡
->
Ï¡_mux_dts
 = 
pkt
->
dts
;

735 
o¡
->
d©a_size
 +ğ
pkt
->
size
;

736 
o¡
->
·ck‘s_wr™‹n
++;

738 
pkt
->
¡»am_šdex
 = 
o¡
->
šdex
;

740 ià(
debug_ts
) {

741 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "muxer <-ype:%s "

743 
	`av_g‘_medŸ_ty³_¡ršg
(
o¡
->
’c_ùx
->
codec_ty³
),

744 
	`av_ts2¡r
(
pkt
->
±s
), 
	`av_ts2time¡r
Õkt->±s, &
o¡
->
¡
->
time_ba£
),

745 
	`av_ts2¡r
(
pkt
->
dts
), 
	`av_ts2time¡r
Õkt->dts, &
o¡
->
¡
->
time_ba£
),

746 
pkt
->
size


750 
»t
 = 
	`av_š‹¾—ved_wr™e_äame
(
s
, 
pkt
);

751 ià(
»t
 < 0) {

752 
	`´št_”rÜ
("av_š‹¾—ved_wr™e_äame()", 
»t
);

753 
maš_»tuº_code
 = 1;

754 
	`şo£_®l_ouut_¡»ams
(
o¡
, 
MUXER_FINISHED
 | 
ENCODER_FINISHED
, ENCODER_FINISHED);

756 
	`av_·ck‘_uÄef
(
pkt
);

757 
	}
}

759 
	$şo£_ouut_¡»am
(
OuutSŒ—m
 *
o¡
)

761 
OuutFe
 *
of
 = 
ouut_fes
[
o¡
->
fe_šdex
];

763 
o¡
->
fšished
 |ğ
ENCODER_FINISHED
;

764 ià(
of
->
shÜ‹¡
) {

765 
št64_t
 
’d
 = 
	`av_»sÿË_q
(
o¡
->
sync_İts
 - o¡->
fœ¡_±s
, o¡->
’c_ùx
->
time_ba£
, 
AV_TIME_BASE_Q
);

766 
of
->
»cÜdšg_time
 = 
	`FFMIN
(of->»cÜdšg_time, 
’d
);

768 
	}
}

770 
	$check_»cÜdšg_time
(
OuutSŒ—m
 *
o¡
)

772 
OuutFe
 *
of
 = 
ouut_fes
[
o¡
->
fe_šdex
];

774 ià(
of
->
»cÜdšg_time
 !ğ
INT64_MAX
 &&

775 
	`av_com·»_ts
(
o¡
->
sync_İts
 - o¡->
fœ¡_±s
, o¡->
’c_ùx
->
time_ba£
, 
of
->
»cÜdšg_time
,

776 
AV_TIME_BASE_Q
) >= 0) {

777 
	`şo£_ouut_¡»am
(
o¡
);

781 
	}
}

783 
	$do_audio_out
(
AVFÜm©CÚ‹xt
 *
s
, 
OuutSŒ—m
 *
o¡
,

784 
AVF¿me
 *
äame
)

786 
AVCodecCÚ‹xt
 *
’c
 = 
o¡
->
’c_ùx
;

787 
AVPack‘
 
pkt
;

788 
gÙ_·ck‘
 = 0;

790 
	`av_š™_·ck‘
(&
pkt
);

791 
pkt
.
d©a
 = 
NULL
;

792 
pkt
.
size
 = 0;

794 ià(!
	`check_»cÜdšg_time
(
o¡
))

797 ià(
äame
->
±s
 =ğ
AV_NOPTS_VALUE
 || 
audio_sync_m‘hod
 < 0)

798 
äame
->
±s
 = 
o¡
->
sync_İts
;

799 
o¡
->
sync_İts
 = 
äame
->
±s
 + f¿me->
nb_§m¶es
;

800 
o¡
->
§m¶es_’coded
 +ğ
äame
->
nb_§m¶es
;

801 
o¡
->
äames_’coded
++;

803 
	`av_as£¹0
(
pkt
.
size
 || !pkt.
d©a
);

804 
	`upd©e_b’chm¬k
(
NULL
);

805 ià(
debug_ts
) {

806 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "encoder <-ype:audio "

808 
	`av_ts2¡r
(
äame
->
±s
), 
	`av_ts2time¡r
(äame->±s, &
’c
->
time_ba£
),

809 
’c
->
time_ba£
.
num
,ƒnc->time_ba£.
d’
);

812 ià(
	`avcodec_’code_audio2
(
’c
, &
pkt
, 
äame
, &
gÙ_·ck‘
) < 0) {

813 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Audioƒncoding failed (avcodec_encode_audio2)\n");

814 
	`ex™_´og¿m
(1);

816 
	`upd©e_b’chm¬k
("’code_audiØ%d.%d", 
o¡
->
fe_šdex
, o¡->
šdex
);

818 ià(
gÙ_·ck‘
) {

819 
	`av_·ck‘_»sÿË_ts
(&
pkt
, 
’c
->
time_ba£
, 
o¡
->
¡
->time_base);

821 ià(
debug_ts
) {

822 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "encoder ->ype:audio "

824 
	`av_ts2¡r
(
pkt
.
±s
), 
	`av_ts2time¡r
Õkt.±s, &
o¡
->
¡
->
time_ba£
),

825 
	`av_ts2¡r
(
pkt
.
dts
), 
	`av_ts2time¡r
Õkt.dts, &
o¡
->
¡
->
time_ba£
));

828 
	`wr™e_äame
(
s
, &
pkt
, 
o¡
);

830 
	}
}

832 
	$do_subt™Ë_out
(
AVFÜm©CÚ‹xt
 *
s
,

833 
OuutSŒ—m
 *
o¡
,

834 
IÅutSŒ—m
 *
i¡
,

835 
AVSubt™Ë
 *
sub
)

837 
subt™Ë_out_max_size
 = 1024 * 1024;

838 
subt™Ë_out_size
, 
nb
, 
i
;

839 
AVCodecCÚ‹xt
 *
’c
;

840 
AVPack‘
 
pkt
;

841 
št64_t
 
±s
;

843 ià(
sub
->
±s
 =ğ
AV_NOPTS_VALUE
) {

844 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Subtitle…ackets must have‡…ts\n");

845 ià(
ex™_Ú_”rÜ
)

846 
	`ex™_´og¿m
(1);

850 
’c
 = 
o¡
->
’c_ùx
;

852 ià(!
subt™Ë_out
) {

853 
subt™Ë_out
 = 
	`av_m®loc
(
subt™Ë_out_max_size
);

854 ià(!
subt™Ë_out
) {

855 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Failedo‡llocate subtitle_out\n");

856 
	`ex™_´og¿m
(1);

863 ià(
’c
->
codec_id
 =ğ
AV_CODEC_ID_DVB_SUBTITLE
)

864 
nb
 = 2;

866 
nb
 = 1;

869 
±s
 = 
sub
->pts;

870 ià(
ouut_fes
[
o¡
->
fe_šdex
]->
¡¬t_time
 !ğ
AV_NOPTS_VALUE
)

871 
±s
 -ğ
ouut_fes
[
o¡
->
fe_šdex
]->
¡¬t_time
;

872 
i
 = 0; i < 
nb
; i++) {

873 
§ve_num_»ùs
 = 
sub
->
num_»ùs
;

875 
o¡
->
sync_İts
 = 
	`av_»sÿË_q
(
±s
, 
AV_TIME_BASE_Q
, 
’c
->
time_ba£
);

876 ià(!
	`check_»cÜdšg_time
(
o¡
))

879 
sub
->
±s
 =…ts;

881 
sub
->
±s
 +ğ
	`av_»sÿË_q
(sub->
¡¬t_di¥Ïy_time
, (
AVR©iÚ®
){ 1, 1000 }, 
AV_TIME_BASE_Q
);

882 
sub
->
’d_di¥Ïy_time
 -ğsub->
¡¬t_di¥Ïy_time
;

883 
sub
->
¡¬t_di¥Ïy_time
 = 0;

884 ià(
i
 == 1)

885 
sub
->
num_»ùs
 = 0;

887 
o¡
->
äames_’coded
++;

889 
subt™Ë_out_size
 = 
	`avcodec_’code_subt™Ë
(
’c
, 
subt™Ë_out
,

890 
subt™Ë_out_max_size
, 
sub
);

891 ià(
i
 == 1)

892 
sub
->
num_»ùs
 = 
§ve_num_»ùs
;

893 ià(
subt™Ë_out_size
 < 0) {

894 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Subtitleƒncoding failed\n");

895 
	`ex™_´og¿m
(1);

898 
	`av_š™_·ck‘
(&
pkt
);

899 
pkt
.
d©a
 = 
subt™Ë_out
;

900 
pkt
.
size
 = 
subt™Ë_out_size
;

901 
pkt
.
±s
 = 
	`av_»sÿË_q
(
sub
->±s, 
AV_TIME_BASE_Q
, 
o¡
->
¡
->
time_ba£
);

902 
pkt
.
du¿tiÚ
 = 
	`av_»sÿË_q
(
sub
->
’d_di¥Ïy_time
, (
AVR©iÚ®
){ 1, 1000 }, 
o¡
->
¡
->
time_ba£
);

903 ià(
’c
->
codec_id
 =ğ
AV_CODEC_ID_DVB_SUBTITLE
) {

906 ià(
i
 == 0)

907 
pkt
.
±s
 +ğ90 * 
sub
->
¡¬t_di¥Ïy_time
;

909 
pkt
.
±s
 +ğ90 * 
sub
->
’d_di¥Ïy_time
;

911 
pkt
.
dts
 =…kt.
±s
;

912 
	`wr™e_äame
(
s
, &
pkt
, 
o¡
);

914 
	}
}

916 
	$do_video_out
(
AVFÜm©CÚ‹xt
 *
s
,

917 
OuutSŒ—m
 *
o¡
,

918 
AVF¿me
 *
Ãxt_piùu»
,

919 
sync_ts
)

921 
»t
, 
fÜm©_video_sync
;

922 
AVPack‘
 
pkt
;

923 
AVCodecCÚ‹xt
 *
’c
 = 
o¡
->
’c_ùx
;

924 
AVCodecCÚ‹xt
 *
mux_’c
 = 
o¡
->
¡
->
codec
;

925 
nb_äames
, 
nb0_äames
, 
i
;

926 
d–
, 
d–0
;

927 
du¿tiÚ
 = 0;

928 
äame_size
 = 0;

929 
IÅutSŒ—m
 *
i¡
 = 
NULL
;

930 
AVF‹rCÚ‹xt
 *
f‹r
 = 
o¡
->filter->filter;

932 ià(
o¡
->
sourû_šdex
 >= 0)

933 
i¡
 = 
šput_¡»ams
[
o¡
->
sourû_šdex
];

935 ià(
f‹r
->
šputs
[0]->
äame_¿‹
.
num
 > 0 &&

936 
f‹r
->
šputs
[0]->
äame_¿‹
.
d’
 > 0)

937 
du¿tiÚ
 = 1/(
	`av_q2d
(
f‹r
->
šputs
[0]->
äame_¿‹
è*‡v_q2d(
’c
->
time_ba£
));

939 if(
i¡
 && i¡->
¡
->
¡¬t_time
 !ğ
AV_NOPTS_VALUE
 && i¡->¡->
fœ¡_dts
 !ğAV_NOPTS_VALUE && 
o¡
->
äame_¿‹
.
num
)

940 
du¿tiÚ
 = 
	`FFMIN
(du¿tiÚ, 1/(
	`av_q2d
(
o¡
->
äame_¿‹
è*‡v_q2d(
’c
->
time_ba£
)));

942 ià(!
o¡
->
f‹rs_süt
 &&

943 !
o¡
->
f‹rs
 &&

944 
Ãxt_piùu»
 &&

945 
i¡
 &&

946 
	`Ìštf
(
	`av_äame_g‘_pkt_du¿tiÚ
(
Ãxt_piùu»
è* 
	`av_q2d
(
i¡
->
¡
->
time_ba£
è/‡v_q2d(
’c
->time_base)) > 0) {

947 
du¿tiÚ
 = 
	`Ìštf
(
	`av_äame_g‘_pkt_du¿tiÚ
(
Ãxt_piùu»
è* 
	`av_q2d
(
i¡
->
¡
->
time_ba£
è/‡v_q2d(
’c
->time_base));

950 ià(!
Ãxt_piùu»
) {

952 
nb0_äames
 = 
nb_äames
 = 
	`mid_´ed
(
o¡
->
Ï¡_nb0_äames
[0],

953 
o¡
->
Ï¡_nb0_äames
[1],

954 
o¡
->
Ï¡_nb0_äames
[2]);

956 
d–0
 = 
sync_ts
 - 
o¡
->
sync_İts
;

957 
d–
 = 
d–0
 + 
du¿tiÚ
;

960 
nb0_äames
 = 0;

961 
nb_äames
 = 1;

963 
fÜm©_video_sync
 = 
video_sync_m‘hod
;

964 ià(
fÜm©_video_sync
 =ğ
VSYNC_AUTO
) {

965 if(!
	`¡rcmp
(
s
->
ofÜm©
->
Çme
, "avi")) {

966 
fÜm©_video_sync
 = 
VSYNC_VFR
;

968 
fÜm©_video_sync
 = (
s
->
ofÜm©
->
æags
 & 
AVFMT_VARIABLE_FPS
è? ((s->ofÜm©->æag & 
AVFMT_NOTIMESTAMPS
è? 
VSYNC_PASSTHROUGH
 : 
VSYNC_VFR
è: 
VSYNC_CFR
;

969 iàĞ
i¡


970 && 
fÜm©_video_sync
 =ğ
VSYNC_CFR


971 && 
šput_fes
[
i¡
->
fe_šdex
]->
ùx
->
nb_¡»ams
 == 1

972 && 
šput_fes
[
i¡
->
fe_šdex
]->
šput_ts_off£t
 == 0) {

973 
fÜm©_video_sync
 = 
VSYNC_VSCFR
;

975 ià(
fÜm©_video_sync
 =ğ
VSYNC_CFR
 && 
cİy_ts
) {

976 
fÜm©_video_sync
 = 
VSYNC_VSCFR
;

979 
o¡
->
is_cä
 = (
fÜm©_video_sync
 =ğ
VSYNC_CFR
 || fÜm©_video_synø=ğ
VSYNC_VSCFR
);

981 ià(
d–0
 < 0 &&

982 
d–
 > 0 &&

983 
fÜm©_video_sync
 !ğ
VSYNC_PASSTHROUGH
 &&

984 
fÜm©_video_sync
 !ğ
VSYNC_DROP
) {

985 ià(
d–0
 < -0.6) {

986 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "Pa¡ du¿tiÚ %àtoØÏrge\n", -
d–0
);

988 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, "Clpšg f¿mš„©cÚv”siÚ by %f\n", -
d–0
);

989 
sync_ts
 = 
o¡
->
sync_İts
;

990 
du¿tiÚ
 +ğ
d–0
;

991 
d–0
 = 0;

994 
fÜm©_video_sync
) {

995 
VSYNC_VSCFR
:

996 ià(
o¡
->
äame_numb”
 =ğ0 && 
d–0
 >= 0.5) {

997 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, "NÙ du¶iÿtšg %d in™ŸÈäames\n", ()
	`Ìštf
(
d–0
));

998 
d–
 = 
du¿tiÚ
;

999 
d–0
 = 0;

1000 
o¡
->
sync_İts
 = 
	`Ìšt
(
sync_ts
);

1002 
VSYNC_CFR
:

1004 ià(
äame_drİ_th»shŞd
 && 
d–
 < f¿me_drİ_th»shŞd && 
o¡
->
äame_numb”
) {

1005 
nb_äames
 = 0;

1006 } ià(
d–
 < -1.1)

1007 
nb_äames
 = 0;

1008 ià(
d–
 > 1.1) {

1009 
nb_äames
 = 
	`Ìštf
(
d–
);

1010 ià(
d–0
 > 1.1)

1011 
nb0_äames
 = 
	`Ìštf
(
d–0
 - 0.6);

1014 
VSYNC_VFR
:

1015 ià(
d–
 <= -0.6)

1016 
nb_äames
 = 0;

1017 ià(
d–
 > 0.6)

1018 
o¡
->
sync_İts
 = 
	`Ìšt
(
sync_ts
);

1020 
VSYNC_DROP
:

1021 
VSYNC_PASSTHROUGH
:

1022 
o¡
->
sync_İts
 = 
	`Ìšt
(
sync_ts
);

1025 
	`av_as£¹0
(0);

1029 
nb_äames
 = 
	`FFMIN
Òb_äames, 
o¡
->
max_äames
 - o¡->
äame_numb”
);

1030 
nb0_äames
 = 
	`FFMIN
Òb0_äames, 
nb_äames
);

1032 
	`memmove
(
o¡
->
Ï¡_nb0_äames
 + 1,

1033 
o¡
->
Ï¡_nb0_äames
,

1034 (
o¡
->
Ï¡_nb0_äames
[0]è* (
	`FF_ARRAY_ELEMS
(ost->last_nb0_frames) - 1));

1035 
o¡
->
Ï¡_nb0_äames
[0] = 
nb0_äames
;

1037 ià(
nb0_äames
 =ğ0 && 
o¡
->
Ï¡_drİ³d
) {

1038 
nb_äames_drİ
++;

1039 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
,

1040 "*** drİpšg f¿m%d from sŒ—m %d‡ˆt %"
PRId64
"\n",

1041 
o¡
->
äame_numb”
, o¡->
¡
->
šdex
, o¡->
Ï¡_äame
->
±s
);

1043 ià(
nb_äames
 > (
nb0_äames
 && 
o¡
->
Ï¡_drİ³d
) + (nb_frames >‚b0_frames)) {

1044 ià(
nb_äames
 > 
dts_”rÜ_th»shŞd
 * 30) {

1045 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "%d f¿mdu¶iÿtiÚoØÏrge, skpšg\n", 
nb_äames
 - 1);

1046 
nb_äames_drİ
++;

1049 
nb_äames_dup
 +ğ
nb_äames
 - (
nb0_äames
 && 
o¡
->
Ï¡_drİ³d
) - (nb_frames >‚b0_frames);

1050 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, "*** %d dup!\n", 
nb_äames
 - 1);

1052 
o¡
->
Ï¡_drİ³d
 = 
nb_äames
 =ğ
nb0_äames
 && 
Ãxt_piùu»
;

1055 
i
 = 0; i < 
nb_äames
; i++) {

1056 
AVF¿me
 *
š_piùu»
;

1057 
	`av_š™_·ck‘
(&
pkt
);

1058 
pkt
.
d©a
 = 
NULL
;

1059 
pkt
.
size
 = 0;

1061 ià(
i
 < 
nb0_äames
 && 
o¡
->
Ï¡_äame
) {

1062 
š_piùu»
 = 
o¡
->
Ï¡_äame
;

1064 
š_piùu»
 = 
Ãxt_piùu»
;

1066 ià(!
š_piùu»
)

1069 
š_piùu»
->
±s
 = 
o¡
->
sync_İts
;

1072 ià(!
	`check_»cÜdšg_time
(
o¡
))

1074 ià(
o¡
->
äame_numb”
 >ğo¡->
max_äames
)

1078 #ià
FF_API_LAVF_FMT_RAWPICTURE


1079 ià(
s
->
ofÜm©
->
æags
 & 
AVFMT_RAWPICTURE
 &&

1080 
’c
->
codec
->
id
 =ğ
AV_CODEC_ID_RAWVIDEO
) {

1084 ià(
š_piùu»
->
š‹¾aûd_äame
)

1085 
mux_’c
->
f›ld_Üd”
 = 
š_piùu»
->
tİ_f›ld_fœ¡
 ? 
AV_FIELD_TB
:
AV_FIELD_BT
;

1087 
mux_’c
->
f›ld_Üd”
 = 
AV_FIELD_PROGRESSIVE
;

1088 
pkt
.
d©a
 = (
ušt8_t
 *)
š_piùu»
;

1089 
pkt
.
size
 = (
AVPiùu»
);

1090 
pkt
.
±s
 = 
	`av_»sÿË_q
(
š_piùu»
->±s, 
’c
->
time_ba£
, 
o¡
->
¡
->time_base);

1091 
pkt
.
æags
 |ğ
AV_PKT_FLAG_KEY
;

1093 
	`wr™e_äame
(
s
, &
pkt
, 
o¡
);

1097 
gÙ_·ck‘
, 
fÜûd_keyäame
 = 0;

1098 
±s_time
;

1100 ià(
’c
->
æags
 & (
AV_CODEC_FLAG_INTERLACED_DCT
 | 
AV_CODEC_FLAG_INTERLACED_ME
) &&

1101 
o¡
->
tİ_f›ld_fœ¡
 >= 0)

1102 
š_piùu»
->
tİ_f›ld_fœ¡
 = !!
o¡
->top_field_first;

1104 ià(
š_piùu»
->
š‹¾aûd_äame
) {

1105 ià(
’c
->
codec
->
id
 =ğ
AV_CODEC_ID_MJPEG
)

1106 
mux_’c
->
f›ld_Üd”
 = 
š_piùu»
->
tİ_f›ld_fœ¡
 ? 
AV_FIELD_TT
:
AV_FIELD_BB
;

1108 
mux_’c
->
f›ld_Üd”
 = 
š_piùu»
->
tİ_f›ld_fœ¡
 ? 
AV_FIELD_TB
:
AV_FIELD_BT
;

1110 
mux_’c
->
f›ld_Üd”
 = 
AV_FIELD_PROGRESSIVE
;

1112 
š_piùu»
->
qu®™y
 = 
’c
->
glob®_qu®™y
;

1113 
š_piùu»
->
più_ty³
 = 0;

1115 
±s_time
 = 
š_piùu»
->
±s
 !ğ
AV_NOPTS_VALUE
 ?

1116 
š_piùu»
->
±s
 * 
	`av_q2d
(
’c
->
time_ba£
è: 
NAN
;

1117 ià(
o¡
->
fÜûd_kf_šdex
 < o¡->
fÜûd_kf_couÁ
 &&

1118 
š_piùu»
->
±s
 >ğ
o¡
->
fÜûd_kf_±s
[o¡->
fÜûd_kf_šdex
]) {

1119 
o¡
->
fÜûd_kf_šdex
++;

1120 
fÜûd_keyäame
 = 1;

1121 } ià(
o¡
->
fÜûd_keyäames_³x´
) {

1122 
»s
;

1123 
o¡
->
fÜûd_keyäames_ex´_cÚ¡_v®ues
[
FKF_T
] = 
±s_time
;

1124 
»s
 = 
	`av_ex´_ev®
(
o¡
->
fÜûd_keyäames_³x´
,

1125 
o¡
->
fÜûd_keyäames_ex´_cÚ¡_v®ues
, 
NULL
);

1126 
	`ff_dlog
(
NULL
, "force_key_frame:‚:%f‚_forced:%f…rev_forced_n:%f:%f…rev_forced_t:%f ->„es:%f\n",

1127 
o¡
->
fÜûd_keyäames_ex´_cÚ¡_v®ues
[
FKF_N
],

1128 
o¡
->
fÜûd_keyäames_ex´_cÚ¡_v®ues
[
FKF_N_FORCED
],

1129 
o¡
->
fÜûd_keyäames_ex´_cÚ¡_v®ues
[
FKF_PREV_FORCED_N
],

1130 
o¡
->
fÜûd_keyäames_ex´_cÚ¡_v®ues
[
FKF_T
],

1131 
o¡
->
fÜûd_keyäames_ex´_cÚ¡_v®ues
[
FKF_PREV_FORCED_T
],

1132 
»s
);

1133 ià(
»s
) {

1134 
fÜûd_keyäame
 = 1;

1135 
o¡
->
fÜûd_keyäames_ex´_cÚ¡_v®ues
[
FKF_PREV_FORCED_N
] =

1136 
o¡
->
fÜûd_keyäames_ex´_cÚ¡_v®ues
[
FKF_N
];

1137 
o¡
->
fÜûd_keyäames_ex´_cÚ¡_v®ues
[
FKF_PREV_FORCED_T
] =

1138 
o¡
->
fÜûd_keyäames_ex´_cÚ¡_v®ues
[
FKF_T
];

1139 
o¡
->
fÜûd_keyäames_ex´_cÚ¡_v®ues
[
FKF_N_FORCED
] += 1;

1142 
o¡
->
fÜûd_keyäames_ex´_cÚ¡_v®ues
[
FKF_N
] += 1;

1143 } iàĞ
o¡
->
fÜûd_keyäames


1144 && !
	`¡ºcmp
(
o¡
->
fÜûd_keyäames
, "source", 6)

1145 && 
š_piùu»
->
key_äame
==1) {

1146 
fÜûd_keyäame
 = 1;

1149 ià(
fÜûd_keyäame
) {

1150 
š_piùu»
->
più_ty³
 = 
AV_PICTURE_TYPE_I
;

1151 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, "FÜûd keyäam©im%f\n", 
±s_time
);

1154 
	`upd©e_b’chm¬k
(
NULL
);

1155 ià(
debug_ts
) {

1156 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "encoder <-ype:video "

1158 
	`av_ts2¡r
(
š_piùu»
->
±s
), 
	`av_ts2time¡r
(š_piùu»->±s, &
’c
->
time_ba£
),

1159 
’c
->
time_ba£
.
num
,ƒnc->time_ba£.
d’
);

1162 
o¡
->
äames_’coded
++;

1164 
»t
 = 
	`avcodec_’code_video2
(
’c
, &
pkt
, 
š_piùu»
, &
gÙ_·ck‘
);

1165 
	`upd©e_b’chm¬k
("’code_videØ%d.%d", 
o¡
->
fe_šdex
, o¡->
šdex
);

1166 ià(
»t
 < 0) {

1167 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Videoƒncoding failed\n");

1168 
	`ex™_´og¿m
(1);

1171 ià(
gÙ_·ck‘
) {

1172 ià(
debug_ts
) {

1173 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "encoder ->ype:video "

1175 
	`av_ts2¡r
(
pkt
.
±s
), 
	`av_ts2time¡r
Õkt.±s, &
’c
->
time_ba£
),

1176 
	`av_ts2¡r
(
pkt
.
dts
), 
	`av_ts2time¡r
Õkt.dts, &
’c
->
time_ba£
));

1179 ià(
pkt
.
±s
 =ğ
AV_NOPTS_VALUE
 && !(
’c
->
codec
->
ÿ·b™›s
 & 
AV_CODEC_CAP_DELAY
))

1180 
pkt
.
±s
 = 
o¡
->
sync_İts
;

1182 
	`av_·ck‘_»sÿË_ts
(&
pkt
, 
’c
->
time_ba£
, 
o¡
->
¡
->time_base);

1184 ià(
debug_ts
) {

1185 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "encoder ->ype:video "

1187 
	`av_ts2¡r
(
pkt
.
±s
), 
	`av_ts2time¡r
Õkt.±s, &
o¡
->
¡
->
time_ba£
),

1188 
	`av_ts2¡r
(
pkt
.
dts
), 
	`av_ts2time¡r
Õkt.dts, &
o¡
->
¡
->
time_ba£
));

1191 
äame_size
 = 
pkt
.
size
;

1192 
	`wr™e_äame
(
s
, &
pkt
, 
o¡
);

1195 ià(
o¡
->
logfe
 && 
’c
->
¡©s_out
) {

1196 
	`årštf
(
o¡
->
logfe
, "%s", 
’c
->
¡©s_out
);

1200 
o¡
->
sync_İts
++;

1206 
o¡
->
äame_numb”
++;

1208 ià(
v¡©s_f’ame
 && 
äame_size
)

1209 
	`do_video_¡©s
(
o¡
, 
äame_size
);

1212 ià(!
o¡
->
Ï¡_äame
)

1213 
o¡
->
Ï¡_äame
 = 
	`av_äame_®loc
();

1214 
	`av_äame_uÄef
(
o¡
->
Ï¡_äame
);

1215 ià(
Ãxt_piùu»
 && 
o¡
->
Ï¡_äame
)

1216 
	`av_äame_»f
(
o¡
->
Ï¡_äame
, 
Ãxt_piùu»
);

1218 
	`av_äame_ä“
(&
o¡
->
Ï¡_äame
);

1219 
	}
}

1221 
	$p¢r
(
d
)

1223  -10.0 * 
	`log10
(
d
);

1224 
	}
}

1226 
	$do_video_¡©s
(
OuutSŒ—m
 *
o¡
, 
äame_size
)

1228 
AVCodecCÚ‹xt
 *
’c
;

1229 
äame_numb”
;

1230 
ti1
, 
b™¿‹
, 
avg_b™¿‹
;

1233 ià(!
v¡©s_fe
) {

1234 
v¡©s_fe
 = 
	`fİ’
(
v¡©s_f’ame
, "w");

1235 ià(!
v¡©s_fe
) {

1236 
	`³¼Ü
("fopen");

1237 
	`ex™_´og¿m
(1);

1241 
’c
 = 
o¡
->
’c_ùx
;

1242 ià(
’c
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
) {

1243 
äame_numb”
 = 
o¡
->
¡
->
nb_äames
;

1244 
	`årštf
(
v¡©s_fe
, "äameğ%5d qğ%2.1à", 
äame_numb”
,

1245 
o¡
->
qu®™y
 / ()
FF_QP2LAMBDA
);

1247 ià(
o¡
->
”rÜ
[0]>=0 && (
’c
->
æags
 & 
AV_CODEC_FLAG_PSNR
))

1248 
	`årštf
(
v¡©s_fe
, "PSNRğ%6.2à", 
	`p¢r
(
o¡
->
”rÜ
[0] / (
’c
->
width
 *ƒnc->
height
 * 255.0 * 255.0)));

1250 
	`årštf
(
v¡©s_fe
,"f_sizeğ%6d ", 
äame_size
);

1252 
ti1
 = 
	`av_¡»am_g‘_’d_±s
(
o¡
->
¡
è* 
	`av_q2d
(o¡->¡->
time_ba£
);

1253 ià(
ti1
 < 0.01)

1254 
ti1
 = 0.01;

1256 
b™¿‹
 = (
äame_size
 * 8è/ 
	`av_q2d
(
’c
->
time_ba£
) / 1000.0;

1257 
avg_b™¿‹
 = ()(
o¡
->
d©a_size
 * 8è/ 
ti1
 / 1000.0;

1258 
	`årštf
(
v¡©s_fe
, "s_size= %8.0fkBime= %0.3f br= %7.1fkbits/s‡vg_br= %7.1fkbits/s ",

1259 ()
o¡
->
d©a_size
 / 1024, 
ti1
, 
b™¿‹
, 
avg_b™¿‹
);

1260 
	`årštf
(
v¡©s_fe
, "ty³ğ%c\n", 
	`av_g‘_piùu»_ty³_ch¬
(
o¡
->
più_ty³
));

1262 
	}
}

1264 
	$fšish_ouut_¡»am
(
OuutSŒ—m
 *
o¡
)

1266 
OuutFe
 *
of
 = 
ouut_fes
[
o¡
->
fe_šdex
];

1267 
i
;

1269 
o¡
->
fšished
 = 
ENCODER_FINISHED
 | 
MUXER_FINISHED
;

1271 ià(
of
->
shÜ‹¡
) {

1272 
i
 = 0; i < 
of
->
ùx
->
nb_¡»ams
; i++)

1273 
ouut_¡»ams
[
of
->
o¡_šdex
 + 
i
]->
fšished
 = 
ENCODER_FINISHED
 | 
MUXER_FINISHED
;

1275 
	}
}

1283 
	$»­_f‹rs
(
æush
)

1285 
AVF¿me
 *
f‹»d_äame
 = 
NULL
;

1286 
i
;

1289 
i
 = 0; i < 
nb_ouut_¡»ams
; i++) {

1290 
OuutSŒ—m
 *
o¡
 = 
ouut_¡»ams
[
i
];

1291 
OuutFe
 *
of
 = 
ouut_fes
[
o¡
->
fe_šdex
];

1292 
AVF‹rCÚ‹xt
 *
f‹r
;

1293 
AVCodecCÚ‹xt
 *
’c
 = 
o¡
->
’c_ùx
;

1294 
»t
 = 0;

1296 ià(!
o¡
->
f‹r
)

1298 
f‹r
 = 
o¡
->filter->filter;

1300 ià(!
o¡
->
f‹»d_äame
 && !(o¡->f‹»d_äamğ
	`av_äame_®loc
())) {

1301  
	`AVERROR
(
ENOMEM
);

1303 
f‹»d_äame
 = 
o¡
->filtered_frame;

1306 
æßt_±s
 = 
AV_NOPTS_VALUE
;

1307 
»t
 = 
	`av_bufãrsšk_g‘_äame_æags
(
f‹r
, 
f‹»d_äame
,

1308 
AV_BUFFERSINK_FLAG_NO_REQUEST
);

1309 ià(
»t
 < 0) {

1310 ià(
»t
 !ğ
	`AVERROR
(
EAGAIN
è&&„‘ !ğ
AVERROR_EOF
) {

1311 
	`av_log
(
NULL
, 
AV_LOG_WARNING
,

1312 "E¼Ü iÀav_bufãrsšk_g‘_äame_æags(): %s\n", 
	`av_”r2¡r
(
»t
));

1313 } ià(
æush
 && 
»t
 =ğ
AVERROR_EOF
) {

1314 ià(
f‹r
->
šputs
[0]->
ty³
 =ğ
AVMEDIA_TYPE_VIDEO
)

1315 
	`do_video_out
(
of
->
ùx
, 
o¡
, 
NULL
, 
AV_NOPTS_VALUE
);

1319 ià(
o¡
->
fšished
) {

1320 
	`av_äame_uÄef
(
f‹»d_äame
);

1323 ià(
f‹»d_äame
->
±s
 !ğ
AV_NOPTS_VALUE
) {

1324 
št64_t
 
¡¬t_time
 = (
of
->¡¬t_tim=ğ
AV_NOPTS_VALUE
) ? 0 : of->start_time;

1325 
AVR©iÚ®
 
tb
 = 
’c
->
time_ba£
;

1326 
exŒa_b™s
 = 
	`av_ş
(29 - 
	`av_log2
(
tb
.
d’
), 0, 16);

1328 
tb
.
d’
 <<ğ
exŒa_b™s
;

1329 
æßt_±s
 =

1330 
	`av_»sÿË_q
(
f‹»d_äame
->
±s
, 
f‹r
->
šputs
[0]->
time_ba£
, 
tb
) -

1331 
	`av_»sÿË_q
(
¡¬t_time
, 
AV_TIME_BASE_Q
, 
tb
);

1332 
æßt_±s
 /ğ1 << 
exŒa_b™s
;

1334 
æßt_±s
 +ğ
	`FFSIGN
(float_pts) * 1.0 / (1<<17);

1336 
f‹»d_äame
->
±s
 =

1337 
	`av_»sÿË_q
(
f‹»d_äame
->
±s
, 
f‹r
->
šputs
[0]->
time_ba£
, 
’c
->time_base) -

1338 
	`av_»sÿË_q
(
¡¬t_time
, 
AV_TIME_BASE_Q
, 
’c
->
time_ba£
);

1343 
f‹r
->
šputs
[0]->
ty³
) {

1344 
AVMEDIA_TYPE_VIDEO
:

1345 ià(!
o¡
->
äame_a¥eù_¿tio
.
num
)

1346 
’c
->
§m¶e_a¥eù_¿tio
 = 
f‹»d_äame
->sample_aspect_ratio;

1348 ià(
debug_ts
) {

1349 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "filter ->…ts:%s…ts_time:%sƒxact:%fime_base:%d/%d\n",

1350 
	`av_ts2¡r
(
f‹»d_äame
->
±s
), 
	`av_ts2time¡r
(f‹»d_äame->±s, &
’c
->
time_ba£
),

1351 
æßt_±s
,

1352 
’c
->
time_ba£
.
num
,ƒnc->time_ba£.
d’
);

1355 
	`do_video_out
(
of
->
ùx
, 
o¡
, 
f‹»d_äame
, 
æßt_±s
);

1357 
AVMEDIA_TYPE_AUDIO
:

1358 ià(!(
’c
->
codec
->
ÿ·b™›s
 & 
AV_CODEC_CAP_PARAM_CHANGE
) &&

1359 
’c
->
chªÃls
 !ğ
	`av_äame_g‘_chªÃls
(
f‹»d_äame
)) {

1360 
	`av_log
(
NULL
, 
AV_LOG_ERROR
,

1364 
	`do_audio_out
(
of
->
ùx
, 
o¡
, 
f‹»d_äame
);

1368 
	`av_as£¹0
(0);

1371 
	`av_äame_uÄef
(
f‹»d_äame
);

1376 
	}
}

1378 
	$´št_fš®_¡©s
(
št64_t
 
tÙ®_size
)

1380 
ušt64_t
 
video_size
 = 0, 
audio_size
 = 0, 
exŒa_size
 = 0, 
Ùh”_size
 = 0;

1381 
ušt64_t
 
subt™Ë_size
 = 0;

1382 
ušt64_t
 
d©a_size
 = 0;

1383 
³rûÁ
 = -1.0;

1384 
i
, 
j
;

1385 
·ss1_u£d
 = 1;

1387 
i
 = 0; i < 
nb_ouut_¡»ams
; i++) {

1388 
OuutSŒ—m
 *
o¡
 = 
ouut_¡»ams
[
i
];

1389 
o¡
->
’c_ùx
->
codec_ty³
) {

1390 
AVMEDIA_TYPE_VIDEO
: 
video_size
 +ğ
o¡
->
d©a_size
; ;

1391 
AVMEDIA_TYPE_AUDIO
: 
audio_size
 +ğ
o¡
->
d©a_size
; ;

1392 
AVMEDIA_TYPE_SUBTITLE
: 
subt™Ë_size
 +ğ
o¡
->
d©a_size
; ;

1393 : 
Ùh”_size
 +ğ
o¡
->
d©a_size
; ;

1395 
exŒa_size
 +ğ
o¡
->
’c_ùx
->
exŒad©a_size
;

1396 
d©a_size
 +ğ
o¡
->data_size;

1397 iàĞ(
o¡
->
’c_ùx
->
æags
 & (
AV_CODEC_FLAG_PASS1
 | 
CODEC_FLAG_PASS2
))

1398 !ğ
AV_CODEC_FLAG_PASS1
)

1399 
·ss1_u£d
 = 0;

1402 ià(
d©a_size
 && 
tÙ®_size
>0 &&otal_size >= data_size)

1403 
³rûÁ
 = 100.0 * (
tÙ®_size
 - 
d©a_size
) / data_size;

1405 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "video:%1.0fkB‡udio:%1.0fkB subtitle:%1.0fkB other streams:%1.0fkB global headers:%1.0fkB muxing overhead: ",

1406 
video_size
 / 1024.0,

1407 
audio_size
 / 1024.0,

1408 
subt™Ë_size
 / 1024.0,

1409 
Ùh”_size
 / 1024.0,

1410 
exŒa_size
 / 1024.0);

1411 ià(
³rûÁ
 >= 0.0)

1412 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "%f%%", 
³rûÁ
);

1414 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "unknown");

1415 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "\n");

1418 
i
 = 0; i < 
nb_šput_fes
; i++) {

1419 
IÅutFe
 *
f
 = 
šput_fes
[
i
];

1420 
ušt64_t
 
tÙ®_·ck‘s
 = 0, 
tÙ®_size
 = 0;

1422 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, "Input file #%d (%s):\n",

1423 
i
, 
f
->
ùx
->
f’ame
);

1425 
j
 = 0; j < 
f
->
nb_¡»ams
; j++) {

1426 
IÅutSŒ—m
 *
i¡
 = 
šput_¡»ams
[
f
->
i¡_šdex
 + 
j
];

1427 
AVMedŸTy³
 
ty³
 = 
i¡
->
dec_ùx
->
codec_ty³
;

1429 
tÙ®_size
 +ğ
i¡
->
d©a_size
;

1430 
tÙ®_·ck‘s
 +ğ
i¡
->
nb_·ck‘s
;

1432 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, " Input stream #%d:%d (%s): ",

1433 
i
, 
j
, 
	`medŸ_ty³_¡ršg
(
ty³
));

1434 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, "%"
PRIu64
"…ackets„ead (%"PRIu64" bytes); ",

1435 
i¡
->
nb_·ck‘s
, i¡->
d©a_size
);

1437 ià(
i¡
->
decodšg_Ãeded
) {

1438 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, "%"
PRIu64
" frames decoded",

1439 
i¡
->
äames_decoded
);

1440 ià(
ty³
 =ğ
AVMEDIA_TYPE_AUDIO
)

1441 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, " (%"
PRIu64
" sam¶es)", 
i¡
->
§m¶es_decoded
);

1442 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, "; ");

1445 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, "\n");

1448 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, " TÙ®: %"
PRIu64
"…ackets (%"PRIu64" bytes) demuxed\n",

1449 
tÙ®_·ck‘s
, 
tÙ®_size
);

1452 
i
 = 0; i < 
nb_ouut_fes
; i++) {

1453 
OuutFe
 *
of
 = 
ouut_fes
[
i
];

1454 
ušt64_t
 
tÙ®_·ck‘s
 = 0, 
tÙ®_size
 = 0;

1456 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, "Output file #%d (%s):\n",

1457 
i
, 
of
->
ùx
->
f’ame
);

1459 
j
 = 0; j < 
of
->
ùx
->
nb_¡»ams
; j++) {

1460 
OuutSŒ—m
 *
o¡
 = 
ouut_¡»ams
[
of
->
o¡_šdex
 + 
j
];

1461 
AVMedŸTy³
 
ty³
 = 
o¡
->
’c_ùx
->
codec_ty³
;

1463 
tÙ®_size
 +ğ
o¡
->
d©a_size
;

1464 
tÙ®_·ck‘s
 +ğ
o¡
->
·ck‘s_wr™‹n
;

1466 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, " Output stream #%d:%d (%s): ",

1467 
i
, 
j
, 
	`medŸ_ty³_¡ršg
(
ty³
));

1468 ià(
o¡
->
’codšg_Ãeded
) {

1469 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, "%"
PRIu64
" framesƒncoded",

1470 
o¡
->
äames_’coded
);

1471 ià(
ty³
 =ğ
AVMEDIA_TYPE_AUDIO
)

1472 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, " (%"
PRIu64
" sam¶es)", 
o¡
->
§m¶es_’coded
);

1473 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, "; ");

1476 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, "%"
PRIu64
"…ackets muxed (%"PRIu64" bytes); ",

1477 
o¡
->
·ck‘s_wr™‹n
, o¡->
d©a_size
);

1479 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, "\n");

1482 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, " TÙ®: %"
PRIu64
"…ackets (%"PRIu64" bytes) muxed\n",

1483 
tÙ®_·ck‘s
, 
tÙ®_size
);

1485 if(
video_size
 + 
d©a_size
 + 
audio_size
 + 
subt™Ë_size
 + 
exŒa_size
 == 0){

1486 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "Output file isƒmpty,‚othing wasƒncoded ");

1487 ià(
·ss1_u£d
) {

1488 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "\n");

1490 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "(check -ss / -t / -frames…arameters if used)\n");

1493 
	}
}

1495 
	$´št_»pÜt
(
is_Ï¡_»pÜt
, 
št64_t
 
tim”_¡¬t
, iÁ64_ˆ
cur_time
)

1497 
buf
[1024];

1498 
AVBPršt
 
buf_süt
;

1499 
OuutSŒ—m
 *
o¡
;

1500 
AVFÜm©CÚ‹xt
 *
oc
;

1501 
št64_t
 
tÙ®_size
;

1502 
AVCodecCÚ‹xt
 *
’c
;

1503 
äame_numb”
, 
vid
, 
i
;

1504 
b™¿‹
;

1505 
¥“d
;

1506 
št64_t
 
±s
 = 
INT64_MIN
 + 1;

1507 
št64_t
 
Ï¡_time
 = -1;

1508 
qp_hi¡og¿m
[52];

1509 
hours
, 
mšs
, 
£cs
, 
us
;

1510 
»t
;

1511 
t
;

1513 ià(!
´št_¡©s
 && !
is_Ï¡_»pÜt
 && !
´og»ss_avio
)

1516 ià(!
is_Ï¡_»pÜt
) {

1517 ià(
Ï¡_time
 == -1) {

1518 
Ï¡_time
 = 
cur_time
;

1521 ià((
cur_time
 - 
Ï¡_time
) < 500000)

1523 
Ï¡_time
 = 
cur_time
;

1526 
t
 = (
cur_time
-
tim”_¡¬t
) / 1000000.0;

1529 
oc
 = 
ouut_fes
[0]->
ùx
;

1531 
tÙ®_size
 = 
	`avio_size
(
oc
->
pb
);

1532 ià(
tÙ®_size
 <= 0)

1533 
tÙ®_size
 = 
	`avio_‹Î
(
oc
->
pb
);

1535 
buf
[0] = '\0';

1536 
vid
 = 0;

1537 
	`av_b´št_š™
(&
buf_süt
, 0, 1);

1538 
i
 = 0; i < 
nb_ouut_¡»ams
; i++) {

1539 
q
 = -1;

1540 
o¡
 = 
ouut_¡»ams
[
i
];

1541 
’c
 = 
o¡
->
’c_ùx
;

1542 ià(!
o¡
->
¡»am_cİy
)

1543 
q
 = 
o¡
->
qu®™y
 / (è
FF_QP2LAMBDA
;

1545 ià(
vid
 && 
’c
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
) {

1546 
	`¢´štf
(
buf
 + 
	`¡¾’
(buf), (bufè- sŒËn(buf), "q=%2.1à", 
q
);

1547 
	`av_b´štf
(&
buf_süt
, "stream_%d_%d_q=%.1f\n",

1548 
o¡
->
fe_šdex
, o¡->
šdex
, 
q
);

1550 ià(!
vid
 && 
’c
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
) {

1551 
ås
;

1553 
äame_numb”
 = 
o¡
->frame_number;

1554 
ås
 = 
t
 > 1 ? 
äame_numb”
 / : 0;

1555 
	`¢´štf
(
buf
 + 
	`¡¾’
(buf), (buf) - strlen(buf), "frame=%5d fps=%3.*f q=%3.1f ",

1556 
äame_numb”
, 
ås
 < 9.95, fps, 
q
);

1557 
	`av_b´štf
(&
buf_süt
, "äame=%d\n", 
äame_numb”
);

1558 
	`av_b´štf
(&
buf_süt
, "ås=%.1f\n", 
ås
);

1559 
	`av_b´štf
(&
buf_süt
, "stream_%d_%d_q=%.1f\n",

1560 
o¡
->
fe_šdex
, o¡->
šdex
, 
q
);

1561 ià(
is_Ï¡_»pÜt
)

1562 
	`¢´štf
(
buf
 + 
	`¡¾’
(buf), (buf) - strlen(buf), "L");

1563 ià(
qp_hi¡
) {

1564 
j
;

1565 
qp
 = 
	`Ìštf
(
q
);

1566 ià(
qp
 >ğ0 && q°< 
	`FF_ARRAY_ELEMS
(
qp_hi¡og¿m
))

1567 
qp_hi¡og¿m
[
qp
]++;

1568 
j
 = 0; j < 32; j++)

1569 
	`¢´štf
(
buf
 + 
	`¡¾’
(buf), (bufè- sŒËn(buf), "%X", 
	`av_log2
(
qp_hi¡og¿m
[
j
] + 1));

1572 ià((
’c
->
æags
 & 
AV_CODEC_FLAG_PSNR
è&& (
o¡
->
più_ty³
 !ğ
AV_PICTURE_TYPE_NONE
 || 
is_Ï¡_»pÜt
)) {

1573 
j
;

1574 
”rÜ
, 
”rÜ_sum
 = 0;

1575 
sÿË
, 
sÿË_sum
 = 0;

1576 
p
;

1577 
ty³
[3] = { 'Y','U','V' };

1578 
	`¢´štf
(
buf
 + 
	`¡¾’
(buf), (buf) - strlen(buf), "PSNR=");

1579 
j
 = 0; j < 3; j++) {

1580 ià(
is_Ï¡_»pÜt
) {

1581 
”rÜ
 = 
’c
->”rÜ[
j
];

1582 
sÿË
 = 
’c
->
width
 *ƒnc->
height
 * 255.0 * 255.0 * 
äame_numb”
;

1584 
”rÜ
 = 
o¡
->”rÜ[
j
];

1585 
sÿË
 = 
’c
->
width
 *ƒnc->
height
 * 255.0 * 255.0;

1587 ià(
j
)

1588 
sÿË
 /= 4;

1589 
”rÜ_sum
 +ğ
”rÜ
;

1590 
sÿË_sum
 +ğ
sÿË
;

1591 
p
 = 
	`p¢r
(
”rÜ
 / 
sÿË
);

1592 
	`¢´štf
(
buf
 + 
	`¡¾’
(buf), (bufè- sŒËn(buf), "%c:%2.2à", 
ty³
[
j
], 
p
);

1593 
	`av_b´štf
(&
buf_süt
, "stream_%d_%d_psnr_%c=%2.2f\n",

1594 
o¡
->
fe_šdex
, o¡->
šdex
, 
ty³
[
j
] | 32, 
p
);

1596 
p
 = 
	`p¢r
(
”rÜ_sum
 / 
sÿË_sum
);

1597 
	`¢´štf
(
buf
 + 
	`¡¾’
(buf), (bufè- sŒËn(buf), "*:%2.2à", 
	`p¢r
(
”rÜ_sum
 / 
sÿË_sum
));

1598 
	`av_b´štf
(&
buf_süt
, "stream_%d_%d_psnr_all=%2.2f\n",

1599 
o¡
->
fe_šdex
, o¡->
šdex
, 
p
);

1601 
vid
 = 1;

1604 ià(
	`av_¡»am_g‘_’d_±s
(
o¡
->
¡
è!ğ
AV_NOPTS_VALUE
)

1605 
±s
 = 
	`FFMAX
Õts, 
	`av_»sÿË_q
(
	`av_¡»am_g‘_’d_±s
(
o¡
->
¡
),

1606 
o¡
->
¡
->
time_ba£
, 
AV_TIME_BASE_Q
));

1607 ià(
is_Ï¡_»pÜt
)

1608 
nb_äames_drİ
 +ğ
o¡
->
Ï¡_drİ³d
;

1611 
£cs
 = 
	`FFABS
(
±s
è/ 
AV_TIME_BASE
;

1612 
us
 = 
	`FFABS
(
±s
è% 
AV_TIME_BASE
;

1613 
mšs
 = 
£cs
 / 60;

1614 
£cs
 %= 60;

1615 
hours
 = 
mšs
 / 60;

1616 
mšs
 %= 60;

1618 
b™¿‹
 = 
±s
 && 
tÙ®_size
 >= 0 ?otal_size * 8 / (pts / 1000.0) : -1;

1619 
¥“d
 = 
t
 !ğ0.0 ? ()
±s
 / 
AV_TIME_BASE
 / : -1;

1621 ià(
tÙ®_size
 < 0è
	`¢´štf
(
buf
 + 
	`¡¾’
(buf), (buf) - strlen(buf),

1623 
	`¢´štf
(
buf
 + 
	`¡¾’
(buf), (buf) - strlen(buf),

1624 "size=%8.0fkBime=", 
tÙ®_size
 / 1024.0);

1625 ià(
±s
 < 0)

1626 
	`¢´štf
(
buf
 + 
	`¡¾’
(buf), (buf) - strlen(buf), "-");

1627 
	`¢´štf
(
buf
 + 
	`¡¾’
(buf), (buf) - strlen(buf),

1628 "%02d:%02d:%02d.%02d ", 
hours
, 
mšs
, 
£cs
,

1629 (100 * 
us
è/ 
AV_TIME_BASE
);

1631 ià(
b™¿‹
 < 0) {

1632 
	`¢´štf
(
buf
 + 
	`¡¾’
(buf), (buf) - strlen(buf),"bitrate=N/A");

1633 
	`av_b´štf
(&
buf_süt
, "bitrate=N/A\n");

1635 
	`¢´štf
(
buf
 + 
	`¡¾’
(buf), (bufè- sŒËn(buf),"b™¿‹=%6.1fkb™s/s", 
b™¿‹
);

1636 
	`av_b´štf
(&
buf_süt
, "b™¿‹=%6.1fkb™s/s\n", 
b™¿‹
);

1639 ià(
tÙ®_size
 < 0è
	`av_b´štf
(&
buf_süt
, "total_size=N/A\n");

1640 
	`av_b´štf
(&
buf_süt
, "tÙ®_size=%"
PRId64
"\n", 
tÙ®_size
);

1641 
	`av_b´štf
(&
buf_süt
, "out_time_ms=%"
PRId64
"\n", 
±s
);

1642 
	`av_b´štf
(&
buf_süt
, "out_time=%02d:%02d:%02d.%06d\n",

1643 
hours
, 
mšs
, 
£cs
, 
us
);

1645 ià(
nb_äames_dup
 || 
nb_äames_drİ
)

1646 
	`¢´štf
(
buf
 + 
	`¡¾’
(buf), (buf) - strlen(buf), " dup=%d drop=%d",

1647 
nb_äames_dup
, 
nb_äames_drİ
);

1648 
	`av_b´štf
(&
buf_süt
, "dup_äames=%d\n", 
nb_äames_dup
);

1649 
	`av_b´štf
(&
buf_süt
, "drİ_äames=%d\n", 
nb_äames_drİ
);

1651 ià(
¥“d
 < 0) {

1652 
	`¢´štf
(
buf
 + 
	`¡¾’
(buf), (buf) - strlen(buf)," speed=N/A");

1653 
	`av_b´štf
(&
buf_süt
, "speed=N/A\n");

1655 
	`¢´štf
(
buf
 + 
	`¡¾’
(buf), (bufè- sŒËn(buf)," s³ed=%4.3gx", 
¥“d
);

1656 
	`av_b´štf
(&
buf_süt
, "¥“d=%4.3gx\n", 
¥“d
);

1659 ià(
´št_¡©s
 || 
is_Ï¡_»pÜt
) {

1660 cÚ¡ 
’d
 = 
is_Ï¡_»pÜt
 ? '\n' : '\r';

1661 ià(
´št_¡©s
==1 && 
AV_LOG_INFO
 > 
	`av_log_g‘_Ëv–
()) {

1662 
	`årštf
(
¡d”r
, "%  %c", 
buf
, 
’d
);

1664 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "%  %c", 
buf
, 
’d
);

1666 
	`fæush
(
¡d”r
);

1669 ià(
´og»ss_avio
) {

1670 
	`av_b´štf
(&
buf_süt
, "progress=%s\n",

1671 
is_Ï¡_»pÜt
 ? "end" : "continue");

1672 
	`avio_wr™e
(
´og»ss_avio
, 
buf_süt
.
¡r
,

1673 
	`FFMIN
(
buf_süt
.
Ën
, buf_süt.
size
 - 1));

1674 
	`avio_æush
(
´og»ss_avio
);

1675 
	`av_b´št_fš®ize
(&
buf_süt
, 
NULL
);

1676 ià(
is_Ï¡_»pÜt
) {

1677 ià((
»t
 = 
	`avio_şo£p
(&
´og»ss_avio
)) < 0)

1678 
	`av_log
(
NULL
, 
AV_LOG_ERROR
,

1679 "E¼Ü closšg…rog»s log,†os oàšfÜm©iÚ…ossibË: %s\n", 
	`av_”r2¡r
(
»t
));

1683 ià(
is_Ï¡_»pÜt
)

1684 
	`´št_fš®_¡©s
(
tÙ®_size
);

1685 
	}
}

1687 
	$æush_’cod”s
()

1689 
i
, 
»t
;

1691 
i
 = 0; i < 
nb_ouut_¡»ams
; i++) {

1692 
OuutSŒ—m
 *
o¡
 = 
ouut_¡»ams
[
i
];

1693 
AVCodecCÚ‹xt
 *
’c
 = 
o¡
->
’c_ùx
;

1694 
AVFÜm©CÚ‹xt
 *
os
 = 
ouut_fes
[
o¡
->
fe_šdex
]->
ùx
;

1695 
¡İ_’codšg
 = 0;

1697 ià(!
o¡
->
’codšg_Ãeded
)

1700 ià(
’c
->
codec_ty³
 =ğ
AVMEDIA_TYPE_AUDIO
 &&ƒnc->
äame_size
 <= 1)

1702 #ià
FF_API_LAVF_FMT_RAWPICTURE


1703 ià(
’c
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
 && (
os
->
ofÜm©
->
æags
 & 
AVFMT_RAWPICTURE
è&&ƒnc->
codec
->
id
 =ğ
AV_CODEC_ID_RAWVIDEO
)

1708 (*
’code
)(
AVCodecCÚ‹xt
*, 
AVPack‘
*, cÚ¡ 
AVF¿me
*, *èğ
NULL
;

1709 cÚ¡ *
desc
;

1711 
’c
->
codec_ty³
) {

1712 
AVMEDIA_TYPE_AUDIO
:

1713 
’code
 = 
avcodec_’code_audio2
;

1714 
desc
 = "audio";

1716 
AVMEDIA_TYPE_VIDEO
:

1717 
’code
 = 
avcodec_’code_video2
;

1718 
desc
 = "video";

1721 
¡İ_’codšg
 = 1;

1724 ià(
’code
) {

1725 
AVPack‘
 
pkt
;

1726 
pkt_size
;

1727 
gÙ_·ck‘
;

1728 
	`av_š™_·ck‘
(&
pkt
);

1729 
pkt
.
d©a
 = 
NULL
;

1730 
pkt
.
size
 = 0;

1732 
	`upd©e_b’chm¬k
(
NULL
);

1733 
»t
 = 
	`’code
(
’c
, &
pkt
, 
NULL
, &
gÙ_·ck‘
);

1734 
	`upd©e_b’chm¬k
("æush_% %d.%d", 
desc
, 
o¡
->
fe_šdex
, o¡->
šdex
);

1735 ià(
»t
 < 0) {

1736 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "%sƒncoding failed: %s\n",

1737 
desc
,

1738 
	`av_”r2¡r
(
»t
));

1739 
	`ex™_´og¿m
(1);

1741 ià(
o¡
->
logfe
 && 
’c
->
¡©s_out
) {

1742 
	`årštf
(
o¡
->
logfe
, "%s", 
’c
->
¡©s_out
);

1744 ià(!
gÙ_·ck‘
) {

1745 
¡İ_’codšg
 = 1;

1748 ià(
o¡
->
fšished
 & 
MUXER_FINISHED
) {

1749 
	`av_·ck‘_uÄef
(&
pkt
);

1752 
	`av_·ck‘_»sÿË_ts
(&
pkt
, 
’c
->
time_ba£
, 
o¡
->
¡
->time_base);

1753 
pkt_size
 = 
pkt
.
size
;

1754 
	`wr™e_äame
(
os
, &
pkt
, 
o¡
);

1755 ià(
o¡
->
’c_ùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
 && 
v¡©s_f’ame
) {

1756 
	`do_video_¡©s
(
o¡
, 
pkt_size
);

1760 ià(
¡İ_’codšg
)

1764 
	}
}

1769 
	$check_ouut_cÚ¡¿šts
(
IÅutSŒ—m
 *
i¡
, 
OuutSŒ—m
 *
o¡
)

1771 
OuutFe
 *
of
 = 
ouut_fes
[
o¡
->
fe_šdex
];

1772 
i¡_šdex
 = 
šput_fes
[
i¡
->
fe_šdex
]->i¡_šdex + i¡->
¡
->
šdex
;

1774 ià(
o¡
->
sourû_šdex
 !ğ
i¡_šdex
)

1777 ià(
o¡
->
fšished
)

1780 ià(
of
->
¡¬t_time
 !ğ
AV_NOPTS_VALUE
 && 
i¡
->
±s
 < of->start_time)

1784 
	}
}

1786 
	$do_¡»amcİy
(
IÅutSŒ—m
 *
i¡
, 
OuutSŒ—m
 *
o¡
, cÚ¡ 
AVPack‘
 *
pkt
)

1788 
OuutFe
 *
of
 = 
ouut_fes
[
o¡
->
fe_šdex
];

1789 
IÅutFe
 *
f
 = 
šput_fes
 [
i¡
->
fe_šdex
];

1790 
št64_t
 
¡¬t_time
 = (
of
->¡¬t_tim=ğ
AV_NOPTS_VALUE
) ? 0 : of->start_time;

1791 
št64_t
 
o¡_tb_¡¬t_time
 = 
	`av_»sÿË_q
(
¡¬t_time
, 
AV_TIME_BASE_Q
, 
o¡
->
¡
->
time_ba£
);

1792 
AVPiùu»
 
più
;

1793 
AVPack‘
 
İkt
;

1795 
	`av_š™_·ck‘
(&
İkt
);

1797 ià((!
o¡
->
äame_numb”
 && !(
pkt
->
æags
 & 
AV_PKT_FLAG_KEY
)) &&

1798 !
o¡
->
cİy_š™Ÿl_nÚkeyäames
)

1801 ià(!
o¡
->
äame_numb”
 && !o¡->
cİy_´iÜ_¡¬t
) {

1802 
št64_t
 
comp_¡¬t
 = 
¡¬t_time
;

1803 ià(
cİy_ts
 && 
f
->
¡¬t_time
 !ğ
AV_NOPTS_VALUE
)

1804 
comp_¡¬t
 = 
	`FFMAX
(
¡¬t_time
, 
f
->¡¬t_tim+ f->
ts_off£t
);

1805 ià(
pkt
->
±s
 =ğ
AV_NOPTS_VALUE
 ?

1806 
i¡
->
±s
 < 
comp_¡¬t
 :

1807 
pkt
->
±s
 < 
	`av_»sÿË_q
(
comp_¡¬t
, 
AV_TIME_BASE_Q
, 
i¡
->
¡
->
time_ba£
))

1811 ià(
of
->
»cÜdšg_time
 !ğ
INT64_MAX
 &&

1812 
i¡
->
±s
 >ğ
of
->
»cÜdšg_time
 + 
¡¬t_time
) {

1813 
	`şo£_ouut_¡»am
(
o¡
);

1817 ià(
f
->
»cÜdšg_time
 !ğ
INT64_MAX
) {

1818 
¡¬t_time
 = 
f
->
ùx
->start_time;

1819 ià(
f
->
¡¬t_time
 !ğ
AV_NOPTS_VALUE
 && 
cİy_ts
)

1820 
¡¬t_time
 +ğ
f
->start_time;

1821 ià(
i¡
->
±s
 >ğ
f
->
»cÜdšg_time
 + 
¡¬t_time
) {

1822 
	`şo£_ouut_¡»am
(
o¡
);

1828 ià(
o¡
->
’c_ùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
)

1829 
o¡
->
sync_İts
++;

1831 ià(
pkt
->
±s
 !ğ
AV_NOPTS_VALUE
)

1832 
İkt
.
±s
 = 
	`av_»sÿË_q
(
pkt
->±s, 
i¡
->
¡
->
time_ba£
, 
o¡
->¡->time_ba£è- 
o¡_tb_¡¬t_time
;

1834 
İkt
.
±s
 = 
AV_NOPTS_VALUE
;

1836 ià(
pkt
->
dts
 =ğ
AV_NOPTS_VALUE
)

1837 
İkt
.
dts
 = 
	`av_»sÿË_q
(
i¡
->dts, 
AV_TIME_BASE_Q
, 
o¡
->
¡
->
time_ba£
);

1839 
İkt
.
dts
 = 
	`av_»sÿË_q
(
pkt
->dts, 
i¡
->
¡
->
time_ba£
, 
o¡
->st->time_base);

1840 
İkt
.
dts
 -ğ
o¡_tb_¡¬t_time
;

1842 ià(
o¡
->
¡
->
codec
->
codec_ty³
 =ğ
AVMEDIA_TYPE_AUDIO
 && 
pkt
->
dts
 !ğ
AV_NOPTS_VALUE
) {

1843 
du¿tiÚ
 = 
	`av_g‘_audio_äame_du¿tiÚ
(
i¡
->
dec_ùx
, 
pkt
->
size
);

1844 if(!
du¿tiÚ
)

1845 
du¿tiÚ
 = 
i¡
->
dec_ùx
->
äame_size
;

1846 
İkt
.
dts
 = opkt.
±s
 = 
	`av_»sÿË_d–
(
i¡
->
¡
->
time_ba£
, 
pkt
->dts,

1847 (
AVR©iÚ®
){1, 
i¡
->
dec_ùx
->
§m¶e_¿‹
}, 
du¿tiÚ
, &i¡->
f‹r_š_»sÿË_d–_Ï¡
,

1848 
o¡
->
¡
->
time_ba£
è- 
o¡_tb_¡¬t_time
;

1851 
İkt
.
du¿tiÚ
 = 
	`av_»sÿË_q
(
pkt
->du¿tiÚ, 
i¡
->
¡
->
time_ba£
, 
o¡
->st->time_base);

1852 
İkt
.
æags
 = 
pkt
->flags;

1854 iàĞ
o¡
->
¡
->
codec
->
codec_id
 !ğ
AV_CODEC_ID_H264


1855 && 
o¡
->
¡
->
codec
->
codec_id
 !ğ
AV_CODEC_ID_MPEG1VIDEO


1856 && 
o¡
->
¡
->
codec
->
codec_id
 !ğ
AV_CODEC_ID_MPEG2VIDEO


1857 && 
o¡
->
¡
->
codec
->
codec_id
 !ğ
AV_CODEC_ID_VC1


1859 
»t
 = 
	`av_·r£r_chªge
(
o¡
->
·r£r
, o¡->
¡
->
codec
,

1860 &
İkt
.
d©a
, &İkt.
size
,

1861 
pkt
->
d©a
,…kt->
size
,

1862 
pkt
->
æags
 & 
AV_PKT_FLAG_KEY
);

1863 ià(
»t
 < 0) {

1864 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "av_parser_change failed: %s\n",

1865 
	`av_”r2¡r
(
»t
));

1866 
	`ex™_´og¿m
(1);

1868 ià(
»t
) {

1869 
İkt
.
buf
 = 
	`av_bufãr_ü—‹
(İkt.
d©a
, opkt.
size
, 
av_bufãr_deçuÉ_ä“
, 
NULL
, 0);

1870 ià(!
İkt
.
buf
)

1871 
	`ex™_´og¿m
(1);

1874 
İkt
.
d©a
 = 
pkt
->data;

1875 
İkt
.
size
 = 
pkt
->size;

1877 
	`av_cİy_·ck‘_side_d©a
(&
İkt
, 
pkt
);

1879 #ià
FF_API_LAVF_FMT_RAWPICTURE


1880 ià(
o¡
->
¡
->
codec
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
 &&

1881 
o¡
->
¡
->
codec
->
codec_id
 =ğ
AV_CODEC_ID_RAWVIDEO
 &&

1882 (
of
->
ùx
->
ofÜm©
->
æags
 & 
AVFMT_RAWPICTURE
)) {

1884 
»t
 = 
	`avpiùu»_fl
(&
più
, 
İkt
.
d©a
, 
o¡
->
¡
->
codec
->
pix_fmt
, o¡->¡->codec->
width
, o¡->¡->codec->
height
);

1885 ià(
»t
 < 0) {

1886 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "avpicture_fill failed: %s\n",

1887 
	`av_”r2¡r
(
»t
));

1888 
	`ex™_´og¿m
(1);

1890 
İkt
.
d©a
 = (
ušt8_t
 *)&
più
;

1891 
İkt
.
size
 = (
AVPiùu»
);

1892 
İkt
.
æags
 |ğ
AV_PKT_FLAG_KEY
;

1896 
	`wr™e_äame
(
of
->
ùx
, &
İkt
, 
o¡
);

1897 
	}
}

1899 
	$guess_šput_chªÃl_Ïyout
(
IÅutSŒ—m
 *
i¡
)

1901 
AVCodecCÚ‹xt
 *
dec
 = 
i¡
->
dec_ùx
;

1903 ià(!
dec
->
chªÃl_Ïyout
) {

1904 
Ïyout_Çme
[256];

1906 ià(
dec
->
chªÃls
 > 
i¡
->
guess_Ïyout_max
)

1908 
dec
->
chªÃl_Ïyout
 = 
	`av_g‘_deçuÉ_chªÃl_Ïyout
(dec->
chªÃls
);

1909 ià(!
dec
->
chªÃl_Ïyout
)

1911 
	`av_g‘_chªÃl_Ïyout_¡ršg
(
Ïyout_Çme
, (layout_name),

1912 
dec
->
chªÃls
, dec->
chªÃl_Ïyout
);

1913 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "Guessed Channel Layout for Input Stream "

1914 "#%d.%d : %s\n", 
i¡
->
fe_šdex
, i¡->
¡
->
šdex
, 
Ïyout_Çme
);

1917 
	}
}

1919 
	$check_decode_»suÉ
(
IÅutSŒ—m
 *
i¡
, *
gÙ_ouut
, 
»t
)

1921 ià(*
gÙ_ouut
 || 
»t
<0)

1922 
decode_”rÜ_¡©
[
»t
<0] ++;

1924 ià(
»t
 < 0 && 
ex™_Ú_”rÜ
)

1925 
	`ex™_´og¿m
(1);

1927 ià(
ex™_Ú_”rÜ
 && *
gÙ_ouut
 && 
i¡
) {

1928 ià(
	`av_äame_g‘_decode_”rÜ_æags
(
i¡
->
decoded_äame
è|| (i¡->decoded_äame->
æags
 & 
AV_FRAME_FLAG_CORRUPT
)) {

1929 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "%s: cÜru± decoded f¿mš sŒ—m %d\n", 
šput_fes
[
i¡
->
fe_šdex
]->
ùx
->
f’ame
, i¡->
¡
->
šdex
);

1930 
	`ex™_´og¿m
(1);

1933 
	}
}

1935 
	$decode_audio
(
IÅutSŒ—m
 *
i¡
, 
AVPack‘
 *
pkt
, *
gÙ_ouut
)

1937 
AVF¿me
 *
decoded_äame
, *
f
;

1938 
AVCodecCÚ‹xt
 *
avùx
 = 
i¡
->
dec_ùx
;

1939 
i
, 
»t
, 
”r
 = 0, 
»§m¶e_chªged
;

1940 
AVR©iÚ®
 
decoded_äame_tb
;

1942 ià(!
i¡
->
decoded_äame
 && !(i¡->decoded_äamğ
	`av_äame_®loc
()))

1943  
	`AVERROR
(
ENOMEM
);

1944 ià(!
i¡
->
f‹r_äame
 && !(i¡->f‹r_äamğ
	`av_äame_®loc
()))

1945  
	`AVERROR
(
ENOMEM
);

1946 
decoded_äame
 = 
i¡
->decoded_frame;

1948 
	`upd©e_b’chm¬k
(
NULL
);

1949 
»t
 = 
	`avcodec_decode_audio4
(
avùx
, 
decoded_äame
, 
gÙ_ouut
, 
pkt
);

1950 
	`upd©e_b’chm¬k
("decode_audiØ%d.%d", 
i¡
->
fe_šdex
, i¡->
¡
->
šdex
);

1952 ià(
»t
 >ğ0 && 
avùx
->
§m¶e_¿‹
 <= 0) {

1953 
	`av_log
(
avùx
, 
AV_LOG_ERROR
, "Sam¶¿‹ %d inv®id\n",‡vùx->
§m¶e_¿‹
);

1954 
»t
 = 
AVERROR_INVALIDDATA
;

1957 
	`check_decode_»suÉ
(
i¡
, 
gÙ_ouut
, 
»t
);

1959 ià(!*
gÙ_ouut
 || 
»t
 < 0)

1960  
»t
;

1962 
i¡
->
§m¶es_decoded
 +ğ
decoded_äame
->
nb_§m¶es
;

1963 
i¡
->
äames_decoded
++;

1968 
i¡
->
Ãxt_±s
 +ğ((
št64_t
)
AV_TIME_BASE
 * 
decoded_äame
->
nb_§m¶es
) /

1969 
avùx
->
§m¶e_¿‹
;

1970 
i¡
->
Ãxt_dts
 +ğ((
št64_t
)
AV_TIME_BASE
 * 
decoded_äame
->
nb_§m¶es
) /

1971 
avùx
->
§m¶e_¿‹
;

1974 
»§m¶e_chªged
 = 
i¡
->
»§m¶e_§m¶e_fmt
 !ğ
decoded_äame
->
fÜm©
 ||

1975 
i¡
->
»§m¶e_chªÃls
 !ğ
avùx
->
chªÃls
 ||

1976 
i¡
->
»§m¶e_chªÃl_Ïyout
 !ğ
decoded_äame
->
chªÃl_Ïyout
 ||

1977 
i¡
->
»§m¶e_§m¶e_¿‹
 !ğ
decoded_äame
->
§m¶e_¿‹
;

1978 ià(
»§m¶e_chªged
) {

1979 
Ïyout1
[64], 
Ïyout2
[64];

1981 ià(!
	`guess_šput_chªÃl_Ïyout
(
i¡
)) {

1982 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Unableo find default channel "

1983 "ÏyouˆfÜ IÅuˆSŒ—m #%d.%d\n", 
i¡
->
fe_šdex
,

1984 
i¡
->
¡
->
šdex
);

1985 
	`ex™_´og¿m
(1);

1987 
decoded_äame
->
chªÃl_Ïyout
 = 
avùx
->channel_layout;

1989 
	`av_g‘_chªÃl_Ïyout_¡ršg
(
Ïyout1
, Öayout1), 
i¡
->
»§m¶e_chªÃls
,

1990 
i¡
->
»§m¶e_chªÃl_Ïyout
);

1991 
	`av_g‘_chªÃl_Ïyout_¡ršg
(
Ïyout2
, Öayout2), 
avùx
->
chªÃls
,

1992 
decoded_äame
->
chªÃl_Ïyout
);

1994 
	`av_log
(
NULL
, 
AV_LOG_INFO
,

1996 
i¡
->
fe_šdex
, i¡->
¡
->
šdex
,

1997 
i¡
->
»§m¶e_§m¶e_¿‹
, 
	`av_g‘_§m¶e_fmt_Çme
(i¡->
»§m¶e_§m¶e_fmt
),

1998 
i¡
->
»§m¶e_chªÃls
, 
Ïyout1
,

1999 
decoded_äame
->
§m¶e_¿‹
, 
	`av_g‘_§m¶e_fmt_Çme
(decoded_äame->
fÜm©
),

2000 
avùx
->
chªÃls
, 
Ïyout2
);

2002 
i¡
->
»§m¶e_§m¶e_fmt
 = 
decoded_äame
->
fÜm©
;

2003 
i¡
->
»§m¶e_§m¶e_¿‹
 = 
decoded_äame
->
§m¶e_¿‹
;

2004 
i¡
->
»§m¶e_chªÃl_Ïyout
 = 
decoded_äame
->
chªÃl_Ïyout
;

2005 
i¡
->
»§m¶e_chªÃls
 = 
avùx
->
chªÃls
;

2007 
i
 = 0; i < 
nb_f‹rg¿phs
; i++)

2008 ià(
	`i¡_š_f‹rg¿ph
(
f‹rg¿phs
[
i
], 
i¡
)) {

2009 
F‹rG¿ph
 *
fg
 = 
f‹rg¿phs
[
i
];

2010 ià(
	`cÚfigu»_f‹rg¿ph
(
fg
) < 0) {

2011 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Error„einitializing filters!\n");

2012 
	`ex™_´og¿m
(1);

2019 ià(
decoded_äame
->
±s
 !ğ
AV_NOPTS_VALUE
) {

2020 
i¡
->
dts
 = i¡->
Ãxt_dts
 = i¡->
±s
 = i¡->
Ãxt_±s
 = 
	`av_»sÿË_q
(
decoded_äame
->±s, 
avùx
->
time_ba£
, 
AV_TIME_BASE_Q
);

2021 
decoded_äame_tb
 = 
avùx
->
time_ba£
;

2022 } ià(
decoded_äame
->
pkt_±s
 !ğ
AV_NOPTS_VALUE
) {

2023 
decoded_äame
->
±s
 = decoded_äame->
pkt_±s
;

2024 
decoded_äame_tb
 = 
i¡
->
¡
->
time_ba£
;

2025 } ià(
pkt
->
±s
 !ğ
AV_NOPTS_VALUE
) {

2026 
decoded_äame
->
±s
 = 
pkt
->pts;

2027 
decoded_äame_tb
 = 
i¡
->
¡
->
time_ba£
;

2029 
decoded_äame
->
±s
 = 
i¡
->
dts
;

2030 
decoded_äame_tb
 = 
AV_TIME_BASE_Q
;

2032 
pkt
->
±s
 = 
AV_NOPTS_VALUE
;

2033 ià(
decoded_äame
->
±s
 !ğ
AV_NOPTS_VALUE
)

2034 
decoded_äame
->
±s
 = 
	`av_»sÿË_d–
(
decoded_äame_tb
, decoded_frame->pts,

2035 (
AVR©iÚ®
){1, 
avùx
->
§m¶e_¿‹
}, 
decoded_äame
->
nb_§m¶es
, &
i¡
->
f‹r_š_»sÿË_d–_Ï¡
,

2036 (
AVR©iÚ®
){1, 
avùx
->
§m¶e_¿‹
});

2037 
i¡
->
nb_§m¶es
 = 
decoded_äame
->nb_samples;

2038 
i
 = 0; i < 
i¡
->
nb_f‹rs
; i++) {

2039 ià(
i
 < 
i¡
->
nb_f‹rs
 - 1) {

2040 
f
 = 
i¡
->
f‹r_äame
;

2041 
”r
 = 
	`av_äame_»f
(
f
, 
decoded_äame
);

2042 ià(
”r
 < 0)

2045 
f
 = 
decoded_äame
;

2046 
”r
 = 
	`av_bufãr¤c_add_äame_æags
(
i¡
->
f‹rs
[
i
]->
f‹r
, 
f
,

2047 
AV_BUFFERSRC_FLAG_PUSH
);

2048 ià(
”r
 =ğ
AVERROR_EOF
)

2049 
”r
 = 0;

2050 ià(
”r
 < 0)

2053 
decoded_äame
->
±s
 = 
AV_NOPTS_VALUE
;

2055 
	`av_äame_uÄef
(
i¡
->
f‹r_äame
);

2056 
	`av_äame_uÄef
(
decoded_äame
);

2057  
”r
 < 0 ?ƒ¼ : 
»t
;

2058 
	}
}

2060 
	$decode_video
(
IÅutSŒ—m
 *
i¡
, 
AVPack‘
 *
pkt
, *
gÙ_ouut
)

2062 
AVF¿me
 *
decoded_äame
, *
f
;

2063 
i
, 
»t
 = 0, 
”r
 = 0, 
»§m¶e_chªged
;

2064 
št64_t
 
be¡_effÜt_time¡amp
;

2065 
AVR©iÚ®
 *
äame_§m¶e_a¥eù
;

2067 ià(!
i¡
->
decoded_äame
 && !(i¡->decoded_äamğ
	`av_äame_®loc
()))

2068  
	`AVERROR
(
ENOMEM
);

2069 ià(!
i¡
->
f‹r_äame
 && !(i¡->f‹r_äamğ
	`av_äame_®loc
()))

2070  
	`AVERROR
(
ENOMEM
);

2071 
decoded_äame
 = 
i¡
->decoded_frame;

2072 
pkt
->
dts
 = 
	`av_»sÿË_q
(
i¡
->dts, 
AV_TIME_BASE_Q
, i¡->
¡
->
time_ba£
);

2074 
	`upd©e_b’chm¬k
(
NULL
);

2075 
»t
 = 
	`avcodec_decode_video2
(
i¡
->
dec_ùx
,

2076 
decoded_äame
, 
gÙ_ouut
, 
pkt
);

2077 
	`upd©e_b’chm¬k
("decode_videØ%d.%d", 
i¡
->
fe_šdex
, i¡->
¡
->
šdex
);

2081 ià(
i¡
->
¡
->
codec
->
has_b_äames
 < i¡->
dec_ùx
->has_b_frames) {

2082 ià(
i¡
->
dec_ùx
->
codec_id
 =ğ
AV_CODEC_ID_H264
) {

2083 
i¡
->
¡
->
codec
->
has_b_äames
 = i¡->
dec_ùx
->has_b_frames;

2085 
	`av_log
(
i¡
->
dec_ùx
, 
AV_LOG_WARNING
,

2090 
i¡
->
dec_ùx
->
has_b_äames
,

2091 
i¡
->
¡
->
codec
->
has_b_äames
);

2094 
	`check_decode_»suÉ
(
i¡
, 
gÙ_ouut
, 
»t
);

2096 ià(*
gÙ_ouut
 && 
»t
 >= 0) {

2097 ià(
i¡
->
dec_ùx
->
width
 !ğ
decoded_äame
->width ||

2098 
i¡
->
dec_ùx
->
height
 !ğ
decoded_äame
->height ||

2099 
i¡
->
dec_ùx
->
pix_fmt
 !ğ
decoded_äame
->
fÜm©
) {

2100 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, "Frame…arameters mismatch context %d,%d,%d != %d,%d,%d\n",

2101 
decoded_äame
->
width
,

2102 
decoded_äame
->
height
,

2103 
decoded_äame
->
fÜm©
,

2104 
i¡
->
dec_ùx
->
width
,

2105 
i¡
->
dec_ùx
->
height
,

2106 
i¡
->
dec_ùx
->
pix_fmt
);

2110 ià(!*
gÙ_ouut
 || 
»t
 < 0)

2111  
»t
;

2113 if(
i¡
->
tİ_f›ld_fœ¡
>=0)

2114 
decoded_äame
->
tİ_f›ld_fœ¡
 = 
i¡
->top_field_first;

2116 
i¡
->
äames_decoded
++;

2118 ià(
i¡
->
hwacûl_»Œ›ve_d©a
 && 
decoded_äame
->
fÜm©
 =ği¡->
hwacûl_pix_fmt
) {

2119 
”r
 = 
i¡
->
	`hwacûl_»Œ›ve_d©a
(i¡->
dec_ùx
, 
decoded_äame
);

2120 ià(
”r
 < 0)

2121 
ç
;

2123 
i¡
->
hwacûl_»Œ›ved_pix_fmt
 = 
decoded_äame
->
fÜm©
;

2125 
be¡_effÜt_time¡amp
ğ
	`av_äame_g‘_be¡_effÜt_time¡amp
(
decoded_äame
);

2126 if(
be¡_effÜt_time¡amp
 !ğ
AV_NOPTS_VALUE
)

2127 
i¡
->
Ãxt_±s
 = i¡->
±s
 = 
	`av_»sÿË_q
(
decoded_äame
->± ğ
be¡_effÜt_time¡amp
, i¡->
¡
->
time_ba£
, 
AV_TIME_BASE_Q
);

2129 ià(
debug_ts
) {

2130 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "decoder -> ist_index:%dype:video "

2131 "äame_±s:% äame_±s_time:% be¡_effÜt_ts:%"
PRId64
" best_effort_ts_time:%s keyframe:%d frame_type:%dime_base:%d/%d\n",

2132 
i¡
->
¡
->
šdex
, 
	`av_ts2¡r
(
decoded_äame
->
±s
),

2133 
	`av_ts2time¡r
(
decoded_äame
->
±s
, &
i¡
->
¡
->
time_ba£
),

2134 
be¡_effÜt_time¡amp
,

2135 
	`av_ts2time¡r
(
be¡_effÜt_time¡amp
, &
i¡
->
¡
->
time_ba£
),

2136 
decoded_äame
->
key_äame
, decoded_äame->
più_ty³
,

2137 
i¡
->
¡
->
time_ba£
.
num
, i¡->¡->time_ba£.
d’
);

2140 
pkt
->
size
 = 0;

2142 ià(
i¡
->
¡
->
§m¶e_a¥eù_¿tio
.
num
)

2143 
decoded_äame
->
§m¶e_a¥eù_¿tio
 = 
i¡
->
¡
->sample_aspect_ratio;

2145 
»§m¶e_chªged
 = 
i¡
->
»§m¶e_width
 !ğ
decoded_äame
->
width
 ||

2146 
i¡
->
»§m¶e_height
 !ğ
decoded_äame
->
height
 ||

2147 
i¡
->
»§m¶e_pix_fmt
 !ğ
decoded_äame
->
fÜm©
;

2148 ià(
»§m¶e_chªged
) {

2149 
	`av_log
(
NULL
, 
AV_LOG_INFO
,

2151 
i¡
->
fe_šdex
, i¡->
¡
->
šdex
,

2152 
i¡
->
»§m¶e_width
, i¡->
»§m¶e_height
, 
	`av_g‘_pix_fmt_Çme
(i¡->
»§m¶e_pix_fmt
),

2153 
decoded_äame
->
width
, decoded_äame->
height
, 
	`av_g‘_pix_fmt_Çme
(decoded_äame->
fÜm©
));

2155 
i¡
->
»§m¶e_width
 = 
decoded_äame
->
width
;

2156 
i¡
->
»§m¶e_height
 = 
decoded_äame
->
height
;

2157 
i¡
->
»§m¶e_pix_fmt
 = 
decoded_äame
->
fÜm©
;

2159 
i
 = 0; i < 
nb_f‹rg¿phs
; i++) {

2160 ià(
	`i¡_š_f‹rg¿ph
(
f‹rg¿phs
[
i
], 
i¡
è&& i¡->
»š™_f‹rs
 &&

2161 
	`cÚfigu»_f‹rg¿ph
(
f‹rg¿phs
[
i
]) < 0) {

2162 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Error„einitializing filters!\n");

2163 
	`ex™_´og¿m
(1);

2168 
äame_§m¶e_a¥eù
ğ
	`av_İt_±r
(
	`avcodec_g‘_äame_şass
(), 
decoded_äame
, "sample_aspect_ratio");

2169 
i
 = 0; i < 
i¡
->
nb_f‹rs
; i++) {

2170 ià(!
äame_§m¶e_a¥eù
->
num
)

2171 *
äame_§m¶e_a¥eù
 = 
i¡
->
¡
->
§m¶e_a¥eù_¿tio
;

2173 ià(
i
 < 
i¡
->
nb_f‹rs
 - 1) {

2174 
f
 = 
i¡
->
f‹r_äame
;

2175 
”r
 = 
	`av_äame_»f
(
f
, 
decoded_äame
);

2176 ià(
”r
 < 0)

2179 
f
 = 
decoded_äame
;

2180 
»t
 = 
	`av_bufãr¤c_add_äame_æags
(
i¡
->
f‹rs
[
i
]->
f‹r
, 
f
, 
AV_BUFFERSRC_FLAG_PUSH
);

2181 ià(
»t
 =ğ
AVERROR_EOF
) {

2182 
»t
 = 0;

2183 } ià(
»t
 < 0) {

2184 
	`av_log
(
NULL
, 
AV_LOG_FATAL
,

2185 "FaedØšjeù f¿mštØf‹¸ÃtwÜk: %s\n", 
	`av_”r2¡r
(
»t
));

2186 
	`ex™_´og¿m
(1);

2190 
ç
:

2191 
	`av_äame_uÄef
(
i¡
->
f‹r_äame
);

2192 
	`av_äame_uÄef
(
decoded_äame
);

2193  
”r
 < 0 ?ƒ¼ : 
»t
;

2194 
	}
}

2196 
	$Œªscode_subt™Ës
(
IÅutSŒ—m
 *
i¡
, 
AVPack‘
 *
pkt
, *
gÙ_ouut
)

2198 
AVSubt™Ë
 
subt™Ë
;

2199 
i
, 
»t
 = 
	`avcodec_decode_subt™Ë2
(
i¡
->
dec_ùx
,

2200 &
subt™Ë
, 
gÙ_ouut
, 
pkt
);

2202 
	`check_decode_»suÉ
(
NULL
, 
gÙ_ouut
, 
»t
);

2204 ià(
»t
 < 0 || !*
gÙ_ouut
) {

2205 ià(!
pkt
->
size
)

2206 
	`sub2video_æush
(
i¡
);

2207  
»t
;

2210 ià(
i¡
->
fix_sub_du¿tiÚ
) {

2211 
’d
 = 1;

2212 ià(
i¡
->
´ev_sub
.
gÙ_ouut
) {

2213 
’d
 = 
	`av_»sÿË
(
subt™Ë
.
±s
 - 
i¡
->
´ev_sub
.subtitle.pts,

2214 1000, 
AV_TIME_BASE
);

2215 ià(
’d
 < 
i¡
->
´ev_sub
.
subt™Ë
.
’d_di¥Ïy_time
) {

2216 
	`av_log
(
i¡
->
dec_ùx
, 
AV_LOG_DEBUG
,

2218 
i¡
->
´ev_sub
.
subt™Ë
.
’d_di¥Ïy_time
, 
’d
,

2219 
’d
 <= 0 ? ", dropping it" : "");

2220 
i¡
->
´ev_sub
.
subt™Ë
.
’d_di¥Ïy_time
 = 
’d
;

2223 
	`FFSWAP
(, *
gÙ_ouut
, 
i¡
->
´ev_sub
.got_output);

2224 
	`FFSWAP
(, 
»t
, 
i¡
->
´ev_sub
.ret);

2225 
	`FFSWAP
(
AVSubt™Ë
, 
subt™Ë
, 
i¡
->
´ev_sub
.subtitle);

2226 ià(
’d
 <= 0)

2227 
out
;

2230 ià(!*
gÙ_ouut
)

2231  
»t
;

2233 
	`sub2video_upd©e
(
i¡
, &
subt™Ë
);

2235 ià(!
subt™Ë
.
num_»ùs
)

2236 
out
;

2238 
i¡
->
äames_decoded
++;

2240 
i
 = 0; i < 
nb_ouut_¡»ams
; i++) {

2241 
OuutSŒ—m
 *
o¡
 = 
ouut_¡»ams
[
i
];

2243 ià(!
	`check_ouut_cÚ¡¿šts
(
i¡
, 
o¡
è|| !o¡->
’codšg_Ãeded


2244 || 
o¡
->
’c
->
ty³
 !ğ
AVMEDIA_TYPE_SUBTITLE
)

2247 
	`do_subt™Ë_out
(
ouut_fes
[
o¡
->
fe_šdex
]->
ùx
, o¡, 
i¡
, &
subt™Ë
);

2250 
out
:

2251 
	`avsubt™Ë_ä“
(&
subt™Ë
);

2252  
»t
;

2253 
	}
}

2255 
	$£nd_f‹r_eof
(
IÅutSŒ—m
 *
i¡
)

2257 
i
, 
»t
;

2258 
i
 = 0; i < 
i¡
->
nb_f‹rs
; i++) {

2259 
»t
 = 
	`av_bufãr¤c_add_äame
(
i¡
->
f‹rs
[
i
]->
f‹r
, 
NULL
);

2260 ià(
»t
 < 0)

2261  
»t
;

2264 
	}
}

2267 
	$´oûss_šput_·ck‘
(
IÅutSŒ—m
 *
i¡
, cÚ¡ 
AVPack‘
 *
pkt
, 
no_eof
)

2269 
»t
 = 0, 
i
;

2270 
gÙ_ouut
 = 0;

2272 
AVPack‘
 
avpkt
;

2273 ià(!
i¡
->
§w_fœ¡_ts
) {

2274 
i¡
->
dts
 = i¡->
¡
->
avg_äame_¿‹
.
num
 ? - i¡->
dec_ùx
->
has_b_äames
 * 
AV_TIME_BASE
 / 
	`av_q2d
(ist->st->avg_frame_rate) : 0;

2275 
i¡
->
±s
 = 0;

2276 ià(
pkt
 &&…kt->
±s
 !ğ
AV_NOPTS_VALUE
 && !
i¡
->
decodšg_Ãeded
) {

2277 
i¡
->
dts
 +ğ
	`av_»sÿË_q
(
pkt
->
±s
, i¡->
¡
->
time_ba£
, 
AV_TIME_BASE_Q
);

2278 
i¡
->
±s
 = i¡->
dts
;

2280 
i¡
->
§w_fœ¡_ts
 = 1;

2283 ià(
i¡
->
Ãxt_dts
 =ğ
AV_NOPTS_VALUE
)

2284 
i¡
->
Ãxt_dts
 = i¡->
dts
;

2285 ià(
i¡
->
Ãxt_±s
 =ğ
AV_NOPTS_VALUE
)

2286 
i¡
->
Ãxt_±s
 = i¡->
±s
;

2288 ià(!
pkt
) {

2290 
	`av_š™_·ck‘
(&
avpkt
);

2291 
avpkt
.
d©a
 = 
NULL
;

2292 
avpkt
.
size
 = 0;

2293 
hªdË_eof
;

2295 
avpkt
 = *
pkt
;

2298 ià(
pkt
->
dts
 !ğ
AV_NOPTS_VALUE
) {

2299 
i¡
->
Ãxt_dts
 = i¡->
dts
 = 
	`av_»sÿË_q
(
pkt
->dts, i¡->
¡
->
time_ba£
, 
AV_TIME_BASE_Q
);

2300 ià(
i¡
->
dec_ùx
->
codec_ty³
 !ğ
AVMEDIA_TYPE_VIDEO
 || !i¡->
decodšg_Ãeded
)

2301 
i¡
->
Ãxt_±s
 = i¡->
±s
 = i¡->
dts
;

2305 
i¡
->
decodšg_Ãeded
 && (
avpkt
.
size
 > 0 || (!
pkt
 && 
gÙ_ouut
))) {

2306 
du¿tiÚ
;

2307 
hªdË_eof
:

2309 
i¡
->
±s
 = i¡->
Ãxt_±s
;

2310 
i¡
->
dts
 = i¡->
Ãxt_dts
;

2312 ià(
avpkt
.
size
 &&‡vpkt.siz!ğ
pkt
->size &&

2313 !(
i¡
->
dec
->
ÿ·b™›s
 & 
AV_CODEC_CAP_SUBFRAMES
)) {

2314 
	`av_log
(
NULL
, 
i¡
->
showed_muÉi_·ck‘_w¬nšg
 ? 
AV_LOG_VERBOSE
 : 
AV_LOG_WARNING
,

2315 "MuÉË f¿me š‡…ack‘ from sŒ—m %d\n", 
pkt
->
¡»am_šdex
);

2316 
i¡
->
showed_muÉi_·ck‘_w¬nšg
 = 1;

2319 
i¡
->
dec_ùx
->
codec_ty³
) {

2320 
AVMEDIA_TYPE_AUDIO
:

2321 
»t
 = 
	`decode_audio
 (
i¡
, &
avpkt
, &
gÙ_ouut
);

2323 
AVMEDIA_TYPE_VIDEO
:

2324 
»t
 = 
	`decode_video
 (
i¡
, &
avpkt
, &
gÙ_ouut
);

2325 ià(
avpkt
.
du¿tiÚ
) {

2326 
du¿tiÚ
 = 
	`av_»sÿË_q
(
avpkt
.du¿tiÚ, 
i¡
->
¡
->
time_ba£
, 
AV_TIME_BASE_Q
);

2327 } if(
i¡
->
dec_ùx
->
äam”©e
.
num
 !ğ0 && i¡->dec_ùx->äam”©e.
d’
 != 0) {

2328 
ticks
ğ
	`av_¡»am_g‘_·r£r
(
i¡
->
¡
è?‡v_¡»am_g‘_·r£r(i¡->¡)->
»³©_più
+1 : i¡->
dec_ùx
->
ticks_³r_äame
;

2329 
du¿tiÚ
 = ((
št64_t
)
AV_TIME_BASE
 *

2330 
i¡
->
dec_ùx
->
äam”©e
.
d’
 * 
ticks
) /

2331 
i¡
->
dec_ùx
->
äam”©e
.
num
 / i¡->dec_ùx->
ticks_³r_äame
;

2333 
du¿tiÚ
 = 0;

2335 if(
i¡
->
dts
 !ğ
AV_NOPTS_VALUE
 && 
du¿tiÚ
) {

2336 
i¡
->
Ãxt_dts
 +ğ
du¿tiÚ
;

2338 
i¡
->
Ãxt_dts
 = 
AV_NOPTS_VALUE
;

2340 ià(
gÙ_ouut
)

2341 
i¡
->
Ãxt_±s
 +ğ
du¿tiÚ
;

2343 
AVMEDIA_TYPE_SUBTITLE
:

2344 
»t
 = 
	`Œªscode_subt™Ës
(
i¡
, &
avpkt
, &
gÙ_ouut
);

2350 ià(
»t
 < 0) {

2351 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Error while decoding stream #%d:%d: %s\n",

2352 
i¡
->
fe_šdex
, i¡->
¡
->
šdex
, 
	`av_”r2¡r
(
»t
));

2353 ià(
ex™_Ú_”rÜ
)

2354 
	`ex™_´og¿m
(1);

2358 
avpkt
.
dts
=

2359 
avpkt
.
±s
ğ
AV_NOPTS_VALUE
;

2362 ià(
pkt
) {

2363 if(
i¡
->
dec_ùx
->
codec_ty³
 !ğ
AVMEDIA_TYPE_AUDIO
)

2364 
»t
 = 
avpkt
.
size
;

2365 
avpkt
.
d©a
 +ğ
»t
;

2366 
avpkt
.
size
 -ğ
»t
;

2368 ià(!
gÙ_ouut
) {

2371 ià(
gÙ_ouut
 && !
pkt
)

2377 ià(!
pkt
 && 
i¡
->
decodšg_Ãeded
 && !
gÙ_ouut
 && !
no_eof
) {

2378 
»t
 = 
	`£nd_f‹r_eof
(
i¡
);

2379 ià(
»t
 < 0) {

2380 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Error marking filters‡s finished\n");

2381 
	`ex™_´og¿m
(1);

2386 ià(!
i¡
->
decodšg_Ãeded
) {

2387 
i¡
->
dts
 = i¡->
Ãxt_dts
;

2388 
i¡
->
dec_ùx
->
codec_ty³
) {

2389 
AVMEDIA_TYPE_AUDIO
:

2390 
i¡
->
Ãxt_dts
 +ğ((
št64_t
)
AV_TIME_BASE
 * i¡->
dec_ùx
->
äame_size
) /

2391 
i¡
->
dec_ùx
->
§m¶e_¿‹
;

2393 
AVMEDIA_TYPE_VIDEO
:

2394 ià(
i¡
->
äam”©e
.
num
) {

2396 
AVR©iÚ®
 
time_ba£_q
 = 
AV_TIME_BASE_Q
;

2397 
št64_t
 
Ãxt_dts
 = 
	`av_»sÿË_q
(
i¡
->Ãxt_dts, 
time_ba£_q
, 
	`av_šv_q
(i¡->
äam”©e
));

2398 
i¡
->
Ãxt_dts
 = 
	`av_»sÿË_q
Òext_dt + 1, 
	`av_šv_q
(i¡->
äam”©e
), 
time_ba£_q
);

2399 } ià(
pkt
->
du¿tiÚ
) {

2400 
i¡
->
Ãxt_dts
 +ğ
	`av_»sÿË_q
(
pkt
->
du¿tiÚ
, i¡->
¡
->
time_ba£
, 
AV_TIME_BASE_Q
);

2401 } if(
i¡
->
dec_ùx
->
äam”©e
.
num
 != 0) {

2402 
ticks
ğ
	`av_¡»am_g‘_·r£r
(
i¡
->
¡
è?‡v_¡»am_g‘_·r£r(i¡->¡)->
»³©_più
 + 1 : i¡->
dec_ùx
->
ticks_³r_äame
;

2403 
i¡
->
Ãxt_dts
 +ğ((
št64_t
)
AV_TIME_BASE
 *

2404 
i¡
->
dec_ùx
->
äam”©e
.
d’
 * 
ticks
) /

2405 
i¡
->
dec_ùx
->
äam”©e
.
num
 / i¡->dec_ùx->
ticks_³r_äame
;

2409 
i¡
->
±s
 = i¡->
dts
;

2410 
i¡
->
Ãxt_±s
 = i¡->
Ãxt_dts
;

2412 
i
 = 0; 
pkt
 && i < 
nb_ouut_¡»ams
; i++) {

2413 
OuutSŒ—m
 *
o¡
 = 
ouut_¡»ams
[
i
];

2415 ià(!
	`check_ouut_cÚ¡¿šts
(
i¡
, 
o¡
è|| o¡->
’codšg_Ãeded
)

2418 
	`do_¡»amcİy
(
i¡
, 
o¡
, 
pkt
);

2421  
gÙ_ouut
;

2422 
	}
}

2424 
	$´št_sdp
()

2426 
sdp
[16384];

2427 
i
;

2428 
j
;

2429 
AVIOCÚ‹xt
 *
sdp_pb
;

2430 
AVFÜm©CÚ‹xt
 **
avc
 = 
	`av_m®loc_¬¿y
(
nb_ouut_fes
, (*avc));

2432 ià(!
avc
)

2433 
	`ex™_´og¿m
(1);

2434 
i
 = 0, 
j
 = 0; i < 
nb_ouut_fes
; i++) {

2435 ià(!
	`¡rcmp
(
ouut_fes
[
i
]->
ùx
->
ofÜm©
->
Çme
, "rtp")) {

2436 
avc
[
j
] = 
ouut_fes
[
i
]->
ùx
;

2437 
j
++;

2441 ià(!
j
)

2442 
ç
;

2444 
	`av_sdp_ü—‹
(
avc
, 
j
, 
sdp
, (sdp));

2446 ià(!
sdp_f’ame
) {

2447 
	`´štf
("SDP:\n%s\n", 
sdp
);

2448 
	`fæush
(
¡dout
);

2450 ià(
	`avio_İ’2
(&
sdp_pb
, 
sdp_f’ame
, 
AVIO_FLAG_WRITE
, &
št_cb
, 
NULL
) < 0) {

2451 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "FaedØİ’ sd°f'%s'\n", 
sdp_f’ame
);

2453 
	`avio_´štf
(
sdp_pb
, "SDP:\n%s", 
sdp
);

2454 
	`avio_şo£p
(&
sdp_pb
);

2455 
	`av_ä“p
(&
sdp_f’ame
);

2459 
ç
:

2460 
	`av_ä“p
(&
avc
);

2461 
	}
}

2463 cÚ¡ 
HWAcûl
 *
	$g‘_hwacûl
(
AVPix–FÜm©
 
pix_fmt
)

2465 
i
;

2466 
i
 = 0; 
hwacûls
[i].
Çme
; i++)

2467 ià(
hwacûls
[
i
].
pix_fmt
 ==…ix_fmt)

2468  &
hwacûls
[
i
];

2469  
NULL
;

2470 
	}
}

2472 
AVPix–FÜm©
 
	$g‘_fÜm©
(
AVCodecCÚ‹xt
 *
s
, cÚ¡ 
AVPix–FÜm©
 *
pix_fmts
)

2474 
IÅutSŒ—m
 *
i¡
 = 
s
->
İaque
;

2475 cÚ¡ 
AVPix–FÜm©
 *
p
;

2476 
»t
;

2478 
p
 = 
pix_fmts
; *p != -1;…++) {

2479 cÚ¡ 
AVPixFmtDesütÜ
 *
desc
 = 
	`av_pix_fmt_desc_g‘
(*
p
);

2480 cÚ¡ 
HWAcûl
 *
hwacûl
;

2482 ià(!(
desc
->
æags
 & 
AV_PIX_FMT_FLAG_HWACCEL
))

2485 
hwacûl
 = 
	`g‘_hwacûl
(*
p
);

2486 ià(!
hwacûl
 ||

2487 (
i¡
->
aùive_hwacûl_id
 && i¡->aùive_hwacûl_id !ğ
hwacûl
->
id
) ||

2488 (
i¡
->
hwacûl_id
 !ğ
HWACCEL_AUTO
 && i¡->hwacûl_id !ğ
hwacûl
->
id
))

2491 
»t
 = 
hwacûl
->
	`š™
(
s
);

2492 ià(
»t
 < 0) {

2493 ià(
i¡
->
hwacûl_id
 =ğ
hwacûl
->
id
) {

2494 
	`av_log
(
NULL
, 
AV_LOG_FATAL
,

2496 "buˆÿÂÙ bš™Ÿlized.\n", 
hwacûl
->
Çme
,

2497 
i¡
->
fe_šdex
, i¡->
¡
->
šdex
);

2498  
AV_PIX_FMT_NONE
;

2502 
i¡
->
aùive_hwacûl_id
 = 
hwacûl
->
id
;

2503 
i¡
->
hwacûl_pix_fmt
 = *
p
;

2507  *
p
;

2508 
	}
}

2510 
	$g‘_bufãr
(
AVCodecCÚ‹xt
 *
s
, 
AVF¿me
 *
äame
, 
æags
)

2512 
IÅutSŒ—m
 *
i¡
 = 
s
->
İaque
;

2514 ià(
i¡
->
hwacûl_g‘_bufãr
 && 
äame
->
fÜm©
 =ği¡->
hwacûl_pix_fmt
)

2515  
i¡
->
	`hwacûl_g‘_bufãr
(
s
, 
äame
, 
æags
);

2517  
	`avcodec_deçuÉ_g‘_bufãr2
(
s
, 
äame
, 
æags
);

2518 
	}
}

2520 
	$š™_šput_¡»am
(
i¡_šdex
, *
”rÜ
, 
”rÜ_Ën
)

2522 
»t
;

2523 
IÅutSŒ—m
 *
i¡
 = 
šput_¡»ams
[
i¡_šdex
];

2525 ià(
i¡
->
decodšg_Ãeded
) {

2526 
AVCodec
 *
codec
 = 
i¡
->
dec
;

2527 ià(!
codec
) {

2528 
	`¢´štf
(
”rÜ
, 
”rÜ_Ën
, "Decoder (codec %s)‚ot found for input stream #%d:%d",

2529 
	`avcodec_g‘_Çme
(
i¡
->
dec_ùx
->
codec_id
), i¡->
fe_šdex
, i¡->
¡
->
šdex
);

2530  
	`AVERROR
(
EINVAL
);

2533 
i¡
->
dec_ùx
->
İaque
 = ist;

2534 
i¡
->
dec_ùx
->
g‘_fÜm©
 = get_format;

2535 
i¡
->
dec_ùx
->
g‘_bufãr2
 = 
g‘_bufãr
;

2536 
i¡
->
dec_ùx
->
th»ad_§ã_ÿÎbacks
 = 1;

2538 
	`av_İt_£t_št
(
i¡
->
dec_ùx
, "refcounted_frames", 1, 0);

2539 ià(
i¡
->
dec_ùx
->
codec_id
 =ğ
AV_CODEC_ID_DVB_SUBTITLE
 &&

2540 (
i¡
->
decodšg_Ãeded
 & 
DECODING_FOR_OST
)) {

2541 
	`av_diù_£t
(&
i¡
->
decod”_İts
, "compu‹_edt", "1", 
AV_DICT_DONT_OVERWRITE
);

2542 ià(
i¡
->
decodšg_Ãeded
 & 
DECODING_FOR_FILTER
)

2543 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "Warning using DVB subtitles for filtering‡nd output‡the sameime is‚ot fully supported,‡lso see -compute_edt [0|1]\n");

2546 ià(!
	`av_diù_g‘
(
i¡
->
decod”_İts
, "th»ads", 
NULL
, 0))

2547 
	`av_diù_£t
(&
i¡
->
decod”_İts
, "threads", "auto", 0);

2548 ià((
»t
 = 
	`avcodec_İ’2
(
i¡
->
dec_ùx
, 
codec
, &i¡->
decod”_İts
)) < 0) {

2549 ià(
»t
 =ğ
AVERROR_EXPERIMENTAL
)

2550 
	`abÜt_codec_ex³rim’l
(
codec
, 0);

2552 
	`¢´štf
(
”rÜ
, 
”rÜ_Ën
,

2555 
i¡
->
fe_šdex
, i¡->
¡
->
šdex
, 
	`av_”r2¡r
(
»t
));

2556  
»t
;

2558 
	`as£¹_avİtiÚs
(
i¡
->
decod”_İts
);

2561 
i¡
->
Ãxt_±s
 = 
AV_NOPTS_VALUE
;

2562 
i¡
->
Ãxt_dts
 = 
AV_NOPTS_VALUE
;

2565 
	}
}

2567 
IÅutSŒ—m
 *
	$g‘_šput_¡»am
(
OuutSŒ—m
 *
o¡
)

2569 ià(
o¡
->
sourû_šdex
 >= 0)

2570  
šput_¡»ams
[
o¡
->
sourû_šdex
];

2571  
NULL
;

2572 
	}
}

2574 
	$com·»_št64
(cÚ¡ *
a
, cÚ¡ *
b
)

2576  
	`FFDIFFSIGN
(*(cÚ¡ 
št64_t
 *)
a
, *(cÚ¡ iÁ64_ˆ*)
b
);

2577 
	}
}

2579 
	$š™_ouut_¡»am
(
OuutSŒ—m
 *
o¡
, *
”rÜ
, 
”rÜ_Ën
)

2581 
»t
 = 0;

2583 ià(
o¡
->
’codšg_Ãeded
) {

2584 
AVCodec
 *
codec
 = 
o¡
->
’c
;

2585 
AVCodecCÚ‹xt
 *
dec
 = 
NULL
;

2586 
IÅutSŒ—m
 *
i¡
;

2588 ià((
i¡
 = 
	`g‘_šput_¡»am
(
o¡
)))

2589 
dec
 = 
i¡
->
dec_ùx
;

2590 ià(
dec
 && dec->
subt™Ë_h—d”
) {

2592 
o¡
->
’c_ùx
->
subt™Ë_h—d”
 = 
	`av_m®locz
(
dec
->
subt™Ë_h—d”_size
 + 1);

2593 ià(!
o¡
->
’c_ùx
->
subt™Ë_h—d”
)

2594  
	`AVERROR
(
ENOMEM
);

2595 
	`memıy
(
o¡
->
’c_ùx
->
subt™Ë_h—d”
, 
dec
->subt™Ë_h—d”, dec->
subt™Ë_h—d”_size
);

2596 
o¡
->
’c_ùx
->
subt™Ë_h—d”_size
 = 
dec
->subtitle_header_size;

2598 ià(!
	`av_diù_g‘
(
o¡
->
’cod”_İts
, "th»ads", 
NULL
, 0))

2599 
	`av_diù_£t
(&
o¡
->
’cod”_İts
, "threads", "auto", 0);

2600 ià(
o¡
->
’c
->
ty³
 =ğ
AVMEDIA_TYPE_AUDIO
 &&

2601 !
codec
->
deçuÉs
 &&

2602 !
	`av_diù_g‘
(
o¡
->
’cod”_İts
, "b", 
NULL
, 0) &&

2603 !
	`av_diù_g‘
(
o¡
->
’cod”_İts
, "ab", 
NULL
, 0))

2604 
	`av_diù_£t
(&
o¡
->
’cod”_İts
, "b", "128000", 0);

2606 ià((
»t
 = 
	`avcodec_İ’2
(
o¡
->
’c_ùx
, 
codec
, &o¡->
’cod”_İts
)) < 0) {

2607 ià(
»t
 =ğ
AVERROR_EXPERIMENTAL
)

2608 
	`abÜt_codec_ex³rim’l
(
codec
, 1);

2609 
	`¢´štf
(
”rÜ
, 
”rÜ_Ën
,

2612 
o¡
->
fe_šdex
, o¡->
šdex
);

2613  
»t
;

2615 ià(
o¡
->
’c
->
ty³
 =ğ
AVMEDIA_TYPE_AUDIO
 &&

2616 !(
o¡
->
’c
->
ÿ·b™›s
 & 
AV_CODEC_CAP_VARIABLE_FRAME_SIZE
))

2617 
	`av_bufãrsšk_£t_äame_size
(
o¡
->
f‹r
->filter,

2618 
o¡
->
’c_ùx
->
äame_size
);

2619 
	`as£¹_avİtiÚs
(
o¡
->
’cod”_İts
);

2620 ià(
o¡
->
’c_ùx
->
b™_¿‹
 && ost->enc_ctx->bit_rate < 1000)

2621 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "The bitrate…arameter is setoo†ow."

2624 
»t
 = 
	`avcodec_cİy_cÚ‹xt
(
o¡
->
¡
->
codec
, o¡->
’c_ùx
);

2625 ià(
»t
 < 0) {

2626 
	`av_log
(
NULL
, 
AV_LOG_FATAL
,

2628 
	`ex™_´og¿m
(1);

2631 ià(
o¡
->
’c_ùx
->
nb_coded_side_d©a
) {

2632 
i
;

2634 
o¡
->
¡
->
side_d©a
 = 
	`av_»®loc_¬¿y
(
NULL
, o¡->
’c_ùx
->
nb_coded_side_d©a
,

2635 (*
o¡
->
¡
->
side_d©a
));

2636 ià(!
o¡
->
¡
->
side_d©a
)

2637  
	`AVERROR
(
ENOMEM
);

2639 
i
 = 0; i < 
o¡
->
’c_ùx
->
nb_coded_side_d©a
; i++) {

2640 cÚ¡ 
AVPack‘SideD©a
 *
sd_¤c
 = &
o¡
->
’c_ùx
->
coded_side_d©a
[
i
];

2641 
AVPack‘SideD©a
 *
sd_d¡
 = &
o¡
->
¡
->
side_d©a
[
i
];

2643 
sd_d¡
->
d©a
 = 
	`av_m®loc
(
sd_¤c
->
size
);

2644 ià(!
sd_d¡
->
d©a
)

2645  
	`AVERROR
(
ENOMEM
);

2646 
	`memıy
(
sd_d¡
->
d©a
, 
sd_¤c
->d©a, sd_¤c->
size
);

2647 
sd_d¡
->
size
 = 
sd_¤c
->size;

2648 
sd_d¡
->
ty³
 = 
sd_¤c
->type;

2649 
o¡
->
¡
->
nb_side_d©a
++;

2654 
o¡
->
¡
->
time_ba£
 = 
	`av_add_q
(o¡->
’c_ùx
->time_ba£, (
AVR©iÚ®
){0, 1});

2655 
o¡
->
¡
->
codec
->codecğo¡->
’c_ùx
->codec;

2657 
»t
 = 
	`av_İt_£t_diù
(
o¡
->
’c_ùx
, &o¡->
’cod”_İts
);

2658 ià(
»t
 < 0) {

2659 
	`av_log
(
NULL
, 
AV_LOG_FATAL
,

2661  
»t
;

2664 
o¡
->
¡
->
time_ba£
 = 
	`av_add_q
(o¡->¡->
codec
->time_ba£, (
AVR©iÚ®
){0, 1});

2667  
»t
;

2668 
	}
}

2670 
	$·r£_fÜûd_key_äames
(*
kf
, 
OuutSŒ—m
 *
o¡
,

2671 
AVCodecCÚ‹xt
 *
avùx
)

2673 *
p
;

2674 
n
 = 1, 
i
, 
size
, 
šdex
 = 0;

2675 
št64_t
 
t
, *
±s
;

2677 
p
 = 
kf
; *p;…++)

2678 ià(*
p
 == ',')

2679 
n
++;

2680 
size
 = 
n
;

2681 
±s
 = 
	`av_m®loc_¬¿y
(
size
, (*pts));

2682 ià(!
±s
) {

2683 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Could‚ot‡llocate forced key frames‡rray.\n");

2684 
	`ex™_´og¿m
(1);

2687 
p
 = 
kf
;

2688 
i
 = 0; i < 
n
; i++) {

2689 *
Ãxt
 = 
	`¡rchr
(
p
, ',');

2691 ià(
Ãxt
)

2692 *
Ãxt
++ = 0;

2694 ià(!
	`memcmp
(
p
, "chapters", 8)) {

2696 
AVFÜm©CÚ‹xt
 *
avf
 = 
ouut_fes
[
o¡
->
fe_šdex
]->
ùx
;

2697 
j
;

2699 ià(
avf
->
nb_ch­‹rs
 > 
INT_MAX
 - 
size
 ||

2700 !(
±s
 = 
	`av_»®loc_f
Õts, 
size
 +ğ
avf
->
nb_ch­‹rs
 - 1,

2701 (*
±s
)))) {

2702 
	`av_log
(
NULL
, 
AV_LOG_FATAL
,

2704 
	`ex™_´og¿m
(1);

2706 
t
 = 
p
[8] ? 
	`·r£_time_Ü_d›
("force_key_frames",… + 8, 1) : 0;

2707 
t
 = 
	`av_»sÿË_q
Ñ, 
AV_TIME_BASE_Q
, 
avùx
->
time_ba£
);

2709 
j
 = 0; j < 
avf
->
nb_ch­‹rs
; j++) {

2710 
AVCh­‹r
 *
c
 = 
avf
->
ch­‹rs
[
j
];

2711 
	`av_as£¹1
(
šdex
 < 
size
);

2712 
±s
[
šdex
++] = 
	`av_»sÿË_q
(
c
->
¡¬t
, c->
time_ba£
,

2713 
avùx
->
time_ba£
è+ 
t
;

2718 
t
 = 
	`·r£_time_Ü_d›
("fÜû_key_äames", 
p
, 1);

2719 
	`av_as£¹1
(
šdex
 < 
size
);

2720 
±s
[
šdex
++] = 
	`av_»sÿË_q
(
t
, 
AV_TIME_BASE_Q
, 
avùx
->
time_ba£
);

2724 
p
 = 
Ãxt
;

2727 
	`av_as£¹0
(
šdex
 =ğ
size
);

2728 
	`qsÜt
(
±s
, 
size
, (*±s), 
com·»_št64
);

2729 
o¡
->
fÜûd_kf_couÁ
 = 
size
;

2730 
o¡
->
fÜûd_kf_±s
 = 
±s
;

2731 
	}
}

2733 
	$»pÜt_Ãw_¡»am
(
šput_šdex
, 
AVPack‘
 *
pkt
)

2735 
IÅutFe
 *
fe
 = 
šput_fes
[
šput_šdex
];

2736 
AVSŒ—m
 *
¡
 = 
fe
->
ùx
->
¡»ams
[
pkt
->
¡»am_šdex
];

2738 ià(
pkt
->
¡»am_šdex
 < 
fe
->
nb_¡»ams_w¬n
)

2740 
	`av_log
(
fe
->
ùx
, 
AV_LOG_WARNING
,

2741 "New % ¡»am %d:%d‡ˆpos:%"
PRId64
"‡nd DTS:%ss\n",

2742 
	`av_g‘_medŸ_ty³_¡ršg
(
¡
->
codec
->
codec_ty³
),

2743 
šput_šdex
, 
pkt
->
¡»am_šdex
,

2744 
pkt
->
pos
, 
	`av_ts2time¡r
Õkt->
dts
, &
¡
->
time_ba£
));

2745 
fe
->
nb_¡»ams_w¬n
 = 
pkt
->
¡»am_šdex
 + 1;

2746 
	}
}

2748 
	$£t_’cod”_id
(
OuutFe
 *
of
, 
OuutSŒ—m
 *
o¡
)

2750 
AVDiùiÚ¬yEÁry
 *
e
;

2752 
ušt8_t
 *
’cod”_¡ršg
;

2753 
’cod”_¡ršg_Ën
;

2754 
fÜm©_æags
 = 0;

2755 
codec_æags
 = 0;

2757 ià(
	`av_diù_g‘
(
o¡
->
¡
->
m‘ad©a
, "’cod”", 
NULL
, 0))

2760 
e
 = 
	`av_diù_g‘
(
of
->
İts
, "fæags", 
NULL
, 0);

2761 ià(
e
) {

2762 cÚ¡ 
AVO±iÚ
 *
o
 = 
	`av_İt_fšd
(
of
->
ùx
, "fæags", 
NULL
, 0, 0);

2763 ià(!
o
)

2765 
	`av_İt_ev®_æags
(
of
->
ùx
, 
o
, 
e
->
v®ue
, &
fÜm©_æags
);

2767 
e
 = 
	`av_diù_g‘
(
o¡
->
’cod”_İts
, "æags", 
NULL
, 0);

2768 ià(
e
) {

2769 cÚ¡ 
AVO±iÚ
 *
o
 = 
	`av_İt_fšd
(
o¡
->
’c_ùx
, "æags", 
NULL
, 0, 0);

2770 ià(!
o
)

2772 
	`av_İt_ev®_æags
(
o¡
->
’c_ùx
, 
o
, 
e
->
v®ue
, &
codec_æags
);

2775 
’cod”_¡ršg_Ën
 = (
LIBAVCODEC_IDENT
è+ 
	`¡¾’
(
o¡
->
’c
->
Çme
) + 2;

2776 
’cod”_¡ršg
 = 
	`av_m®locz
(
’cod”_¡ršg_Ën
);

2777 ià(!
’cod”_¡ršg
)

2778 
	`ex™_´og¿m
(1);

2780 ià(!(
fÜm©_æags
 & 
AVFMT_FLAG_BITEXACT
è&& !(
codec_æags
 & 
AV_CODEC_FLAG_BITEXACT
))

2781 
	`av_¡¾ıy
(
’cod”_¡ršg
, 
LIBAVCODEC_IDENT
 " ", 
’cod”_¡ršg_Ën
);

2783 
	`av_¡¾ıy
(
’cod”_¡ršg
, "Lavø", 
’cod”_¡ršg_Ën
);

2784 
	`av_¡¾ÿt
(
’cod”_¡ršg
, 
o¡
->
’c
->
Çme
, 
’cod”_¡ršg_Ën
);

2785 
	`av_diù_£t
(&
o¡
->
¡
->
m‘ad©a
, "’cod”", 
’cod”_¡ršg
,

2786 
AV_DICT_DONT_STRDUP_VAL
 | 
AV_DICT_DONT_OVERWRITE
);

2787 
	}
}

2789 
	$Œªscode_š™
()

2791 
»t
 = 0, 
i
, 
j
, 
k
;

2792 
AVFÜm©CÚ‹xt
 *
oc
;

2793 
OuutSŒ—m
 *
o¡
;

2794 
IÅutSŒ—m
 *
i¡
;

2795 
”rÜ
[1024] = {0};

2796 
wªt_sdp
 = 1;

2798 
i
 = 0; i < 
nb_f‹rg¿phs
; i++) {

2799 
F‹rG¿ph
 *
fg
 = 
f‹rg¿phs
[
i
];

2800 
j
 = 0; j < 
fg
->
nb_ouuts
; j++) {

2801 
OuutF‹r
 *
of‹r
 = 
fg
->
ouuts
[
j
];

2802 ià(!
of‹r
->
o¡
 || of‹r->o¡->
sourû_šdex
 >= 0)

2804 ià(
fg
->
nb_šputs
 != 1)

2806 
k
 = 
nb_šput_¡»ams
-1; k >= 0 ; k--)

2807 ià(
fg
->
šputs
[0]->
i¡
 =ğ
šput_¡»ams
[
k
])

2809 
of‹r
->
o¡
->
sourû_šdex
 = 
k
;

2814 
i
 = 0; i < 
nb_šput_fes
; i++) {

2815 
IÅutFe
 *
ife
 = 
šput_fes
[
i
];

2816 ià(
ife
->
¿‹_emu
)

2817 
j
 = 0; j < 
ife
->
nb_¡»ams
; j++)

2818 
šput_¡»ams
[
j
 + 
ife
->
i¡_šdex
]->
¡¬t
 = 
	`av_g‘time_»Ïtive
();

2822 
i
 = 0; i < 
nb_ouut_¡»ams
; i++) {

2823 
AVCodecCÚ‹xt
 *
’c_ùx
;

2824 
AVCodecCÚ‹xt
 *
dec_ùx
 = 
NULL
;

2825 
o¡
 = 
ouut_¡»ams
[
i
];

2826 
oc
 = 
ouut_fes
[
o¡
->
fe_šdex
]->
ùx
;

2827 
i¡
 = 
	`g‘_šput_¡»am
(
o¡
);

2829 ià(
o¡
->
©chm’t_f’ame
)

2832 
’c_ùx
 = 
o¡
->
¡»am_cİy
 ? o¡->
¡
->
codec
 : ost->enc_ctx;

2834 ià(
i¡
) {

2835 
dec_ùx
 = 
i¡
->dec_ctx;

2837 
o¡
->
¡
->
di¥os™iÚ
 = 
i¡
->st->disposition;

2838 
’c_ùx
->
b™s_³r_¿w_§m¶e
 = 
dec_ùx
->bits_per_raw_sample;

2839 
’c_ùx
->
chroma_§m¶e_loÿtiÚ
 = 
dec_ùx
->chroma_sample_location;

2841 
j
=0; j<
oc
->
nb_¡»ams
; j++) {

2842 
AVSŒ—m
 *
¡
 = 
oc
->
¡»ams
[
j
];

2843 ià(
¡
 !ğ
o¡
->¡ && st->
codec
->
codec_ty³
 =ğ
’c_ùx
->codec_type)

2846 ià(
j
 =ğ
oc
->
nb_¡»ams
)

2847 ià(
’c_ùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_AUDIO
 ||ƒnc_ùx->codec_ty³ =ğ
AVMEDIA_TYPE_VIDEO
)

2848 
o¡
->
¡
->
di¥os™iÚ
 = 
AV_DISPOSITION_DEFAULT
;

2851 ià(
o¡
->
¡»am_cİy
) {

2852 
AVR©iÚ®
 
§r
;

2853 
ušt64_t
 
exŒa_size
;

2855 
	`av_as£¹0
(
i¡
 && !
o¡
->
f‹r
);

2857 
exŒa_size
 = (
ušt64_t
)
dec_ùx
->
exŒad©a_size
 + 
AV_INPUT_BUFFER_PADDING_SIZE
;

2859 ià(
exŒa_size
 > 
INT_MAX
) {

2860  
	`AVERROR
(
EINVAL
);

2864 
’c_ùx
->
codec_id
 = 
dec_ùx
->codec_id;

2865 
’c_ùx
->
codec_ty³
 = 
dec_ùx
->codec_type;

2867 ià(!
’c_ùx
->
codec_g
) {

2868 
codec_g
;

2869 ià(!
oc
->
ofÜm©
->
codec_g
 ||

2870 
	`av_codec_g‘_id
 (
oc
->
ofÜm©
->
codec_g
, 
dec_ùx
->codec_gè=ğ
’c_ùx
->
codec_id
 ||

2871 !
	`av_codec_g‘_g2
(
oc
->
ofÜm©
->
codec_g
, 
dec_ùx
->
codec_id
, &codec_tag))

2872 
’c_ùx
->
codec_g
 = 
dec_ùx
->codec_tag;

2875 
’c_ùx
->
b™_¿‹
 = 
dec_ùx
->bit_rate;

2876 
’c_ùx
->
rc_max_¿‹
 = 
dec_ùx
->rc_max_rate;

2877 
’c_ùx
->
rc_bufãr_size
 = 
dec_ùx
->rc_buffer_size;

2878 
’c_ùx
->
f›ld_Üd”
 = 
dec_ùx
->field_order;

2879 ià(
dec_ùx
->
exŒad©a_size
) {

2880 
’c_ùx
->
exŒad©a
 = 
	`av_m®locz
(
exŒa_size
);

2881 ià(!
’c_ùx
->
exŒad©a
) {

2882  
	`AVERROR
(
ENOMEM
);

2884 
	`memıy
(
’c_ùx
->
exŒad©a
, 
dec_ùx
->exŒad©a, dec_ùx->
exŒad©a_size
);

2886 
’c_ùx
->
exŒad©a_size
ğ
dec_ùx
->extradata_size;

2887 
’c_ùx
->
b™s_³r_coded_§m¶e
 = 
dec_ùx
->bits_per_coded_sample;

2889 
’c_ùx
->
time_ba£
 = 
i¡
->
¡
->time_base;

2895 if(!
	`¡rcmp
(
oc
->
ofÜm©
->
Çme
, "avi")) {

2896 iàĞ
cİy_tb
<0 && 
	`av_q2d
(
i¡
->
¡
->
r_äame_¿‹
è>ğav_q2d(i¡->¡->
avg_äame_¿‹
)

2897 && 0.5/
	`av_q2d
(
i¡
->
¡
->
r_äame_¿‹
è>‡v_q2d(i¡->¡->
time_ba£
)

2898 && 0.5/
	`av_q2d
(
i¡
->
¡
->
r_äame_¿‹
è>‡v_q2d(
dec_ùx
->
time_ba£
)

2899 && 
	`av_q2d
(
i¡
->
¡
->
time_ba£
è< 1.0/500 &&‡v_q2d(
dec_ùx
->time_base) < 1.0/500

2900 || 
cİy_tb
==2){

2901 
’c_ùx
->
time_ba£
.
num
 = 
i¡
->
¡
->
r_äame_¿‹
.
d’
;

2902 
’c_ùx
->
time_ba£
.
d’
 = 2*
i¡
->
¡
->
r_äame_¿‹
.
num
;

2903 
’c_ùx
->
ticks_³r_äame
 = 2;

2904 } iàĞ
cİy_tb
<0 && 
	`av_q2d
(
dec_ùx
->
time_ba£
)*dec_ùx->
ticks_³r_äame
 > 2*av_q2d(
i¡
->
¡
->time_base)

2905 && 
	`av_q2d
(
i¡
->
¡
->
time_ba£
) < 1.0/500

2906 || 
cİy_tb
==0){

2907 
’c_ùx
->
time_ba£
 = 
dec_ùx
->time_base;

2908 
’c_ùx
->
time_ba£
.
num
 *ğ
dec_ùx
->
ticks_³r_äame
;

2909 
’c_ùx
->
time_ba£
.
d’
 *= 2;

2910 
’c_ùx
->
ticks_³r_äame
 = 2;

2912 } if(!(
oc
->
ofÜm©
->
æags
 & 
AVFMT_VARIABLE_FPS
)

2913 && 
	`¡rcmp
(
oc
->
ofÜm©
->
Çme
, "mov") && strcmp(oc->oformat->name, "mp4") && strcmp(oc->oformat->name, "3gp")

2914 && 
	`¡rcmp
(
oc
->
ofÜm©
->
Çme
, "3g2") && strcmp(oc->oformat->name, "psp") && strcmp(oc->oformat->name, "ipod")

2915 && 
	`¡rcmp
(
oc
->
ofÜm©
->
Çme
, "f4v")

2917 ifĞ
cİy_tb
<0 && 
dec_ùx
->
time_ba£
.
d’


2918 && 
	`av_q2d
(
dec_ùx
->
time_ba£
)*dec_ùx->
ticks_³r_äame
 >‡v_q2d(
i¡
->
¡
->time_base)

2919 && 
	`av_q2d
(
i¡
->
¡
->
time_ba£
) < 1.0/500

2920 || 
cİy_tb
==0){

2921 
’c_ùx
->
time_ba£
 = 
dec_ùx
->time_base;

2922 
’c_ùx
->
time_ba£
.
num
 *ğ
dec_ùx
->
ticks_³r_äame
;

2925 iàĞ
’c_ùx
->
codec_g
 =ğ
	`AV_RL32
("tmcd")

2926 && 
dec_ùx
->
time_ba£
.
num
 < dec_ùx->time_ba£.
d’


2927 && 
dec_ùx
->
time_ba£
.
num
 > 0

2928 && 121LL*
dec_ùx
->
time_ba£
.
num
 > dec_ùx->time_ba£.
d’
) {

2929 
’c_ùx
->
time_ba£
 = 
dec_ùx
->time_base;

2932 ià(!
o¡
->
äame_¿‹
.
num
)

2933 
o¡
->
äame_¿‹
 = 
i¡
->
äam”©e
;

2934 if(
o¡
->
äame_¿‹
.
num
)

2935 
’c_ùx
->
time_ba£
 = 
	`av_šv_q
(
o¡
->
äame_¿‹
);

2937 
	`av_»duû
(&
’c_ùx
->
time_ba£
.
num
, &’c_ùx->time_ba£.
d’
,

2938 
’c_ùx
->
time_ba£
.
num
,ƒnc_ùx->time_ba£.
d’
, 
INT_MAX
);

2940 ià(
i¡
->
¡
->
nb_side_d©a
) {

2941 
o¡
->
¡
->
side_d©a
 = 
	`av_»®loc_¬¿y
(
NULL
, 
i¡
->¡->
nb_side_d©a
,

2942 (*
i¡
->
¡
->
side_d©a
));

2943 ià(!
o¡
->
¡
->
side_d©a
)

2944  
	`AVERROR
(
ENOMEM
);

2946 
o¡
->
¡
->
nb_side_d©a
 = 0;

2947 
j
 = 0; j < 
i¡
->
¡
->
nb_side_d©a
; j++) {

2948 cÚ¡ 
AVPack‘SideD©a
 *
sd_¤c
 = &
i¡
->
¡
->
side_d©a
[
j
];

2949 
AVPack‘SideD©a
 *
sd_d¡
 = &
o¡
->
¡
->
side_d©a
[o¡->¡->
nb_side_d©a
];

2951 ià(
o¡
->
rÙ©e_ov”ridd’
 && 
sd_¤c
->
ty³
 =ğ
AV_PKT_DATA_DISPLAYMATRIX
)

2954 
sd_d¡
->
d©a
 = 
	`av_m®loc
(
sd_¤c
->
size
);

2955 ià(!
sd_d¡
->
d©a
)

2956  
	`AVERROR
(
ENOMEM
);

2957 
	`memıy
(
sd_d¡
->
d©a
, 
sd_¤c
->d©a, sd_¤c->
size
);

2958 
sd_d¡
->
size
 = 
sd_¤c
->size;

2959 
sd_d¡
->
ty³
 = 
sd_¤c
->type;

2960 
o¡
->
¡
->
nb_side_d©a
++;

2964 
o¡
->
·r£r
 = 
	`av_·r£r_š™
(
’c_ùx
->
codec_id
);

2966 
’c_ùx
->
codec_ty³
) {

2967 
AVMEDIA_TYPE_AUDIO
:

2968 ià(
audio_vŞume
 != 256) {

2969 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "-acodec copy‡nd -vol‡re incompatible (frames‡re‚ot decoded)\n");

2970 
	`ex™_´og¿m
(1);

2972 
’c_ùx
->
chªÃl_Ïyout
 = 
dec_ùx
->channel_layout;

2973 
’c_ùx
->
§m¶e_¿‹
 = 
dec_ùx
->sample_rate;

2974 
’c_ùx
->
chªÃls
 = 
dec_ùx
->channels;

2975 
’c_ùx
->
äame_size
 = 
dec_ùx
->frame_size;

2976 
’c_ùx
->
audio_£rviû_ty³
 = 
dec_ùx
->audio_service_type;

2977 
’c_ùx
->
block_®ign
 = 
dec_ùx
->block_align;

2978 
’c_ùx
->
š™Ÿl_·ddšg
 = 
dec_ùx
->
d–ay
;

2979 
’c_ùx
->
´ofe
 = 
dec_ùx
->profile;

2980 #ià
FF_API_AUDIOENC_DELAY


2981 
’c_ùx
->
d–ay
 = 
dec_ùx
->delay;

2983 if((
’c_ùx
->
block_®ign
 =ğ1 ||ƒnc_ùx->block_®igÀ=ğ1152 ||ƒnc_ùx->block_®igÀ=ğ576è&&ƒnc_ùx->
codec_id
 =ğ
AV_CODEC_ID_MP3
)

2984 
’c_ùx
->
block_®ign
= 0;

2985 if(
’c_ùx
->
codec_id
 =ğ
AV_CODEC_ID_AC3
)

2986 
’c_ùx
->
block_®ign
= 0;

2988 
AVMEDIA_TYPE_VIDEO
:

2989 
’c_ùx
->
pix_fmt
 = 
dec_ùx
->pix_fmt;

2990 
’c_ùx
->
width
 = 
dec_ùx
->width;

2991 
’c_ùx
->
height
 = 
dec_ùx
->height;

2992 
’c_ùx
->
has_b_äames
 = 
dec_ùx
->has_b_frames;

2993 ià(
o¡
->
äame_a¥eù_¿tio
.
num
) {

2994 
§r
 =

2995 
	`av_mul_q
(
o¡
->
äame_a¥eù_¿tio
,

2996 (
AVR©iÚ®
){ 
’c_ùx
->
height
,ƒnc_ùx->
width
 });

2997 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "Overriding‡spect„atio "

3000 ià(
i¡
->
¡
->
§m¶e_a¥eù_¿tio
.
num
)

3001 
§r
 = 
i¡
->
¡
->
§m¶e_a¥eù_¿tio
;

3003 
§r
 = 
dec_ùx
->
§m¶e_a¥eù_¿tio
;

3004 
o¡
->
¡
->
§m¶e_a¥eù_¿tio
 = 
’c_ùx
->§m¶e_a¥eù_¿tiØğ
§r
;

3005 
o¡
->
¡
->
avg_äame_¿‹
 = 
i¡
->st->avg_frame_rate;

3006 
o¡
->
¡
->
r_äame_¿‹
 = 
i¡
->st->r_frame_rate;

3008 
AVMEDIA_TYPE_SUBTITLE
:

3009 
’c_ùx
->
width
 = 
dec_ùx
->width;

3010 
’c_ùx
->
height
 = 
dec_ùx
->height;

3012 
AVMEDIA_TYPE_UNKNOWN
:

3013 
AVMEDIA_TYPE_DATA
:

3014 
AVMEDIA_TYPE_ATTACHMENT
:

3017 
	`abÜt
();

3020 ià(!
o¡
->
’c
)

3021 
o¡
->
’c
 = 
	`avcodec_fšd_’cod”
(
’c_ùx
->
codec_id
);

3022 ià(!
o¡
->
’c
) {

3024 
	`¢´štf
(
”rÜ
, (error), "Encoder (codec %s)‚ot found for output stream #%d:%d",

3025 
	`avcodec_g‘_Çme
(
o¡
->
¡
->
codec
->
codec_id
), o¡->
fe_šdex
, o¡->
šdex
);

3026 
»t
 = 
	`AVERROR
(
EINVAL
);

3027 
dump_fÜm©
;

3030 
	`£t_’cod”_id
(
ouut_fes
[
o¡
->
fe_šdex
], ost);

3032 #ià
CONFIG_LIBMFX


3033 ià(
	`qsv_Œªscode_š™
(
o¡
))

3034 
	`ex™_´og¿m
(1);

3037 ià(!
o¡
->
f‹r
 &&

3038 (
’c_ùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
 ||

3039 
’c_ùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_AUDIO
)) {

3040 
F‹rG¿ph
 *
fg
;

3041 
fg
 = 
	`š™_sim¶e_f‹rg¿ph
(
i¡
, 
o¡
);

3042 ià(
	`cÚfigu»_f‹rg¿ph
(
fg
)) {

3043 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Error opening filters!\n");

3044 
	`ex™_´og¿m
(1);

3048 ià(
’c_ùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
) {

3049 ià(!
o¡
->
äame_¿‹
.
num
)

3050 
o¡
->
äame_¿‹
 = 
	`av_bufãrsšk_g‘_äame_¿‹
(o¡->
f‹r
->filter);

3051 ià(
i¡
 && !
o¡
->
äame_¿‹
.
num
)

3052 
o¡
->
äame_¿‹
 = 
i¡
->
äam”©e
;

3053 ià(
i¡
 && !
o¡
->
äame_¿‹
.
num
)

3054 
o¡
->
äame_¿‹
 = 
i¡
->
¡
->
r_äame_¿‹
;

3055 ià(
i¡
 && !
o¡
->
äame_¿‹
.
num
) {

3056 
o¡
->
äame_¿‹
 = (
AVR©iÚ®
){25, 1};

3057 
	`av_log
(
NULL
, 
AV_LOG_WARNING
,

3062 
o¡
->
fe_šdex
, o¡->
šdex
);

3065 ià(
o¡
->
’c
 && o¡->’c->
suµÜ‹d_äam”©es
 && !o¡->
fÜû_ås
) {

3066 
idx
 = 
	`av_fšd_Ã¬e¡_q_idx
(
o¡
->
äame_¿‹
, o¡->
’c
->
suµÜ‹d_äam”©es
);

3067 
o¡
->
äame_¿‹
 = o¡->
’c
->
suµÜ‹d_äam”©es
[
idx
];

3070 ià(
’c_ùx
->
codec_id
 =ğ
AV_CODEC_ID_MPEG4
) {

3071 
	`av_»duû
(&
o¡
->
äame_¿‹
.
num
, &o¡->äame_¿‹.
d’
,

3072 
o¡
->
äame_¿‹
.
num
, o¡->äame_¿‹.
d’
, 65535);

3076 
’c_ùx
->
codec_ty³
) {

3077 
AVMEDIA_TYPE_AUDIO
:

3078 
’c_ùx
->
§m¶e_fmt
 = 
o¡
->
f‹r
->f‹r->
šputs
[0]->
fÜm©
;

3079 
’c_ùx
->
§m¶e_¿‹
 = 
o¡
->
f‹r
->f‹r->
šputs
[0]->sample_rate;

3080 
’c_ùx
->
chªÃl_Ïyout
 = 
o¡
->
f‹r
->f‹r->
šputs
[0]->channel_layout;

3081 
’c_ùx
->
chªÃls
 = 
	`avf‹r_lšk_g‘_chªÃls
(
o¡
->
f‹r
->f‹r->
šputs
[0]);

3082 
’c_ùx
->
time_ba£
 = (
AVR©iÚ®
){ 1,ƒnc_ùx->
§m¶e_¿‹
 };

3084 
AVMEDIA_TYPE_VIDEO
:

3085 
’c_ùx
->
time_ba£
 = 
	`av_šv_q
(
o¡
->
äame_¿‹
);

3086 ià(!(
’c_ùx
->
time_ba£
.
num
 &&ƒnc_ùx->time_ba£.
d’
))

3087 
’c_ùx
->
time_ba£
 = 
o¡
->
f‹r
->f‹r->
šputs
[0]->time_base;

3088 iàĞ
	`av_q2d
(
’c_ùx
->
time_ba£
è< 0.001 && 
video_sync_m‘hod
 !ğ
VSYNC_PASSTHROUGH


3089 && (
video_sync_m‘hod
 =ğ
VSYNC_CFR
 || video_sync_m‘hod =ğ
VSYNC_VSCFR
 || (video_sync_m‘hod =ğ
VSYNC_AUTO
 && !(
oc
->
ofÜm©
->
æags
 & 
AVFMT_VARIABLE_FPS
)))){

3090 
	`av_log
(
oc
, 
AV_LOG_WARNING
, "Frame„ate very high for‡ muxer‚otƒfficiently supporting it.\n"

3093 
j
 = 0; j < 
o¡
->
fÜûd_kf_couÁ
; j++)

3094 
o¡
->
fÜûd_kf_±s
[
j
] = 
	`av_»sÿË_q
(ost->forced_kf_pts[j],

3095 
AV_TIME_BASE_Q
,

3096 
’c_ùx
->
time_ba£
);

3098 
’c_ùx
->
width
 = 
o¡
->
f‹r
->f‹r->
šputs
[0]->
w
;

3099 
’c_ùx
->
height
 = 
o¡
->
f‹r
->f‹r->
šputs
[0]->
h
;

3100 
’c_ùx
->
§m¶e_a¥eù_¿tio
 = 
o¡
->
¡
->sample_aspect_ratio =

3101 
o¡
->
äame_a¥eù_¿tio
.
num
 ?

3102 
	`av_mul_q
(
o¡
->
äame_a¥eù_¿tio
, (
AVR©iÚ®
){ 
’c_ùx
->
height
,ƒnc_ùx->
width
 }) :

3103 
o¡
->
f‹r
->f‹r->
šputs
[0]->
§m¶e_a¥eù_¿tio
;

3104 ià(!
	`¡ºcmp
(
o¡
->
’c
->
Çme
, "libx264", 7) &&

3105 
’c_ùx
->
pix_fmt
 =ğ
AV_PIX_FMT_NONE
 &&

3106 
o¡
->
f‹r
->f‹r->
šputs
[0]->
fÜm©
 !ğ
AV_PIX_FMT_YUV420P
)

3107 
	`av_log
(
NULL
, 
AV_LOG_WARNING
,

3110 
	`av_g‘_pix_fmt_Çme
(
o¡
->
f‹r
->f‹r->
šputs
[0]->
fÜm©
));

3111 ià(!
	`¡ºcmp
(
o¡
->
’c
->
Çme
, "mpeg2video", 10) &&

3112 
’c_ùx
->
pix_fmt
 =ğ
AV_PIX_FMT_NONE
 &&

3113 
o¡
->
f‹r
->f‹r->
šputs
[0]->
fÜm©
 !ğ
AV_PIX_FMT_YUV420P
)

3114 
	`av_log
(
NULL
, 
AV_LOG_WARNING
,

3117 
	`av_g‘_pix_fmt_Çme
(
o¡
->
f‹r
->f‹r->
šputs
[0]->
fÜm©
));

3118 
’c_ùx
->
pix_fmt
 = 
o¡
->
f‹r
->f‹r->
šputs
[0]->
fÜm©
;

3120 
o¡
->
¡
->
avg_äame_¿‹
 = o¡->
äame_¿‹
;

3122 ià(!
dec_ùx
 ||

3123 
’c_ùx
->
width
 !ğ
dec_ùx
->width ||

3124 
’c_ùx
->
height
 !ğ
dec_ùx
->height ||

3125 
’c_ùx
->
pix_fmt
 !ğ
dec_ùx
->pix_fmt) {

3126 
’c_ùx
->
b™s_³r_¿w_§m¶e
 = 
äame_b™s_³r_¿w_§m¶e
;

3129 ià(
o¡
->
fÜûd_keyäames
) {

3130 ià(!
	`¡ºcmp
(
o¡
->
fÜûd_keyäames
, "expr:", 5)) {

3131 
»t
 = 
	`av_ex´_·r£
(&
o¡
->
fÜûd_keyäames_³x´
, o¡->
fÜûd_keyäames
+5,

3132 
fÜûd_keyäames_cÚ¡_Çmes
, 
NULL
, NULL, NULL, NULL, 0, NULL);

3133 ià(
»t
 < 0) {

3134 
	`av_log
(
NULL
, 
AV_LOG_ERROR
,

3135 "Inv®id fÜû_key_äame ex´essiÚ '%s'\n", 
o¡
->
fÜûd_keyäames
+5);

3136  
»t
;

3138 
o¡
->
fÜûd_keyäames_ex´_cÚ¡_v®ues
[
FKF_N
] = 0;

3139 
o¡
->
fÜûd_keyäames_ex´_cÚ¡_v®ues
[
FKF_N_FORCED
] = 0;

3140 
o¡
->
fÜûd_keyäames_ex´_cÚ¡_v®ues
[
FKF_PREV_FORCED_N
] = 
NAN
;

3141 
o¡
->
fÜûd_keyäames_ex´_cÚ¡_v®ues
[
FKF_PREV_FORCED_T
] = 
NAN
;

3145 } if(
	`¡ºcmp
(
o¡
->
fÜûd_keyäames
, "source", 6)) {

3146 
	`·r£_fÜûd_key_äames
(
o¡
->
fÜûd_keyäames
, o¡, o¡->
’c_ùx
);

3150 
AVMEDIA_TYPE_SUBTITLE
:

3151 
’c_ùx
->
time_ba£
 = (
AVR©iÚ®
){1, 1000};

3152 ià(!
’c_ùx
->
width
) {

3153 
’c_ùx
->
width
 = 
šput_¡»ams
[
o¡
->
sourû_šdex
]->
¡
->
codec
->width;

3154 
’c_ùx
->
height
 = 
šput_¡»ams
[
o¡
->
sourû_šdex
]->
¡
->
codec
->height;

3157 
AVMEDIA_TYPE_DATA
:

3160 
	`abÜt
();

3165 ià(
o¡
->
di¥os™iÚ
) {

3166 cÚ¡ 
AVO±iÚ
 
İts
[] = {

3167 { "di¥os™iÚ" , 
NULL
, 0, 
AV_OPT_TYPE_FLAGS
, { .
i64
 = 0 }, 
INT64_MIN
, 
INT64_MAX
, .
un™
 = "flags" },

3168 { "deçuÉ" , 
NULL
, 0, 
AV_OPT_TYPE_CONST
, { .
i64
 = 
AV_DISPOSITION_DEFAULT
 }, .
un™
 = "flags" },

3169 { "dub" , 
NULL
, 0, 
AV_OPT_TYPE_CONST
, { .
i64
 = 
AV_DISPOSITION_DUB
 }, .
un™
 = "flags" },

3170 { "Üigš®" , 
NULL
, 0, 
AV_OPT_TYPE_CONST
, { .
i64
 = 
AV_DISPOSITION_ORIGINAL
 }, .
un™
 = "flags" },

3171 { "comm’t" , 
NULL
, 0, 
AV_OPT_TYPE_CONST
, { .
i64
 = 
AV_DISPOSITION_COMMENT
 }, .
un™
 = "flags" },

3172 { "lyrics" , 
NULL
, 0, 
AV_OPT_TYPE_CONST
, { .
i64
 = 
AV_DISPOSITION_LYRICS
 }, .
un™
 = "flags" },

3173 { "k¬aoke" , 
NULL
, 0, 
AV_OPT_TYPE_CONST
, { .
i64
 = 
AV_DISPOSITION_KARAOKE
 }, .
un™
 = "flags" },

3174 { "fÜûd" , 
NULL
, 0, 
AV_OPT_TYPE_CONST
, { .
i64
 = 
AV_DISPOSITION_FORCED
 }, .
un™
 = "flags" },

3175 { "h—ršg_im·œed" , 
NULL
, 0, 
AV_OPT_TYPE_CONST
, { .
i64
 = 
AV_DISPOSITION_HEARING_IMPAIRED
 }, .
un™
 = "flags" },

3176 { "visu®_im·œed" , 
NULL
, 0, 
AV_OPT_TYPE_CONST
, { .
i64
 = 
AV_DISPOSITION_VISUAL_IMPAIRED
 }, .
un™
 = "flags" },

3177 { "ş—n_efãùs" , 
NULL
, 0, 
AV_OPT_TYPE_CONST
, { .
i64
 = 
AV_DISPOSITION_CLEAN_EFFECTS
 }, .
un™
 = "flags" },

3178 { "ÿ±iÚs" , 
NULL
, 0, 
AV_OPT_TYPE_CONST
, { .
i64
 = 
AV_DISPOSITION_CAPTIONS
 }, .
un™
 = "flags" },

3179 { "desütiÚs" , 
NULL
, 0, 
AV_OPT_TYPE_CONST
, { .
i64
 = 
AV_DISPOSITION_DESCRIPTIONS
 }, .
un™
 = "flags" },

3180 { "m‘ad©a" , 
NULL
, 0, 
AV_OPT_TYPE_CONST
, { .
i64
 = 
AV_DISPOSITION_METADATA
 }, .
un™
 = "flags" },

3181 { 
NULL
 },

3183 cÚ¡ 
AVCÏss
 
şass
 = {

3184 .
şass_Çme
 = "",

3185 .
™em_Çme
 = 
av_deçuÉ_™em_Çme
,

3186 .
İtiÚ
 = 
İts
,

3187 .
v”siÚ
 = 
LIBAVUTIL_VERSION_INT
,

3189 cÚ¡ 
AVCÏss
 *
pşass
 = &
şass
;

3191 
»t
 = 
	`av_İt_ev®_æags
(&
pşass
, &
İts
[0], 
o¡
->
di¥os™iÚ
, &o¡->
¡
->disposition);

3192 ià(
»t
 < 0)

3193 
dump_fÜm©
;

3198 
i
 = 0; i < 
nb_ouut_¡»ams
; i++) {

3199 
»t
 = 
	`š™_ouut_¡»am
(
ouut_¡»ams
[
i
], 
”rÜ
, (error));

3200 ià(
»t
 < 0)

3201 
dump_fÜm©
;

3205 
i
 = 0; i < 
nb_šput_¡»ams
; i++)

3206 ià((
»t
 = 
	`š™_šput_¡»am
(
i
, 
”rÜ
, (error))) < 0) {

3207 
i
 = 0; i < 
nb_ouut_¡»ams
; i++) {

3208 
o¡
 = 
ouut_¡»ams
[
i
];

3209 
	`avcodec_şo£
(
o¡
->
’c_ùx
);

3211 
dump_fÜm©
;

3215 
i
 = 0; i < 
nb_šput_fes
; i++) {

3216 
IÅutFe
 *
ife
 = 
šput_fes
[
i
];

3217 
j
 = 0; j < 
ife
->
ùx
->
nb_´og¿ms
; j++) {

3218 
AVProg¿m
 *
p
 = 
ife
->
ùx
->
´og¿ms
[
j
];

3219 
disÿrd
 = 
AVDISCARD_ALL
;

3221 
k
 = 0; k < 
p
->
nb_¡»am_šdexes
; k++)

3222 ià(!
šput_¡»ams
[
ife
->
i¡_šdex
 + 
p
->
¡»am_šdex
[
k
]]->
disÿrd
) {

3223 
disÿrd
 = 
AVDISCARD_DEFAULT
;

3226 
p
->
disÿrd
 = discard;

3231 
i
 = 0; i < 
nb_ouut_fes
; i++) {

3232 
oc
 = 
ouut_fes
[
i
]->
ùx
;

3233 
oc
->
š‹¼u±_ÿÎback
 = 
št_cb
;

3234 ià((
»t
 = 
	`avfÜm©_wr™e_h—d”
(
oc
, &
ouut_fes
[
i
]->
İts
)) < 0) {

3235 
	`¢´štf
(
”rÜ
, (error),

3238 
i
, 
	`av_”r2¡r
(
»t
));

3239 
»t
 = 
	`AVERROR
(
EINVAL
);

3240 
dump_fÜm©
;

3243 ià(
	`¡rcmp
(
oc
->
ofÜm©
->
Çme
, "rtp")) {

3244 
wªt_sdp
 = 0;

3248 
dump_fÜm©
:

3251 
i
 = 0; i < 
nb_ouut_fes
; i++) {

3252 
	`av_dump_fÜm©
(
ouut_fes
[
i
]->
ùx
, i, ouut_fes[i]->ùx->
f’ame
, 1);

3256 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "Stream mapping:\n");

3257 
i
 = 0; i < 
nb_šput_¡»ams
; i++) {

3258 
i¡
 = 
šput_¡»ams
[
i
];

3260 
j
 = 0; j < 
i¡
->
nb_f‹rs
; j++) {

3261 ià(
i¡
->
f‹rs
[
j
]->
g¿ph
->
g¿ph_desc
) {

3262 
	`av_log
(
NULL
, 
AV_LOG_INFO
, " Stream #%d:%d (%s) -> %s",

3263 
i¡
->
fe_šdex
, i¡->
¡
->
šdex
, i¡->
dec
 ? i¡->dec->
Çme
 : "?",

3264 
i¡
->
f‹rs
[
j
]->
Çme
);

3265 ià(
nb_f‹rg¿phs
 > 1)

3266 
	`av_log
(
NULL
, 
AV_LOG_INFO
, " (g¿ph %d)", 
i¡
->
f‹rs
[
j
]->
g¿ph
->
šdex
);

3267 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "\n");

3272 
i
 = 0; i < 
nb_ouut_¡»ams
; i++) {

3273 
o¡
 = 
ouut_¡»ams
[
i
];

3275 ià(
o¡
->
©chm’t_f’ame
) {

3277 
	`av_log
(
NULL
, 
AV_LOG_INFO
, " File %s -> Stream #%d:%d\n",

3278 
o¡
->
©chm’t_f’ame
, o¡->
fe_šdex
, o¡->
šdex
);

3282 ià(
o¡
->
f‹r
 && o¡->f‹r->
g¿ph
->
g¿ph_desc
) {

3284 
	`av_log
(
NULL
, 
AV_LOG_INFO
, " %s", 
o¡
->
f‹r
->
Çme
);

3285 ià(
nb_f‹rg¿phs
 > 1)

3286 
	`av_log
(
NULL
, 
AV_LOG_INFO
, " (g¿ph %d)", 
o¡
->
f‹r
->
g¿ph
->
šdex
);

3288 
	`av_log
(
NULL
, 
AV_LOG_INFO
, " -> SŒ—m #%d:%d (%s)\n", 
o¡
->
fe_šdex
,

3289 
o¡
->
šdex
, o¡->
’c
 ? o¡->’c->
Çme
 : "?");

3293 
	`av_log
(
NULL
, 
AV_LOG_INFO
, " Stream #%d:%d -> #%d:%d",

3294 
šput_¡»ams
[
o¡
->
sourû_šdex
]->
fe_šdex
,

3295 
šput_¡»ams
[
o¡
->
sourû_šdex
]->
¡
->
šdex
,

3296 
o¡
->
fe_šdex
,

3297 
o¡
->
šdex
);

3298 ià(
o¡
->
sync_i¡
 !ğ
šput_¡»ams
[o¡->
sourû_šdex
])

3299 
	`av_log
(
NULL
, 
AV_LOG_INFO
, " [sync #%d:%d]",

3300 
o¡
->
sync_i¡
->
fe_šdex
,

3301 
o¡
->
sync_i¡
->
¡
->
šdex
);

3302 ià(
o¡
->
¡»am_cİy
)

3303 
	`av_log
(
NULL
, 
AV_LOG_INFO
, " (copy)");

3305 cÚ¡ 
AVCodec
 *
š_codec
 = 
šput_¡»ams
[
o¡
->
sourû_šdex
]->
dec
;

3306 cÚ¡ 
AVCodec
 *
out_codec
 = 
o¡
->
’c
;

3307 cÚ¡ *
decod”_Çme
 = "?";

3308 cÚ¡ *
š_codec_Çme
 = "?";

3309 cÚ¡ *
’cod”_Çme
 = "?";

3310 cÚ¡ *
out_codec_Çme
 = "?";

3311 cÚ¡ 
AVCodecDesütÜ
 *
desc
;

3313 ià(
š_codec
) {

3314 
decod”_Çme
 = 
š_codec
->
Çme
;

3315 
desc
 = 
	`avcodec_desütÜ_g‘
(
š_codec
->
id
);

3316 ià(
desc
)

3317 
š_codec_Çme
 = 
desc
->
Çme
;

3318 ià(!
	`¡rcmp
(
decod”_Çme
, 
š_codec_Çme
))

3319 
decod”_Çme
 = "native";

3322 ià(
out_codec
) {

3323 
’cod”_Çme
 = 
out_codec
->
Çme
;

3324 
desc
 = 
	`avcodec_desütÜ_g‘
(
out_codec
->
id
);

3325 ià(
desc
)

3326 
out_codec_Çme
 = 
desc
->
Çme
;

3327 ià(!
	`¡rcmp
(
’cod”_Çme
, 
out_codec_Çme
))

3328 
’cod”_Çme
 = "native";

3331 
	`av_log
(
NULL
, 
AV_LOG_INFO
, " (%s (%s) -> %s (%s))",

3332 
š_codec_Çme
, 
decod”_Çme
,

3333 
out_codec_Çme
, 
’cod”_Çme
);

3335 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "\n");

3338 ià(
»t
) {

3339 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "%s\n", 
”rÜ
);

3340  
»t
;

3343 ià(
sdp_f’ame
 || 
wªt_sdp
) {

3344 
	`´št_sdp
();

3347 
Œªscode_š™_dÚe
 = 1;

3350 
	}
}

3353 
	$Ãed_ouut
()

3355 
i
;

3357 
i
 = 0; i < 
nb_ouut_¡»ams
; i++) {

3358 
OuutSŒ—m
 *
o¡
 = 
ouut_¡»ams
[
i
];

3359 
OuutFe
 *
of
 = 
ouut_fes
[
o¡
->
fe_šdex
];

3360 
AVFÜm©CÚ‹xt
 *
os
 = 
ouut_fes
[
o¡
->
fe_šdex
]->
ùx
;

3362 ià(
o¡
->
fšished
 ||

3363 (
os
->
pb
 && 
	`avio_‹Î
(os->pbè>ğ
of
->
lim™_fesize
))

3365 ià(
o¡
->
äame_numb”
 >ğo¡->
max_äames
) {

3366 
j
;

3367 
j
 = 0; j < 
of
->
ùx
->
nb_¡»ams
; j++)

3368 
	`şo£_ouut_¡»am
(
ouut_¡»ams
[
of
->
o¡_šdex
 + 
j
]);

3376 
	}
}

3383 
OuutSŒ—m
 *
	$choo£_ouut
()

3385 
i
;

3386 
št64_t
 
İts_mš
 = 
INT64_MAX
;

3387 
OuutSŒ—m
 *
o¡_mš
 = 
NULL
;

3389 
i
 = 0; i < 
nb_ouut_¡»ams
; i++) {

3390 
OuutSŒ—m
 *
o¡
 = 
ouut_¡»ams
[
i
];

3391 
št64_t
 
İts
 = 
o¡
->
¡
->
cur_dts
 =ğ
AV_NOPTS_VALUE
 ? 
INT64_MIN
 :

3392 
	`av_»sÿË_q
(
o¡
->
¡
->
cur_dts
, o¡->¡->
time_ba£
,

3393 
AV_TIME_BASE_Q
);

3394 ià(
o¡
->
¡
->
cur_dts
 =ğ
AV_NOPTS_VALUE
)

3395 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, "cur_dts is invalid (this is harmless if it occurs once‡the start…er stream)\n");

3397 ià(!
o¡
->
fšished
 && 
İts
 < 
İts_mš
) {

3398 
İts_mš
 = 
İts
;

3399 
o¡_mš
 = 
o¡
->
uÇvaabË
 ? 
NULL
 : ost;

3402  
o¡_mš
;

3403 
	}
}

3405 
	$£t_‰y_echo
(
Ú
)

3407 #ià
HAVE_TERMIOS_H


3408 
‹rmios
 
‰y
;

3409 ià(
	`tcg‘©Œ
(0, &
‰y
) == 0) {

3410 ià(
Ú
è
‰y
.
c_læag
 |ğ
ECHO
;

3411 
‰y
.
c_læag
 &ğ~
ECHO
;

3412 
	`tc£‰r
(0, 
TCSANOW
, &
‰y
);

3415 
	}
}

3417 
	$check_keybßrd_š‹¿ùiÚ
(
št64_t
 
cur_time
)

3419 
i
, 
»t
, 
key
;

3420 
št64_t
 
Ï¡_time
;

3421 ià(
»ûived_nb_sigÇls
)

3422  
AVERROR_EXIT
;

3424 if(
cur_time
 - 
Ï¡_time
 >ğ100000 && !
run_as_d«mÚ
){

3425 
key
 = 
	`»ad_key
();

3426 
Ï¡_time
 = 
cur_time
;

3428 
key
 = -1;

3429 ià(
key
 == 'q')

3430  
AVERROR_EXIT
;

3431 ià(
key
 =ğ'+'è
	`av_log_£t_Ëv–
(
	`av_log_g‘_Ëv–
()+10);

3432 ià(
key
 =ğ'-'è
	`av_log_£t_Ëv–
(
	`av_log_g‘_Ëv–
()-10);

3433 ià(
key
 =ğ's'è
qp_hi¡
 ^= 1;

3434 ià(
key
 == 'h'){

3435 ià(
do_hex_dump
){

3436 
do_hex_dump
 = 
do_pkt_dump
 = 0;

3437 } if(
do_pkt_dump
){

3438 
do_hex_dump
 = 1;

3440 
do_pkt_dump
 = 1;

3441 
	`av_log_£t_Ëv–
(
AV_LOG_DEBUG
);

3443 ià(
key
 == 'c' || key == 'C'){

3444 
buf
[4096], 
rg‘
[64], 
commªd
[256], 
¬g
[256] = {0};

3445 
time
;

3446 
k
, 
n
 = 0;

3447 
	`årštf
(
¡d”r
, "\nEnter command: <target>|all <time>|-1 <command>[ <argument>]\n");

3448 
i
 = 0;

3449 
	`£t_‰y_echo
(1);

3450 (
k
 = 
	`»ad_key
()è!ğ'\n' && k !ğ'\r' && 
i
 < (
buf
)-1)

3451 ià(
k
 > 0)

3452 
buf
[
i
++] = 
k
;

3453 
buf
[
i
] = 0;

3454 
	`£t_‰y_echo
(0);

3455 
	`årštf
(
¡d”r
, "\n");

3456 ià(
k
 > 0 &&

3457 (
n
 = 
	`ssÿnf
(
buf
, "%63[^ ] %là%255[^ ] %255[^\n]", 
rg‘
, &
time
, 
commªd
, 
¬g
)) >= 3) {

3458 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, "Processing commandarget:%sime:%f command:%s‡rg:%s",

3459 
rg‘
, 
time
, 
commªd
, 
¬g
);

3460 
i
 = 0; i < 
nb_f‹rg¿phs
; i++) {

3461 
F‹rG¿ph
 *
fg
 = 
f‹rg¿phs
[
i
];

3462 ià(
fg
->
g¿ph
) {

3463 ià(
time
 < 0) {

3464 
»t
 = 
	`avf‹r_g¿ph_£nd_commªd
(
fg
->
g¿ph
, 
rg‘
, 
commªd
, 
¬g
, 
buf
, (buf),

3465 
key
 =ğ'c' ? 
AVFILTER_CMD_FLAG_ONE
 : 0);

3466 
	`årštf
(
¡d”r
, "Commªd„•ly fÜ sŒ—m %d:„‘:%d„es:\n%s", 
i
, 
»t
, 
buf
);

3467 } ià(
key
 == 'c') {

3468 
	`årštf
(
¡d”r
, "Queing commands only on filters supportinghe specific command is unsupported\n");

3469 
»t
 = 
AVERROR_PATCHWELCOME
;

3471 
»t
 = 
	`avf‹r_g¿ph_queue_commªd
(
fg
->
g¿ph
, 
rg‘
, 
commªd
, 
¬g
, 0, 
time
);

3472 ià(
»t
 < 0)

3473 
	`årštf
(
¡d”r
, "Quešg commªd faed w™hƒ¼Ü %s\n", 
	`av_”r2¡r
(
»t
));

3478 
	`av_log
(
NULL
, 
AV_LOG_ERROR
,

3480 "Úly %d giv’ iÀ¡ršg '%s'\n", 
n
, 
buf
);

3483 ià(
key
 == 'd' || key == 'D'){

3484 
debug
=0;

3485 if(
key
 == 'D') {

3486 
debug
 = 
šput_¡»ams
[0]->
¡
->
codec
->debug<<1;

3487 if(!
debug
) debug = 1;

3488 
debug
 & (
FF_DEBUG_DCT_COEFF
|
FF_DEBUG_VIS_QP
|
FF_DEBUG_VIS_MB_TYPE
))

3489 
debug
 += debug;

3491 
buf
[32];

3492 
k
 = 0;

3493 
i
 = 0;

3494 
	`£t_‰y_echo
(1);

3495 (
k
 = 
	`»ad_key
()è!ğ'\n' && k !ğ'\r' && 
i
 < (
buf
)-1)

3496 ià(
k
 > 0)

3497 
buf
[
i
++] = 
k
;

3498 
buf
[
i
] = 0;

3499 
	`£t_‰y_echo
(0);

3500 
	`årštf
(
¡d”r
, "\n");

3501 ià(
k
 <ğ0 || 
	`ssÿnf
(
buf
, "%d", &
debug
)!=1)

3502 
	`årštf
(
¡d”r
,"error…arsing debug value\n");

3504 
i
=0;i<
nb_šput_¡»ams
;i++) {

3505 
šput_¡»ams
[
i
]->
¡
->
codec
->
debug
 = debug;

3507 
i
=0;i<
nb_ouut_¡»ams
;i++) {

3508 
OuutSŒ—m
 *
o¡
 = 
ouut_¡»ams
[
i
];

3509 
o¡
->
’c_ùx
->
debug
 = debug;

3511 if(
debug
è
	`av_log_£t_Ëv–
(
AV_LOG_DEBUG
);

3512 
	`årštf
(
¡d”r
,"debug=%d\n", 
debug
);

3514 ià(
key
 == '?'){

3515 
	`årštf
(
¡d”r
, "key function\n"

3528 
	}
}

3530 #ià
HAVE_PTHREADS


3531 *
	$šput_th»ad
(*
¬g
)

3533 
IÅutFe
 *
f
 = 
¬g
;

3534 
æags
 = 
f
->
nÚ_blockšg
 ? 
AV_THREAD_MESSAGE_NONBLOCK
 : 0;

3535 
»t
 = 0;

3538 
AVPack‘
 
pkt
;

3539 
»t
 = 
	`av_»ad_äame
(
f
->
ùx
, &
pkt
);

3541 ià(
»t
 =ğ
	`AVERROR
(
EAGAIN
)) {

3542 
	`av_u¦“p
(10000);

3545 ià(
»t
 < 0) {

3546 
	`av_th»ad_mes§ge_queue_£t_”r_»cv
(
f
->
š_th»ad_queue
, 
»t
);

3549 
»t
 = 
	`av_th»ad_mes§ge_queue_£nd
(
f
->
š_th»ad_queue
, &
pkt
, 
æags
);

3550 ià(
æags
 && 
»t
 =ğ
	`AVERROR
(
EAGAIN
)) {

3551 
æags
 = 0;

3552 
»t
 = 
	`av_th»ad_mes§ge_queue_£nd
(
f
->
š_th»ad_queue
, &
pkt
, 
æags
);

3553 
	`av_log
(
f
->
ùx
, 
AV_LOG_WARNING
,

3556 
f
->
th»ad_queue_size
);

3558 ià(
»t
 < 0) {

3559 ià(
»t
 !ğ
AVERROR_EOF
)

3560 
	`av_log
(
f
->
ùx
, 
AV_LOG_ERROR
,

3562 
	`av_”r2¡r
(
»t
));

3563 
	`av_·ck‘_uÄef
(&
pkt
);

3564 
	`av_th»ad_mes§ge_queue_£t_”r_»cv
(
f
->
š_th»ad_queue
, 
»t
);

3569  
NULL
;

3570 
	}
}

3572 
	$ä“_šput_th»ads
()

3574 
i
;

3576 
i
 = 0; i < 
nb_šput_fes
; i++) {

3577 
IÅutFe
 *
f
 = 
šput_fes
[
i
];

3578 
AVPack‘
 
pkt
;

3580 ià(!
f
 || !f->
š_th»ad_queue
)

3582 
	`av_th»ad_mes§ge_queue_£t_”r_£nd
(
f
->
š_th»ad_queue
, 
AVERROR_EOF
);

3583 
	`av_th»ad_mes§ge_queue_»cv
(
f
->
š_th»ad_queue
, &
pkt
, 0) >= 0)

3584 
	`av_·ck‘_uÄef
(&
pkt
);

3586 
	`±h»ad_još
(
f
->
th»ad
, 
NULL
);

3587 
f
->
jošed
 = 1;

3588 
	`av_th»ad_mes§ge_queue_ä“
(&
f
->
š_th»ad_queue
);

3590 
	}
}

3592 
	$š™_šput_th»ads
()

3594 
i
, 
»t
;

3596 ià(
nb_šput_fes
 == 1)

3599 
i
 = 0; i < 
nb_šput_fes
; i++) {

3600 
IÅutFe
 *
f
 = 
šput_fes
[
i
];

3602 ià(
f
->
ùx
->
pb
 ? !f->ùx->pb->
£ekabË
 :

3603 
	`¡rcmp
(
f
->
ùx
->
ifÜm©
->
Çme
, "lavfi"))

3604 
f
->
nÚ_blockšg
 = 1;

3605 
»t
 = 
	`av_th»ad_mes§ge_queue_®loc
(&
f
->
š_th»ad_queue
,

3606 
f
->
th»ad_queue_size
, (
AVPack‘
));

3607 ià(
»t
 < 0)

3608  
»t
;

3610 ià((
»t
 = 
	`±h»ad_ü—‹
(&
f
->
th»ad
, 
NULL
, 
šput_th»ad
, f))) {

3611 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "±h»ad_ü—‹ faed: %s. TryØšü—£ `ulim™ -v` o¸deü—£ `ulim™ -s`.\n", 
	`¡»¼Ü
(
»t
));

3612 
	`av_th»ad_mes§ge_queue_ä“
(&
f
->
š_th»ad_queue
);

3613  
	`AVERROR
(
»t
);

3617 
	}
}

3619 
	$g‘_šput_·ck‘_mt
(
IÅutFe
 *
f
, 
AVPack‘
 *
pkt
)

3621  
	`av_th»ad_mes§ge_queue_»cv
(
f
->
š_th»ad_queue
, 
pkt
,

3622 
f
->
nÚ_blockšg
 ?

3623 
AV_THREAD_MESSAGE_NONBLOCK
 : 0);

3624 
	}
}

3627 
	$g‘_šput_·ck‘
(
IÅutFe
 *
f
, 
AVPack‘
 *
pkt
)

3629 ià(
f
->
¿‹_emu
) {

3630 
i
;

3631 
i
 = 0; i < 
f
->
nb_¡»ams
; i++) {

3632 
IÅutSŒ—m
 *
i¡
 = 
šput_¡»ams
[
f
->
i¡_šdex
 + 
i
];

3633 
št64_t
 
±s
 = 
	`av_»sÿË
(
i¡
->
dts
, 1000000, 
AV_TIME_BASE
);

3634 
št64_t
 
now
 = 
	`av_g‘time_»Ïtive
(è- 
i¡
->
¡¬t
;

3635 ià(
±s
 > 
now
)

3636  
	`AVERROR
(
EAGAIN
);

3640 #ià
HAVE_PTHREADS


3641 ià(
nb_šput_fes
 > 1)

3642  
	`g‘_šput_·ck‘_mt
(
f
, 
pkt
);

3644  
	`av_»ad_äame
(
f
->
ùx
, 
pkt
);

3645 
	}
}

3647 
	$gÙ_—gaš
()

3649 
i
;

3650 
i
 = 0; i < 
nb_ouut_¡»ams
; i++)

3651 ià(
ouut_¡»ams
[
i
]->
uÇvaabË
)

3654 
	}
}

3656 
	$»£t_—gaš
()

3658 
i
;

3659 
i
 = 0; i < 
nb_šput_fes
; i++)

3660 
šput_fes
[
i
]->
—gaš
 = 0;

3661 
i
 = 0; i < 
nb_ouut_¡»ams
; i++)

3662 
ouut_¡»ams
[
i
]->
uÇvaabË
 = 0;

3663 
	}
}

3666 
AVR©iÚ®
 
	$du¿tiÚ_max
(
št64_t
 
tmp
, iÁ64_ˆ*
du¿tiÚ
, 
AVR©iÚ®
 
tmp_time_ba£
,

3667 
AVR©iÚ®
 
time_ba£
)

3669 
»t
;

3671 ià(!*
du¿tiÚ
) {

3672 *
du¿tiÚ
 = 
tmp
;

3673  
tmp_time_ba£
;

3676 
»t
 = 
	`av_com·»_ts
(*
du¿tiÚ
, 
time_ba£
, 
tmp
, 
tmp_time_ba£
);

3677 ià(
»t
 < 0) {

3678 *
du¿tiÚ
 = 
tmp
;

3679  
tmp_time_ba£
;

3682  
time_ba£
;

3683 
	}
}

3685 
	$£ek_to_¡¬t
(
IÅutFe
 *
ife
, 
AVFÜm©CÚ‹xt
 *
is
)

3687 
IÅutSŒ—m
 *
i¡
;

3688 
AVCodecCÚ‹xt
 *
avùx
;

3689 
i
, 
»t
, 
has_audio
 = 0;

3690 
št64_t
 
du¿tiÚ
 = 0;

3692 
»t
 = 
	`av_£ek_äame
(
is
, -1, is->
¡¬t_time
, 0);

3693 ià(
»t
 < 0)

3694  
»t
;

3696 
i
 = 0; i < 
ife
->
nb_¡»ams
; i++) {

3697 
i¡
 = 
šput_¡»ams
[
ife
->
i¡_šdex
 + 
i
];

3698 
avùx
 = 
i¡
->
dec_ùx
;

3701 ià(
i¡
->
decodšg_Ãeded
) {

3702 
	`´oûss_šput_·ck‘
(
i¡
, 
NULL
, 1);

3703 
	`avcodec_æush_bufãrs
(
avùx
);

3709 ià(
avùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_AUDIO
 && 
i¡
->
nb_§m¶es
)

3710 
has_audio
 = 1;

3713 
i
 = 0; i < 
ife
->
nb_¡»ams
; i++) {

3714 
i¡
 = 
šput_¡»ams
[
ife
->
i¡_šdex
 + 
i
];

3715 
avùx
 = 
i¡
->
dec_ùx
;

3717 ià(
has_audio
) {

3718 ià(
avùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_AUDIO
 && 
i¡
->
nb_§m¶es
) {

3719 
AVR©iÚ®
 
§m¶e_¿‹
 = {1, 
avùx
->sample_rate};

3721 
du¿tiÚ
 = 
	`av_»sÿË_q
(
i¡
->
nb_§m¶es
, 
§m¶e_¿‹
, i¡->
¡
->
time_ba£
);

3725 ià(
i¡
->
äam”©e
.
num
) {

3726 
du¿tiÚ
 = 
	`av_»sÿË_q
(1, 
i¡
->
äam”©e
, i¡->
¡
->
time_ba£
);

3727 } ià(
i¡
->
¡
->
avg_äame_¿‹
.
num
) {

3728 
du¿tiÚ
 = 
	`av_»sÿË_q
(1, 
i¡
->
¡
->
avg_äame_¿‹
, i¡->¡->
time_ba£
);

3729 } 
du¿tiÚ
 = 1;

3731 ià(!
ife
->
du¿tiÚ
)

3732 
ife
->
time_ba£
 = 
i¡
->
¡
->time_base;

3735 
du¿tiÚ
 +ğ
i¡
->
max_±s
 - i¡->
mš_±s
;

3736 
ife
->
time_ba£
 = 
	`du¿tiÚ_max
(
du¿tiÚ
, &ife->du¿tiÚ, 
i¡
->
¡
->time_base,

3737 
ife
->
time_ba£
);

3740 ià(
ife
->
loİ
 > 0)

3741 
ife
->
loİ
--;

3743  
»t
;

3744 
	}
}

3753 
	$´oûss_šput
(
fe_šdex
)

3755 
IÅutFe
 *
ife
 = 
šput_fes
[
fe_šdex
];

3756 
AVFÜm©CÚ‹xt
 *
is
;

3757 
IÅutSŒ—m
 *
i¡
;

3758 
AVPack‘
 
pkt
;

3759 
»t
, 
i
, 
j
;

3760 
št64_t
 
du¿tiÚ
;

3761 
št64_t
 
pkt_dts
;

3763 
is
 = 
ife
->
ùx
;

3764 
»t
 = 
	`g‘_šput_·ck‘
(
ife
, &
pkt
);

3766 ià(
»t
 =ğ
	`AVERROR
(
EAGAIN
)) {

3767 
ife
->
—gaš
 = 1;

3768  
»t
;

3770 ià(
»t
 < 0 && 
ife
->
loİ
) {

3771 ià((
»t
 = 
	`£ek_to_¡¬t
(
ife
, 
is
)) < 0)

3772  
»t
;

3773 
»t
 = 
	`g‘_šput_·ck‘
(
ife
, &
pkt
);

3775 ià(
»t
 < 0) {

3776 ià(
»t
 !ğ
AVERROR_EOF
) {

3777 
	`´št_”rÜ
(
is
->
f’ame
, 
»t
);

3778 ià(
ex™_Ú_”rÜ
)

3779 
	`ex™_´og¿m
(1);

3782 
i
 = 0; i < 
ife
->
nb_¡»ams
; i++) {

3783 
i¡
 = 
šput_¡»ams
[
ife
->
i¡_šdex
 + 
i
];

3784 ià(
i¡
->
decodšg_Ãeded
) {

3785 
»t
 = 
	`´oûss_šput_·ck‘
(
i¡
, 
NULL
, 0);

3786 ià(
»t
>0)

3791 
j
 = 0; j < 
nb_ouut_¡»ams
; j++) {

3792 
OuutSŒ—m
 *
o¡
 = 
ouut_¡»ams
[
j
];

3794 ià(
o¡
->
sourû_šdex
 =ğ
ife
->
i¡_šdex
 + 
i
 &&

3795 (
o¡
->
¡»am_cİy
 || o¡->
’c
->
ty³
 =ğ
AVMEDIA_TYPE_SUBTITLE
))

3796 
	`fšish_ouut_¡»am
(
o¡
);

3800 
ife
->
eof_»ached
 = 1;

3801  
	`AVERROR
(
EAGAIN
);

3804 
	`»£t_—gaš
();

3806 ià(
do_pkt_dump
) {

3807 
	`av_pkt_dump_log2
(
NULL
, 
AV_LOG_INFO
, &
pkt
, 
do_hex_dump
,

3808 
is
->
¡»ams
[
pkt
.
¡»am_šdex
]);

3812 ià(
pkt
.
¡»am_šdex
 >ğ
ife
->
nb_¡»ams
) {

3813 
	`»pÜt_Ãw_¡»am
(
fe_šdex
, &
pkt
);

3814 
disÿrd_·ck‘
;

3817 
i¡
 = 
šput_¡»ams
[
ife
->
i¡_šdex
 + 
pkt
.
¡»am_šdex
];

3819 
i¡
->
d©a_size
 +ğ
pkt
.
size
;

3820 
i¡
->
nb_·ck‘s
++;

3822 ià(
i¡
->
disÿrd
)

3823 
disÿrd_·ck‘
;

3825 ià(
ex™_Ú_”rÜ
 && (
pkt
.
æags
 & 
AV_PKT_FLAG_CORRUPT
)) {

3826 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "%s: cÜru± iÅuˆ·ck‘ iÀ¡»am %d\n", 
is
->
f’ame
, 
pkt
.
¡»am_šdex
);

3827 
	`ex™_´og¿m
(1);

3830 ià(
debug_ts
) {

3831 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "demuxer -> ist_index:%dype:%s "

3833 
ife
->
i¡_šdex
 + 
pkt
.
¡»am_šdex
, 
	`av_g‘_medŸ_ty³_¡ršg
(
i¡
->
dec_ùx
->
codec_ty³
),

3834 
	`av_ts2¡r
(
i¡
->
Ãxt_dts
), 
	`av_ts2time¡r
(i¡->Ãxt_dts, &
AV_TIME_BASE_Q
),

3835 
	`av_ts2¡r
(
i¡
->
Ãxt_±s
), 
	`av_ts2time¡r
(i¡->Ãxt_±s, &
AV_TIME_BASE_Q
),

3836 
	`av_ts2¡r
(
pkt
.
±s
), 
	`av_ts2time¡r
Õkt.±s, &
i¡
->
¡
->
time_ba£
),

3837 
	`av_ts2¡r
(
pkt
.
dts
), 
	`av_ts2time¡r
Õkt.dts, &
i¡
->
¡
->
time_ba£
),

3838 
	`av_ts2¡r
(
šput_fes
[
i¡
->
fe_šdex
]->
ts_off£t
),

3839 
	`av_ts2time¡r
(
šput_fes
[
i¡
->
fe_šdex
]->
ts_off£t
, &
AV_TIME_BASE_Q
));

3842 if(!
i¡
->
w¿p_cÜ»ùiÚ_dÚe
 && 
is
->
¡¬t_time
 !ğ
AV_NOPTS_VALUE
 && i¡->
¡
->
±s_w¿p_b™s
 < 64){

3843 
št64_t
 
¡ime
, 
¡ime2
;

3847 iàĞ
i¡
->
Ãxt_dts
 =ğ
AV_NOPTS_VALUE


3848 && 
ife
->
ts_off£t
 =ğ-
is
->
¡¬t_time


3849 && (
is
->
ifÜm©
->
æags
 & 
AVFMT_TS_DISCONT
)) {

3850 
št64_t
 
Ãw_¡¬t_time
 = 
INT64_MAX
;

3851 
i
=0; i<
is
->
nb_¡»ams
; i++) {

3852 
AVSŒ—m
 *
¡
 = 
is
->
¡»ams
[
i
];

3853 if(
¡
->
disÿrd
 =ğ
AVDISCARD_ALL
 || st->
¡¬t_time
 =ğ
AV_NOPTS_VALUE
)

3855 
Ãw_¡¬t_time
 = 
	`FFMIN
Òew_¡¬t_time, 
	`av_»sÿË_q
(
¡
->
¡¬t_time
, st->
time_ba£
, 
AV_TIME_BASE_Q
));

3857 ià(
Ãw_¡¬t_time
 > 
is
->
¡¬t_time
) {

3858 
	`av_log
(
is
, 
AV_LOG_VERBOSE
, "CÜ»ùšg s¹imby %"
PRId64
"\n", 
Ãw_¡¬t_time
 - is->
¡¬t_time
);

3859 
ife
->
ts_off£t
 = -
Ãw_¡¬t_time
;

3863 
¡ime
 = 
	`av_»sÿË_q
(
is
->
¡¬t_time
, 
AV_TIME_BASE_Q
, 
i¡
->
¡
->
time_ba£
);

3864 
¡ime2
ğ
¡ime
 + (1ULL<<
i¡
->
¡
->
±s_w¿p_b™s
);

3865 
i¡
->
w¿p_cÜ»ùiÚ_dÚe
 = 1;

3867 if(
¡ime2
 > 
¡ime
 && 
pkt
.
dts
 !ğ
AV_NOPTS_VALUE
 &&…kt.dt > stim+ (1LL<<(
i¡
->
¡
->
±s_w¿p_b™s
-1))) {

3868 
pkt
.
dts
 -ğ1ULL<<
i¡
->
¡
->
±s_w¿p_b™s
;

3869 
i¡
->
w¿p_cÜ»ùiÚ_dÚe
 = 0;

3871 if(
¡ime2
 > 
¡ime
 && 
pkt
.
±s
 !ğ
AV_NOPTS_VALUE
 &&…kt.± > stim+ (1LL<<(
i¡
->
¡
->
±s_w¿p_b™s
-1))) {

3872 
pkt
.
±s
 -ğ1ULL<<
i¡
->
¡
->
±s_w¿p_b™s
;

3873 
i¡
->
w¿p_cÜ»ùiÚ_dÚe
 = 0;

3878 ià(
i¡
->
nb_·ck‘s
 == 1) {

3879 ià(
i¡
->
¡
->
nb_side_d©a
)

3880 
	`av_·ck‘_¥l™_side_d©a
(&
pkt
);

3881 
i
 = 0; i < 
i¡
->
¡
->
nb_side_d©a
; i++) {

3882 
AVPack‘SideD©a
 *
¤c_sd
 = &
i¡
->
¡
->
side_d©a
[
i
];

3883 
ušt8_t
 *
d¡_d©a
;

3885 ià(
	`av_·ck‘_g‘_side_d©a
(&
pkt
, 
¤c_sd
->
ty³
, 
NULL
))

3887 ià(
i¡
->
autÜÙ©e
 && 
¤c_sd
->
ty³
 =ğ
AV_PKT_DATA_DISPLAYMATRIX
)

3890 
d¡_d©a
 = 
	`av_·ck‘_Ãw_side_d©a
(&
pkt
, 
¤c_sd
->
ty³
, src_sd->
size
);

3891 ià(!
d¡_d©a
)

3892 
	`ex™_´og¿m
(1);

3894 
	`memıy
(
d¡_d©a
, 
¤c_sd
->
d©a
, src_sd->
size
);

3898 ià(
pkt
.
dts
 !ğ
AV_NOPTS_VALUE
)

3899 
pkt
.
dts
 +ğ
	`av_»sÿË_q
(
ife
->
ts_off£t
, 
AV_TIME_BASE_Q
, 
i¡
->
¡
->
time_ba£
);

3900 ià(
pkt
.
±s
 !ğ
AV_NOPTS_VALUE
)

3901 
pkt
.
±s
 +ğ
	`av_»sÿË_q
(
ife
->
ts_off£t
, 
AV_TIME_BASE_Q
, 
i¡
->
¡
->
time_ba£
);

3903 ià(
pkt
.
±s
 !ğ
AV_NOPTS_VALUE
)

3904 
pkt
.
±s
 *ğ
i¡
->
ts_sÿË
;

3905 ià(
pkt
.
dts
 !ğ
AV_NOPTS_VALUE
)

3906 
pkt
.
dts
 *ğ
i¡
->
ts_sÿË
;

3908 
pkt_dts
 = 
	`av_»sÿË_q_ºd
(
pkt
.
dts
, 
i¡
->
¡
->
time_ba£
, 
AV_TIME_BASE_Q
, 
AV_ROUND_NEAR_INF
|
AV_ROUND_PASS_MINMAX
);

3909 ià((
i¡
->
dec_ùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
 ||

3910 
i¡
->
dec_ùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_AUDIO
) &&

3911 
pkt_dts
 !ğ
AV_NOPTS_VALUE
 && 
i¡
->
Ãxt_dts
 =ğAV_NOPTS_VALUE && !
cİy_ts


3912 && (
is
->
ifÜm©
->
æags
 & 
AVFMT_TS_DISCONT
è&& 
ife
->
Ï¡_ts
 !ğ
AV_NOPTS_VALUE
) {

3913 
št64_t
 
d–
 = 
pkt_dts
 - 
ife
->
Ï¡_ts
;

3914 ià(
d–
 < -1LL*
dts_d–_th»shŞd
*
AV_TIME_BASE
 ||

3915 
d–
 > 1LL*
dts_d–_th»shŞd
*
AV_TIME_BASE
){

3916 
ife
->
ts_off£t
 -ğ
d–
;

3917 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
,

3918 "IÁ” sŒ—mime¡am°discÚtšu™y %"
PRId64
",‚ew offset= %"PRId64"\n",

3919 
d–
, 
ife
->
ts_off£t
);

3920 
pkt
.
dts
 -ğ
	`av_»sÿË_q
(
d–
, 
AV_TIME_BASE_Q
, 
i¡
->
¡
->
time_ba£
);

3921 ià(
pkt
.
±s
 !ğ
AV_NOPTS_VALUE
)

3922 
pkt
.
±s
 -ğ
	`av_»sÿË_q
(
d–
, 
AV_TIME_BASE_Q
, 
i¡
->
¡
->
time_ba£
);

3926 
du¿tiÚ
 = 
	`av_»sÿË_q
(
ife
->du¿tiÚ, ife->
time_ba£
, 
i¡
->
¡
->time_base);

3927 ià(
pkt
.
±s
 !ğ
AV_NOPTS_VALUE
) {

3928 
pkt
.
±s
 +ğ
du¿tiÚ
;

3929 
i¡
->
max_±s
 = 
	`FFMAX
(
pkt
.
±s
, ist->max_pts);

3930 
i¡
->
mš_±s
 = 
	`FFMIN
(
pkt
.
±s
, ist->min_pts);

3933 ià(
pkt
.
dts
 !ğ
AV_NOPTS_VALUE
)

3934 
pkt
.
dts
 +ğ
du¿tiÚ
;

3936 
pkt_dts
 = 
	`av_»sÿË_q_ºd
(
pkt
.
dts
, 
i¡
->
¡
->
time_ba£
, 
AV_TIME_BASE_Q
, 
AV_ROUND_NEAR_INF
|
AV_ROUND_PASS_MINMAX
);

3937 ià((
i¡
->
dec_ùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
 ||

3938 
i¡
->
dec_ùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_AUDIO
) &&

3939 
pkt_dts
 !ğ
AV_NOPTS_VALUE
 && 
i¡
->
Ãxt_dts
 != AV_NOPTS_VALUE &&

3940 !
cİy_ts
) {

3941 
št64_t
 
d–
 = 
pkt_dts
 - 
i¡
->
Ãxt_dts
;

3942 ià(
is
->
ifÜm©
->
æags
 & 
AVFMT_TS_DISCONT
) {

3943 ià(
d–
 < -1LL*
dts_d–_th»shŞd
*
AV_TIME_BASE
 ||

3944 
d–
 > 1LL*
dts_d–_th»shŞd
*
AV_TIME_BASE
 ||

3945 
pkt_dts
 + 
AV_TIME_BASE
/10 < 
	`FFMAX
(
i¡
->
±s
, i¡->
dts
)) {

3946 
ife
->
ts_off£t
 -ğ
d–
;

3947 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
,

3948 "time¡am°discÚtšu™y %"
PRId64
",‚ew offset= %"PRId64"\n",

3949 
d–
, 
ife
->
ts_off£t
);

3950 
pkt
.
dts
 -ğ
	`av_»sÿË_q
(
d–
, 
AV_TIME_BASE_Q
, 
i¡
->
¡
->
time_ba£
);

3951 ià(
pkt
.
±s
 !ğ
AV_NOPTS_VALUE
)

3952 
pkt
.
±s
 -ğ
	`av_»sÿË_q
(
d–
, 
AV_TIME_BASE_Q
, 
i¡
->
¡
->
time_ba£
);

3955 iàĞ
d–
 < -1LL*
dts_”rÜ_th»shŞd
*
AV_TIME_BASE
 ||

3956 
d–
 > 1LL*
dts_”rÜ_th»shŞd
*
AV_TIME_BASE
) {

3957 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "DTS %"
PRId64
",‚ext:%"PRId64" st:%d inv®id drİpšg\n", 
pkt
.
dts
, 
i¡
->
Ãxt_dts
,…kt.
¡»am_šdex
);

3958 
pkt
.
dts
 = 
AV_NOPTS_VALUE
;

3960 ià(
pkt
.
±s
 !ğ
AV_NOPTS_VALUE
){

3961 
št64_t
 
pkt_±s
 = 
	`av_»sÿË_q
(
pkt
.
±s
, 
i¡
->
¡
->
time_ba£
, 
AV_TIME_BASE_Q
);

3962 
d–
 = 
pkt_±s
 - 
i¡
->
Ãxt_dts
;

3963 iàĞ
d–
 < -1LL*
dts_”rÜ_th»shŞd
*
AV_TIME_BASE
 ||

3964 
d–
 > 1LL*
dts_”rÜ_th»shŞd
*
AV_TIME_BASE
) {

3965 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "PTS %"
PRId64
",‚ext:%"PRId64" inv®id drİpšg st:%d\n", 
pkt
.
±s
, 
i¡
->
Ãxt_dts
,…kt.
¡»am_šdex
);

3966 
pkt
.
±s
 = 
AV_NOPTS_VALUE
;

3972 ià(
pkt
.
dts
 !ğ
AV_NOPTS_VALUE
)

3973 
ife
->
Ï¡_ts
 = 
	`av_»sÿË_q
(
pkt
.
dts
, 
i¡
->
¡
->
time_ba£
, 
AV_TIME_BASE_Q
);

3975 ià(
debug_ts
) {

3976 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "demuxer+ffmpeg -> ist_index:%dype:%s…kt_pts:%s…kt_pts_time:%s…kt_dts:%s…kt_dts_time:%s off:%s off_time:%s\n",

3977 
ife
->
i¡_šdex
 + 
pkt
.
¡»am_šdex
, 
	`av_g‘_medŸ_ty³_¡ršg
(
i¡
->
dec_ùx
->
codec_ty³
),

3978 
	`av_ts2¡r
(
pkt
.
±s
), 
	`av_ts2time¡r
Õkt.±s, &
i¡
->
¡
->
time_ba£
),

3979 
	`av_ts2¡r
(
pkt
.
dts
), 
	`av_ts2time¡r
Õkt.dts, &
i¡
->
¡
->
time_ba£
),

3980 
	`av_ts2¡r
(
šput_fes
[
i¡
->
fe_šdex
]->
ts_off£t
),

3981 
	`av_ts2time¡r
(
šput_fes
[
i¡
->
fe_šdex
]->
ts_off£t
, &
AV_TIME_BASE_Q
));

3984 
	`sub2video_h—¹b—t
(
i¡
, 
pkt
.
±s
);

3986 
	`´oûss_šput_·ck‘
(
i¡
, &
pkt
, 0);

3988 
disÿrd_·ck‘
:

3989 
	`av_·ck‘_uÄef
(&
pkt
);

3992 
	}
}

4001 
	$Œªscode_äom_f‹r
(
F‹rG¿ph
 *
g¿ph
, 
IÅutSŒ—m
 **
be¡_i¡
)

4003 
i
, 
»t
;

4004 
nb_»que¡s
, 
nb_»que¡s_max
 = 0;

4005 
IÅutF‹r
 *
if‹r
;

4006 
IÅutSŒ—m
 *
i¡
;

4008 *
be¡_i¡
 = 
NULL
;

4009 
»t
 = 
	`avf‹r_g¿ph_»que¡_Şde¡
(
g¿ph
->graph);

4010 ià(
»t
 >= 0)

4011  
	`»­_f‹rs
(0);

4013 ià(
»t
 =ğ
AVERROR_EOF
) {

4014 
»t
 = 
	`»­_f‹rs
(1);

4015 
i
 = 0; i < 
g¿ph
->
nb_ouuts
; i++)

4016 
	`şo£_ouut_¡»am
(
g¿ph
->
ouuts
[
i
]->
o¡
);

4017  
»t
;

4019 ià(
»t
 !ğ
	`AVERROR
(
EAGAIN
))

4020  
»t
;

4022 
i
 = 0; i < 
g¿ph
->
nb_šputs
; i++) {

4023 
if‹r
 = 
g¿ph
->
šputs
[
i
];

4024 
i¡
 = 
if‹r
->ist;

4025 ià(
šput_fes
[
i¡
->
fe_šdex
]->
—gaš
 ||

4026 
šput_fes
[
i¡
->
fe_šdex
]->
eof_»ached
)

4028 
nb_»que¡s
 = 
	`av_bufãr¤c_g‘_nb_çed_»que¡s
(
if‹r
->
f‹r
);

4029 ià(
nb_»que¡s
 > 
nb_»que¡s_max
) {

4030 
nb_»que¡s_max
 = 
nb_»que¡s
;

4031 *
be¡_i¡
 = 
i¡
;

4035 ià(!*
be¡_i¡
)

4036 
i
 = 0; i < 
g¿ph
->
nb_ouuts
; i++)

4037 
g¿ph
->
ouuts
[
i
]->
o¡
->
uÇvaabË
 = 1;

4040 
	}
}

4047 
	$Œªscode_¡•
()

4049 
OuutSŒ—m
 *
o¡
;

4050 
IÅutSŒ—m
 *
i¡
;

4051 
»t
;

4053 
o¡
 = 
	`choo£_ouut
();

4054 ià(!
o¡
) {

4055 ià(
	`gÙ_—gaš
()) {

4056 
	`»£t_—gaš
();

4057 
	`av_u¦“p
(10000);

4060 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, "No more inputso„ead from, finishing.\n");

4061  
AVERROR_EOF
;

4064 ià(
o¡
->
f‹r
) {

4065 ià((
»t
 = 
	`Œªscode_äom_f‹r
(
o¡
->
f‹r
->
g¿ph
, &
i¡
)) < 0)

4066  
»t
;

4067 ià(!
i¡
)

4070 
	`av_as£¹0
(
o¡
->
sourû_šdex
 >= 0);

4071 
i¡
 = 
šput_¡»ams
[
o¡
->
sourû_šdex
];

4074 
»t
 = 
	`´oûss_šput
(
i¡
->
fe_šdex
);

4075 ià(
»t
 =ğ
	`AVERROR
(
EAGAIN
)) {

4076 ià(
šput_fes
[
i¡
->
fe_šdex
]->
—gaš
)

4077 
o¡
->
uÇvaabË
 = 1;

4081 ià(
»t
 < 0)

4082  
»t
 =ğ
AVERROR_EOF
 ? 0 :„et;

4084  
	`»­_f‹rs
(0);

4085 
	}
}

4090 
	$Œªscode
()

4092 
»t
, 
i
;

4093 
AVFÜm©CÚ‹xt
 *
os
;

4094 
OuutSŒ—m
 *
o¡
;

4095 
IÅutSŒ—m
 *
i¡
;

4096 
št64_t
 
tim”_¡¬t
;

4097 
št64_t
 
tÙ®_·ck‘s_wr™‹n
 = 0;

4099 
»t
 = 
	`Œªscode_š™
();

4100 ià(
»t
 < 0)

4101 
ç
;

4103 ià(
¡dš_š‹¿ùiÚ
) {

4104 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "Press [q]o stop, [?] for help\n");

4107 
tim”_¡¬t
 = 
	`av_g‘time_»Ïtive
();

4109 #ià
HAVE_PTHREADS


4110 ià((
»t
 = 
	`š™_šput_th»ads
()) < 0)

4111 
ç
;

4114 !
»ûived_sig‹rm
) {

4115 
št64_t
 
cur_time
ğ
	`av_g‘time_»Ïtive
();

4118 ià(
¡dš_š‹¿ùiÚ
)

4119 ià(
	`check_keybßrd_š‹¿ùiÚ
(
cur_time
) < 0)

4123 ià(!
	`Ãed_ouut
()) {

4124 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, "No more output streamso writeo, finishing.\n");

4128 
»t
 = 
	`Œªscode_¡•
();

4129 ià(
»t
 < 0 &&„‘ !ğ
AVERROR_EOF
) {

4130 
”rbuf
[128];

4131 
	`av_¡»¼Ü
(
»t
, 
”rbuf
, (errbuf));

4133 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "E¼Ü whf‹ršg: %s\n", 
”rbuf
);

4138 
	`´št_»pÜt
(0, 
tim”_¡¬t
, 
cur_time
);

4140 #ià
HAVE_PTHREADS


4141 
	`ä“_šput_th»ads
();

4145 
i
 = 0; i < 
nb_šput_¡»ams
; i++) {

4146 
i¡
 = 
šput_¡»ams
[
i
];

4147 ià(!
šput_fes
[
i¡
->
fe_šdex
]->
eof_»ached
 && i¡->
decodšg_Ãeded
) {

4148 
	`´oûss_šput_·ck‘
(
i¡
, 
NULL
, 0);

4151 
	`æush_’cod”s
();

4153 
	`‹rm_ex™
();

4156 
i
 = 0; i < 
nb_ouut_fes
; i++) {

4157 
os
 = 
ouut_fes
[
i
]->
ùx
;

4158 ià((
»t
 = 
	`av_wr™e_Œa”
(
os
)) < 0) {

4159 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "E¼Ü wr™šg¿” oà%s: %s", 
os
->
f’ame
, 
	`av_”r2¡r
(
»t
));

4160 ià(
ex™_Ú_”rÜ
)

4161 
	`ex™_´og¿m
(1);

4166 
	`´št_»pÜt
(1, 
tim”_¡¬t
, 
	`av_g‘time_»Ïtive
());

4169 
i
 = 0; i < 
nb_ouut_¡»ams
; i++) {

4170 
o¡
 = 
ouut_¡»ams
[
i
];

4171 ià(
o¡
->
’codšg_Ãeded
) {

4172 
	`av_ä“p
(&
o¡
->
’c_ùx
->
¡©s_š
);

4174 
tÙ®_·ck‘s_wr™‹n
 +ğ
o¡
->
·ck‘s_wr™‹n
;

4177 ià(!
tÙ®_·ck‘s_wr™‹n
 && (
abÜt_Ú_æags
 & 
ABORT_ON_FLAG_EMPTY_OUTPUT
)) {

4178 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Empty output\n");

4179 
	`ex™_´og¿m
(1);

4183 
i
 = 0; i < 
nb_šput_¡»ams
; i++) {

4184 
i¡
 = 
šput_¡»ams
[
i
];

4185 ià(
i¡
->
decodšg_Ãeded
) {

4186 
	`avcodec_şo£
(
i¡
->
dec_ùx
);

4187 ià(
i¡
->
hwacûl_unš™
)

4188 
i¡
->
	`hwacûl_unš™
(i¡->
dec_ùx
);

4193 
»t
 = 0;

4195 
ç
:

4196 #ià
HAVE_PTHREADS


4197 
	`ä“_šput_th»ads
();

4200 ià(
ouut_¡»ams
) {

4201 
i
 = 0; i < 
nb_ouut_¡»ams
; i++) {

4202 
o¡
 = 
ouut_¡»ams
[
i
];

4203 ià(
o¡
) {

4204 ià(
o¡
->
logfe
) {

4205 ià(
	`fşo£
(
o¡
->
logfe
))

4206 
	`av_log
(
NULL
, 
AV_LOG_ERROR
,

4208 
	`av_”r2¡r
(
	`AVERROR
(
”ºo
)));

4209 
o¡
->
logfe
 = 
NULL
;

4211 
	`av_ä“p
(&
o¡
->
fÜûd_kf_±s
);

4212 
	`av_ä“p
(&
o¡
->
­ad
);

4213 
	`av_ä“p
(&
o¡
->
di¥os™iÚ
);

4214 
	`av_diù_ä“
(&
o¡
->
’cod”_İts
);

4215 
	`av_diù_ä“
(&
o¡
->
sws_diù
);

4216 
	`av_diù_ä“
(&
o¡
->
swr_İts
);

4217 
	`av_diù_ä“
(&
o¡
->
»§m¶e_İts
);

4221  
»t
;

4222 
	}
}

4225 
št64_t
 
	$g‘utime
()

4227 #ià
HAVE_GETRUSAGE


4228 
ru§ge
„usage;

4230 
	`g‘ru§ge
(
RUSAGE_SELF
, &
ru§ge
);

4231  (
ru§ge
.
ru_utime
.
tv_£c
 * 1000000LLè+„u§ge.ru_utime.
tv_u£c
;

4232 #–ià
HAVE_GETPROCESSTIMES


4233 
HANDLE
 
´oc
;

4234 
FILETIME
 
c
, 
e
, 
k
, 
u
;

4235 
´oc
 = 
	`G‘Cu¼’tProûss
();

4236 
	`G‘ProûssTimes
(
´oc
, &
c
, &
e
, &
k
, &
u
);

4237  ((
št64_t
è
u
.
dwHighD©eTime
 << 32 | u.
dwLowD©eTime
) / 10;

4239  
	`av_g‘time_»Ïtive
();

4241 
	}
}

4243 
št64_t
 
	$g‘maxrss
()

4245 #ià
HAVE_GETRUSAGE
 && 
HAVE_STRUCT_RUSAGE_RU_MAXRSS


4246 
ru§ge
„usage;

4247 
	`g‘ru§ge
(
RUSAGE_SELF
, &
ru§ge
);

4248  (
št64_t
)
ru§ge
.
ru_maxrss
 * 1024;

4249 #–ià
HAVE_GETPROCESSMEMORYINFO


4250 
HANDLE
 
´oc
;

4251 
PROCESS_MEMORY_COUNTERS
 
memcouÁ”s
;

4252 
´oc
 = 
	`G‘Cu¼’tProûss
();

4253 
memcouÁ”s
.
cb
 = (memcounters);

4254 
	`G‘ProûssMemÜyInfo
(
´oc
, &
memcouÁ”s
, (memcounters));

4255  
memcouÁ”s
.
P—kPagefeU§ge
;

4259 
	}
}

4261 
	$log_ÿÎback_nuÎ
(*
±r
, 
Ëv–
, cÚ¡ *
fmt
, 
va_li¡
 
vl
)

4263 
	}
}

4265 
	$qt_ffm³g
(
¬gc
, **
¬gv
)

4267 
»t
;

4268 
št64_t
 
ti
;

4270 
	`»gi¡”_ex™
(
ffm³g_ş—nup
);

4272 
	`£tvbuf
(
¡d”r
,
NULL
,
_IONBF
,0);

4274 
	`av_log_£t_æags
(
AV_LOG_SKIP_REPEATED
);

4275 
	`·r£_logËv–
(
¬gc
, 
¬gv
, 
İtiÚs
);

4277 if(
¬gc
>1 && !
	`¡rcmp
(
¬gv
[1], "-d")){

4278 
run_as_d«mÚ
=1;

4279 
	`av_log_£t_ÿÎback
(
log_ÿÎback_nuÎ
);

4280 
¬gc
--;

4281 
¬gv
++;

4284 
	`avcodec_»gi¡”_®l
();

4285 #ià
CONFIG_AVDEVICE


4286 
	`avdeviû_»gi¡”_®l
();

4288 
	`avf‹r_»gi¡”_®l
();

4289 
	`av_»gi¡”_®l
();

4290 
	`avfÜm©_ÃtwÜk_š™
();

4292 
	`show_bªÃr
(
¬gc
, 
¬gv
, 
İtiÚs
);

4294 
	`‹rm_š™
();

4297 
»t
 = 
	`ffm³g_·r£_İtiÚs
(
¬gc
, 
¬gv
);

4298 ià(
»t
 < 0)

4299 
	`ex™_´og¿m
(1);

4301 ià(
nb_ouut_fes
 <ğ0 && 
nb_šput_fes
 == 0) {

4302 
	`show_u§ge
();

4303 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "U£ -hØg‘ fuÎ h–°Ü,ƒv’ b‘‹r,„uÀ'mª %s'\n", 
´og¿m_Çme
);

4304 
	`ex™_´og¿m
(1);

4308 ià(
nb_ouut_fes
 <= 0) {

4309 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "At†east one output file must be specified\n");

4310 
	`ex™_´og¿m
(1);

4318 
cu¼’t_time
 = 
ti
 = 
	`g‘utime
();

4319 ià(
	`Œªscode
() < 0)

4320 
	`ex™_´og¿m
(1);

4321 
ti
 = 
	`g‘utime
() -i;

4322 ià(
do_b’chm¬k
) {

4323 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "b’ch: utime=%0.3fs\n", 
ti
 / 1000000.0);

4325 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, "%"
PRIu64
" frames successfully decoded, %"PRIu64" decodingƒrrors\n",

4326 
decode_”rÜ_¡©
[0], decode_error_stat[1]);

4327 ià((
decode_”rÜ_¡©
[0] + decode_”rÜ_¡©[1]è* 
max_”rÜ_¿‹
 < decode_error_stat[1])

4328 
	`ex™_´og¿m
(69);

4330 
	`ex™_´og¿m
(
»ûived_nb_sigÇls
 ? 255 : 
maš_»tuº_code
);

4331  
maš_»tuº_code
;

4332 
	}
}

	@ffmpeg.h

19 #iâdeà
FFMPEG_H


20 
	#FFMPEG_H


	)

22 
	~"cÚfig.h
"

24 
	~<¡dšt.h
>

25 
	~<¡dio.h
>

26 
	~<sigÇl.h
>

28 #ià
HAVE_PTHREADS


29 
	~<±h»ad.h
>

32 
	~"cmduts.h
"

34 
	~"libavfÜm©/avfÜm©.h
"

35 
	~"libavfÜm©/avio.h
"

37 
	~"libavcodec/avcodec.h
"

39 
	~"libavf‹r/avf‹r.h
"

41 
	~"libavut/avut.h
"

42 
	~"libavut/diù.h
"

43 
	~"libavut/ev®.h
"

44 
	~"libavut/fifo.h
"

45 
	~"libavut/pixfmt.h
"

46 
	~"libavut/¿tiÚ®.h
"

47 
	~"libavut/th»admes§ge.h
"

49 
	~"libsw»§m¶e/sw»§m¶e.h
"

51 
	#VSYNC_AUTO
 -1

	)

52 
	#VSYNC_PASSTHROUGH
 0

	)

53 
	#VSYNC_CFR
 1

	)

54 
	#VSYNC_VFR
 2

	)

55 
	#VSYNC_VSCFR
 0xã

	)

56 
	#VSYNC_DROP
 0xff

	)

58 
	#MAX_STREAMS
 1024

	)

60 
	eHWAcûlID
 {

61 
	mHWACCEL_NONE
 = 0,

62 
	mHWACCEL_AUTO
,

63 
	mHWACCEL_VDPAU
,

64 
	mHWACCEL_DXVA2
,

65 
	mHWACCEL_VDA
,

66 
	mHWACCEL_VIDEOTOOLBOX
,

67 
	mHWACCEL_QSV
,

70 
	sHWAcûl
 {

71 cÚ¡ *
	mÇme
;

72 (*
	mš™
)(
AVCodecCÚ‹xt
 *
	ms
);

73 
HWAcûlID
 
	mid
;

74 
AVPix–FÜm©
 
	mpix_fmt
;

75 } 
	tHWAcûl
;

78 
	sSŒ—mM­
 {

79 
	mdi§bËd
;

80 
	mfe_šdex
;

81 
	m¡»am_šdex
;

82 
	msync_fe_šdex
;

83 
	msync_¡»am_šdex
;

84 *
	mlškÏb–
;

85 } 
	tSŒ—mM­
;

88 
	mfe_idx
, 
	m¡»am_idx
, 
	mchªÃl_idx
;

89 
	mofe_idx
, 
	mo¡»am_idx
;

90 } 
	tAudioChªÃlM­
;

92 
	sO±iÚsCÚ‹xt
 {

93 
O±iÚGroup
 *
	mg
;

96 
št64_t
 
	m¡¬t_time
;

97 
št64_t
 
	m¡¬t_time_eof
;

98 
	m£ek_time¡amp
;

99 cÚ¡ *
	mfÜm©
;

101 
S³cif›rO±
 *
	mcodec_Çmes
;

102 
	mnb_codec_Çmes
;

103 
S³cif›rO±
 *
	maudio_chªÃls
;

104 
	mnb_audio_chªÃls
;

105 
S³cif›rO±
 *
	maudio_§m¶e_¿‹
;

106 
	mnb_audio_§m¶e_¿‹
;

107 
S³cif›rO±
 *
	mäame_¿‹s
;

108 
	mnb_äame_¿‹s
;

109 
S³cif›rO±
 *
	mäame_sizes
;

110 
	mnb_äame_sizes
;

111 
S³cif›rO±
 *
	mäame_pix_fmts
;

112 
	mnb_äame_pix_fmts
;

115 
št64_t
 
	mšput_ts_off£t
;

116 
	mloİ
;

117 
	m¿‹_emu
;

118 
	maccu¿‹_£ek
;

119 
	mth»ad_queue_size
;

121 
S³cif›rO±
 *
	mts_sÿË
;

122 
	mnb_ts_sÿË
;

123 
S³cif›rO±
 *
	mdump_©chm’t
;

124 
	mnb_dump_©chm’t
;

125 
S³cif›rO±
 *
	mhwacûls
;

126 
	mnb_hwacûls
;

127 
S³cif›rO±
 *
	mhwacûl_deviûs
;

128 
	mnb_hwacûl_deviûs
;

129 
S³cif›rO±
 *
	mautÜÙ©e
;

130 
	mnb_autÜÙ©e
;

133 
SŒ—mM­
 *
	m¡»am_m­s
;

134 
	mnb_¡»am_m­s
;

135 
AudioChªÃlM­
 *
	maudio_chªÃl_m­s
;

136 
	mnb_audio_chªÃl_m­s
;

137 
	mm‘ad©a_glob®_mªu®
;

138 
	mm‘ad©a_¡»ams_mªu®
;

139 
	mm‘ad©a_ch­‹rs_mªu®
;

140 cÚ¡ **
	m©chm’ts
;

141 
	mnb_©chm’ts
;

143 
	mch­‹rs_šput_fe
;

145 
št64_t
 
	m»cÜdšg_time
;

146 
št64_t
 
	m¡İ_time
;

147 
ušt64_t
 
	mlim™_fesize
;

148 
	mmux_´–ßd
;

149 
	mmux_max_d–ay
;

150 
	mshÜ‹¡
;

152 
	mvideo_di§bË
;

153 
	maudio_di§bË
;

154 
	msubt™Ë_di§bË
;

155 
	md©a_di§bË
;

158 *
	m¡»amid_m­
;

159 
	mnb_¡»amid_m­
;

161 
S³cif›rO±
 *
	mm‘ad©a
;

162 
	mnb_m‘ad©a
;

163 
S³cif›rO±
 *
	mmax_äames
;

164 
	mnb_max_äames
;

165 
S³cif›rO±
 *
	mb™¡»am_f‹rs
;

166 
	mnb_b™¡»am_f‹rs
;

167 
S³cif›rO±
 *
	mcodec_gs
;

168 
	mnb_codec_gs
;

169 
S³cif›rO±
 *
	m§m¶e_fmts
;

170 
	mnb_§m¶e_fmts
;

171 
S³cif›rO±
 *
	mqsÿË
;

172 
	mnb_qsÿË
;

173 
S³cif›rO±
 *
	mfÜûd_key_äames
;

174 
	mnb_fÜûd_key_äames
;

175 
S³cif›rO±
 *
	mfÜû_ås
;

176 
	mnb_fÜû_ås
;

177 
S³cif›rO±
 *
	mäame_a¥eù_¿tios
;

178 
	mnb_äame_a¥eù_¿tios
;

179 
S³cif›rO±
 *
	mrc_ov”rides
;

180 
	mnb_rc_ov”rides
;

181 
S³cif›rO±
 *
	mšŒa_m©riûs
;

182 
	mnb_šŒa_m©riûs
;

183 
S³cif›rO±
 *
	mš‹r_m©riûs
;

184 
	mnb_š‹r_m©riûs
;

185 
S³cif›rO±
 *
	mchroma_šŒa_m©riûs
;

186 
	mnb_chroma_šŒa_m©riûs
;

187 
S³cif›rO±
 *
	mtİ_f›ld_fœ¡
;

188 
	mnb_tİ_f›ld_fœ¡
;

189 
S³cif›rO±
 *
	mm‘ad©a_m­
;

190 
	mnb_m‘ad©a_m­
;

191 
S³cif›rO±
 *
	m´e£ts
;

192 
	mnb_´e£ts
;

193 
S³cif›rO±
 *
	mcİy_š™Ÿl_nÚkeyäames
;

194 
	mnb_cİy_š™Ÿl_nÚkeyäames
;

195 
S³cif›rO±
 *
	mcİy_´iÜ_¡¬t
;

196 
	mnb_cİy_´iÜ_¡¬t
;

197 
S³cif›rO±
 *
	mf‹rs
;

198 
	mnb_f‹rs
;

199 
S³cif›rO±
 *
	mf‹r_süts
;

200 
	mnb_f‹r_süts
;

201 
S³cif›rO±
 *
	m»š™_f‹rs
;

202 
	mnb_»š™_f‹rs
;

203 
S³cif›rO±
 *
	mfix_sub_du¿tiÚ
;

204 
	mnb_fix_sub_du¿tiÚ
;

205 
S³cif›rO±
 *
	mÿnvas_sizes
;

206 
	mnb_ÿnvas_sizes
;

207 
S³cif›rO±
 *
	m·ss
;

208 
	mnb_·ss
;

209 
S³cif›rO±
 *
	m·s¦ogfes
;

210 
	mnb_·s¦ogfes
;

211 
S³cif›rO±
 *
	mguess_Ïyout_max
;

212 
	mnb_guess_Ïyout_max
;

213 
S³cif›rO±
 *
	m­ad
;

214 
	mnb_­ad
;

215 
S³cif›rO±
 *
	mdisÿrd
;

216 
	mnb_disÿrd
;

217 
S³cif›rO±
 *
	mdi¥os™iÚ
;

218 
	mnb_di¥os™iÚ
;

219 
S³cif›rO±
 *
	m´og¿m
;

220 
	mnb_´og¿m
;

221 } 
	tO±iÚsCÚ‹xt
;

223 
	sIÅutF‹r
 {

224 
AVF‹rCÚ‹xt
 *
	mf‹r
;

225 
IÅutSŒ—m
 *
	mi¡
;

226 
F‹rG¿ph
 *
	mg¿ph
;

227 
ušt8_t
 *
	mÇme
;

228 } 
	tIÅutF‹r
;

230 
	sOuutF‹r
 {

231 
AVF‹rCÚ‹xt
 *
	mf‹r
;

232 
OuutSŒ—m
 *
	mo¡
;

233 
F‹rG¿ph
 *
	mg¿ph
;

234 
ušt8_t
 *
	mÇme
;

237 
AVF‹rInOut
 *
	mout_tmp
;

238 
AVMedŸTy³
 
	mty³
;

239 } 
	tOuutF‹r
;

241 
	sF‹rG¿ph
 {

242 
	mšdex
;

243 cÚ¡ *
	mg¿ph_desc
;

245 
AVF‹rG¿ph
 *
	mg¿ph
;

246 
	m»cÚfigu¿tiÚ
;

248 
IÅutF‹r
 **
	mšputs
;

249 
	mnb_šputs
;

250 
OuutF‹r
 **
	mouuts
;

251 
	mnb_ouuts
;

252 } 
	tF‹rG¿ph
;

254 
	sIÅutSŒ—m
 {

255 
	mfe_šdex
;

256 
AVSŒ—m
 *
	m¡
;

257 
	mdisÿrd
;

258 
	mu£r_£t_disÿrd
;

259 
	mdecodšg_Ãeded
;

260 
	#DECODING_FOR_OST
 1

	)

261 
	#DECODING_FOR_FILTER
 2

	)

263 
AVCodecCÚ‹xt
 *
	mdec_ùx
;

264 
AVCodec
 *
	mdec
;

265 
AVF¿me
 *
	mdecoded_äame
;

266 
AVF¿me
 *
	mf‹r_äame
;

268 
št64_t
 
	m¡¬t
;

271 
št64_t
 
	mÃxt_dts
;

272 
št64_t
 
	mdts
;

274 
št64_t
 
	mÃxt_±s
;

275 
št64_t
 
	m±s
;

276 
	mw¿p_cÜ»ùiÚ_dÚe
;

278 
št64_t
 
	mf‹r_š_»sÿË_d–_Ï¡
;

280 
št64_t
 
	mmš_±s
;

281 
št64_t
 
	mmax_±s
;

282 
št64_t
 
	mnb_§m¶es
;

284 
	mts_sÿË
;

285 
	m§w_fœ¡_ts
;

286 
	mshowed_muÉi_·ck‘_w¬nšg
;

287 
AVDiùiÚ¬y
 *
	mdecod”_İts
;

288 
AVR©iÚ®
 
	mäam”©e
;

289 
	mtİ_f›ld_fœ¡
;

290 
	mguess_Ïyout_max
;

292 
	mautÜÙ©e
;

293 
	m»§m¶e_height
;

294 
	m»§m¶e_width
;

295 
	m»§m¶e_pix_fmt
;

297 
	m»§m¶e_§m¶e_fmt
;

298 
	m»§m¶e_§m¶e_¿‹
;

299 
	m»§m¶e_chªÃls
;

300 
ušt64_t
 
	m»§m¶e_chªÃl_Ïyout
;

302 
	mfix_sub_du¿tiÚ
;

304 
	mgÙ_ouut
;

305 
	m»t
;

306 
AVSubt™Ë
 
	msubt™Ë
;

307 } 
	m´ev_sub
;

309 
	ssub2video
 {

310 
št64_t
 
	mÏ¡_±s
;

311 
št64_t
 
	m’d_±s
;

312 
AVF¿me
 *
	mäame
;

313 
	mw
, 
	mh
;

314 } 
	msub2video
;

316 
	mdr1
;

320 
IÅutF‹r
 **
	mf‹rs
;

321 
	mnb_f‹rs
;

323 
	m»š™_f‹rs
;

326 
HWAcûlID
 
	mhwacûl_id
;

327 *
	mhwacûl_deviû
;

330 
HWAcûlID
 
	maùive_hwacûl_id
;

331 *
	mhwacûl_ùx
;

332 (*
	mhwacûl_unš™
)(
AVCodecCÚ‹xt
 *
	ms
);

333 (*
	mhwacûl_g‘_bufãr
)(
AVCodecCÚ‹xt
 *
	ms
, 
AVF¿me
 *
	mäame
, 
	mæags
);

334 (*
	mhwacûl_»Œ›ve_d©a
)(
AVCodecCÚ‹xt
 *
	ms
, 
AVF¿me
 *
	mäame
);

335 
AVPix–FÜm©
 
	mhwacûl_pix_fmt
;

336 
AVPix–FÜm©
 
	mhwacûl_»Œ›ved_pix_fmt
;

340 
ušt64_t
 
	md©a_size
;

342 
ušt64_t
 
	mnb_·ck‘s
;

344 
ušt64_t
 
	mäames_decoded
;

345 
ušt64_t
 
	m§m¶es_decoded
;

346 } 
	tIÅutSŒ—m
;

348 
	sIÅutFe
 {

349 
AVFÜm©CÚ‹xt
 *
	mùx
;

350 
	meof_»ached
;

351 
	m—gaš
;

352 
	mi¡_šdex
;

353 
	mloİ
;

354 
št64_t
 
	mdu¿tiÚ
;

356 
AVR©iÚ®
 
	mtime_ba£
;

357 
št64_t
 
	mšput_ts_off£t
;

359 
št64_t
 
	mts_off£t
;

360 
št64_t
 
	mÏ¡_ts
;

361 
št64_t
 
	m¡¬t_time
;

362 
	m£ek_time¡amp
;

363 
št64_t
 
	m»cÜdšg_time
;

364 
	mnb_¡»ams
;

366 
	mnb_¡»ams_w¬n
;

367 
	m¿‹_emu
;

368 
	maccu¿‹_£ek
;

370 #ià
HAVE_PTHREADS


371 
AVTh»adMes§geQueue
 *
	mš_th»ad_queue
;

372 
±h»ad_t
 
	mth»ad
;

373 
	mnÚ_blockšg
;

374 
	mjošed
;

375 
	mth»ad_queue_size
;

377 } 
	tIÅutFe
;

379 
	efÜûd_keyäames_cÚ¡
 {

380 
	mFKF_N
,

381 
	mFKF_N_FORCED
,

382 
	mFKF_PREV_FORCED_N
,

383 
	mFKF_PREV_FORCED_T
,

384 
	mFKF_T
,

385 
	mFKF_NB


388 
	#ABORT_ON_FLAG_EMPTY_OUTPUT
 (1 << 0)

	)

390 cÚ¡ *cÚ¡ 
fÜûd_keyäames_cÚ¡_Çmes
[];

393 
	mENCODER_FINISHED
 = 1,

394 
	mMUXER_FINISHED
 = 2,

395 } 
	tOSTFšished
 ;

397 
	sOuutSŒ—m
 {

398 
	mfe_šdex
;

399 
	mšdex
;

400 
	msourû_šdex
;

401 
AVSŒ—m
 *
	m¡
;

402 
	m’codšg_Ãeded
;

403 
	mäame_numb”
;

406 
IÅutSŒ—m
 *
	msync_i¡
;

407 
št64_t
 
	msync_İts
;

410 
št64_t
 
	mfœ¡_±s
;

412 
št64_t
 
	mÏ¡_mux_dts
;

413 
AVB™SŒ—mF‹rCÚ‹xt
 *
	mb™¡»am_f‹rs
;

414 
AVCodecCÚ‹xt
 *
	m’c_ùx
;

415 
AVCodec
 *
	m’c
;

416 
št64_t
 
	mmax_äames
;

417 
AVF¿me
 *
	mf‹»d_äame
;

418 
AVF¿me
 *
	mÏ¡_äame
;

419 
	mÏ¡_drİ³d
;

420 
	mÏ¡_nb0_äames
[3];

422 *
	mhwacûl_ùx
;

425 
AVR©iÚ®
 
	mäame_¿‹
;

426 
	mis_cä
;

427 
	mfÜû_ås
;

428 
	mtİ_f›ld_fœ¡
;

429 
	mrÙ©e_ov”ridd’
;

431 
AVR©iÚ®
 
	mäame_a¥eù_¿tio
;

434 
št64_t
 *
	mfÜûd_kf_±s
;

435 
	mfÜûd_kf_couÁ
;

436 
	mfÜûd_kf_šdex
;

437 *
	mfÜûd_keyäames
;

438 
AVEx´
 *
	mfÜûd_keyäames_³x´
;

439 
	mfÜûd_keyäames_ex´_cÚ¡_v®ues
[
FKF_NB
];

442 *
	maudio_chªÃls_m­
;

443 
	maudio_chªÃls_m­³d
;

445 *
	mlogfe_´efix
;

446 
FILE
 *
	mlogfe
;

448 
OuutF‹r
 *
	mf‹r
;

449 *
	mavf‹r
;

450 *
	mf‹rs
;

451 *
	mf‹rs_süt
;

453 
AVDiùiÚ¬y
 *
	m’cod”_İts
;

454 
AVDiùiÚ¬y
 *
	msws_diù
;

455 
AVDiùiÚ¬y
 *
	mswr_İts
;

456 
AVDiùiÚ¬y
 *
	m»§m¶e_İts
;

457 *
	m­ad
;

458 
OSTFšished
 
	mfšished
;

459 
	muÇvaabË
;

460 
	m¡»am_cİy
;

461 cÚ¡ *
	m©chm’t_f’ame
;

462 
	mcİy_š™Ÿl_nÚkeyäames
;

463 
	mcİy_´iÜ_¡¬t
;

464 *
	mdi¥os™iÚ
;

466 
	mk“p_pix_fmt
;

468 
AVCodecP¬£rCÚ‹xt
 *
	m·r£r
;

472 
ušt64_t
 
	md©a_size
;

474 
ušt64_t
 
	m·ck‘s_wr™‹n
;

476 
ušt64_t
 
	mäames_’coded
;

477 
ušt64_t
 
	m§m¶es_’coded
;

480 
	mqu®™y
;

483 
	mpiù_ty³
;

486 
št64_t
 
	m”rÜ
[4];

487 } 
	tOuutSŒ—m
;

489 
	sOuutFe
 {

490 
AVFÜm©CÚ‹xt
 *
	mùx
;

491 
AVDiùiÚ¬y
 *
	mİts
;

492 
	mo¡_šdex
;

493 
št64_t
 
	m»cÜdšg_time
;

494 
št64_t
 
	m¡¬t_time
;

495 
ušt64_t
 
	mlim™_fesize
;

497 
	mshÜ‹¡
;

498 } 
	tOuutFe
;

500 
IÅutSŒ—m
 **
šput_¡»ams
;

501 
nb_šput_¡»ams
;

502 
IÅutFe
 **
šput_fes
;

503 
nb_šput_fes
;

505 
OuutSŒ—m
 **
ouut_¡»ams
;

506 
nb_ouut_¡»ams
;

507 
OuutFe
 **
ouut_fes
;

508 
nb_ouut_fes
;

510 
F‹rG¿ph
 **
f‹rg¿phs
;

511 
nb_f‹rg¿phs
;

513 *
v¡©s_f’ame
;

514 *
sdp_f’ame
;

516 
audio_driá_th»shŞd
;

517 
dts_d–_th»shŞd
;

518 
dts_”rÜ_th»shŞd
;

520 
audio_vŞume
;

521 
audio_sync_m‘hod
;

522 
video_sync_m‘hod
;

523 
äame_drİ_th»shŞd
;

524 
do_b’chm¬k
;

525 
do_b’chm¬k_®l
;

526 
do_deš‹¾aû
;

527 
do_hex_dump
;

528 
do_pkt_dump
;

529 
cİy_ts
;

530 
¡¬t_©_z”o
;

531 
cİy_tb
;

532 
debug_ts
;

533 
ex™_Ú_”rÜ
;

534 
abÜt_Ú_æags
;

535 
´št_¡©s
;

536 
qp_hi¡
;

537 
¡dš_š‹¿ùiÚ
;

538 
äame_b™s_³r_¿w_§m¶e
;

539 
AVIOCÚ‹xt
 *
´og»ss_avio
;

540 
max_”rÜ_¿‹
;

541 
vd·u_­i_v”
;

542 *
videÙoŞbox_pixfmt
;

544 cÚ¡ 
AVIOIÁ”ru±CB
 
št_cb
;

546 cÚ¡ 
O±iÚDef
 
İtiÚs
[];

547 cÚ¡ 
HWAcûl
 
hwacûls
[];

550 
‹rm_š™
();

551 
‹rm_ex™
();

553 
»£t_İtiÚs
(
O±iÚsCÚ‹xt
 *
o
, 
is_šput
);

554 
show_u§ge
();

556 
İt_ouut_fe
(*
İtùx
, cÚ¡ *
f’ame
);

558 
»move_avİtiÚs
(
AVDiùiÚ¬y
 **
a
, AVDiùiÚ¬y *
b
);

559 
as£¹_avİtiÚs
(
AVDiùiÚ¬y
 *
m
);

561 
guess_šput_chªÃl_Ïyout
(
IÅutSŒ—m
 *
i¡
);

563 
AVPix–FÜm©
 
choo£_pix–_fmt
(
AVSŒ—m
 *
¡
, 
AVCodecCÚ‹xt
 *
avùx
, 
AVCodec
 *
codec
, AVPix–FÜm© 
rg‘
);

564 
choo£_§m¶e_fmt
(
AVSŒ—m
 *
¡
, 
AVCodec
 *
codec
);

566 
cÚfigu»_f‹rg¿ph
(
F‹rG¿ph
 *
fg
);

567 
cÚfigu»_ouut_f‹r
(
F‹rG¿ph
 *
fg
, 
OuutF‹r
 *
of‹r
, 
AVF‹rInOut
 *
out
);

568 
i¡_š_f‹rg¿ph
(
F‹rG¿ph
 *
fg
, 
IÅutSŒ—m
 *
i¡
);

569 
F‹rG¿ph
 *
š™_sim¶e_f‹rg¿ph
(
IÅutSŒ—m
 *
i¡
, 
OuutSŒ—m
 *
o¡
);

570 
š™_com¶ex_f‹rg¿ph
(
F‹rG¿ph
 *
fg
);

572 
ffm³g_·r£_İtiÚs
(
¬gc
, **
¬gv
);

574 
vd·u_š™
(
AVCodecCÚ‹xt
 *
s
);

575 
dxva2_š™
(
AVCodecCÚ‹xt
 *
s
);

576 
vda_š™
(
AVCodecCÚ‹xt
 *
s
);

577 
videÙoŞbox_š™
(
AVCodecCÚ‹xt
 *
s
);

578 
qsv_š™
(
AVCodecCÚ‹xt
 *
s
);

579 
qsv_Œªscode_š™
(
OuutSŒ—m
 *
o¡
);

581 
qt_ffm³g
(
¬gc
, **
¬gv
);

	@ffmpeg_dxva2.c

19 
	~<wšdows.h
>

21 #ifdeà
_WIN32_WINNT


22 #undeà
_WIN32_WINNT


24 
	#_WIN32_WINNT
 0x0600

	)

25 
	#DXVA2API_USE_BITFIELDS


	)

26 
	#COBJMACROS


	)

28 
	~<¡dšt.h
>

30 
	~<d3d9.h
>

31 
	~<dxva2­i.h
>

33 
	~"ffm³g.h
"

35 
	~"libavcodec/dxva2.h
"

37 
	~"libavut/avas£¹.h
"

38 
	~"libavut/bufãr.h
"

39 
	~"libavut/äame.h
"

40 
	~"libavut/imguts.h
"

41 
	~"libavut/pixfmt.h
"

45 
	~<š™guid.h
>

46 
DEFINE_GUID
(
IID_IDœeùXVideoDecod”S”viû
, 0xfc51a551,0xd5e7,0x11d9,0xaf,0x55,0x00,0x05,0x4e,0x43,0xff,0x02);

48 
DEFINE_GUID
(
DXVA2_ModeMPEG2_VLD
, 0xee27417f, 0x5e28,0x4e65,0xbe,0xea,0x1d,0x26,0xb5,0x08,0xad,0xc9);

49 
DEFINE_GUID
(
DXVA2_ModeMPEG2ªd1_VLD
, 0x86695f12, 0x340e,0x4f04,0x9f,0xd3,0x92,0x53,0xdd,0x32,0x74,0x60);

50 
DEFINE_GUID
(
DXVA2_ModeH264_E
, 0x1b81be68, 0xa0c7,0x11d3,0xb9,0x84,0x00,0xc0,0x4f,0x2e,0x73,0xc5);

51 
DEFINE_GUID
(
DXVA2_ModeH264_F
, 0x1b81be69, 0xa0c7,0x11d3,0xb9,0x84,0x00,0xc0,0x4f,0x2e,0x73,0xc5);

52 
DEFINE_GUID
(
DXVADDI_IÁ–_ModeH264_E
, 0x604F8E68, 0x4951,0x4C54,0x88,0xFE,0xAB,0xD2,0x5C,0x15,0xB3,0xD6);

53 
DEFINE_GUID
(
DXVA2_ModeVC1_D
, 0x1b81beA3, 0xa0c7,0x11d3,0xb9,0x84,0x00,0xc0,0x4f,0x2e,0x73,0xc5);

54 
DEFINE_GUID
(
DXVA2_ModeVC1_D2010
, 0x1b81beA4, 0xa0c7,0x11d3,0xb9,0x84,0x00,0xc0,0x4f,0x2e,0x73,0xc5);

55 
DEFINE_GUID
(
DXVA2_ModeHEVC_VLD_Maš
, 0x5b11d51b, 0x2f4c,0x4452,0xbc,0xc3,0x09,0xf2,0xa1,0x16,0x0c,0xc0);

56 
DEFINE_GUID
(
DXVA2_ModeVP9_VLD_Profe0
, 0x463707f8, 0xa1d0,0x4585,0x87,0x6d,0x83,0xaa,0x6d,0x60,0xb8,0x9e);

57 
DEFINE_GUID
(
DXVA2_NoEnüy±
, 0x1b81beD0, 0xa0c7,0x11d3,0xb9,0x84,0x00,0xc0,0x4f,0x2e,0x73,0xc5);

58 
DEFINE_GUID
(
GUID_NULL
, 0x00000000, 0x0000,0x0000,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00);

60 
IDœeù3D9
* 
	tWINAPI
 
	tpDœeù3DC»©e9
(
	tUINT
);

61 
HRESULT
 
	tWINAPI
 
	tpC»©eDeviûMªag”9
(
	tUINT
 *, 
	tIDœeù3DDeviûMªag”9
 **);

63 
	sdxva2_mode
 {

64 cÚ¡ 
GUID
 *
	mguid
;

65 
AVCodecID
 
	mcodec
;

66 } 
	tdxva2_mode
;

68 cÚ¡ 
dxva2_mode
 
	gdxva2_modes
[] = {

70 { &
DXVA2_ModeMPEG2_VLD
, 
AV_CODEC_ID_MPEG2VIDEO
 },

71 { &
DXVA2_ModeMPEG2ªd1_VLD
, 
AV_CODEC_ID_MPEG2VIDEO
 },

74 { &
DXVA2_ModeH264_F
, 
AV_CODEC_ID_H264
 },

75 { &
DXVA2_ModeH264_E
, 
AV_CODEC_ID_H264
 },

77 { &
DXVADDI_IÁ–_ModeH264_E
, 
AV_CODEC_ID_H264
 },

80 { &
DXVA2_ModeVC1_D2010
, 
AV_CODEC_ID_VC1
 },

81 { &
DXVA2_ModeVC1_D2010
, 
AV_CODEC_ID_WMV3
 },

82 { &
DXVA2_ModeVC1_D
, 
AV_CODEC_ID_VC1
 },

83 { &
DXVA2_ModeVC1_D
, 
AV_CODEC_ID_WMV3
 },

86 { &
DXVA2_ModeHEVC_VLD_Maš
, 
AV_CODEC_ID_HEVC
 },

89 { &
DXVA2_ModeVP9_VLD_Profe0
, 
AV_CODEC_ID_VP9
 },

91 { 
NULL
, 0 },

94 
	ssurçû_šfo
 {

95 
	mu£d
;

96 
ušt64_t
 
	mage
;

97 } 
	tsurçû_šfo
;

99 
	sDXVA2CÚ‹xt
 {

100 
HMODULE
 
	md3dlib
;

101 
HMODULE
 
	mdxva2lib
;

103 
HANDLE
 
	mdeviûHªdË
;

105 
IDœeù3D9
 *
	md3d9
;

106 
IDœeù3DDeviû9
 *
	md3d9deviû
;

107 
IDœeù3DDeviûMªag”9
 *
	md3d9devmgr
;

108 
IDœeùXVideoDecod”S”viû
 *
	mdecod”_£rviû
;

109 
IDœeùXVideoDecod”
 *
	mdecod”
;

111 
GUID
 
	mdecod”_guid
;

112 
DXVA2_CÚfigPiùu»Decode
 
	mdecod”_cÚfig
;

114 
LPDIRECT3DSURFACE9
 *
	msurçûs
;

115 
surçû_šfo
 *
	msurçû_šfos
;

116 
ušt32_t
 
	mnum_surçûs
;

117 
ušt64_t
 
	msurçû_age
;

119 
AVF¿me
 *
	mtmp_äame
;

120 } 
	tDXVA2CÚ‹xt
;

122 
	sDXVA2SurçûW¿µ”
 {

123 
DXVA2CÚ‹xt
 *
	mùx
;

124 
LPDIRECT3DSURFACE9
 
	msurçû
;

125 
IDœeùXVideoDecod”
 *
	mdecod”
;

126 } 
	tDXVA2SurçûW¿µ”
;

128 
	$dxva2_de¡roy_decod”
(
AVCodecCÚ‹xt
 *
s
)

130 
IÅutSŒ—m
 *
i¡
 = 
s
->
İaque
;

131 
DXVA2CÚ‹xt
 *
ùx
 = 
i¡
->
hwacûl_ùx
;

132 
i
;

134 ià(
ùx
->
surçûs
) {

135 
i
 = 0; i < 
ùx
->
num_surçûs
; i++) {

136 ià(
ùx
->
surçûs
[
i
])

137 
	`IDœeù3DSurçû9_R–—£
(
ùx
->
surçûs
[
i
]);

140 
	`av_ä“p
(&
ùx
->
surçûs
);

141 
	`av_ä“p
(&
ùx
->
surçû_šfos
);

142 
ùx
->
num_surçûs
 = 0;

143 
ùx
->
surçû_age
 = 0;

145 ià(
ùx
->
decod”
) {

146 
	`IDœeùXVideoDecod”_R–—£
(
ùx
->
decod”
);

147 
ùx
->
decod”
 = 
NULL
;

149 
	}
}

151 
	$dxva2_unš™
(
AVCodecCÚ‹xt
 *
s
)

153 
IÅutSŒ—m
 *
i¡
 = 
s
->
İaque
;

154 
DXVA2CÚ‹xt
 *
ùx
 = 
i¡
->
hwacûl_ùx
;

156 
i¡
->
hwacûl_unš™
 = 
NULL
;

157 
i¡
->
hwacûl_g‘_bufãr
 = 
NULL
;

158 
i¡
->
hwacûl_»Œ›ve_d©a
 = 
NULL
;

160 ià(
ùx
->
decod”
)

161 
	`dxva2_de¡roy_decod”
(
s
);

163 ià(
ùx
->
decod”_£rviû
)

164 
	`IDœeùXVideoDecod”S”viû_R–—£
(
ùx
->
decod”_£rviû
);

166 ià(
ùx
->
d3d9devmgr
 && ctx->
deviûHªdË
 !ğ
INVALID_HANDLE_VALUE
)

167 
	`IDœeù3DDeviûMªag”9_Clo£DeviûHªdË
(
ùx
->
d3d9devmgr
, ctx->
deviûHªdË
);

169 ià(
ùx
->
d3d9devmgr
)

170 
	`IDœeù3DDeviûMªag”9_R–—£
(
ùx
->
d3d9devmgr
);

172 ià(
ùx
->
d3d9deviû
)

173 
	`IDœeù3DDeviû9_R–—£
(
ùx
->
d3d9deviû
);

175 ià(
ùx
->
d3d9
)

176 
	`IDœeù3D9_R–—£
(
ùx
->
d3d9
);

178 ià(
ùx
->
d3dlib
)

179 
	`F»eLib¿ry
(
ùx
->
d3dlib
);

181 ià(
ùx
->
dxva2lib
)

182 
	`F»eLib¿ry
(
ùx
->
dxva2lib
);

184 
	`av_äame_ä“
(&
ùx
->
tmp_äame
);

186 
	`av_ä“p
(&
i¡
->
hwacûl_ùx
);

187 
	`av_ä“p
(&
s
->
hwacûl_cÚ‹xt
);

188 
	}
}

190 
	$dxva2_»Ëa£_bufãr
(*
İaque
, 
ušt8_t
 *
d©a
)

192 
DXVA2SurçûW¿µ”
 *
w
 = 
İaque
;

193 
DXVA2CÚ‹xt
 *
ùx
 = 
w
->ctx;

194 
i
;

196 
i
 = 0; i < 
ùx
->
num_surçûs
; i++) {

197 ià(
ùx
->
surçûs
[
i
] =ğ
w
->
surçû
) {

198 
ùx
->
surçû_šfos
[
i
].
u£d
 = 0;

202 
	`IDœeù3DSurçû9_R–—£
(
w
->
surçû
);

203 
	`IDœeùXVideoDecod”_R–—£
(
w
->
decod”
);

204 
	`av_ä“
(
w
);

205 
	}
}

207 
	$dxva2_g‘_bufãr
(
AVCodecCÚ‹xt
 *
s
, 
AVF¿me
 *
äame
, 
æags
)

209 
IÅutSŒ—m
 *
i¡
 = 
s
->
İaque
;

210 
DXVA2CÚ‹xt
 *
ùx
 = 
i¡
->
hwacûl_ùx
;

211 
i
, 
Şd_unu£d
 = -1;

212 
LPDIRECT3DSURFACE9
 
surçû
;

213 
DXVA2SurçûW¿µ”
 *
w
 = 
NULL
;

215 
	`av_as£¹0
(
äame
->
fÜm©
 =ğ
AV_PIX_FMT_DXVA2_VLD
);

217 
i
 = 0; i < 
ùx
->
num_surçûs
; i++) {

218 
surçû_šfo
 *
šfo
 = &
ùx
->
surçû_šfos
[
i
];

219 ià(!
šfo
->
u£d
 && (
Şd_unu£d
 =ğ-1 || info->
age
 < 
ùx
->
surçû_šfos
[old_unused].age))

220 
Şd_unu£d
 = 
i
;

222 ià(
Şd_unu£d
 == -1) {

223 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "No free DXVA2 surface!\n");

224  
	`AVERROR
(
ENOMEM
);

226 
i
 = 
Şd_unu£d
;

228 
surçû
 = 
ùx
->
surçûs
[
i
];

230 
w
 = 
	`av_m®locz
((*w));

231 ià(!
w
)

232  
	`AVERROR
(
ENOMEM
);

234 
äame
->
buf
[0] = 
	`av_bufãr_ü—‹
((
ušt8_t
*)
surçû
, 0,

235 
dxva2_»Ëa£_bufãr
, 
w
,

236 
AV_BUFFER_FLAG_READONLY
);

237 ià(!
äame
->
buf
[0]) {

238 
	`av_ä“
(
w
);

239  
	`AVERROR
(
ENOMEM
);

242 
w
->
ùx
 = ctx;

243 
w
->
surçû
 = surface;

244 
	`IDœeù3DSurçû9_AddRef
(
w
->
surçû
);

245 
w
->
decod”
 = 
ùx
->decoder;

246 
	`IDœeùXVideoDecod”_AddRef
(
w
->
decod”
);

248 
ùx
->
surçû_šfos
[
i
].
u£d
 = 1;

249 
ùx
->
surçû_šfos
[
i
].
age
 = ctx->
surçû_age
++;

251 
äame
->
d©a
[3] = (
ušt8_t
 *)
surçû
;

254 
	}
}

256 
	$dxva2_»Œ›ve_d©a
(
AVCodecCÚ‹xt
 *
s
, 
AVF¿me
 *
äame
)

258 
LPDIRECT3DSURFACE9
 
surçû
 = (LPDIRECT3DSURFACE9)
äame
->
d©a
[3];

259 
IÅutSŒ—m
 *
i¡
 = 
s
->
İaque
;

260 
DXVA2CÚ‹xt
 *
ùx
 = 
i¡
->
hwacûl_ùx
;

261 
D3DSURFACE_DESC
 
surçûDesc
;

262 
D3DLOCKED_RECT
 
LockedReù
;

263 
HRESULT
 
hr
;

264 
»t
;

266 
	`IDœeù3DSurçû9_G‘Desc
(
surçû
, &
surçûDesc
);

268 
ùx
->
tmp_äame
->
width
 = 
äame
->width;

269 
ùx
->
tmp_äame
->
height
 = 
äame
->height;

270 
ùx
->
tmp_äame
->
fÜm©
 = 
AV_PIX_FMT_NV12
;

272 
»t
 = 
	`av_äame_g‘_bufãr
(
ùx
->
tmp_äame
, 32);

273 ià(
»t
 < 0)

274  
»t
;

276 
hr
 = 
	`IDœeù3DSurçû9_LockReù
(
surçû
, &
LockedReù
, 
NULL
, 
D3DLOCK_READONLY
);

277 ià(
	`FAILED
(
hr
)) {

278 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Unableo†ock DXVA2 surface\n");

279  
AVERROR_UNKNOWN
;

282 
	`av_image_cİy_¶ªe
(
ùx
->
tmp_äame
->
d©a
[0], ctx->tmp_äame->
lšesize
[0],

283 (
ušt8_t
*)
LockedReù
.
pB™s
,

284 
LockedReù
.
P™ch
, 
äame
->
width
, f¿me->
height
);

286 
	`av_image_cİy_¶ªe
(
ùx
->
tmp_äame
->
d©a
[1], ctx->tmp_äame->
lšesize
[1],

287 (
ušt8_t
*)
LockedReù
.
pB™s
 + LockedReù.
P™ch
 * 
surçûDesc
.
Height
,

288 
LockedReù
.
P™ch
, 
äame
->
width
, f¿me->
height
 / 2);

290 
	`IDœeù3DSurçû9_UÆockReù
(
surçû
);

292 
»t
 = 
	`av_äame_cİy_´İs
(
ùx
->
tmp_äame
, 
äame
);

293 ià(
»t
 < 0)

294 
ç
;

296 
	`av_äame_uÄef
(
äame
);

297 
	`av_äame_move_»f
(
äame
, 
ùx
->
tmp_äame
);

300 
ç
:

301 
	`av_äame_uÄef
(
ùx
->
tmp_äame
);

302  
»t
;

303 
	}
}

305 
	$dxva2_®loc
(
AVCodecCÚ‹xt
 *
s
)

307 
IÅutSŒ—m
 *
i¡
 = 
s
->
İaque
;

308 
logËv–
 = (
i¡
->
hwacûl_id
 =ğ
HWACCEL_AUTO
è? 
AV_LOG_VERBOSE
 : 
AV_LOG_ERROR
;

309 
DXVA2CÚ‹xt
 *
ùx
;

310 
pDœeù3DC»©e9
 *
ü—‹D3D
 = 
NULL
;

311 
pC»©eDeviûMªag”9
 *
ü—‹DeviûMªag”
 = 
NULL
;

312 
HRESULT
 
hr
;

313 
D3DPRESENT_PARAMETERS
 
d3dµ
 = {0};

314 
D3DDISPLAYMODE
 
d3ddm
;

315 
»£tTok’
 = 0;

316 
UINT
 
ad­‹r
 = 
D3DADAPTER_DEFAULT
;

318 
ùx
 = 
	`av_m®locz
((*ctx));

319 ià(!
ùx
)

320  
	`AVERROR
(
ENOMEM
);

322 
ùx
->
deviûHªdË
 = 
INVALID_HANDLE_VALUE
;

324 
i¡
->
hwacûl_ùx
 = 
ùx
;

325 
i¡
->
hwacûl_unš™
 = 
dxva2_unš™
;

326 
i¡
->
hwacûl_g‘_bufãr
 = 
dxva2_g‘_bufãr
;

327 
i¡
->
hwacûl_»Œ›ve_d©a
 = 
dxva2_»Œ›ve_d©a
;

329 
ùx
->
d3dlib
 = 
	`LßdLib¿ry
("d3d9.dll");

330 ià(!
ùx
->
d3dlib
) {

331 
	`av_log
(
NULL
, 
logËv–
, "Failedo†oad D3D9†ibrary\n");

332 
ç
;

334 
ùx
->
dxva2lib
 = 
	`LßdLib¿ry
("dxva2.dll");

335 ià(!
ùx
->
dxva2lib
) {

336 
	`av_log
(
NULL
, 
logËv–
, "Failedo†oad DXVA2†ibrary\n");

337 
ç
;

340 
ü—‹D3D
 = (
pDœeù3DC»©e9
 *)
	`G‘ProcAdd»ss
(
ùx
->
d3dlib
, "Direct3DCreate9");

341 ià(!
ü—‹D3D
) {

342 
	`av_log
(
NULL
, 
logËv–
, "Failedo†ocate Direct3DCreate9\n");

343 
ç
;

345 
ü—‹DeviûMªag”
 = (
pC»©eDeviûMªag”9
 *)
	`G‘ProcAdd»ss
(
ùx
->
dxva2lib
, "DXVA2CreateDirect3DDeviceManager9");

346 ià(!
ü—‹DeviûMªag”
) {

347 
	`av_log
(
NULL
, 
logËv–
, "Failedo†ocate DXVA2CreateDirect3DDeviceManager9\n");

348 
ç
;

351 
ùx
->
d3d9
 = 
	`ü—‹D3D
(
D3D_SDK_VERSION
);

352 ià(!
ùx
->
d3d9
) {

353 
	`av_log
(
NULL
, 
logËv–
, "Failedo create IDirect3D object\n");

354 
ç
;

357 ià(
i¡
->
hwacûl_deviû
) {

358 
ad­‹r
 = 
	`©oi
(
i¡
->
hwacûl_deviû
);

359 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "Usšg HWAcûÈdeviû %d\n", 
ad­‹r
);

362 
	`IDœeù3D9_G‘Ad­‹rDi¥ÏyMode
(
ùx
->
d3d9
, 
ad­‹r
, &
d3ddm
);

363 
d3dµ
.
Wšdowed
 = 
TRUE
;

364 
d3dµ
.
BackBufãrWidth
 = 640;

365 
d3dµ
.
BackBufãrHeight
 = 480;

366 
d3dµ
.
BackBufãrCouÁ
 = 0;

367 
d3dµ
.
BackBufãrFÜm©
 = 
d3ddm
.
FÜm©
;

368 
d3dµ
.
Sw­Efãù
 = 
D3DSWAPEFFECT_DISCARD
;

369 
d3dµ
.
FÏgs
 = 
D3DPRESENTFLAG_VIDEO
;

371 
hr
 = 
	`IDœeù3D9_C»©eDeviû
(
ùx
->
d3d9
, 
ad­‹r
, 
D3DDEVTYPE_HAL
, 
	`G‘DesktİWšdow
(),

372 
D3DCREATE_SOFTWARE_VERTEXPROCESSING
 | 
D3DCREATE_MULTITHREADED
 | 
D3DCREATE_FPU_PRESERVE
,

373 &
d3dµ
, &
ùx
->
d3d9deviû
);

374 ià(
	`FAILED
(
hr
)) {

375 
	`av_log
(
NULL
, 
logËv–
, "Failedo create Direct3D device\n");

376 
ç
;

379 
hr
 = 
	`ü—‹DeviûMªag”
(&
»£tTok’
, &
ùx
->
d3d9devmgr
);

380 ià(
	`FAILED
(
hr
)) {

381 
	`av_log
(
NULL
, 
logËv–
, "Failedo create Direct3D device manager\n");

382 
ç
;

385 
hr
 = 
	`IDœeù3DDeviûMªag”9_Re£tDeviû
(
ùx
->
d3d9devmgr
, ctx->
d3d9deviû
, 
»£tTok’
);

386 ià(
	`FAILED
(
hr
)) {

387 
	`av_log
(
NULL
, 
logËv–
, "Failedo bind Direct3D deviceo device manager\n");

388 
ç
;

391 
hr
 = 
	`IDœeù3DDeviûMªag”9_O³nDeviûHªdË
(
ùx
->
d3d9devmgr
, &ùx->
deviûHªdË
);

392 ià(
	`FAILED
(
hr
)) {

393 
	`av_log
(
NULL
, 
logËv–
, "Failedo open device handle\n");

394 
ç
;

397 
hr
 = 
	`IDœeù3DDeviûMªag”9_G‘VideoS”viû
(
ùx
->
d3d9devmgr
, ctx->
deviûHªdË
, &
IID_IDœeùXVideoDecod”S”viû
, (**)&ùx->
decod”_£rviû
);

398 ià(
	`FAILED
(
hr
)) {

399 
	`av_log
(
NULL
, 
logËv–
, "Failedo create IDirectXVideoDecoderService\n");

400 
ç
;

403 
ùx
->
tmp_äame
 = 
	`av_äame_®loc
();

404 ià(!
ùx
->
tmp_äame
)

405 
ç
;

407 
s
->
hwacûl_cÚ‹xt
 = 
	`av_m®locz
((
dxva_cÚ‹xt
));

408 ià(!
s
->
hwacûl_cÚ‹xt
)

409 
ç
;

412 
ç
:

413 
	`dxva2_unš™
(
s
);

414  
	`AVERROR
(
EINVAL
);

415 
	}
}

417 
	$dxva2_g‘_decod”_cÚfigu¿tiÚ
(
AVCodecCÚ‹xt
 *
s
, cÚ¡ 
GUID
 *
deviû_guid
,

418 cÚ¡ 
DXVA2_VideoDesc
 *
desc
,

419 
DXVA2_CÚfigPiùu»Decode
 *
cÚfig
)

421 
IÅutSŒ—m
 *
i¡
 = 
s
->
İaque
;

422 
logËv–
 = (
i¡
->
hwacûl_id
 =ğ
HWACCEL_AUTO
è? 
AV_LOG_VERBOSE
 : 
AV_LOG_ERROR
;

423 
DXVA2CÚ‹xt
 *
ùx
 = 
i¡
->
hwacûl_ùx
;

424 
cfg_couÁ
 = 0, 
be¡_scÜe
 = 0;

425 
DXVA2_CÚfigPiùu»Decode
 *
cfg_li¡
 = 
NULL
;

426 
DXVA2_CÚfigPiùu»Decode
 
be¡_cfg
 = {{0}};

427 
HRESULT
 
hr
;

428 
i
;

430 
hr
 = 
	`IDœeùXVideoDecod”S”viû_G‘Decod”CÚfigu¿tiÚs
(
ùx
->
decod”_£rviû
, 
deviû_guid
, 
desc
, 
NULL
, &
cfg_couÁ
, &
cfg_li¡
);

431 ià(
	`FAILED
(
hr
)) {

432 
	`av_log
(
NULL
, 
logËv–
, "Unableo„etrieve decoder configurations\n");

433  
	`AVERROR
(
EINVAL
);

436 
i
 = 0; i < 
cfg_couÁ
; i++) {

437 
DXVA2_CÚfigPiùu»Decode
 *
cfg
 = &
cfg_li¡
[
i
];

439 
scÜe
;

440 ià(
cfg
->
CÚfigB™¡»amRaw
 == 1)

441 
scÜe
 = 1;

442 ià(
s
->
codec_id
 =ğ
AV_CODEC_ID_H264
 && 
cfg
->
CÚfigB™¡»amRaw
 == 2)

443 
scÜe
 = 2;

446 ià(
	`IsEqu®GUID
(&
cfg
->
guidCÚfigB™¡»amEnüy±iÚ
, &
DXVA2_NoEnüy±
))

447 
scÜe
 += 16;

448 ià(
scÜe
 > 
be¡_scÜe
) {

449 
be¡_scÜe
 = 
scÜe
;

450 
be¡_cfg
 = *
cfg
;

453 
	`CoTaskMemF»e
(
cfg_li¡
);

455 ià(!
be¡_scÜe
) {

456 
	`av_log
(
NULL
, 
logËv–
, "No valid decoder configuration‡vailable\n");

457  
	`AVERROR
(
EINVAL
);

460 *
cÚfig
 = 
be¡_cfg
;

462 
	}
}

464 
	$dxva2_ü—‹_decod”
(
AVCodecCÚ‹xt
 *
s
)

466 
IÅutSŒ—m
 *
i¡
 = 
s
->
İaque
;

467 
logËv–
 = (
i¡
->
hwacûl_id
 =ğ
HWACCEL_AUTO
è? 
AV_LOG_VERBOSE
 : 
AV_LOG_ERROR
;

468 
DXVA2CÚ‹xt
 *
ùx
 = 
i¡
->
hwacûl_ùx
;

469 
dxva_cÚ‹xt
 *
dxva_ùx
 = 
s
->
hwacûl_cÚ‹xt
;

470 
GUID
 *
guid_li¡
 = 
NULL
;

471 
guid_couÁ
 = 0, 
i
, 
j
;

472 
GUID
 
deviû_guid
 = 
GUID_NULL
;

473 
D3DFORMAT
 
rg‘_fÜm©
 = 0;

474 
DXVA2_VideoDesc
 
desc
 = { 0 };

475 
DXVA2_CÚfigPiùu»Decode
 
cÚfig
;

476 
HRESULT
 
hr
;

477 
surçû_®ignm’t
;

478 
»t
;

480 
hr
 = 
	`IDœeùXVideoDecod”S”viû_G‘Decod”DeviûGuids
(
ùx
->
decod”_£rviû
, &
guid_couÁ
, &
guid_li¡
);

481 ià(
	`FAILED
(
hr
)) {

482 
	`av_log
(
NULL
, 
logËv–
, "Failedo„etrieve decoder device GUIDs\n");

483 
ç
;

486 
i
 = 0; 
dxva2_modes
[i].
guid
; i++) {

487 
D3DFORMAT
 *
rg‘_li¡
 = 
NULL
;

488 
rg‘_couÁ
 = 0;

489 cÚ¡ 
dxva2_mode
 *
mode
 = &
dxva2_modes
[
i
];

490 ià(
mode
->
codec
 !ğ
s
->
codec_id
)

493 
j
 = 0; j < 
guid_couÁ
; j++) {

494 ià(
	`IsEqu®GUID
(
mode
->
guid
, &
guid_li¡
[
j
]))

497 ià(
j
 =ğ
guid_couÁ
)

500 
hr
 = 
	`IDœeùXVideoDecod”S”viû_G‘Decod”R’d”T¬g‘s
(
ùx
->
decod”_£rviû
, 
mode
->
guid
, &
rg‘_couÁ
, &
rg‘_li¡
);

501 ià(
	`FAILED
(
hr
)) {

504 
j
 = 0; j < 
rg‘_couÁ
; j++) {

505 cÚ¡ 
D3DFORMAT
 
fÜm©
 = 
rg‘_li¡
[
j
];

506 ià(
fÜm©
 =ğ
	`MKTAG
('N','V','1','2')) {

507 
rg‘_fÜm©
 = 
fÜm©
;

511 
	`CoTaskMemF»e
(
rg‘_li¡
);

512 ià(
rg‘_fÜm©
) {

513 
deviû_guid
 = *
mode
->
guid
;

517 
	`CoTaskMemF»e
(
guid_li¡
);

519 ià(
	`IsEqu®GUID
(&
deviû_guid
, &
GUID_NULL
)) {

520 
	`av_log
(
NULL
, 
logËv–
, "No decoder device for codec found\n");

521 
ç
;

524 
desc
.
Sam¶eWidth
 = 
s
->
coded_width
;

525 
desc
.
Sam¶eHeight
 = 
s
->
coded_height
;

526 
desc
.
FÜm©
 = 
rg‘_fÜm©
;

528 
»t
 = 
	`dxva2_g‘_decod”_cÚfigu¿tiÚ
(
s
, &
deviû_guid
, &
desc
, &
cÚfig
);

529 ià(
»t
 < 0) {

530 
ç
;

535 ià(
s
->
codec_id
 =ğ
AV_CODEC_ID_MPEG2VIDEO
)

536 
surçû_®ignm’t
 = 32;

539 ià(
s
->
codec_id
 =ğ
AV_CODEC_ID_HEVC
)

540 
surçû_®ignm’t
 = 128;

542 
surçû_®ignm’t
 = 16;

545 
ùx
->
num_surçûs
 = 4;

548 ià(
s
->
codec_id
 =ğ
AV_CODEC_ID_H264
 || s->codec_id =ğ
AV_CODEC_ID_HEVC
)

549 
ùx
->
num_surçûs
 += 16;

550 ià(
s
->
codec_id
 =ğ
AV_CODEC_ID_VP9
)

551 
ùx
->
num_surçûs
 += 8;

553 
ùx
->
num_surçûs
 += 2;

556 ià(
s
->
aùive_th»ad_ty³
 & 
FF_THREAD_FRAME
)

557 
ùx
->
num_surçûs
 +ğ
s
->
th»ad_couÁ
;

559 
ùx
->
surçûs
 = 
	`av_m®locz
(ùx->
num_surçûs
 * (*ctx->surfaces));

560 
ùx
->
surçû_šfos
 = 
	`av_m®locz
(ùx->
num_surçûs
 * (*ctx->surface_infos));

562 ià(!
ùx
->
surçûs
 || !ùx->
surçû_šfos
) {

563 
	`av_log
(
NULL
, 
logËv–
, "Unableo‡llocate surface‡rrays\n");

564 
ç
;

567 
hr
 = 
	`IDœeùXVideoDecod”S”viû_C»©eSurçû
(
ùx
->
decod”_£rviû
,

568 
	`FFALIGN
(
s
->
coded_width
, 
surçû_®ignm’t
),

569 
	`FFALIGN
(
s
->
coded_height
, 
surçû_®ignm’t
),

570 
ùx
->
num_surçûs
 - 1,

571 
rg‘_fÜm©
, 
D3DPOOL_DEFAULT
, 0,

572 
DXVA2_VideoDecod”R’d”T¬g‘
,

573 
ùx
->
surçûs
, 
NULL
);

574 ià(
	`FAILED
(
hr
)) {

575 
	`av_log
(
NULL
, 
logËv–
, "FaedØü—‹ %d videØsurçûs\n", 
ùx
->
num_surçûs
);

576 
ç
;

579 
hr
 = 
	`IDœeùXVideoDecod”S”viû_C»©eVideoDecod”
(
ùx
->
decod”_£rviû
, &
deviû_guid
,

580 &
desc
, &
cÚfig
, 
ùx
->
surçûs
,

581 
ùx
->
num_surçûs
, &ùx->
decod”
);

582 ià(
	`FAILED
(
hr
)) {

583 
	`av_log
(
NULL
, 
logËv–
, "Failedo create DXVA2 video decoder\n");

584 
ç
;

587 
ùx
->
decod”_guid
 = 
deviû_guid
;

588 
ùx
->
decod”_cÚfig
 = 
cÚfig
;

590 
dxva_ùx
->
cfg
 = &
ùx
->
decod”_cÚfig
;

591 
dxva_ùx
->
decod”
 = 
ùx
->decoder;

592 
dxva_ùx
->
surçû
 = 
ùx
->
surçûs
;

593 
dxva_ùx
->
surçû_couÁ
 = 
ùx
->
num_surçûs
;

595 ià(
	`IsEqu®GUID
(&
ùx
->
decod”_guid
, &
DXVADDI_IÁ–_ModeH264_E
))

596 
dxva_ùx
->
wÜk¬ound
 |ğ
FF_DXVA2_WORKAROUND_INTEL_CLEARVIDEO
;

599 
ç
:

600 
	`dxva2_de¡roy_decod”
(
s
);

601  
	`AVERROR
(
EINVAL
);

602 
	}
}

604 
	$dxva2_š™
(
AVCodecCÚ‹xt
 *
s
)

606 
IÅutSŒ—m
 *
i¡
 = 
s
->
İaque
;

607 
logËv–
 = (
i¡
->
hwacûl_id
 =ğ
HWACCEL_AUTO
è? 
AV_LOG_VERBOSE
 : 
AV_LOG_ERROR
;

608 
DXVA2CÚ‹xt
 *
ùx
;

609 
»t
;

611 ià(!
i¡
->
hwacûl_ùx
) {

612 
»t
 = 
	`dxva2_®loc
(
s
);

613 ià(
»t
 < 0)

614  
»t
;

616 
ùx
 = 
i¡
->
hwacûl_ùx
;

618 ià(
s
->
codec_id
 =ğ
AV_CODEC_ID_H264
 &&

619 (
s
->
´ofe
 & ~
FF_PROFILE_H264_CONSTRAINED
è> 
FF_PROFILE_H264_HIGH
) {

620 
	`av_log
(
NULL
, 
logËv–
, "UnsuµÜ‹d H.264…roffÜ DXVA2 HWAcûl: %d\n", 
s
->
´ofe
);

621  
	`AVERROR
(
EINVAL
);

624 ià(
ùx
->
decod”
)

625 
	`dxva2_de¡roy_decod”
(
s
);

627 
»t
 = 
	`dxva2_ü—‹_decod”
(
s
);

628 ià(
»t
 < 0) {

629 
	`av_log
(
NULL
, 
logËv–
, "Error creatinghe DXVA2 decoder\n");

630  
»t
;

634 
	}
}

	@ffmpeg_filter.c

21 
	~<¡dšt.h
>

23 
	~"ffm³g.h
"

25 
	~"libavf‹r/avf‹r.h
"

26 
	~"libavf‹r/bufãrsšk.h
"

28 
	~"libav»§m¶e/av»§m¶e.h
"

30 
	~"libavut/avas£¹.h
"

31 
	~"libavut/av¡ršg.h
"

32 
	~"libavut/b´št.h
"

33 
	~"libavut/chªÃl_Ïyout.h
"

34 
	~"libavut/di¥Ïy.h
"

35 
	~"libavut/İt.h
"

36 
	~"libavut/pixdesc.h
"

37 
	~"libavut/pixfmt.h
"

38 
	~"libavut/imguts.h
"

39 
	~"libavut/§m¶efmt.h
"

42 cÚ¡ 
AVPix–FÜm©
 *
	$g‘_com¶Ÿnû_unofficŸl_pix_fmts
(
AVCodecID
 
codec_id
, cÚ¡ 
AVPix–FÜm©
 
deçuÉ_fÜm©s
[])

44 cÚ¡ 
AVPix–FÜm©
 
mj³g_fÜm©s
[] =

45 { 
AV_PIX_FMT_YUVJ420P
, 
AV_PIX_FMT_YUVJ422P
, 
AV_PIX_FMT_YUVJ444P
,

46 
AV_PIX_FMT_YUV420P
, 
AV_PIX_FMT_YUV422P
, 
AV_PIX_FMT_YUV444P
,

47 
AV_PIX_FMT_NONE
 };

48 cÚ¡ 
AVPix–FÜm©
 
lj³g_fÜm©s
[] =

49 { 
AV_PIX_FMT_BGR24
 , 
AV_PIX_FMT_BGRA
 , 
AV_PIX_FMT_BGR0
,

50 
AV_PIX_FMT_YUVJ420P
, 
AV_PIX_FMT_YUVJ444P
, 
AV_PIX_FMT_YUVJ422P
,

51 
AV_PIX_FMT_YUV420P
 , 
AV_PIX_FMT_YUV444P
 , 
AV_PIX_FMT_YUV422P
,

52 
AV_PIX_FMT_NONE
};

54 ià(
codec_id
 =ğ
AV_CODEC_ID_MJPEG
) {

55  
mj³g_fÜm©s
;

56 } ià(
codec_id
 =ğ
AV_CODEC_ID_LJPEG
) {

57  
lj³g_fÜm©s
;

59  
deçuÉ_fÜm©s
;

61 
	}
}

63 
AVPix–FÜm©
 
	$choo£_pix–_fmt
(
AVSŒ—m
 *
¡
, 
AVCodecCÚ‹xt
 *
’c_ùx
, 
AVCodec
 *
codec
, 
AVPix–FÜm©
 
rg‘
)

65 ià(
codec
 && codec->
pix_fmts
) {

66 cÚ¡ 
AVPix–FÜm©
 *
p
 = 
codec
->
pix_fmts
;

67 cÚ¡ 
AVPixFmtDesütÜ
 *
desc
 = 
	`av_pix_fmt_desc_g‘
(
rg‘
);

68 
has_®pha
 = 
desc
 ? desc->
nb_compÚ’ts
 % 2 == 0 : 0;

69 
AVPix–FÜm©
 
be¡
ğ
AV_PIX_FMT_NONE
;

71 ià(
’c_ùx
->
¡riù_¡d_com¶Ÿnû
 <ğ
FF_COMPLIANCE_UNOFFICIAL
) {

72 
p
 = 
	`g‘_com¶Ÿnû_unofficŸl_pix_fmts
(
’c_ùx
->
codec_id
,…);

74 ; *
p
 !ğ
AV_PIX_FMT_NONE
;…++) {

75 
be¡
ğ
	`avcodec_fšd_be¡_pix_fmt_of_2
(be¡, *
p
, 
rg‘
, 
has_®pha
, 
NULL
);

76 ià(*
p
 =ğ
rg‘
)

79 ià(*
p
 =ğ
AV_PIX_FMT_NONE
) {

80 ià(
rg‘
 !ğ
AV_PIX_FMT_NONE
)

81 
	`av_log
(
NULL
, 
AV_LOG_WARNING
,

83 
	`av_g‘_pix_fmt_Çme
(
rg‘
),

84 
codec
->
Çme
,

85 
	`av_g‘_pix_fmt_Çme
(
be¡
));

86  
be¡
;

89  
rg‘
;

90 
	}
}

92 
	$choo£_§m¶e_fmt
(
AVSŒ—m
 *
¡
, 
AVCodec
 *
codec
)

94 ià(
codec
 && codec->
§m¶e_fmts
) {

95 cÚ¡ 
AVSam¶eFÜm©
 *
p
 = 
codec
->
§m¶e_fmts
;

96 ; *
p
 != -1;…++) {

97 ià(*
p
 =ğ
¡
->
codec
->
§m¶e_fmt
)

100 ià(*
p
 == -1) {

101 if((
codec
->
ÿ·b™›s
 & 
AV_CODEC_CAP_LOSSLESS
è&& 
	`av_g‘_§m¶e_fmt_Çme
(
¡
->codec->
§m¶e_fmt
è>‡v_g‘_§m¶e_fmt_Çme(codec->
§m¶e_fmts
[0]))

102 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Conversion will‚ot be†ossless.\n");

103 if(
	`av_g‘_§m¶e_fmt_Çme
(
¡
->
codec
->
§m¶e_fmt
))

104 
	`av_log
(
NULL
, 
AV_LOG_WARNING
,

106 
	`av_g‘_§m¶e_fmt_Çme
(
¡
->
codec
->
§m¶e_fmt
),

107 
codec
->
Çme
,

108 
	`av_g‘_§m¶e_fmt_Çme
(
codec
->
§m¶e_fmts
[0]));

109 
¡
->
codec
->
§m¶e_fmt
 = codec->
§m¶e_fmts
[0];

112 
	}
}

114 *
	$choo£_pix_fmts
(
OuutSŒ—m
 *
o¡
)

116 
AVDiùiÚ¬yEÁry
 *
¡riù_diù
 = 
	`av_diù_g‘
(
o¡
->
’cod”_İts
, "¡riù", 
NULL
, 0);

117 ià(
¡riù_diù
)

119 
	`av_İt_£t
(
o¡
->
’c_ùx
, "¡riù", 
¡riù_diù
->
v®ue
, 0);

121 ià(
o¡
->
k“p_pix_fmt
) {

122 ià(
o¡
->
f‹r
)

123 
	`avf‹r_g¿ph_£t_auto_cÚv”t
(
o¡
->
f‹r
->
g¿ph
->graph,

124 
AVFILTER_AUTO_CONVERT_NONE
);

125 ià(
o¡
->
’c_ùx
->
pix_fmt
 =ğ
AV_PIX_FMT_NONE
)

126  
NULL
;

127  
	`av_¡rdup
(
	`av_g‘_pix_fmt_Çme
(
o¡
->
’c_ùx
->
pix_fmt
));

129 ià(
o¡
->
’c_ùx
->
pix_fmt
 !ğ
AV_PIX_FMT_NONE
) {

130  
	`av_¡rdup
(
	`av_g‘_pix_fmt_Çme
(
	`choo£_pix–_fmt
(
o¡
->
¡
, o¡->
’c_ùx
, o¡->
’c
, o¡->’c_ùx->
pix_fmt
)));

131 } ià(
o¡
->
’c
 && o¡->’c->
pix_fmts
) {

132 cÚ¡ 
AVPix–FÜm©
 *
p
;

133 
AVIOCÚ‹xt
 *
s
 = 
NULL
;

134 
ušt8_t
 *
»t
;

135 
Ën
;

137 ià(
	`avio_İ’_dyn_buf
(&
s
) < 0)

138 
	`ex™_´og¿m
(1);

140 
p
 = 
o¡
->
’c
->
pix_fmts
;

141 ià(
o¡
->
’c_ùx
->
¡riù_¡d_com¶Ÿnû
 <ğ
FF_COMPLIANCE_UNOFFICIAL
) {

142 
p
 = 
	`g‘_com¶Ÿnû_unofficŸl_pix_fmts
(
o¡
->
’c_ùx
->
codec_id
,…);

145 ; *
p
 !ğ
AV_PIX_FMT_NONE
;…++) {

146 cÚ¡ *
Çme
 = 
	`av_g‘_pix_fmt_Çme
(*
p
);

147 
	`avio_´štf
(
s
, "%s|", 
Çme
);

149 
Ën
 = 
	`avio_şo£_dyn_buf
(
s
, &
»t
);

150 
»t
[
Ën
 - 1] = 0;

151  
»t
;

153  
NULL
;

154 
	}
}

158 
	#DEF_CHOOSE_FORMAT
(
ty³
, 
v¬
, 
suµÜ‹d_li¡
, 
nÚe
, 
g‘_Çme
) \

159 *
choo£_
 ## 
v¬
 ## 
	`s
(
OuutSŒ—m
 *
o¡
) \

161 ià(
o¡
->
’c_ùx
->
v¬
 !ğ
nÚe
) { \

162 
	`g‘_Çme
(
o¡
->
’c_ùx
->
v¬
); \

163  
	`av_¡rdup
(
Çme
); \

164 } ià(
o¡
->
’c
 && o¡->’c->
suµÜ‹d_li¡
) { \

165 cÚ¡ 
ty³
 *
p
; \

166 
AVIOCÚ‹xt
 *
s
 = 
NULL
; \

167 
ušt8_t
 *
»t
; \

168 
Ën
; \

170 ià(
	`avio_İ’_dyn_buf
(&
s
) < 0) \

171 
	`ex™_´og¿m
(1); \

173 
p
 = 
o¡
->
’c
->
suµÜ‹d_li¡
; *°!ğ
nÚe
;…++) { \

174 
	`g‘_Çme
(*
p
); \

175 
	`avio_´štf
(
s
, "%s|", 
Çme
); \

177 
Ën
 = 
	`avio_şo£_dyn_buf
(
s
, &
»t
); \

178 
»t
[
Ën
 - 1] = 0; \

179  
»t
; \

181  
NULL
; \

182 }

	)

187 
	$DEF_CHOOSE_FORMAT
(
AVSam¶eFÜm©
, 
§m¶e_fmt
, 
§m¶e_fmts
,

188 
AV_SAMPLE_FMT_NONE
, 
GET_SAMPLE_FMT_NAME
)

190 
	$DEF_CHOOSE_FORMAT
(, 
§m¶e_¿‹
, 
suµÜ‹d_§m¶”©es
, 0,

191 
GET_SAMPLE_RATE_NAME
)

193 
	$DEF_CHOOSE_FORMAT
(
ušt64_t
, 
chªÃl_Ïyout
, 
chªÃl_Ïyouts
, 0,

194 
GET_CH_LAYOUT_NAME
)

196 
F‹rG¿ph
 *
	$š™_sim¶e_f‹rg¿ph
(
IÅutSŒ—m
 *
i¡
, 
OuutSŒ—m
 *
o¡
)

198 
F‹rG¿ph
 *
fg
 = 
	`av_m®locz
((*fg));

200 ià(!
fg
)

201 
	`ex™_´og¿m
(1);

202 
fg
->
šdex
 = 
nb_f‹rg¿phs
;

204 
	`GROW_ARRAY
(
fg
->
ouuts
, fg->
nb_ouuts
);

205 ià(!(
fg
->
ouuts
[0] = 
	`av_m®locz
((*fg->outputs[0]))))

206 
	`ex™_´og¿m
(1);

207 
fg
->
ouuts
[0]->
o¡
 = ost;

208 
fg
->
ouuts
[0]->
g¿ph
 = fg;

210 
o¡
->
f‹r
 = 
fg
->
ouuts
[0];

212 
	`GROW_ARRAY
(
fg
->
šputs
, fg->
nb_šputs
);

213 ià(!(
fg
->
šputs
[0] = 
	`av_m®locz
((*fg->inputs[0]))))

214 
	`ex™_´og¿m
(1);

215 
fg
->
šputs
[0]->
i¡
 = ist;

216 
fg
->
šputs
[0]->
g¿ph
 = fg;

218 
	`GROW_ARRAY
(
i¡
->
f‹rs
, i¡->
nb_f‹rs
);

219 
i¡
->
f‹rs
[i¡->
nb_f‹rs
 - 1] = 
fg
->
šputs
[0];

221 
	`GROW_ARRAY
(
f‹rg¿phs
, 
nb_f‹rg¿phs
);

222 
f‹rg¿phs
[
nb_f‹rg¿phs
 - 1] = 
fg
;

224  
fg
;

225 
	}
}

227 
	$š™_šput_f‹r
(
F‹rG¿ph
 *
fg
, 
AVF‹rInOut
 *
š
)

229 
IÅutSŒ—m
 *
i¡
 = 
NULL
;

230 
AVMedŸTy³
 
ty³
 = 
	`avf‹r_·d_g‘_ty³
(
š
->
f‹r_ùx
->
šput_·ds
, in->
·d_idx
);

231 
i
;

234 ià(
ty³
 !ğ
AVMEDIA_TYPE_VIDEO
 &&y³ !ğ
AVMEDIA_TYPE_AUDIO
) {

235 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Only video‡nd‡udio filters supported "

237 
	`ex™_´og¿m
(1);

240 ià(
š
->
Çme
) {

241 
AVFÜm©CÚ‹xt
 *
s
;

242 
AVSŒ—m
 *
¡
 = 
NULL
;

243 *
p
;

244 
fe_idx
 = 
	`¡¹Ş
(
š
->
Çme
, &
p
, 0);

246 ià(
fe_idx
 < 0 || fe_idx >ğ
nb_šput_fes
) {

247 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Invalid file index %d in filtergraph description %s.\n",

248 
fe_idx
, 
fg
->
g¿ph_desc
);

249 
	`ex™_´og¿m
(1);

251 
s
 = 
šput_fes
[
fe_idx
]->
ùx
;

253 
i
 = 0; i < 
s
->
nb_¡»ams
; i++) {

254 
AVMedŸTy³
 
¡»am_ty³
 = 
s
->
¡»ams
[
i
]->
codec
->
codec_ty³
;

255 ià(
¡»am_ty³
 !ğ
ty³
 &&

256 !(
¡»am_ty³
 =ğ
AVMEDIA_TYPE_SUBTITLE
 &&

257 
ty³
 =ğ
AVMEDIA_TYPE_VIDEO
 ))

259 ià(
	`check_¡»am_¥ecif›r
(
s
, s->
¡»ams
[
i
], *
p
 == ':' ?… + 1 :…) == 1) {

260 
¡
 = 
s
->
¡»ams
[
i
];

264 ià(!
¡
) {

265 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Stream specifier '%s' in filtergraph description %s "

266 "m©che nØ¡»ams.\n", 
p
, 
fg
->
g¿ph_desc
);

267 
	`ex™_´og¿m
(1);

269 
i¡
 = 
šput_¡»ams
[
šput_fes
[
fe_idx
]->
i¡_šdex
 + 
¡
->
šdex
];

272 
i
 = 0; i < 
nb_šput_¡»ams
; i++) {

273 
i¡
 = 
šput_¡»ams
[
i
];

274 ià(
i¡
->
dec_ùx
->
codec_ty³
 =ğ
ty³
 && i¡->
disÿrd
)

277 ià(
i
 =ğ
nb_šput_¡»ams
) {

278 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Cannot find‡ matching stream for "

279 "uÆab–ed iÅuˆ·d %d oÀf‹¸%s\n", 
š
->
·d_idx
,

280 
š
->
f‹r_ùx
->
Çme
);

281 
	`ex™_´og¿m
(1);

284 
	`av_as£¹0
(
i¡
);

286 
i¡
->
disÿrd
 = 0;

287 
i¡
->
decodšg_Ãeded
 |ğ
DECODING_FOR_FILTER
;

288 
i¡
->
¡
->
disÿrd
 = 
AVDISCARD_NONE
;

290 
	`GROW_ARRAY
(
fg
->
šputs
, fg->
nb_šputs
);

291 ià(!(
fg
->
šputs
[fg->
nb_šputs
 - 1] = 
	`av_m®locz
((*fg->inputs[0]))))

292 
	`ex™_´og¿m
(1);

293 
fg
->
šputs
[fg->
nb_šputs
 - 1]->
i¡
 = ist;

294 
fg
->
šputs
[fg->
nb_šputs
 - 1]->
g¿ph
 = fg;

296 
	`GROW_ARRAY
(
i¡
->
f‹rs
, i¡->
nb_f‹rs
);

297 
i¡
->
f‹rs
[i¡->
nb_f‹rs
 - 1] = 
fg
->
šputs
[fg->
nb_šputs
 - 1];

298 
	}
}

300 
	$š™_com¶ex_f‹rg¿ph
(
F‹rG¿ph
 *
fg
)

302 
AVF‹rInOut
 *
šputs
, *
ouuts
, *
cur
;

303 
AVF‹rG¿ph
 *
g¿ph
;

304 
»t
 = 0;

308 
g¿ph
 = 
	`avf‹r_g¿ph_®loc
();

309 ià(!
g¿ph
)

310  
	`AVERROR
(
ENOMEM
);

312 
»t
 = 
	`avf‹r_g¿ph_·r£2
(
g¿ph
, 
fg
->
g¿ph_desc
, &
šputs
, &
ouuts
);

313 ià(
»t
 < 0)

314 
ç
;

316 
cur
 = 
šputs
; cur; cu¸ğcur->
Ãxt
)

317 
	`š™_šput_f‹r
(
fg
, 
cur
);

319 
cur
 = 
ouuts
; cur;) {

320 
	`GROW_ARRAY
(
fg
->
ouuts
, fg->
nb_ouuts
);

321 
fg
->
ouuts
[fg->
nb_ouuts
 - 1] = 
	`av_m®locz
((*fg->outputs[0]));

322 ià(!
fg
->
ouuts
[fg->
nb_ouuts
 - 1])

323 
	`ex™_´og¿m
(1);

325 
fg
->
ouuts
[fg->
nb_ouuts
 - 1]->
g¿ph
 = fg;

326 
fg
->
ouuts
[fg->
nb_ouuts
 - 1]->
out_tmp
 = 
cur
;

327 
fg
->
ouuts
[fg->
nb_ouuts
 - 1]->
ty³
 = 
	`avf‹r_·d_g‘_ty³
(
cur
->
f‹r_ùx
->
ouut_·ds
,

328 
cur
->
·d_idx
);

329 
cur
 = cur->
Ãxt
;

330 
fg
->
ouuts
[fg->
nb_ouuts
 - 1]->
out_tmp
->
Ãxt
 = 
NULL
;

333 
ç
:

334 
	`avf‹r_šout_ä“
(&
šputs
);

335 
	`avf‹r_g¿ph_ä“
(&
g¿ph
);

336  
»t
;

337 
	}
}

339 
	$š£¹_Œim
(
št64_t
 
¡¬t_time
, iÁ64_ˆ
du¿tiÚ
,

340 
AVF‹rCÚ‹xt
 **
Ï¡_f‹r
, *
·d_idx
,

341 cÚ¡ *
f‹r_Çme
)

343 
AVF‹rG¿ph
 *
g¿ph
 = (*
Ï¡_f‹r
)->graph;

344 
AVF‹rCÚ‹xt
 *
ùx
;

345 cÚ¡ 
AVF‹r
 *
Œim
;

346 
AVMedŸTy³
 
ty³
 = 
	`avf‹r_·d_g‘_ty³
((*
Ï¡_f‹r
)->
ouut_·ds
, *
·d_idx
);

347 cÚ¡ *
Çme
 = (
ty³
 =ğ
AVMEDIA_TYPE_VIDEO
) ? "trim" : "atrim";

348 
»t
 = 0;

350 ià(
du¿tiÚ
 =ğ
INT64_MAX
 && 
¡¬t_time
 =ğ
AV_NOPTS_VALUE
)

353 
Œim
 = 
	`avf‹r_g‘_by_Çme
(
Çme
);

354 ià(!
Œim
) {

355 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "%s filter‚ot…resent, cannot†imit "

356 "»cÜdšgime.\n", 
Çme
);

357  
AVERROR_FILTER_NOT_FOUND
;

360 
ùx
 = 
	`avf‹r_g¿ph_®loc_f‹r
(
g¿ph
, 
Œim
, 
f‹r_Çme
);

361 ià(!
ùx
)

362  
	`AVERROR
(
ENOMEM
);

364 ià(
du¿tiÚ
 !ğ
INT64_MAX
) {

365 
»t
 = 
	`av_İt_£t_št
(
ùx
, "du¿tiÚi", 
du¿tiÚ
,

366 
AV_OPT_SEARCH_CHILDREN
);

368 ià(
»t
 >ğ0 && 
¡¬t_time
 !ğ
AV_NOPTS_VALUE
) {

369 
»t
 = 
	`av_İt_£t_št
(
ùx
, "¡¬ti", 
¡¬t_time
,

370 
AV_OPT_SEARCH_CHILDREN
);

372 ià(
»t
 < 0) {

373 
	`av_log
(
ùx
, 
AV_LOG_ERROR
, "E¼Ü cÚfiguršgh% f‹r", 
Çme
);

374  
»t
;

377 
»t
 = 
	`avf‹r_š™_¡r
(
ùx
, 
NULL
);

378 ià(
»t
 < 0)

379  
»t
;

381 
»t
 = 
	`avf‹r_lšk
(*
Ï¡_f‹r
, *
·d_idx
, 
ùx
, 0);

382 ià(
»t
 < 0)

383  
»t
;

385 *
Ï¡_f‹r
 = 
ùx
;

386 *
·d_idx
 = 0;

388 
	}
}

390 
	$š£¹_f‹r
(
AVF‹rCÚ‹xt
 **
Ï¡_f‹r
, *
·d_idx
,

391 cÚ¡ *
f‹r_Çme
, cÚ¡ *
¬gs
)

393 
AVF‹rG¿ph
 *
g¿ph
 = (*
Ï¡_f‹r
)->graph;

394 
AVF‹rCÚ‹xt
 *
ùx
;

395 
»t
;

397 
»t
 = 
	`avf‹r_g¿ph_ü—‹_f‹r
(&
ùx
,

398 
	`avf‹r_g‘_by_Çme
(
f‹r_Çme
),

399 
f‹r_Çme
, 
¬gs
, 
NULL
, 
g¿ph
);

400 ià(
»t
 < 0)

401  
»t
;

403 
»t
 = 
	`avf‹r_lšk
(*
Ï¡_f‹r
, *
·d_idx
, 
ùx
, 0);

404 ià(
»t
 < 0)

405  
»t
;

407 *
Ï¡_f‹r
 = 
ùx
;

408 *
·d_idx
 = 0;

410 
	}
}

412 
	$cÚfigu»_ouut_video_f‹r
(
F‹rG¿ph
 *
fg
, 
OuutF‹r
 *
of‹r
, 
AVF‹rInOut
 *
out
)

414 *
pix_fmts
;

415 
OuutSŒ—m
 *
o¡
 = 
of‹r
->ost;

416 
OuutFe
 *
of
 = 
ouut_fes
[
o¡
->
fe_šdex
];

417 
AVCodecCÚ‹xt
 *
codec
 = 
o¡
->
’c_ùx
;

418 
AVF‹rCÚ‹xt
 *
Ï¡_f‹r
 = 
out
->
f‹r_ùx
;

419 
·d_idx
 = 
out
->pad_idx;

420 
»t
;

421 
Çme
[255];

423 
	`¢´štf
(
Çme
, Òame), "ouuˆ¡»am %d:%d", 
o¡
->
fe_šdex
, o¡->
šdex
);

424 
»t
 = 
	`avf‹r_g¿ph_ü—‹_f‹r
(&
of‹r
->
f‹r
,

425 
	`avf‹r_g‘_by_Çme
("buffersink"),

426 
Çme
, 
NULL
, NULL, 
fg
->
g¿ph
);

428 ià(
»t
 < 0)

429  
»t
;

431 ià(
codec
->
width
 || codec->
height
) {

432 
¬gs
[255];

433 
AVF‹rCÚ‹xt
 *
f‹r
;

434 
AVDiùiÚ¬yEÁry
 *
e
 = 
NULL
;

436 
	`¢´štf
(
¬gs
, (args), "%d:%d",

437 
codec
->
width
,

438 
codec
->
height
);

440 (
e
 = 
	`av_diù_g‘
(
o¡
->
sws_diù
, "",ƒ,

441 
AV_DICT_IGNORE_SUFFIX
))) {

442 
	`av_¡¾ÿtf
(
¬gs
, ×rgs), ":%s=%s", 
e
->
key
,ƒ->
v®ue
);

445 
	`¢´štf
(
Çme
, (name), "scaler for output stream %d:%d",

446 
o¡
->
fe_šdex
, o¡->
šdex
);

447 ià((
»t
 = 
	`avf‹r_g¿ph_ü—‹_f‹r
(&
f‹r
, 
	`avf‹r_g‘_by_Çme
("scale"),

448 
Çme
, 
¬gs
, 
NULL
, 
fg
->
g¿ph
)) < 0)

449  
»t
;

450 ià((
»t
 = 
	`avf‹r_lšk
(
Ï¡_f‹r
, 
·d_idx
, 
f‹r
, 0)) < 0)

451  
»t
;

453 
Ï¡_f‹r
 = 
f‹r
;

454 
·d_idx
 = 0;

457 ià((
pix_fmts
 = 
	`choo£_pix_fmts
(
o¡
))) {

458 
AVF‹rCÚ‹xt
 *
f‹r
;

459 
	`¢´štf
(
Çme
, (name), "pixel format for output stream %d:%d",

460 
o¡
->
fe_šdex
, o¡->
šdex
);

461 
»t
 = 
	`avf‹r_g¿ph_ü—‹_f‹r
(&
f‹r
,

462 
	`avf‹r_g‘_by_Çme
("format"),

463 "fÜm©", 
pix_fmts
, 
NULL
, 
fg
->
g¿ph
);

464 
	`av_ä“p
(&
pix_fmts
);

465 ià(
»t
 < 0)

466  
»t
;

467 ià((
»t
 = 
	`avf‹r_lšk
(
Ï¡_f‹r
, 
·d_idx
, 
f‹r
, 0)) < 0)

468  
»t
;

470 
Ï¡_f‹r
 = 
f‹r
;

471 
·d_idx
 = 0;

474 ià(
o¡
->
äame_¿‹
.
num
 && 0) {

475 
AVF‹rCÚ‹xt
 *
ås
;

476 
¬gs
[255];

478 
	`¢´štf
(
¬gs
, ×rgs), "ås=%d/%d", 
o¡
->
äame_¿‹
.
num
,

479 
o¡
->
äame_¿‹
.
d’
);

480 
	`¢´štf
(
Çme
, (name), "fps for output stream %d:%d",

481 
o¡
->
fe_šdex
, o¡->
šdex
);

482 
»t
 = 
	`avf‹r_g¿ph_ü—‹_f‹r
(&
ås
, 
	`avf‹r_g‘_by_Çme
("fps"),

483 
Çme
, 
¬gs
, 
NULL
, 
fg
->
g¿ph
);

484 ià(
»t
 < 0)

485  
»t
;

487 
»t
 = 
	`avf‹r_lšk
(
Ï¡_f‹r
, 
·d_idx
, 
ås
, 0);

488 ià(
»t
 < 0)

489  
»t
;

490 
Ï¡_f‹r
 = 
ås
;

491 
·d_idx
 = 0;

494 
	`¢´štf
(
Çme
, (name), "trim for output stream %d:%d",

495 
o¡
->
fe_šdex
, o¡->
šdex
);

496 
»t
 = 
	`š£¹_Œim
(
of
->
¡¬t_time
, of->
»cÜdšg_time
,

497 &
Ï¡_f‹r
, &
·d_idx
, 
Çme
);

498 ià(
»t
 < 0)

499  
»t
;

502 ià((
»t
 = 
	`avf‹r_lšk
(
Ï¡_f‹r
, 
·d_idx
, 
of‹r
->
f‹r
, 0)) < 0)

503  
»t
;

506 
	}
}

508 
	$cÚfigu»_ouut_audio_f‹r
(
F‹rG¿ph
 *
fg
, 
OuutF‹r
 *
of‹r
, 
AVF‹rInOut
 *
out
)

510 
OuutSŒ—m
 *
o¡
 = 
of‹r
->ost;

511 
OuutFe
 *
of
 = 
ouut_fes
[
o¡
->
fe_šdex
];

512 
AVCodecCÚ‹xt
 *
codec
 = 
o¡
->
’c_ùx
;

513 
AVF‹rCÚ‹xt
 *
Ï¡_f‹r
 = 
out
->
f‹r_ùx
;

514 
·d_idx
 = 
out
->pad_idx;

515 *
§m¶e_fmts
, *
§m¶e_¿‹s
, *
chªÃl_Ïyouts
;

516 
Çme
[255];

517 
»t
;

519 
	`¢´štf
(
Çme
, Òame), "ouuˆ¡»am %d:%d", 
o¡
->
fe_šdex
, o¡->
šdex
);

520 
»t
 = 
	`avf‹r_g¿ph_ü—‹_f‹r
(&
of‹r
->
f‹r
,

521 
	`avf‹r_g‘_by_Çme
("abuffersink"),

522 
Çme
, 
NULL
, NULL, 
fg
->
g¿ph
);

523 ià(
»t
 < 0)

524  
»t
;

525 ià((
»t
 = 
	`av_İt_£t_št
(
of‹r
->
f‹r
, "®l_chªÃl_couÁs", 1, 
AV_OPT_SEARCH_CHILDREN
)) < 0)

526  
»t
;

528 
	#AUTO_INSERT_FILTER
(
İt_Çme
, 
f‹r_Çme
, 
¬g
) do { \

529 
AVF‹rCÚ‹xt
 *
ft_ùx
; \

531 
	`av_log
(
NULL
, 
AV_LOG_INFO
, 
İt_Çme
 " is forwardedo†avfi " \

532 "sim¬lyØ-aà" 
f‹r_Çme
 "=%s.\n", 
¬g
); \

534 
»t
 = 
	`avf‹r_g¿ph_ü—‹_f‹r
(&
ft_ùx
, \

535 
	`avf‹r_g‘_by_Çme
(
f‹r_Çme
), \

536 
f‹r_Çme
, 
¬g
, 
NULL
, 
fg
->
g¿ph
); \

537 ià(
»t
 < 0) \

538  
»t
; \

540 
»t
 = 
	`avf‹r_lšk
(
Ï¡_f‹r
, 
·d_idx
, 
ft_ùx
, 0); \

541 ià(
»t
 < 0) \

542  
»t
; \

544 
Ï¡_f‹r
 = 
ft_ùx
; \

545 
·d_idx
 = 0; \

546 } 0)

	)

547 ià(
o¡
->
audio_chªÃls_m­³d
) {

548 
i
;

549 
AVBPršt
 
·n_buf
;

550 
	`av_b´št_š™
(&
·n_buf
, 256, 8192);

551 
	`av_b´štf
(&
·n_buf
, "0x%"
PRIx64
,

552 
	`av_g‘_deçuÉ_chªÃl_Ïyout
(
o¡
->
audio_chªÃls_m­³d
));

553 
i
 = 0; i < 
o¡
->
audio_chªÃls_m­³d
; i++)

554 ià(
o¡
->
audio_chªÃls_m­
[
i
] != -1)

555 
	`av_b´štf
(&
·n_buf
, "|c%d=c%d", 
i
, 
o¡
->
audio_chªÃls_m­
[i]);

557 
	`AUTO_INSERT_FILTER
("-m­_chªÃl", "·n", 
·n_buf
.
¡r
);

558 
	`av_b´št_fš®ize
(&
·n_buf
, 
NULL
);

561 ià(
codec
->
chªÃls
 && !codec->
chªÃl_Ïyout
)

562 
codec
->
chªÃl_Ïyout
 = 
	`av_g‘_deçuÉ_chªÃl_Ïyout
(codec->
chªÃls
);

564 
§m¶e_fmts
 = 
	`choo£_§m¶e_fmts
(
o¡
);

565 
§m¶e_¿‹s
 = 
	`choo£_§m¶e_¿‹s
(
o¡
);

566 
chªÃl_Ïyouts
 = 
	`choo£_chªÃl_Ïyouts
(
o¡
);

567 ià(
§m¶e_fmts
 || 
§m¶e_¿‹s
 || 
chªÃl_Ïyouts
) {

568 
AVF‹rCÚ‹xt
 *
fÜm©
;

569 
¬gs
[256];

570 
¬gs
[0] = 0;

572 ià(
§m¶e_fmts
)

573 
	`av_¡¾ÿtf
(
¬gs
, (args), "sample_fmts=%s:",

574 
§m¶e_fmts
);

575 ià(
§m¶e_¿‹s
)

576 
	`av_¡¾ÿtf
(
¬gs
, (args), "sample_rates=%s:",

577 
§m¶e_¿‹s
);

578 ià(
chªÃl_Ïyouts
)

579 
	`av_¡¾ÿtf
(
¬gs
, (args), "channel_layouts=%s:",

580 
chªÃl_Ïyouts
);

582 
	`av_ä“p
(&
§m¶e_fmts
);

583 
	`av_ä“p
(&
§m¶e_¿‹s
);

584 
	`av_ä“p
(&
chªÃl_Ïyouts
);

586 
	`¢´štf
(
Çme
, (name), "audio format for output stream %d:%d",

587 
o¡
->
fe_šdex
, o¡->
šdex
);

588 
»t
 = 
	`avf‹r_g¿ph_ü—‹_f‹r
(&
fÜm©
,

589 
	`avf‹r_g‘_by_Çme
("aformat"),

590 
Çme
, 
¬gs
, 
NULL
, 
fg
->
g¿ph
);

591 ià(
»t
 < 0)

592  
»t
;

594 
»t
 = 
	`avf‹r_lšk
(
Ï¡_f‹r
, 
·d_idx
, 
fÜm©
, 0);

595 ià(
»t
 < 0)

596  
»t
;

598 
Ï¡_f‹r
 = 
fÜm©
;

599 
·d_idx
 = 0;

602 ià(
audio_vŞume
 != 256 && 0) {

603 
¬gs
[256];

605 
	`¢´štf
(
¬gs
, ×rgs), "%f", 
audio_vŞume
 / 256.);

606 
	`AUTO_INSERT_FILTER
("-vŞ", "vŞume", 
¬gs
);

609 ià(
o¡
->
­ad
 && 
of
->
shÜ‹¡
) {

610 
¬gs
[256];

611 
i
;

613 
i
=0; i<
of
->
ùx
->
nb_¡»ams
; i++)

614 ià(
of
->
ùx
->
¡»ams
[
i
]->
codec
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
)

617 ià(
i
<
of
->
ùx
->
nb_¡»ams
) {

618 
	`¢´štf
(
¬gs
, ×rgs), "%s", 
o¡
->
­ad
);

619 
	`AUTO_INSERT_FILTER
("-­ad", "­ad", 
¬gs
);

623 
	`¢´štf
(
Çme
, (name), "trim for output stream %d:%d",

624 
o¡
->
fe_šdex
, o¡->
šdex
);

625 
»t
 = 
	`š£¹_Œim
(
of
->
¡¬t_time
, of->
»cÜdšg_time
,

626 &
Ï¡_f‹r
, &
·d_idx
, 
Çme
);

627 ià(
»t
 < 0)

628  
»t
;

630 ià((
»t
 = 
	`avf‹r_lšk
(
Ï¡_f‹r
, 
·d_idx
, 
of‹r
->
f‹r
, 0)) < 0)

631  
»t
;

634 
	}
}

636 
	#DESCRIBE_FILTER_LINK
(
f
, 
šout
, 
š
) \

638 
AVF‹rCÚ‹xt
 *
ùx
 = 
šout
->
f‹r_ùx
; \

639 
AVF‹rPad
 *
·ds
 = 
š
 ? 
ùx
->
šput_·ds
 : ctx->
ouut_·ds
; \

640 
nb_·ds
 = 
š
 ? 
ùx
->
nb_šputs
 : ctx->
nb_ouuts
; \

641 
AVIOCÚ‹xt
 *
pb
; \

643 ià(
	`avio_İ’_dyn_buf
(&
pb
) < 0) \

644 
	`ex™_´og¿m
(1); \

646 
	`avio_´štf
(
pb
, "%s", 
ùx
->
f‹r
->
Çme
); \

647 ià(
nb_·ds
 > 1) \

648 
	`avio_´štf
(
pb
, ":%s", 
	`avf‹r_·d_g‘_Çme
(
·ds
, 
šout
->
·d_idx
));\

649 
	`avio_w8
(
pb
, 0); \

650 
	`avio_şo£_dyn_buf
(
pb
, &
f
->
Çme
); \

651 }

	)

653 
	$cÚfigu»_ouut_f‹r
(
F‹rG¿ph
 *
fg
, 
OuutF‹r
 *
of‹r
, 
AVF‹rInOut
 *
out
)

655 
	`av_ä“p
(&
of‹r
->
Çme
);

656 
	`DESCRIBE_FILTER_LINK
(
of‹r
, 
out
, 0);

658 ià(!
of‹r
->
o¡
) {

659 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "F‹¸% ha ¨uncÚÃùed ouut\n", 
of‹r
->
Çme
);

660 
	`ex™_´og¿m
(1);

663 
	`avf‹r_·d_g‘_ty³
(
out
->
f‹r_ùx
->
ouut_·ds
, out->
·d_idx
)) {

664 
AVMEDIA_TYPE_VIDEO
:  
	`cÚfigu»_ouut_video_f‹r
(
fg
, 
of‹r
, 
out
);

665 
AVMEDIA_TYPE_AUDIO
:  
	`cÚfigu»_ouut_audio_f‹r
(
fg
, 
of‹r
, 
out
);

666 : 
	`av_as£¹0
(0);

668 
	}
}

670 
	$sub2video_´•¬e
(
IÅutSŒ—m
 *
i¡
)

672 
AVFÜm©CÚ‹xt
 *
avf
 = 
šput_fes
[
i¡
->
fe_šdex
]->
ùx
;

673 
i
, 
w
, 
h
;

678 
w
 = 
i¡
->
dec_ùx
->
width
;

679 
h
 = 
i¡
->
dec_ùx
->
height
;

680 ià(!(
w
 && 
h
)) {

681 
i
 = 0; i < 
avf
->
nb_¡»ams
; i++) {

682 ià(
avf
->
¡»ams
[
i
]->
codec
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
) {

683 
w
 = 
	`FFMAX
(w, 
avf
->
¡»ams
[
i
]->
codec
->
width
);

684 
h
 = 
	`FFMAX
(h, 
avf
->
¡»ams
[
i
]->
codec
->
height
);

687 ià(!(
w
 && 
h
)) {

688 
w
 = 
	`FFMAX
(w, 720);

689 
h
 = 
	`FFMAX
(h, 576);

691 
	`av_log
(
avf
, 
AV_LOG_INFO
, "sub2video: usšg %dx%d cªvas\n", 
w
, 
h
);

693 
i¡
->
sub2video
.
w
 = i¡->
»§m¶e_width
 = w;

694 
i¡
->
sub2video
.
h
 = i¡->
»§m¶e_height
 = h;

698 
i¡
->
»§m¶e_pix_fmt
 = i¡->
dec_ùx
->
pix_fmt
 = 
AV_PIX_FMT_RGB32
;

700 
i¡
->
sub2video
.
äame
 = 
	`av_äame_®loc
();

701 ià(!
i¡
->
sub2video
.
äame
)

702  
	`AVERROR
(
ENOMEM
);

703 
i¡
->
sub2video
.
Ï¡_±s
 = 
INT64_MIN
;

705 
	}
}

707 
	$cÚfigu»_šput_video_f‹r
(
F‹rG¿ph
 *
fg
, 
IÅutF‹r
 *
if‹r
,

708 
AVF‹rInOut
 *
š
)

710 
AVF‹rCÚ‹xt
 *
Ï¡_f‹r
;

711 cÚ¡ 
AVF‹r
 *
bufãr_ft
 = 
	`avf‹r_g‘_by_Çme
("buffer");

712 
IÅutSŒ—m
 *
i¡
 = 
if‹r
->ist;

713 
IÅutFe
 *
f
 = 
šput_fes
[
i¡
->
fe_šdex
];

714 
AVR©iÚ®
 
tb
 = 
i¡
->
äam”©e
.
num
 ? 
	`av_šv_q
(ist->framerate) :

715 
i¡
->
¡
->
time_ba£
;

716 
AVR©iÚ®
 
ä
 = 
i¡
->
äam”©e
;

717 
AVR©iÚ®
 
§r
;

718 
AVBPršt
 
¬gs
;

719 
Çme
[255];

720 
»t
, 
·d_idx
 = 0;

721 
št64_t
 
tsoff£t
 = 0;

723 ià(
i¡
->
dec_ùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_AUDIO
) {

724 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Cannot connect video filtero‡udio input\n");

725  
	`AVERROR
(
EINVAL
);

728 ià(!
ä
.
num
)

729 
ä
 = 
	`av_guess_äame_¿‹
(
šput_fes
[
i¡
->
fe_šdex
]->
ùx
, i¡->
¡
, 
NULL
);

731 ià(
i¡
->
dec_ùx
->
codec_ty³
 =ğ
AVMEDIA_TYPE_SUBTITLE
) {

732 
»t
 = 
	`sub2video_´•¬e
(
i¡
);

733 ià(
»t
 < 0)

734  
»t
;

737 
§r
 = 
i¡
->
¡
->
§m¶e_a¥eù_¿tio
.
num
 ?

738 
i¡
->
¡
->
§m¶e_a¥eù_¿tio
 :

739 
i¡
->
dec_ùx
->
§m¶e_a¥eù_¿tio
;

740 if(!
§r
.
d’
)

741 
§r
 = (
AVR©iÚ®
){0,1};

742 
	`av_b´št_š™
(&
¬gs
, 0, 1);

743 
	`av_b´štf
(&
¬gs
,

745 "pix–_a¥eù=%d/%d:sws_·¿m=æags=%d", 
i¡
->
»§m¶e_width
,

746 
i¡
->
»§m¶e_height
,

747 
i¡
->
hwacûl_»Œ›ve_d©a
 ? i¡->
hwacûl_»Œ›ved_pix_fmt
 : i¡->
»§m¶e_pix_fmt
,

748 
tb
.
num
,b.
d’
, 
§r
.num, sar.den,

749 
SWS_BILINEAR
 + ((
i¡
->
dec_ùx
->
æags
&
AV_CODEC_FLAG_BITEXACT
è? 
SWS_BITEXACT
:0));

750 ià(
ä
.
num
 && fr.
d’
)

751 
	`av_b´štf
(&
¬gs
, ":äame_¿‹=%d/%d", 
ä
.
num
, fr.
d’
);

752 
	`¢´štf
(
Çme
, Òame), "g¿ph %d iÅuˆäom sŒ—m %d:%d", 
fg
->
šdex
,

753 
i¡
->
fe_šdex
, i¡->
¡
->
šdex
);

755 ià((
»t
 = 
	`avf‹r_g¿ph_ü—‹_f‹r
(&
if‹r
->
f‹r
, 
bufãr_ft
, 
Çme
,

756 
¬gs
.
¡r
, 
NULL
, 
fg
->
g¿ph
)) < 0)

757  
»t
;

758 
Ï¡_f‹r
 = 
if‹r
->
f‹r
;

760 ià(
i¡
->
autÜÙ©e
) {

761 
th‘a
 = 
	`g‘_rÙ©iÚ
(
i¡
->
¡
);

763 ià(
	`çbs
(
th‘a
 - 90) < 1.0) {

764 
»t
 = 
	`š£¹_f‹r
(&
Ï¡_f‹r
, &
·d_idx
, "transpose", "clock");

765 } ià(
	`çbs
(
th‘a
 - 180) < 1.0) {

766 
»t
 = 
	`š£¹_f‹r
(&
Ï¡_f‹r
, &
·d_idx
, "hæ", 
NULL
);

767 ià(
»t
 < 0)

768  
»t
;

769 
»t
 = 
	`š£¹_f‹r
(&
Ï¡_f‹r
, &
·d_idx
, "væ", 
NULL
);

770 } ià(
	`çbs
(
th‘a
 - 270) < 1.0) {

771 
»t
 = 
	`š£¹_f‹r
(&
Ï¡_f‹r
, &
·d_idx
, "transpose", "cclock");

772 } ià(
	`çbs
(
th‘a
) > 1.0) {

773 
rÙ©e_buf
[64];

774 
	`¢´štf
(
rÙ©e_buf
, ÔÙ©e_buf), "%f*PI/180", 
th‘a
);

775 
»t
 = 
	`š£¹_f‹r
(&
Ï¡_f‹r
, &
·d_idx
, "rÙ©e", 
rÙ©e_buf
);

777 ià(
»t
 < 0)

778  
»t
;

781 ià(
i¡
->
äam”©e
.
num
) {

782 
AVF‹rCÚ‹xt
 *
£ts
;

784 
	`¢´štf
(
Çme
, (name), "force CFR for input from stream %d:%d",

785 
i¡
->
fe_šdex
, i¡->
¡
->
šdex
);

786 ià((
»t
 = 
	`avf‹r_g¿ph_ü—‹_f‹r
(&
£ts
,

787 
	`avf‹r_g‘_by_Çme
("setpts"),

788 
Çme
, "N", 
NULL
,

789 
fg
->
g¿ph
)) < 0)

790  
»t
;

792 ià((
»t
 = 
	`avf‹r_lšk
(
Ï¡_f‹r
, 0, 
£ts
, 0)) < 0)

793  
»t
;

795 
Ï¡_f‹r
 = 
£ts
;

798 ià(
do_deš‹¾aû
) {

799 
AVF‹rCÚ‹xt
 *
yadif
;

801 
	`¢´štf
(
Çme
, (name), "deinterlace input from stream %d:%d",

802 
i¡
->
fe_šdex
, i¡->
¡
->
šdex
);

803 ià((
»t
 = 
	`avf‹r_g¿ph_ü—‹_f‹r
(&
yadif
,

804 
	`avf‹r_g‘_by_Çme
("yadif"),

805 
Çme
, "", 
NULL
,

806 
fg
->
g¿ph
)) < 0)

807  
»t
;

809 ià((
»t
 = 
	`avf‹r_lšk
(
Ï¡_f‹r
, 0, 
yadif
, 0)) < 0)

810  
»t
;

812 
Ï¡_f‹r
 = 
yadif
;

815 
	`¢´štf
(
Çme
, (name), "trim for input stream %d:%d",

816 
i¡
->
fe_šdex
, i¡->
¡
->
šdex
);

817 ià(
cİy_ts
) {

818 
tsoff£t
 = 
f
->
¡¬t_time
 =ğ
AV_NOPTS_VALUE
 ? 0 : f->start_time;

819 ià(!
¡¬t_©_z”o
 && 
f
->
ùx
->
¡¬t_time
 !ğ
AV_NOPTS_VALUE
)

820 
tsoff£t
 +ğ
f
->
ùx
->
¡¬t_time
;

822 
»t
 = 
	`š£¹_Œim
(((
f
->
¡¬t_time
 =ğ
AV_NOPTS_VALUE
è|| !f->
accu¿‹_£ek
) ?

823 
AV_NOPTS_VALUE
 : 
tsoff£t
, 
f
->
»cÜdšg_time
,

824 &
Ï¡_f‹r
, &
·d_idx
, 
Çme
);

825 ià(
»t
 < 0)

826  
»t
;

828 ià((
»t
 = 
	`avf‹r_lšk
(
Ï¡_f‹r
, 0, 
š
->
f‹r_ùx
, in->
·d_idx
)) < 0)

829  
»t
;

831 
	}
}

833 
	$cÚfigu»_šput_audio_f‹r
(
F‹rG¿ph
 *
fg
, 
IÅutF‹r
 *
if‹r
,

834 
AVF‹rInOut
 *
š
)

836 
AVF‹rCÚ‹xt
 *
Ï¡_f‹r
;

837 cÚ¡ 
AVF‹r
 *
abufãr_ft
 = 
	`avf‹r_g‘_by_Çme
("abuffer");

838 
IÅutSŒ—m
 *
i¡
 = 
if‹r
->ist;

839 
IÅutFe
 *
f
 = 
šput_fes
[
i¡
->
fe_šdex
];

840 
AVBPršt
 
¬gs
;

841 
Çme
[255];

842 
»t
, 
·d_idx
 = 0;

843 
št64_t
 
tsoff£t
 = 0;

845 ià(
i¡
->
dec_ùx
->
codec_ty³
 !ğ
AVMEDIA_TYPE_AUDIO
) {

846 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Cannot connect‡udio filtero‚on‡udio input\n");

847  
	`AVERROR
(
EINVAL
);

850 
	`av_b´št_š™
(&
¬gs
, 0, 
AV_BPRINT_SIZE_AUTOMATIC
);

851 
	`av_b´štf
(&
¬gs
, "time_base=%d/%d:sample_rate=%d:sample_fmt=%s",

852 1, 
i¡
->
dec_ùx
->
§m¶e_¿‹
,

853 
i¡
->
dec_ùx
->
§m¶e_¿‹
,

854 
	`av_g‘_§m¶e_fmt_Çme
(
i¡
->
dec_ùx
->
§m¶e_fmt
));

855 ià(
i¡
->
dec_ùx
->
chªÃl_Ïyout
)

856 
	`av_b´štf
(&
¬gs
, ":chªÃl_Ïyout=0x%"
PRIx64
,

857 
i¡
->
dec_ùx
->
chªÃl_Ïyout
);

859 
	`av_b´štf
(&
¬gs
, ":chªÃls=%d", 
i¡
->
dec_ùx
->
chªÃls
);

860 
	`¢´štf
(
Çme
, Òame), "g¿ph %d iÅuˆäom sŒ—m %d:%d", 
fg
->
šdex
,

861 
i¡
->
fe_šdex
, i¡->
¡
->
šdex
);

863 ià((
»t
 = 
	`avf‹r_g¿ph_ü—‹_f‹r
(&
if‹r
->
f‹r
, 
abufãr_ft
,

864 
Çme
, 
¬gs
.
¡r
, 
NULL
,

865 
fg
->
g¿ph
)) < 0)

866  
»t
;

867 
Ï¡_f‹r
 = 
if‹r
->
f‹r
;

869 
	#AUTO_INSERT_FILTER_INPUT
(
İt_Çme
, 
f‹r_Çme
, 
¬g
) do { \

870 
AVF‹rCÚ‹xt
 *
ft_ùx
; \

872 
	`av_log
(
NULL
, 
AV_LOG_INFO
, 
İt_Çme
 " is forwardedo†avfi " \

873 "sim¬lyØ-aà" 
f‹r_Çme
 "=%s.\n", 
¬g
); \

875 
	`¢´štf
(
Çme
, (name), "graph %d %s for input stream %d:%d", \

876 
fg
->
šdex
, 
f‹r_Çme
, 
i¡
->
fe_šdex
, i¡->
¡
->index); \

877 
»t
 = 
	`avf‹r_g¿ph_ü—‹_f‹r
(&
ft_ùx
, \

878 
	`avf‹r_g‘_by_Çme
(
f‹r_Çme
), \

879 
Çme
, 
¬g
, 
NULL
, 
fg
->
g¿ph
); \

880 ià(
»t
 < 0) \

881  
»t
; \

883 
»t
 = 
	`avf‹r_lšk
(
Ï¡_f‹r
, 0, 
ft_ùx
, 0); \

884 ià(
»t
 < 0) \

885  
»t
; \

887 
Ï¡_f‹r
 = 
ft_ùx
; \

888 } 0)

	)

890 ià(
audio_sync_m‘hod
 > 0) {

891 
¬gs
[256] = {0};

893 
	`av_¡¾ÿtf
(
¬gs
, ×rgs), "async=%d", 
audio_sync_m‘hod
);

894 ià(
audio_driá_th»shŞd
 != 0.1)

895 
	`av_¡¾ÿtf
(
¬gs
, ×rgs), ":mš_h¬d_comp=%f", 
audio_driá_th»shŞd
);

896 ià(!
fg
->
»cÚfigu¿tiÚ
)

897 
	`av_¡¾ÿtf
(
¬gs
, (args), ":first_pts=0");

898 
	`AUTO_INSERT_FILTER_INPUT
("-async", "¬e§m¶e", 
¬gs
);

914 ià(
audio_vŞume
 != 256) {

915 
¬gs
[256];

917 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "-vol has been deprecated. Usehe volume "

920 
	`¢´štf
(
¬gs
, ×rgs), "%f", 
audio_vŞume
 / 256.);

921 
	`AUTO_INSERT_FILTER_INPUT
("-vŞ", "vŞume", 
¬gs
);

924 
	`¢´štf
(
Çme
, (name), "trim for input stream %d:%d",

925 
i¡
->
fe_šdex
, i¡->
¡
->
šdex
);

926 ià(
cİy_ts
) {

927 
tsoff£t
 = 
f
->
¡¬t_time
 =ğ
AV_NOPTS_VALUE
 ? 0 : f->start_time;

928 ià(!
¡¬t_©_z”o
 && 
f
->
ùx
->
¡¬t_time
 !ğ
AV_NOPTS_VALUE
)

929 
tsoff£t
 +ğ
f
->
ùx
->
¡¬t_time
;

931 
»t
 = 
	`š£¹_Œim
(((
f
->
¡¬t_time
 =ğ
AV_NOPTS_VALUE
è|| !f->
accu¿‹_£ek
) ?

932 
AV_NOPTS_VALUE
 : 
tsoff£t
, 
f
->
»cÜdšg_time
,

933 &
Ï¡_f‹r
, &
·d_idx
, 
Çme
);

934 ià(
»t
 < 0)

935  
»t
;

937 ià((
»t
 = 
	`avf‹r_lšk
(
Ï¡_f‹r
, 0, 
š
->
f‹r_ùx
, in->
·d_idx
)) < 0)

938  
»t
;

941 
	}
}

943 
	$cÚfigu»_šput_f‹r
(
F‹rG¿ph
 *
fg
, 
IÅutF‹r
 *
if‹r
,

944 
AVF‹rInOut
 *
š
)

946 
	`av_ä“p
(&
if‹r
->
Çme
);

947 
	`DESCRIBE_FILTER_LINK
(
if‹r
, 
š
, 1);

949 ià(!
if‹r
->
i¡
->
dec
) {

950 
	`av_log
(
NULL
, 
AV_LOG_ERROR
,

952 
if‹r
->
i¡
->
fe_šdex
, if‹r->i¡->
¡
->
šdex
);

953  
AVERROR_DECODER_NOT_FOUND
;

955 
	`avf‹r_·d_g‘_ty³
(
š
->
f‹r_ùx
->
šput_·ds
, in->
·d_idx
)) {

956 
AVMEDIA_TYPE_VIDEO
:  
	`cÚfigu»_šput_video_f‹r
(
fg
, 
if‹r
, 
š
);

957 
AVMEDIA_TYPE_AUDIO
:  
	`cÚfigu»_šput_audio_f‹r
(
fg
, 
if‹r
, 
š
);

958 : 
	`av_as£¹0
(0);

960 
	}
}

962 
	$cÚfigu»_f‹rg¿ph
(
F‹rG¿ph
 *
fg
)

964 
AVF‹rInOut
 *
šputs
, *
ouuts
, *
cur
;

965 
»t
, 
i
, 
sim¶e
 = !
fg
->
g¿ph_desc
;

966 cÚ¡ *
g¿ph_desc
 = 
sim¶e
 ? 
fg
->
ouuts
[0]->
o¡
->
avf‹r
 :

967 
fg
->
g¿ph_desc
;

969 
	`avf‹r_g¿ph_ä“
(&
fg
->
g¿ph
);

970 ià(!(
fg
->
g¿ph
 = 
	`avf‹r_g¿ph_®loc
()))

971  
	`AVERROR
(
ENOMEM
);

973 ià(
sim¶e
) {

974 
OuutSŒ—m
 *
o¡
 = 
fg
->
ouuts
[0]->ost;

975 
¬gs
[512];

976 
AVDiùiÚ¬yEÁry
 *
e
 = 
NULL
;

978 
¬gs
[0] = 0;

979 (
e
 = 
	`av_diù_g‘
(
o¡
->
sws_diù
, "",ƒ,

980 
AV_DICT_IGNORE_SUFFIX
))) {

981 
	`av_¡¾ÿtf
(
¬gs
, ×rgs), "%s=%s:", 
e
->
key
,ƒ->
v®ue
);

983 ià(
	`¡¾’
(
¬gs
))

984 
¬gs
[
	`¡¾’
(args)-1] = 0;

985 
fg
->
g¿ph
->
sÿË_sws_İts
 = 
	`av_¡rdup
(
¬gs
);

987 
¬gs
[0] = 0;

988 (
e
 = 
	`av_diù_g‘
(
o¡
->
swr_İts
, "",ƒ,

989 
AV_DICT_IGNORE_SUFFIX
))) {

990 
	`av_¡¾ÿtf
(
¬gs
, ×rgs), "%s=%s:", 
e
->
key
,ƒ->
v®ue
);

992 ià(
	`¡¾’
(
¬gs
))

993 
¬gs
[
	`¡¾’
(args)-1] = 0;

994 
	`av_İt_£t
(
fg
->
g¿ph
, "¬e§m¶e_swr_İts", 
¬gs
, 0);

996 
¬gs
[0] = '\0';

997 (
e
 = 
	`av_diù_g‘
(
fg
->
ouuts
[0]->
o¡
->
»§m¶e_İts
, "",ƒ,

998 
AV_DICT_IGNORE_SUFFIX
))) {

999 
	`av_¡¾ÿtf
(
¬gs
, ×rgs), "%s=%s:", 
e
->
key
,ƒ->
v®ue
);

1001 ià(
	`¡¾’
(
¬gs
))

1002 
¬gs
[
	`¡¾’
(args) - 1] = '\0';

1003 
fg
->
g¿ph
->
»§m¶e_Ïvr_İts
 = 
	`av_¡rdup
(
¬gs
);

1005 
e
 = 
	`av_diù_g‘
(
o¡
->
’cod”_İts
, "th»ads", 
NULL
, 0);

1006 ià(
e
)

1007 
	`av_İt_£t
(
fg
->
g¿ph
, "th»ads", 
e
->
v®ue
, 0);

1010 ià((
»t
 = 
	`avf‹r_g¿ph_·r£2
(
fg
->
g¿ph
, 
g¿ph_desc
, &
šputs
, &
ouuts
)) < 0)

1011  
»t
;

1013 ià(
sim¶e
 && (!
šputs
 || iÅuts->
Ãxt
 || !
ouuts
 || outputs->next)) {

1014 cÚ¡ *
num_šputs
;

1015 cÚ¡ *
num_ouuts
;

1016 ià(!
ouuts
) {

1017 
num_ouuts
 = "0";

1018 } ià(
ouuts
->
Ãxt
) {

1019 
num_ouuts
 = ">1";

1021 
num_ouuts
 = "1";

1023 ià(!
šputs
) {

1024 
num_šputs
 = "0";

1025 } ià(
šputs
->
Ãxt
) {

1026 
num_šputs
 = ">1";

1028 
num_šputs
 = "1";

1030 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Simple filtergraph '%s' wasƒxpected "

1034 
g¿ph_desc
, 
num_šputs
, 
num_ouuts
);

1035  
	`AVERROR
(
EINVAL
);

1038 
cur
 = 
šputs
, 
i
 = 0; cur; cu¸ğcur->
Ãxt
, i++)

1039 ià((
»t
 = 
	`cÚfigu»_šput_f‹r
(
fg
, fg->
šputs
[
i
], 
cur
)) < 0) {

1040 
	`avf‹r_šout_ä“
(&
šputs
);

1041 
	`avf‹r_šout_ä“
(&
ouuts
);

1042  
»t
;

1044 
	`avf‹r_šout_ä“
(&
šputs
);

1046 
cur
 = 
ouuts
, 
i
 = 0; cur; cu¸ğcur->
Ãxt
, i++)

1047 
	`cÚfigu»_ouut_f‹r
(
fg
, fg->
ouuts
[
i
], 
cur
);

1048 
	`avf‹r_šout_ä“
(&
ouuts
);

1050 ià((
»t
 = 
	`avf‹r_g¿ph_cÚfig
(
fg
->
g¿ph
, 
NULL
)) < 0)

1051  
»t
;

1053 
fg
->
»cÚfigu¿tiÚ
 = 1;

1055 
i
 = 0; i < 
fg
->
nb_ouuts
; i++) {

1056 
OuutSŒ—m
 *
o¡
 = 
fg
->
ouuts
[
i
]->ost;

1057 ià(!
o¡
->
’c
) {

1060 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Encoder (codec %s)‚ot found for output stream #%d:%d\n",

1061 
	`avcodec_g‘_Çme
(
o¡
->
¡
->
codec
->
codec_id
), o¡->
fe_šdex
, o¡->
šdex
);

1062  
	`AVERROR
(
EINVAL
);

1064 ià(
o¡
->
’c
->
ty³
 =ğ
AVMEDIA_TYPE_AUDIO
 &&

1065 !(
o¡
->
’c
->
ÿ·b™›s
 & 
AV_CODEC_CAP_VARIABLE_FRAME_SIZE
))

1066 
	`av_bufãrsšk_£t_äame_size
(
o¡
->
f‹r
->filter,

1067 
o¡
->
’c_ùx
->
äame_size
);

1071 
	}
}

1073 
	$i¡_š_f‹rg¿ph
(
F‹rG¿ph
 *
fg
, 
IÅutSŒ—m
 *
i¡
)

1075 
i
;

1076 
i
 = 0; i < 
fg
->
nb_šputs
; i++)

1077 ià(
fg
->
šputs
[
i
]->
i¡
 == ist)

1080 
	}
}

	@ffmpeg_opt.c

21 
	~<¡dšt.h
>

23 
	~"ffm³g.h
"

24 
	~"cmduts.h
"

26 
	~"libavfÜm©/avfÜm©.h
"

28 
	~"libavcodec/avcodec.h
"

30 
	~"libavf‹r/avf‹r.h
"

32 
	~"libavut/avas£¹.h
"

33 
	~"libavut/av¡ršg.h
"

34 
	~"libavut/avut.h
"

35 
	~"libavut/chªÃl_Ïyout.h
"

36 
	~"libavut/šŒ—dwr™e.h
"

37 
	~"libavut/fifo.h
"

38 
	~"libavut/m©hem©ics.h
"

39 
	~"libavut/İt.h
"

40 
	~"libavut/·r£uts.h
"

41 
	~"libavut/pixdesc.h
"

42 
	~"libavut/pixfmt.h
"

43 
	~"libavut/time_š‹º®.h
"

45 
	#DEFAULT_PASS_LOGFILENAME_PREFIX
 "ffm³g2·ss"

	)

47 
	#MATCH_PER_STREAM_OPT
(
Çme
, 
ty³
, 
outv¬
, 
fmtùx
, 
¡
)\

49 
i
, 
»t
;\

50 
i
 = 0; i < 
o
->
nb_
 ## 
Çme
; i++) {\

51 *
¥ec
 = 
o
->
Çme
[
i
].
¥ecif›r
;\

52 ià((
»t
 = 
	`check_¡»am_¥ecif›r
(
fmtùx
, 
¡
, 
¥ec
)) > 0)\

53 
outv¬
 = 
o
->
Çme
[
i
].
u
.
ty³
;\

54 ià(
»t
 < 0)\

55 
	`ex™_´og¿m
(1);\

57 }

	)

59 
	#MATCH_PER_TYPE_OPT
(
Çme
, 
ty³
, 
outv¬
, 
fmtùx
, 
medŸty³
)\

61 
i
;\

62 
i
 = 0; i < 
o
->
nb_
 ## 
Çme
; i++) {\

63 *
¥ec
 = 
o
->
Çme
[
i
].
¥ecif›r
;\

64 ià(!
	`¡rcmp
(
¥ec
, 
medŸty³
))\

65 
outv¬
 = 
o
->
Çme
[
i
].
u
.
ty³
;\

67 }

	)

69 cÚ¡ 
HWAcûl
 
	ghwacûls
[] = {

70 #ià
HAVE_VDPAU_X11


71 { "vd·u", 
vd·u_š™
, 
HWACCEL_VDPAU
, 
AV_PIX_FMT_VDPAU
 },

73 #ià
HAVE_DXVA2_LIB


74 { "dxva2", 
dxva2_š™
, 
HWACCEL_DXVA2
, 
AV_PIX_FMT_DXVA2_VLD
 },

76 #ià
CONFIG_VDA


77 { "vda", 
videÙoŞbox_š™
, 
HWACCEL_VDA
, 
AV_PIX_FMT_VDA
 },

79 #ià
CONFIG_VIDEOTOOLBOX


80 { "videÙoŞbox", 
videÙoŞbox_š™
, 
HWACCEL_VIDEOTOOLBOX
, 
AV_PIX_FMT_VIDEOTOOLBOX
 },

82 #ià
CONFIG_LIBMFX


83 { "qsv", 
qsv_š™
, 
HWACCEL_QSV
, 
AV_PIX_FMT_QSV
 },

88 *
	gv¡©s_f’ame
;

89 *
	gsdp_f’ame
;

91 
	gaudio_driá_th»shŞd
 = 0.1;

92 
	gdts_d–_th»shŞd
 = 10;

93 
	gdts_”rÜ_th»shŞd
 = 3600*30;

95 
	gaudio_vŞume
 = 256;

96 
	gaudio_sync_m‘hod
 = 0;

97 
	gvideo_sync_m‘hod
 = 
VSYNC_AUTO
;

98 
	gäame_drİ_th»shŞd
 = 0;

99 
	gdo_deš‹¾aû
 = 0;

100 
	gdo_b’chm¬k
 = 0;

101 
	gdo_b’chm¬k_®l
 = 0;

102 
	gdo_hex_dump
 = 0;

103 
	gdo_pkt_dump
 = 0;

104 
	gcİy_ts
 = 0;

105 
	g¡¬t_©_z”o
 = 0;

106 
	gcİy_tb
 = -1;

107 
	gdebug_ts
 = 0;

108 
	gex™_Ú_”rÜ
 = 0;

109 
	gabÜt_Ú_æags
 = 0;

110 
	g´št_¡©s
 = -1;

111 
	gqp_hi¡
 = 0;

112 
	g¡dš_š‹¿ùiÚ
 = 1;

113 
	gäame_b™s_³r_¿w_§m¶e
 = 0;

114 
	gmax_”rÜ_¿‹
 = 2.0/3;

117 
	gšŒa_Úly
 = 0;

118 
	gfe_ov”wr™e
 = 0;

119 
	gno_fe_ov”wr™e
 = 0;

120 
	gdo_p¢r
 = 0;

121 
	gšput_sync
;

122 
	gov”ride_ff£rv”
 = 0;

123 
	gšput_¡»am_pÙ’tŸÎy_avaabË
 = 0;

124 
	gignÜe_unknown_¡»ams
 = 0;

125 
	gcİy_unknown_¡»ams
 = 0;

127 
	$unš™_İtiÚs
(
O±iÚsCÚ‹xt
 *
o
)

129 cÚ¡ 
O±iÚDef
 *
po
 = 
İtiÚs
;

130 
i
;

133 
po
->
Çme
) {

134 *
d¡
 = (
ušt8_t
*)
o
 + 
po
->
u
.
off
;

136 ià(
po
->
æags
 & 
OPT_SPEC
) {

137 
S³cif›rO±
 **
so
 = 
d¡
;

138 
i
, *
couÁ
 = (*)(
so
 + 1);

139 
i
 = 0; i < *
couÁ
; i++) {

140 
	`av_ä“p
(&(*
so
)[
i
].
¥ecif›r
);

141 ià(
po
->
æags
 & 
OPT_STRING
)

142 
	`av_ä“p
(&(*
so
)[
i
].
u
.
¡r
);

144 
	`av_ä“p
(
so
);

145 *
couÁ
 = 0;

146 } ià(
po
->
æags
 & 
OPT_OFFSET
 &&…o->æag & 
OPT_STRING
)

147 
	`av_ä“p
(
d¡
);

148 
po
++;

151 
i
 = 0; i < 
o
->
nb_¡»am_m­s
; i++)

152 
	`av_ä“p
(&
o
->
¡»am_m­s
[
i
].
lškÏb–
);

153 
	`av_ä“p
(&
o
->
¡»am_m­s
);

154 
	`av_ä“p
(&
o
->
audio_chªÃl_m­s
);

155 
	`av_ä“p
(&
o
->
¡»amid_m­
);

156 
	`av_ä“p
(&
o
->
©chm’ts
);

157 
	}
}

159 
	$š™_İtiÚs
(
O±iÚsCÚ‹xt
 *
o
)

161 
	`mem£t
(
o
, 0, (*o));

163 
o
->
¡İ_time
 = 
INT64_MAX
;

164 
o
->
mux_max_d–ay
 = 0.7;

165 
o
->
¡¬t_time
 = 
AV_NOPTS_VALUE
;

166 
o
->
¡¬t_time_eof
 = 
AV_NOPTS_VALUE
;

167 
o
->
»cÜdšg_time
 = 
INT64_MAX
;

168 
o
->
lim™_fesize
 = 
UINT64_MAX
;

169 
o
->
ch­‹rs_šput_fe
 = 
INT_MAX
;

170 
o
->
accu¿‹_£ek
 = 1;

171 
	}
}

173 
	$show_hwacûls
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

175 
i
;

177 
	`´štf
("Hardware‡cceleration methods:\n");

178 
i
 = 0; i < 
	`FF_ARRAY_ELEMS
(
hwacûls
) - 1; i++) {

179 
	`´štf
("%s\n", 
hwacûls
[
i
].
Çme
);

181 
	`´štf
("\n");

183 
	}
}

186 
AVDiùiÚ¬y
 *
	$¡r_¥ecif›rs
(
AVDiùiÚ¬y
 *
diù
)

188 
AVDiùiÚ¬yEÁry
 *
e
 = 
NULL
;

189 
AVDiùiÚ¬y
 *
»t
 = 
NULL
;

191 (
e
 = 
	`av_diù_g‘
(
diù
, "",ƒ, 
AV_DICT_IGNORE_SUFFIX
))) {

192 *
p
 = 
	`¡rchr
(
e
->
key
, ':');

194 ià(
p
)

195 *
p
 = 0;

196 
	`av_diù_£t
(&
»t
, 
e
->
key
,ƒ->
v®ue
, 0);

197 ià(
p
)

198 *
p
 = ':';

200  
»t
;

201 
	}
}

203 
	$İt_abÜt_Ú
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

205 cÚ¡ 
AVO±iÚ
 
İts
[] = {

206 { "abÜt_Ú" , 
NULL
, 0, 
AV_OPT_TYPE_FLAGS
, { .
i64
 = 0 }, 
INT64_MIN
, 
INT64_MAX
, .
un™
 = "flags" },

207 { "em±y_ouut" , 
NULL
, 0, 
AV_OPT_TYPE_CONST
, { .
i64
 = 
ABORT_ON_FLAG_EMPTY_OUTPUT
 }, .
un™
 = "flags" },

208 { 
NULL
 },

210 cÚ¡ 
AVCÏss
 
şass
 = {

211 .
şass_Çme
 = "",

212 .
™em_Çme
 = 
av_deçuÉ_™em_Çme
,

213 .
İtiÚ
 = 
İts
,

214 .
v”siÚ
 = 
LIBAVUTIL_VERSION_INT
,

216 cÚ¡ 
AVCÏss
 *
pşass
 = &
şass
;

218  
	`av_İt_ev®_æags
(&
pşass
, &
İts
[0], 
¬g
, &
abÜt_Ú_æags
);

219 
	}
}

221 
	$İt_§meq
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

223 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Option '%s' was„emoved. "

226 
İt
, opt);

227  
	`AVERROR
(
EINVAL
);

228 
	}
}

230 
	$İt_video_chªÃl
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

232 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "This option is deprecated, use -channel.\n");

233  
	`İt_deçuÉ
(
İtùx
, "chªÃl", 
¬g
);

234 
	}
}

236 
	$İt_video_¡ªd¬d
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

238 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "This option is deprecated, use -standard.\n");

239  
	`İt_deçuÉ
(
İtùx
, "¡ªd¬d", 
¬g
);

240 
	}
}

242 
	$İt_audio_codec
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

244 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

245  
	`·r£_İtiÚ
(
o
, "codec:a", 
¬g
, 
İtiÚs
);

246 
	}
}

248 
	$İt_video_codec
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

250 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

251  
	`·r£_İtiÚ
(
o
, "codec:v", 
¬g
, 
İtiÚs
);

252 
	}
}

254 
	$İt_subt™Ë_codec
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

256 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

257  
	`·r£_İtiÚ
(
o
, "codec:s", 
¬g
, 
İtiÚs
);

258 
	}
}

260 
	$İt_d©a_codec
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

262 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

263  
	`·r£_İtiÚ
(
o
, "codec:d", 
¬g
, 
İtiÚs
);

264 
	}
}

266 
	$İt_m­
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

268 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

269 
SŒ—mM­
 *
m
 = 
NULL
;

270 
i
, 
Ãg©ive
 = 0, 
fe_idx
;

271 
sync_fe_idx
 = -1, 
sync_¡»am_idx
 = 0;

272 *
p
, *
sync
;

273 *
m­
;

274 *
®low_unu£d
;

276 ià(*
¬g
 == '-') {

277 
Ãg©ive
 = 1;

278 
¬g
++;

280 
m­
 = 
	`av_¡rdup
(
¬g
);

281 ià(!
m­
)

282  
	`AVERROR
(
ENOMEM
);

285 ià(
sync
 = 
	`¡rchr
(
m­
, ',')) {

286 *
sync
 = 0;

287 
sync_fe_idx
 = 
	`¡¹Ş
(
sync
 + 1, &sync, 0);

288 ià(
sync_fe_idx
 >ğ
nb_šput_fes
 || sync_file_idx < 0) {

289 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Inv®id synøfšdex: %d.\n", 
sync_fe_idx
);

290 
	`ex™_´og¿m
(1);

292 ià(*
sync
)

293 
sync
++;

294 
i
 = 0; i < 
šput_fes
[
sync_fe_idx
]->
nb_¡»ams
; i++)

295 ià(
	`check_¡»am_¥ecif›r
(
šput_fes
[
sync_fe_idx
]->
ùx
,

296 
šput_fes
[
sync_fe_idx
]->
ùx
->
¡»ams
[
i
], 
sync
) == 1) {

297 
sync_¡»am_idx
 = 
i
;

300 ià(
i
 =ğ
šput_fes
[
sync_fe_idx
]->
nb_¡»ams
) {

301 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Sync stream specification in map %s does‚ot "

302 "m©ch‡ny sŒ—ms.\n", 
¬g
);

303 
	`ex™_´og¿m
(1);

308 ià(
m­
[0] == '[') {

310 cÚ¡ *
c
 = 
m­
 + 1;

311 
	`GROW_ARRAY
(
o
->
¡»am_m­s
, o->
nb_¡»am_m­s
);

312 
m
 = &
o
->
¡»am_m­s
[o->
nb_¡»am_m­s
 - 1];

313 
m
->
lškÏb–
 = 
	`av_g‘_tok’
(&
c
, "]");

314 ià(!
m
->
lškÏb–
) {

315 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Inv®id ouuˆlšk†ab–: %s.\n", 
m­
);

316 
	`ex™_´og¿m
(1);

319 ià(
®low_unu£d
 = 
	`¡rchr
(
m­
, '?'))

320 *
®low_unu£d
 = 0;

321 
fe_idx
 = 
	`¡¹Ş
(
m­
, &
p
, 0);

322 ià(
fe_idx
 >ğ
nb_šput_fes
 || file_idx < 0) {

323 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Inv®id iÅuˆfšdex: %d.\n", 
fe_idx
);

324 
	`ex™_´og¿m
(1);

326 ià(
Ãg©ive
)

328 
i
 = 0; i < 
o
->
nb_¡»am_m­s
; i++) {

329 
m
 = &
o
->
¡»am_m­s
[
i
];

330 ià(
fe_idx
 =ğ
m
->
fe_šdex
 &&

331 
	`check_¡»am_¥ecif›r
(
šput_fes
[
m
->
fe_šdex
]->
ùx
,

332 
šput_fes
[
m
->
fe_šdex
]->
ùx
->
¡»ams
[m->
¡»am_šdex
],

333 *
p
 == ':' ?… + 1 :…) > 0)

334 
m
->
di§bËd
 = 1;

337 
i
 = 0; i < 
šput_fes
[
fe_idx
]->
nb_¡»ams
; i++) {

338 ià(
	`check_¡»am_¥ecif›r
(
šput_fes
[
fe_idx
]->
ùx
, iÅut_fes[fe_idx]->ùx->
¡»ams
[
i
],

339 *
p
 == ':' ?… + 1 :…) <= 0)

341 
	`GROW_ARRAY
(
o
->
¡»am_m­s
, o->
nb_¡»am_m­s
);

342 
m
 = &
o
->
¡»am_m­s
[o->
nb_¡»am_m­s
 - 1];

344 
m
->
fe_šdex
 = 
fe_idx
;

345 
m
->
¡»am_šdex
 = 
i
;

347 ià(
sync_fe_idx
 >= 0) {

348 
m
->
sync_fe_šdex
 = 
sync_fe_idx
;

349 
m
->
sync_¡»am_šdex
 = 
sync_¡»am_idx
;

351 
m
->
sync_fe_šdex
 = 
fe_idx
;

352 
m
->
sync_¡»am_šdex
 = 
i
;

357 ià(!
m
) {

358 ià(
®low_unu£d
) {

359 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, "SŒ—m m­ '%s' m©che nØ¡»ams; ignÜšg.\n", 
¬g
);

361 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Stream map '%s' matches‚o streams.\n"

362 "TØignÜthis,‡dd‡¿šg '?'Øthm­.\n", 
¬g
);

363 
	`ex™_´og¿m
(1);

367 
	`av_ä“p
(&
m­
);

369 
	}
}

371 
	$İt_©ch
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

373 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

374 
	`GROW_ARRAY
(
o
->
©chm’ts
, o->
nb_©chm’ts
);

375 
o
->
©chm’ts
[o->
nb_©chm’ts
 - 1] = 
¬g
;

377 
	}
}

379 
	$İt_m­_chªÃl
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

381 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

382 
n
;

383 
AVSŒ—m
 *
¡
;

384 
AudioChªÃlM­
 *
m
;

386 
	`GROW_ARRAY
(
o
->
audio_chªÃl_m­s
, o->
nb_audio_chªÃl_m­s
);

387 
m
 = &
o
->
audio_chªÃl_m­s
[o->
nb_audio_chªÃl_m­s
 - 1];

390 
n
 = 
	`ssÿnf
(
¬g
, "%d:%d.%d", &
m
->
chªÃl_idx
, &m->
ofe_idx
, &m->
o¡»am_idx
);

391 ià((
n
 =ğ1 ||‚ =ğ3è&& 
m
->
chªÃl_idx
 == -1) {

392 
m
->
fe_idx
 = m->
¡»am_idx
 = -1;

393 ià(
n
 == 1)

394 
m
->
ofe_idx
 = m->
o¡»am_idx
 = -1;

399 
n
 = 
	`ssÿnf
(
¬g
, "%d.%d.%d:%d.%d",

400 &
m
->
fe_idx
, &m->
¡»am_idx
, &m->
chªÃl_idx
,

401 &
m
->
ofe_idx
, &m->
o¡»am_idx
);

403 ià(
n
 != 3 &&‚ != 5) {

404 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Syntaxƒrror, mapchan usage: "

406 
	`ex™_´og¿m
(1);

409 ià(
n
 != 5)

410 
m
->
ofe_idx
 = m->
o¡»am_idx
 = -1;

413 ià(
m
->
fe_idx
 < 0 || m->fe_idx >ğ
nb_šput_fes
) {

414 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "mapchan: invalid input file index: %d\n",

415 
m
->
fe_idx
);

416 
	`ex™_´og¿m
(1);

418 ià(
m
->
¡»am_idx
 < 0 ||

419 
m
->
¡»am_idx
 >ğ
šput_fes
[m->
fe_idx
]->
nb_¡»ams
) {

420 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "mapchan: invalid input file stream index #%d.%d\n",

421 
m
->
fe_idx
, m->
¡»am_idx
);

422 
	`ex™_´og¿m
(1);

424 
¡
 = 
šput_fes
[
m
->
fe_idx
]->
ùx
->
¡»ams
[m->
¡»am_idx
];

425 ià(
¡
->
codec
->
codec_ty³
 !ğ
AVMEDIA_TYPE_AUDIO
) {

426 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "mapchan: stream #%d.%d is‚ot‡n‡udio stream.\n",

427 
m
->
fe_idx
, m->
¡»am_idx
);

428 
	`ex™_´og¿m
(1);

430 ià(
m
->
chªÃl_idx
 < 0 || m->chªÃl_idx >ğ
¡
->
codec
->
chªÃls
) {

431 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "mapchan: invalid‡udio channel #%d.%d.%d\n",

432 
m
->
fe_idx
, m->
¡»am_idx
, m->
chªÃl_idx
);

433 
	`ex™_´og¿m
(1);

436 
	}
}

438 
	$İt_sdp_fe
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

440 
	`av_ä“
(
sdp_f’ame
);

441 
sdp_f’ame
 = 
	`av_¡rdup
(
¬g
);

443 
	}
}

452 
	$·r£_m‘a_ty³
(*
¬g
, *
ty³
, *
šdex
, cÚ¡ **
¡»am_¥ec
)

454 ià(*
¬g
) {

455 *
ty³
 = *
¬g
;

456 *
¬g
) {

460 ià(*(++
¬g
) && *arg != ':') {

461 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Inv®id m‘ad©¨¥ecif›¸%s.\n", 
¬g
);

462 
	`ex™_´og¿m
(1);

464 *
¡»am_¥ec
 = *
¬g
 == ':' ?‡rg + 1 : "";

468 ià(*(++
¬g
) == ':')

469 *
šdex
 = 
	`¡¹Ş
(++
¬g
, 
NULL
, 0);

472 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Inv®id m‘ad©¨ty³ %c.\n", *
¬g
);

473 
	`ex™_´og¿m
(1);

476 *
ty³
 = 'g';

477 
	}
}

479 
	$cİy_m‘ad©a
(*
out¥ec
, *
š¥ec
, 
AVFÜm©CÚ‹xt
 *
oc
, AVFÜm©CÚ‹xˆ*
ic
, 
O±iÚsCÚ‹xt
 *
o
)

481 
AVDiùiÚ¬y
 **
m‘a_š
 = 
NULL
;

482 
AVDiùiÚ¬y
 **
m‘a_out
 = 
NULL
;

483 
i
, 
»t
 = 0;

484 
ty³_š
, 
ty³_out
;

485 cÚ¡ *
i¡»am_¥ec
 = 
NULL
, *
o¡»am_¥ec
 = NULL;

486 
idx_š
 = 0, 
idx_out
 = 0;

488 
	`·r£_m‘a_ty³
(
š¥ec
, &
ty³_š
, &
idx_š
, &
i¡»am_¥ec
);

489 
	`·r£_m‘a_ty³
(
out¥ec
, &
ty³_out
, &
idx_out
, &
o¡»am_¥ec
);

491 ià(!
ic
) {

492 ià(
ty³_out
 =ğ'g' || !*
out¥ec
)

493 
o
->
m‘ad©a_glob®_mªu®
 = 1;

494 ià(
ty³_out
 =ğ's' || !*
out¥ec
)

495 
o
->
m‘ad©a_¡»ams_mªu®
 = 1;

496 ià(
ty³_out
 =ğ'c' || !*
out¥ec
)

497 
o
->
m‘ad©a_ch­‹rs_mªu®
 = 1;

501 ià(
ty³_š
 =ğ'g' || 
ty³_out
 == 'g')

502 
o
->
m‘ad©a_glob®_mªu®
 = 1;

503 ià(
ty³_š
 =ğ's' || 
ty³_out
 == 's')

504 
o
->
m‘ad©a_¡»ams_mªu®
 = 1;

505 ià(
ty³_š
 =ğ'c' || 
ty³_out
 == 'c')

506 
o
->
m‘ad©a_ch­‹rs_mªu®
 = 1;

509 ià(!
ic
)

512 
	#METADATA_CHECK_INDEX
(
šdex
, 
nb_–ems
, 
desc
)\

513 ià((
šdex
è< 0 || (šdexè>ğ(
nb_–ems
)) {\

514 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Invalid %s index %d while…rocessing metadata maps.\n",\

515 (
desc
), (
šdex
));\

516 
	`ex™_´og¿m
(1);\

517 }

	)

519 
	#SET_DICT
(
ty³
, 
m‘a
, 
cÚ‹xt
, 
šdex
)\

520 
ty³
) {\

522 
m‘a
 = &
cÚ‹xt
->
m‘ad©a
;\

525 
	`METADATA_CHECK_INDEX
(
šdex
, 
cÚ‹xt
->
nb_ch­‹rs
, "chapter")\

526 
m‘a
 = &
cÚ‹xt
->
ch­‹rs
[
šdex
]->
m‘ad©a
;\

529 
	`METADATA_CHECK_INDEX
(
šdex
, 
cÚ‹xt
->
nb_´og¿ms
, "program")\

530 
m‘a
 = &
cÚ‹xt
->
´og¿ms
[
šdex
]->
m‘ad©a
;\

534 : 
	`av_as£¹0
(0);\

536 

	)

537 
	`SET_DICT
(
ty³_š
, 
m‘a_š
, 
ic
, 
idx_š
);

538 
	`SET_DICT
(
ty³_out
, 
m‘a_out
, 
oc
, 
idx_out
);

541 ià(
ty³_š
 == 's') {

542 
i
 = 0; i < 
ic
->
nb_¡»ams
; i++) {

543 ià((
»t
 = 
	`check_¡»am_¥ecif›r
(
ic
, ic->
¡»ams
[
i
], 
i¡»am_¥ec
)) > 0) {

544 
m‘a_š
 = &
ic
->
¡»ams
[
i
]->
m‘ad©a
;

546 } ià(
»t
 < 0)

547 
	`ex™_´og¿m
(1);

549 ià(!
m‘a_š
) {

550 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "SŒ—m s³cif›¸% dÛ nÙ m©ch‡ny sŒ—ms.\n", 
i¡»am_¥ec
);

551 
	`ex™_´og¿m
(1);

555 ià(
ty³_out
 == 's') {

556 
i
 = 0; i < 
oc
->
nb_¡»ams
; i++) {

557 ià((
»t
 = 
	`check_¡»am_¥ecif›r
(
oc
, oc->
¡»ams
[
i
], 
o¡»am_¥ec
)) > 0) {

558 
m‘a_out
 = &
oc
->
¡»ams
[
i
]->
m‘ad©a
;

559 
	`av_diù_cİy
(
m‘a_out
, *
m‘a_š
, 
AV_DICT_DONT_OVERWRITE
);

560 } ià(
»t
 < 0)

561 
	`ex™_´og¿m
(1);

564 
	`av_diù_cİy
(
m‘a_out
, *
m‘a_š
, 
AV_DICT_DONT_OVERWRITE
);

567 
	}
}

569 
	$İt_»cÜdšg_time¡amp
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

571 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

572 
buf
[128];

573 
št64_t
 
»cÜdšg_time¡amp
 = 
	`·r£_time_Ü_d›
(
İt
, 
¬g
, 0) / 1E6;

574 
tm
 
time
 = *
	`gmtime
((
time_t
*)&
»cÜdšg_time¡amp
);

575 ià(!
	`¡ráime
(
buf
, (buf), "ü—tiÚ_time=%Y-%m-%dT%H:%M:%S%z", &
time
))

577 
	`·r£_İtiÚ
(
o
, "m‘ad©a", 
buf
, 
İtiÚs
);

579 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "%s is deprecated, sethe 'creation_time' metadata "

580 "g in¡—d.\n", 
İt
);

582 
	}
}

584 
AVCodec
 *
	$fšd_codec_Ü_d›
(cÚ¡ *
Çme
, 
AVMedŸTy³
 
ty³
, 
’cod”
)

586 cÚ¡ 
AVCodecDesütÜ
 *
desc
;

587 cÚ¡ *
codec_¡ršg
 = 
’cod”
 ? "encoder" : "decoder";

588 
AVCodec
 *
codec
;

590 
codec
 = 
’cod”
 ?

591 
	`avcodec_fšd_’cod”_by_Çme
(
Çme
) :

592 
	`avcodec_fšd_decod”_by_Çme
(
Çme
);

594 ià(!
codec
 && (
desc
 = 
	`avcodec_desütÜ_g‘_by_Çme
(
Çme
))) {

595 
codec
 = 
’cod”
 ? 
	`avcodec_fšd_’cod”
(
desc
->
id
) :

596 
	`avcodec_fšd_decod”
(
desc
->
id
);

597 ià(
codec
)

598 
	`av_log
(
NULL
, 
AV_LOG_VERBOSE
, "Matched %s '%s' for codec '%s'.\n",

599 
codec_¡ršg
, 
codec
->
Çme
, 
desc
->name);

602 ià(!
codec
) {

603 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "UnknowÀ% '%s'\n", 
codec_¡ršg
, 
Çme
);

604 
	`ex™_´og¿m
(1);

606 ià(
codec
->
ty³
 !=ype) {

607 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Inv®id % ty³ '%s'\n", 
codec_¡ršg
, 
Çme
);

608 
	`ex™_´og¿m
(1);

610  
codec
;

611 
	}
}

613 
AVCodec
 *
	$choo£_decod”
(
O±iÚsCÚ‹xt
 *
o
, 
AVFÜm©CÚ‹xt
 *
s
, 
AVSŒ—m
 *
¡
)

615 *
codec_Çme
 = 
NULL
;

617 
	`MATCH_PER_STREAM_OPT
(
codec_Çmes
, 
¡r
, 
codec_Çme
, 
s
, 
¡
);

618 ià(
codec_Çme
) {

619 
AVCodec
 *
codec
 = 
	`fšd_codec_Ü_d›
(
codec_Çme
, 
¡
->codec->
codec_ty³
, 0);

620 
¡
->
codec
->
codec_id
 = codec->
id
;

621  
codec
;

623  
	`avcodec_fšd_decod”
(
¡
->
codec
->
codec_id
);

624 
	}
}

628 
	$add_šput_¡»ams
(
O±iÚsCÚ‹xt
 *
o
, 
AVFÜm©CÚ‹xt
 *
ic
)

630 
i
, 
»t
;

632 
i
 = 0; i < 
ic
->
nb_¡»ams
; i++) {

633 
AVSŒ—m
 *
¡
 = 
ic
->
¡»ams
[
i
];

634 
AVCodecCÚ‹xt
 *
dec
 = 
¡
->
codec
;

635 
IÅutSŒ—m
 *
i¡
 = 
	`av_m®locz
((*ist));

636 *
äam”©e
 = 
NULL
, *
hwacûl
 = NULL, *
hwacûl_deviû
 = NULL;

637 *
codec_g
 = 
NULL
;

638 *
Ãxt
;

639 *
disÿrd_¡r
 = 
NULL
;

640 cÚ¡ 
AVO±iÚ
 *
disÿrd_İt
 = 
	`av_İt_fšd
(
dec
, "sk_äame", 
NULL
, 0, 0);

642 ià(!
i¡
)

643 
	`ex™_´og¿m
(1);

645 
	`GROW_ARRAY
(
šput_¡»ams
, 
nb_šput_¡»ams
);

646 
šput_¡»ams
[
nb_šput_¡»ams
 - 1] = 
i¡
;

648 
i¡
->
¡
 = st;

649 
i¡
->
fe_šdex
 = 
nb_šput_fes
;

650 
i¡
->
disÿrd
 = 1;

651 
¡
->
disÿrd
 = 
AVDISCARD_ALL
;

652 
i¡
->
nb_§m¶es
 = 0;

653 
i¡
->
mš_±s
 = 
INT64_MAX
;

654 
i¡
->
max_±s
 = 
INT64_MIN
;

656 
i¡
->
ts_sÿË
 = 1.0;

657 
	`MATCH_PER_STREAM_OPT
(
ts_sÿË
, 
dbl
, 
i¡
->ts_sÿË, 
ic
, 
¡
);

659 
i¡
->
autÜÙ©e
 = 1;

660 
	`MATCH_PER_STREAM_OPT
(
autÜÙ©e
, 
i
, 
i¡
->autÜÙ©e, 
ic
, 
¡
);

662 
	`MATCH_PER_STREAM_OPT
(
codec_gs
, 
¡r
, 
codec_g
, 
ic
, 
¡
);

663 ià(
codec_g
) {

664 
ušt32_t
 
g
 = 
	`¡¹Ş
(
codec_g
, &
Ãxt
, 0);

665 ià(*
Ãxt
)

666 
g
 = 
	`AV_RL32
(
codec_g
);

667 
¡
->
codec
->
codec_g
 = 
g
;

670 
i¡
->
dec
 = 
	`choo£_decod”
(
o
, 
ic
, 
¡
);

671 
i¡
->
decod”_İts
 = 
	`f‹r_codec_İts
(
o
->
g
->
codec_İts
, i¡->
¡
->
codec
->
codec_id
, 
ic
, st, i¡->
dec
);

673 
i¡
->
»š™_f‹rs
 = -1;

674 
	`MATCH_PER_STREAM_OPT
(
»š™_f‹rs
, 
i
, 
i¡
->»š™_f‹rs, 
ic
, 
¡
);

676 
	`MATCH_PER_STREAM_OPT
(
disÿrd
, 
¡r
, 
disÿrd_¡r
, 
ic
, 
¡
);

677 
i¡
->
u£r_£t_disÿrd
 = 
AVDISCARD_NONE
;

678 ià(
disÿrd_¡r
 && 
	`av_İt_ev®_št
(
dec
, 
disÿrd_İt
, disÿrd_¡r, &
i¡
->
u£r_£t_disÿrd
) < 0) {

679 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Error…arsing discard %s.\n",

680 
disÿrd_¡r
);

681 
	`ex™_´og¿m
(1);

684 
i¡
->
f‹r_š_»sÿË_d–_Ï¡
 = 
AV_NOPTS_VALUE
;

686 
i¡
->
dec_ùx
 = 
	`avcodec_®loc_cÚ‹xt3
(i¡->
dec
);

687 ià(!
i¡
->
dec_ùx
) {

688 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Error‡llocatinghe decoder context.\n");

689 
	`ex™_´og¿m
(1);

692 
»t
 = 
	`avcodec_cİy_cÚ‹xt
(
i¡
->
dec_ùx
, 
dec
);

693 ià(
»t
 < 0) {

694 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Error initializinghe decoder context.\n");

695 
	`ex™_´og¿m
(1);

698 
dec
->
codec_ty³
) {

699 
AVMEDIA_TYPE_VIDEO
:

700 if(!
i¡
->
dec
)

701 
i¡
->
dec
 = 
	`avcodec_fšd_decod”
(dec->
codec_id
);

702 #ià
FF_API_EMU_EDGE


703 ià(
	`av_codec_g‘_low»s
(
dec
)) {

704 
dec
->
æags
 |ğ
CODEC_FLAG_EMU_EDGE
;

708 
i¡
->
»§m¶e_height
 = i¡->
dec_ùx
->
height
;

709 
i¡
->
»§m¶e_width
 = i¡->
dec_ùx
->
width
;

710 
i¡
->
»§m¶e_pix_fmt
 = i¡->
dec_ùx
->
pix_fmt
;

712 
	`MATCH_PER_STREAM_OPT
(
äame_¿‹s
, 
¡r
, 
äam”©e
, 
ic
, 
¡
);

713 ià(
äam”©e
 && 
	`av_·r£_video_¿‹
(&
i¡
->framerate,

714 
äam”©e
) < 0) {

715 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Error…arsing framerate %s.\n",

716 
äam”©e
);

717 
	`ex™_´og¿m
(1);

720 
i¡
->
tİ_f›ld_fœ¡
 = -1;

721 
	`MATCH_PER_STREAM_OPT
(
tİ_f›ld_fœ¡
, 
i
, 
i¡
->tİ_f›ld_fœ¡, 
ic
, 
¡
);

723 
	`MATCH_PER_STREAM_OPT
(
hwacûls
, 
¡r
, 
hwacûl
, 
ic
, 
¡
);

724 ià(
hwacûl
) {

725 ià(!
	`¡rcmp
(
hwacûl
, "none"))

726 
i¡
->
hwacûl_id
 = 
HWACCEL_NONE
;

727 ià(!
	`¡rcmp
(
hwacûl
, "auto"))

728 
i¡
->
hwacûl_id
 = 
HWACCEL_AUTO
;

730 
i
;

731 
i
 = 0; 
hwacûls
[i].
Çme
; i++) {

732 ià(!
	`¡rcmp
(
hwacûls
[
i
].
Çme
, 
hwacûl
)) {

733 
i¡
->
hwacûl_id
 = 
hwacûls
[
i
].
id
;

738 ià(!
i¡
->
hwacûl_id
) {

739 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Unrecognized hwaccel: %s.\n",

740 
hwacûl
);

741 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Supported hwaccels: ");

742 
i
 = 0; 
hwacûls
[i].
Çme
; i++)

743 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "% ", 
hwacûls
[
i
].
Çme
);

744 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "\n");

745 
	`ex™_´og¿m
(1);

750 
	`MATCH_PER_STREAM_OPT
(
hwacûl_deviûs
, 
¡r
, 
hwacûl_deviû
, 
ic
, 
¡
);

751 ià(
hwacûl_deviû
) {

752 
i¡
->
hwacûl_deviû
 = 
	`av_¡rdup
(hwaccel_device);

753 ià(!
i¡
->
hwacûl_deviû
)

754 
	`ex™_´og¿m
(1);

756 
i¡
->
hwacûl_pix_fmt
 = 
AV_PIX_FMT_NONE
;

759 
AVMEDIA_TYPE_AUDIO
:

760 
i¡
->
guess_Ïyout_max
 = 
INT_MAX
;

761 
	`MATCH_PER_STREAM_OPT
(
guess_Ïyout_max
, 
i
, 
i¡
->guess_Ïyout_max, 
ic
, 
¡
);

762 
	`guess_šput_chªÃl_Ïyout
(
i¡
);

764 
i¡
->
»§m¶e_§m¶e_fmt
 = i¡->
dec_ùx
->
§m¶e_fmt
;

765 
i¡
->
»§m¶e_§m¶e_¿‹
 = i¡->
dec_ùx
->
§m¶e_¿‹
;

766 
i¡
->
»§m¶e_chªÃls
 = i¡->
dec_ùx
->
chªÃls
;

767 
i¡
->
»§m¶e_chªÃl_Ïyout
 = i¡->
dec_ùx
->
chªÃl_Ïyout
;

770 
AVMEDIA_TYPE_DATA
:

771 
AVMEDIA_TYPE_SUBTITLE
: {

772 *
ÿnvas_size
 = 
NULL
;

773 if(!
i¡
->
dec
)

774 
i¡
->
dec
 = 
	`avcodec_fšd_decod”
(dec->
codec_id
);

775 
	`MATCH_PER_STREAM_OPT
(
fix_sub_du¿tiÚ
, 
i
, 
i¡
->fix_sub_du¿tiÚ, 
ic
, 
¡
);

776 
	`MATCH_PER_STREAM_OPT
(
ÿnvas_sizes
, 
¡r
, 
ÿnvas_size
, 
ic
, 
¡
);

777 ià(
ÿnvas_size
 &&

778 
	`av_·r£_video_size
(&
i¡
->
dec_ùx
->
width
, &i¡->dec_ùx->
height
, 
ÿnvas_size
) < 0) {

779 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Inv®id cªva size: %s.\n", 
ÿnvas_size
);

780 
	`ex™_´og¿m
(1);

784 
AVMEDIA_TYPE_ATTACHMENT
:

785 
AVMEDIA_TYPE_UNKNOWN
:

788 
	`abÜt
();

791 
	}
}

793 
	$as£¹_fe_ov”wr™e
(cÚ¡ *
f’ame
)

795 ià(
fe_ov”wr™e
 && 
no_fe_ov”wr™e
) {

796 
	`årštf
(
¡d”r
, "Error, both -y‡nd -n supplied. Exiting.\n");

797 
	`ex™_´og¿m
(1);

800 ià(!
fe_ov”wr™e
) {

801 cÚ¡ *
´Ùo_Çme
 = 
	`avio_fšd_´ÙocŞ_Çme
(
f’ame
);

802 ià(
´Ùo_Çme
 && !
	`¡rcmp
ÕrÙo_Çme, "fe"è&& 
	`avio_check
(
f’ame
, 0) == 0) {

803 ià(
¡dš_š‹¿ùiÚ
 && !
no_fe_ov”wr™e
) {

804 
	`årštf
(
¡d”r
,"F'%s'‡Ì—dyƒxi¡s. Ov”wr™? [y/N] ", 
f’ame
);

805 
	`fæush
(
¡d”r
);

806 
	`‹rm_ex™
();

807 
	`sigÇl
(
SIGINT
, 
SIG_DFL
);

808 ià(!
	`»ad_ye¢o
()) {

809 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Not overwriting -ƒxiting\n");

810 
	`ex™_´og¿m
(1);

812 
	`‹rm_š™
();

815 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "F'%s'‡Ì—dyƒxi¡s. Ex™šg.\n", 
f’ame
);

816 
	`ex™_´og¿m
(1);

820 
	}
}

822 
	$dump_©chm’t
(
AVSŒ—m
 *
¡
, cÚ¡ *
f’ame
)

824 
»t
;

825 
AVIOCÚ‹xt
 *
out
 = 
NULL
;

826 
AVDiùiÚ¬yEÁry
 *
e
;

828 ià(!
¡
->
codec
->
exŒad©a_size
) {

829 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "Noƒxtradatao dump in stream #%d:%d.\n",

830 
nb_šput_fes
 - 1, 
¡
->
šdex
);

833 ià(!*
f’ame
 && (
e
 = 
	`av_diù_g‘
(
¡
->
m‘ad©a
, "f’ame", 
NULL
, 0)))

834 
f’ame
 = 
e
->
v®ue
;

835 ià(!*
f’ame
) {

836 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "No filename specified‡nd‚o 'filename'ag"

837 "š sŒ—m #%d:%d.\n", 
nb_šput_fes
 - 1, 
¡
->
šdex
);

838 
	`ex™_´og¿m
(1);

841 
	`as£¹_fe_ov”wr™e
(
f’ame
);

843 ià((
»t
 = 
	`avio_İ’2
(&
out
, 
f’ame
, 
AVIO_FLAG_WRITE
, &
št_cb
, 
NULL
)) < 0) {

844 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Could‚ot open file %s for writing.\n",

845 
f’ame
);

846 
	`ex™_´og¿m
(1);

849 
	`avio_wr™e
(
out
, 
¡
->
codec
->
exŒad©a
, st->codec->
exŒad©a_size
);

850 
	`avio_æush
(
out
);

851 
	`avio_şo£
(
out
);

852 
	}
}

854 
	$İ’_šput_fe
(
O±iÚsCÚ‹xt
 *
o
, cÚ¡ *
f’ame
)

856 
IÅutFe
 *
f
;

857 
AVFÜm©CÚ‹xt
 *
ic
;

858 
AVIÅutFÜm©
 *
fe_ifÜm©
 = 
NULL
;

859 
”r
, 
i
, 
»t
;

860 
št64_t
 
time¡amp
;

861 
AVDiùiÚ¬y
 **
İts
;

862 
AVDiùiÚ¬y
 *
unu£d_İts
 = 
NULL
;

863 
AVDiùiÚ¬yEÁry
 *
e
 = 
NULL
;

864 
Üig_nb_¡»ams
;

865 * 
video_codec_Çme
 = 
NULL
;

866 * 
audio_codec_Çme
 = 
NULL
;

867 *
subt™Ë_codec_Çme
 = 
NULL
;

868 * 
d©a_codec_Çme
 = 
NULL
;

869 
sÿn_®l_pmts_£t
 = 0;

871 ià(
o
->
fÜm©
) {

872 ià(!(
fe_ifÜm©
 = 
	`av_fšd_šput_fÜm©
(
o
->
fÜm©
))) {

873 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "UnknowÀšpuˆfÜm©: '%s'\n", 
o
->
fÜm©
);

874 
	`ex™_´og¿m
(1);

878 ià(!
	`¡rcmp
(
f’ame
, "-"))

879 
f’ame
 = "pipe:";

881 
¡dš_š‹¿ùiÚ
 &ğ
	`¡ºcmp
(
f’ame
, "pipe:", 5) &&

882 
	`¡rcmp
(
f’ame
, "/dev/stdin");

885 
ic
 = 
	`avfÜm©_®loc_cÚ‹xt
();

886 ià(!
ic
) {

887 
	`´št_”rÜ
(
f’ame
, 
	`AVERROR
(
ENOMEM
));

888 
	`ex™_´og¿m
(1);

890 ià(
o
->
nb_audio_§m¶e_¿‹
) {

891 
	`av_diù_£t_št
(&
o
->
g
->
fÜm©_İts
, "§m¶e_¿‹", o->
audio_§m¶e_¿‹
[o->
nb_audio_§m¶e_¿‹
 - 1].
u
.
i
, 0);

893 ià(
o
->
nb_audio_chªÃls
) {

897 ià(
fe_ifÜm©
 && fe_ifÜm©->
´iv_şass
 &&

898 
	`av_İt_fšd
(&
fe_ifÜm©
->
´iv_şass
, "chªÃls", 
NULL
, 0,

899 
AV_OPT_SEARCH_FAKE_OBJ
)) {

900 
	`av_diù_£t_št
(&
o
->
g
->
fÜm©_İts
, "chªÃls", o->
audio_chªÃls
[o->
nb_audio_chªÃls
 - 1].
u
.
i
, 0);

903 ià(
o
->
nb_äame_¿‹s
) {

906 ià(
fe_ifÜm©
 && fe_ifÜm©->
´iv_şass
 &&

907 
	`av_İt_fšd
(&
fe_ifÜm©
->
´iv_şass
, "äam”©e", 
NULL
, 0,

908 
AV_OPT_SEARCH_FAKE_OBJ
)) {

909 
	`av_diù_£t
(&
o
->
g
->
fÜm©_İts
, "framerate",

910 
o
->
äame_¿‹s
[o->
nb_äame_¿‹s
 - 1].
u
.
¡r
, 0);

913 ià(
o
->
nb_äame_sizes
) {

914 
	`av_diù_£t
(&
o
->
g
->
fÜm©_İts
, "video_size", o->
äame_sizes
[o->
nb_äame_sizes
 - 1].
u
.
¡r
, 0);

916 ià(
o
->
nb_äame_pix_fmts
)

917 
	`av_diù_£t
(&
o
->
g
->
fÜm©_İts
, "pix–_fÜm©", o->
äame_pix_fmts
[o->
nb_äame_pix_fmts
 - 1].
u
.
¡r
, 0);

919 
	`MATCH_PER_TYPE_OPT
(
codec_Çmes
, 
¡r
, 
video_codec_Çme
, 
ic
, "v");

920 
	`MATCH_PER_TYPE_OPT
(
codec_Çmes
, 
¡r
, 
audio_codec_Çme
, 
ic
, "a");

921 
	`MATCH_PER_TYPE_OPT
(
codec_Çmes
, 
¡r
, 
subt™Ë_codec_Çme
, 
ic
, "s");

922 
	`MATCH_PER_TYPE_OPT
(
codec_Çmes
, 
¡r
, 
d©a_codec_Çme
, 
ic
, "d");

924 
ic
->
video_codec_id
 = 
video_codec_Çme
 ?

925 
	`fšd_codec_Ü_d›
(
video_codec_Çme
 , 
AVMEDIA_TYPE_VIDEO
 , 0)->
id
 : 
AV_CODEC_ID_NONE
;

926 
ic
->
audio_codec_id
 = 
audio_codec_Çme
 ?

927 
	`fšd_codec_Ü_d›
(
audio_codec_Çme
 , 
AVMEDIA_TYPE_AUDIO
 , 0)->
id
 : 
AV_CODEC_ID_NONE
;

928 
ic
->
subt™Ë_codec_id
ğ
subt™Ë_codec_Çme
 ?

929 
	`fšd_codec_Ü_d›
(
subt™Ë_codec_Çme
, 
AVMEDIA_TYPE_SUBTITLE
, 0)->
id
 : 
AV_CODEC_ID_NONE
;

930 
ic
->
d©a_codec_id
 = 
d©a_codec_Çme
 ?

931 
	`fšd_codec_Ü_d›
(
d©a_codec_Çme
, 
AVMEDIA_TYPE_DATA
, 0)->
id
 : 
AV_CODEC_ID_NONE
;

933 ià(
video_codec_Çme
)

934 
	`av_fÜm©_£t_video_codec
 (
ic
, 
	`fšd_codec_Ü_d›
(
video_codec_Çme
 , 
AVMEDIA_TYPE_VIDEO
 , 0));

935 ià(
audio_codec_Çme
)

936 
	`av_fÜm©_£t_audio_codec
 (
ic
, 
	`fšd_codec_Ü_d›
(
audio_codec_Çme
 , 
AVMEDIA_TYPE_AUDIO
 , 0));

937 ià(
subt™Ë_codec_Çme
)

938 
	`av_fÜm©_£t_subt™Ë_codec
(
ic
, 
	`fšd_codec_Ü_d›
(
subt™Ë_codec_Çme
, 
AVMEDIA_TYPE_SUBTITLE
, 0));

939 ià(
d©a_codec_Çme
)

940 
	`av_fÜm©_£t_d©a_codec
(
ic
, 
	`fšd_codec_Ü_d›
(
d©a_codec_Çme
, 
AVMEDIA_TYPE_DATA
, 0));

942 
ic
->
æags
 |ğ
AVFMT_FLAG_NONBLOCK
;

943 
ic
->
š‹¼u±_ÿÎback
 = 
št_cb
;

945 ià(!
	`av_diù_g‘
(
o
->
g
->
fÜm©_İts
, "sÿn_®l_pmts", 
NULL
, 
AV_DICT_MATCH_CASE
)) {

946 
	`av_diù_£t
(&
o
->
g
->
fÜm©_İts
, "sÿn_®l_pmts", "1", 
AV_DICT_DONT_OVERWRITE
);

947 
sÿn_®l_pmts_£t
 = 1;

950 
”r
 = 
	`avfÜm©_İ’_šput
(&
ic
, 
f’ame
, 
fe_ifÜm©
, &
o
->
g
->
fÜm©_İts
);

951 ià(
”r
 < 0) {

952 
	`´št_”rÜ
(
f’ame
, 
”r
);

953 
	`ex™_´og¿m
(1);

955 ià(
sÿn_®l_pmts_£t
)

956 
	`av_diù_£t
(&
o
->
g
->
fÜm©_İts
, "sÿn_®l_pmts", 
NULL
, 
AV_DICT_MATCH_CASE
);

957 
	`»move_avİtiÚs
(&
o
->
g
->
fÜm©_İts
, o->g->
codec_İts
);

958 
	`as£¹_avİtiÚs
(
o
->
g
->
fÜm©_İts
);

961 
i
 = 0; i < 
ic
->
nb_¡»ams
; i++)

962 
	`choo£_decod”
(
o
, 
ic
, ic->
¡»ams
[
i
]);

965 
İts
 = 
	`£tup_fšd_¡»am_šfo_İts
(
ic
, 
o
->
g
->
codec_İts
);

966 
Üig_nb_¡»ams
 = 
ic
->
nb_¡»ams
;

970 
»t
 = 
	`avfÜm©_fšd_¡»am_šfo
(
ic
, 
İts
);

971 ià(
»t
 < 0) {

972 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "%s: could‚Ù fšd codeø·¿m‘”s\n", 
f’ame
);

973 ià(
ic
->
nb_¡»ams
 == 0) {

974 
	`avfÜm©_şo£_šput
(&
ic
);

975 
	`ex™_´og¿m
(1);

979 ià(
o
->
¡¬t_time_eof
 !ğ
AV_NOPTS_VALUE
) {

980 ià(
ic
->
du¿tiÚ
>0) {

981 
o
->
¡¬t_time
 = o->
¡¬t_time_eof
 + 
ic
->
du¿tiÚ
;

983 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "CªnÙ u£ -s£of, du¿tiÚ oà% nÙ known\n", 
f’ame
);

985 
time¡amp
 = (
o
->
¡¬t_time
 =ğ
AV_NOPTS_VALUE
) ? 0 : o->start_time;

987 ià(!
o
->
£ek_time¡amp
 && 
ic
->
¡¬t_time
 !ğ
AV_NOPTS_VALUE
)

988 
time¡amp
 +ğ
ic
->
¡¬t_time
;

991 ià(
o
->
¡¬t_time
 !ğ
AV_NOPTS_VALUE
) {

992 
št64_t
 
£ek_time¡amp
 = 
time¡amp
;

994 ià(!(
ic
->
ifÜm©
->
æags
 & 
AVFMT_SEEK_TO_PTS
)) {

995 
dts_heuri¡ic
 = 0;

996 
i
=0; i<
ic
->
nb_¡»ams
; i++) {

997 
AVCodecCÚ‹xt
 *
avùx
 = 
ic
->
¡»ams
[
i
]->
codec
;

998 ià(
avùx
->
has_b_äames
)

999 
dts_heuri¡ic
 = 1;

1001 ià(
dts_heuri¡ic
) {

1002 
£ek_time¡amp
 -ğ3*
AV_TIME_BASE
 / 23;

1005 
»t
 = 
	`avfÜm©_£ek_fe
(
ic
, -1, 
INT64_MIN
, 
£ek_time¡amp
, seek_timestamp, 0);

1006 ià(
»t
 < 0) {

1007 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "%s: could‚ot seeko…osition %0.3f\n",

1008 
f’ame
, ()
time¡amp
 / 
AV_TIME_BASE
);

1013 
	`add_šput_¡»ams
(
o
, 
ic
);

1016 
	`av_dump_fÜm©
(
ic
, 
nb_šput_fes
, 
f’ame
, 0);

1018 
	`GROW_ARRAY
(
šput_fes
, 
nb_šput_fes
);

1019 
f
 = 
	`av_m®locz
((*f));

1020 ià(!
f
)

1021 
	`ex™_´og¿m
(1);

1022 
šput_fes
[
nb_šput_fes
 - 1] = 
f
;

1024 
f
->
ùx
 = 
ic
;

1025 
f
->
i¡_šdex
 = 
nb_šput_¡»ams
 - 
ic
->
nb_¡»ams
;

1026 
f
->
¡¬t_time
 = 
o
->start_time;

1027 
f
->
»cÜdšg_time
 = 
o
->recording_time;

1028 
f
->
šput_ts_off£t
 = 
o
->input_ts_offset;

1029 
f
->
ts_off£t
 = 
o
->
šput_ts_off£t
 - (
cİy_ts
 ? (
¡¬t_©_z”o
 && 
ic
->
¡¬t_time
 !ğ
AV_NOPTS_VALUE
 ? ic->¡¬t_tim: 0è: 
time¡amp
);

1030 
f
->
nb_¡»ams
 = 
ic
->nb_streams;

1031 
f
->
¿‹_emu
 = 
o
->rate_emu;

1032 
f
->
accu¿‹_£ek
 = 
o
->accurate_seek;

1033 
f
->
loİ
 = 
o
->loop;

1034 
f
->
du¿tiÚ
 = 0;

1035 
f
->
time_ba£
 = (
AVR©iÚ®
){ 1, 1 };

1036 #ià
HAVE_PTHREADS


1037 
f
->
th»ad_queue_size
 = 
o
->thread_queue_size > 0 ? o->thread_queue_size : 8;

1041 
unu£d_İts
 = 
	`¡r_¥ecif›rs
(
o
->
g
->
codec_İts
);

1042 
i
 = 
f
->
i¡_šdex
; i < 
nb_šput_¡»ams
; i++) {

1043 
e
 = 
NULL
;

1044 (
e
 = 
	`av_diù_g‘
(
šput_¡»ams
[
i
]->
decod”_İts
, "",ƒ,

1045 
AV_DICT_IGNORE_SUFFIX
)))

1046 
	`av_diù_£t
(&
unu£d_İts
, 
e
->
key
, 
NULL
, 0);

1049 
e
 = 
NULL
;

1050 (
e
 = 
	`av_diù_g‘
(
unu£d_İts
, "",ƒ, 
AV_DICT_IGNORE_SUFFIX
))) {

1051 cÚ¡ 
AVCÏss
 *
şass
 = 
	`avcodec_g‘_şass
();

1052 cÚ¡ 
AVO±iÚ
 *
İtiÚ
 = 
	`av_İt_fšd
(&
şass
, 
e
->
key
, 
NULL
, 0,

1053 
AV_OPT_SEARCH_CHILDREN
 | 
AV_OPT_SEARCH_FAKE_OBJ
);

1054 cÚ¡ 
AVCÏss
 *
fşass
 = 
	`avfÜm©_g‘_şass
();

1055 cÚ¡ 
AVO±iÚ
 *
fİtiÚ
 = 
	`av_İt_fšd
(&
fşass
, 
e
->
key
, 
NULL
, 0,

1056 
AV_OPT_SEARCH_CHILDREN
 | 
AV_OPT_SEARCH_FAKE_OBJ
);

1057 ià(!
İtiÚ
 || 
fİtiÚ
)

1061 ià(!(
İtiÚ
->
æags
 & 
AV_OPT_FLAG_DECODING_PARAM
)) {

1062 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Codec AVOption %s (%s) specified for "

1063 "špuˆf#%d (%sèi nÙ‡ decodšg o±iÚ.\n", 
e
->
key
,

1064 
İtiÚ
->
h–p
 ? o±iÚ->h–°: "", 
nb_šput_fes
 - 1,

1065 
f’ame
);

1066 
	`ex™_´og¿m
(1);

1069 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "Codec AVOption %s (%s) specified for "

1073 "which wa nÙ‡ùu®ly u£d fÜ‡ny sŒ—m.\n", 
e
->
key
,

1074 
İtiÚ
->
h–p
 ? o±iÚ->h–°: "", 
nb_šput_fes
 - 1, 
f’ame
);

1076 
	`av_diù_ä“
(&
unu£d_İts
);

1078 
i
 = 0; i < 
o
->
nb_dump_©chm’t
; i++) {

1079 
j
;

1081 
j
 = 0; j < 
ic
->
nb_¡»ams
; j++) {

1082 
AVSŒ—m
 *
¡
 = 
ic
->
¡»ams
[
j
];

1084 ià(
	`check_¡»am_¥ecif›r
(
ic
, 
¡
, 
o
->
dump_©chm’t
[
i
].
¥ecif›r
) == 1)

1085 
	`dump_©chm’t
(
¡
, 
o
->
dump_©chm’t
[
i
].
u
.
¡r
);

1089 
i
 = 0; i < 
Üig_nb_¡»ams
; i++)

1090 
	`av_diù_ä“
(&
İts
[
i
]);

1091 
	`av_ä“p
(&
İts
);

1093 
šput_¡»am_pÙ’tŸÎy_avaabË
 = 1;

1096 
	}
}

1098 
ušt8_t
 *
	$g‘_lše
(
AVIOCÚ‹xt
 *
s
)

1100 
AVIOCÚ‹xt
 *
lše
;

1101 
ušt8_t
 *
buf
;

1102 
c
;

1104 ià(
	`avio_İ’_dyn_buf
(&
lše
) < 0) {

1105 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Could‚ot‡lloc buffer for„eading…reset.\n");

1106 
	`ex™_´og¿m
(1);

1109 (
c
 = 
	`avio_r8
(
s
)) && c != '\n')

1110 
	`avio_w8
(
lše
, 
c
);

1111 
	`avio_w8
(
lše
, 0);

1112 
	`avio_şo£_dyn_buf
(
lše
, &
buf
);

1114  
buf
;

1115 
	}
}

1117 
	$g‘_´e£t_fe_2
(cÚ¡ *
´e£t_Çme
, cÚ¡ *
codec_Çme
, 
AVIOCÚ‹xt
 **
s
)

1119 
i
, 
»t
 = -1;

1120 
f’ame
[1000];

1121 cÚ¡ *
ba£
[3] = { 
	`g‘’v
("AVCONV_DATADIR"),

1122 
	`g‘’v
("HOME"),

1123 
AVCONV_DATADIR
,

1126 
i
 = 0; i < 
	`FF_ARRAY_ELEMS
(
ba£
è&& 
»t
 < 0; i++) {

1127 ià(!
ba£
[
i
])

1129 ià(
codec_Çme
) {

1130 
	`¢´štf
(
f’ame
, (f’ame), "%s%s/%s-%s.av´e£t", 
ba£
[
i
],

1131 
i
 !ğ1 ? "" : "/.avcÚv", 
codec_Çme
, 
´e£t_Çme
);

1132 
»t
 = 
	`avio_İ’2
(
s
, 
f’ame
, 
AVIO_FLAG_READ
, &
št_cb
, 
NULL
);

1134 ià(
»t
 < 0) {

1135 
	`¢´štf
(
f’ame
, (f’ame), "%s%s/%s.av´e£t", 
ba£
[
i
],

1136 
i
 !ğ1 ? "" : "/.avcÚv", 
´e£t_Çme
);

1137 
»t
 = 
	`avio_İ’2
(
s
, 
f’ame
, 
AVIO_FLAG_READ
, &
št_cb
, 
NULL
);

1140  
»t
;

1141 
	}
}

1143 
	$choo£_’cod”
(
O±iÚsCÚ‹xt
 *
o
, 
AVFÜm©CÚ‹xt
 *
s
, 
OuutSŒ—m
 *
o¡
)

1145 *
codec_Çme
 = 
NULL
;

1147 
	`MATCH_PER_STREAM_OPT
(
codec_Çmes
, 
¡r
, 
codec_Çme
, 
s
, 
o¡
->
¡
);

1148 ià(!
codec_Çme
) {

1149 
o¡
->
¡
->
codec
->
codec_id
 = 
	`av_guess_codec
(
s
->
ofÜm©
, 
NULL
, s->
f’ame
,

1150 
NULL
, 
o¡
->
¡
->
codec
->
codec_ty³
);

1151 
o¡
->
’c
 = 
	`avcodec_fšd_’cod”
(o¡->
¡
->
codec
->
codec_id
);

1152 } ià(!
	`¡rcmp
(
codec_Çme
, "copy"))

1153 
o¡
->
¡»am_cİy
 = 1;

1155 
o¡
->
’c
 = 
	`fšd_codec_Ü_d›
(
codec_Çme
, o¡->
¡
->
codec
->
codec_ty³
, 1);

1156 
o¡
->
¡
->
codec
->
codec_id
 = o¡->
’c
->
id
;

1158 
	}
}

1160 
OuutSŒ—m
 *
	$Ãw_ouut_¡»am
(
O±iÚsCÚ‹xt
 *
o
, 
AVFÜm©CÚ‹xt
 *
oc
, 
AVMedŸTy³
 
ty³
, 
sourû_šdex
)

1162 
OuutSŒ—m
 *
o¡
;

1163 
AVSŒ—m
 *
¡
 = 
	`avfÜm©_Ãw_¡»am
(
oc
, 
NULL
);

1164 
idx
 = 
oc
->
nb_¡»ams
 - 1, 
»t
 = 0;

1165 *
bsf
 = 
NULL
, *
Ãxt
, *
codec_g
 = NULL;

1166 
AVB™SŒ—mF‹rCÚ‹xt
 *
bsfc
, *
bsfc_´ev
 = 
NULL
;

1167 
qsÿË
 = -1;

1168 
i
;

1170 ià(!
¡
) {

1171 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Could‚ot‡lloc stream.\n");

1172 
	`ex™_´og¿m
(1);

1175 ià(
oc
->
nb_¡»ams
 - 1 < 
o
->
nb_¡»amid_m­
)

1176 
¡
->
id
 = 
o
->
¡»amid_m­
[
oc
->
nb_¡»ams
 - 1];

1178 
	`GROW_ARRAY
(
ouut_¡»ams
, 
nb_ouut_¡»ams
);

1179 ià(!(
o¡
 = 
	`av_m®locz
((*ost))))

1180 
	`ex™_´og¿m
(1);

1181 
ouut_¡»ams
[
nb_ouut_¡»ams
 - 1] = 
o¡
;

1183 
o¡
->
fe_šdex
 = 
nb_ouut_fes
 - 1;

1184 
o¡
->
šdex
 = 
idx
;

1185 
o¡
->
¡
 = st;

1186 
¡
->
codec
->
codec_ty³
 = 
ty³
;

1187 
	`choo£_’cod”
(
o
, 
oc
, 
o¡
);

1189 
o¡
->
’c_ùx
 = 
	`avcodec_®loc_cÚ‹xt3
(o¡->
’c
);

1190 ià(!
o¡
->
’c_ùx
) {

1191 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Error‡llocatingheƒncoding context.\n");

1192 
	`ex™_´og¿m
(1);

1194 
o¡
->
’c_ùx
->
codec_ty³
 = 
ty³
;

1196 ià(
o¡
->
’c
) {

1197 
AVIOCÚ‹xt
 *
s
 = 
NULL
;

1198 *
buf
 = 
NULL
, *
¬g
 = NULL, *
´e£t
 = NULL;

1200 
o¡
->
’cod”_İts
 = 
	`f‹r_codec_İts
(
o
->
g
->
codec_İts
, o¡->
’c
->
id
, 
oc
, 
¡
, ost->enc);

1202 
	`MATCH_PER_STREAM_OPT
(
´e£ts
, 
¡r
, 
´e£t
, 
oc
, 
¡
);

1203 ià(
´e£t
 && (!(
»t
 = 
	`g‘_´e£t_fe_2
Õ»£t, 
o¡
->
’c
->
Çme
, &
s
)))) {

1205 
buf
 = 
	`g‘_lše
(
s
);

1206 ià(!
buf
[0] || buf[0] == '#') {

1207 
	`av_ä“
(
buf
);

1210 ià(!(
¬g
 = 
	`¡rchr
(
buf
, '='))) {

1211 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Invalid†ine found inhe…reset file.\n");

1212 
	`ex™_´og¿m
(1);

1214 *
¬g
++ = 0;

1215 
	`av_diù_£t
(&
o¡
->
’cod”_İts
, 
buf
, 
¬g
, 
AV_DICT_DONT_OVERWRITE
);

1216 
	`av_ä“
(
buf
);

1217 } !
s
->
eof_»ached
);

1218 
	`avio_şo£p
(&
s
);

1220 ià(
»t
) {

1221 
	`av_log
(
NULL
, 
AV_LOG_FATAL
,

1223 
´e£t
, 
o¡
->
fe_šdex
, o¡->
šdex
);

1224 
	`ex™_´og¿m
(1);

1227 
o¡
->
’cod”_İts
 = 
	`f‹r_codec_İts
(
o
->
g
->
codec_İts
, 
AV_CODEC_ID_NONE
, 
oc
, 
¡
, 
NULL
);

1230 
o¡
->
max_äames
 = 
INT64_MAX
;

1231 
	`MATCH_PER_STREAM_OPT
(
max_äames
, 
i64
, 
o¡
->max_äames, 
oc
, 
¡
);

1232 
i
 = 0; i<
o
->
nb_max_äames
; i++) {

1233 *
p
 = 
o
->
max_äames
[
i
].
¥ecif›r
;

1234 ià(!*
p
 && 
ty³
 !ğ
AVMEDIA_TYPE_VIDEO
) {

1235 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "Applying unspecific -frameso‚on video streams, maybe you meant -vframes ?\n");

1240 
o¡
->
cİy_´iÜ_¡¬t
 = -1;

1241 
	`MATCH_PER_STREAM_OPT
(
cİy_´iÜ_¡¬t
, 
i
, 
o¡
->cİy_´iÜ_¡¬t, 
oc
 ,
¡
);

1243 
	`MATCH_PER_STREAM_OPT
(
b™¡»am_f‹rs
, 
¡r
, 
bsf
, 
oc
, 
¡
);

1244 
bsf
) {

1245 *
¬g
 = 
NULL
;

1246 ià(
Ãxt
 = 
	`¡rchr
(
bsf
, ','))

1247 *
Ãxt
++ = 0;

1248 ià(
¬g
 = 
	`¡rchr
(
bsf
, '='))

1249 *
¬g
++ = 0;

1250 ià(!(
bsfc
 = 
	`av_b™¡»am_f‹r_š™
(
bsf
))) {

1251 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "UnknowÀb™¡»am f‹¸%s\n", 
bsf
);

1252 
	`ex™_´og¿m
(1);

1254 ià(
bsfc_´ev
)

1255 
bsfc_´ev
->
Ãxt
 = 
bsfc
;

1257 
o¡
->
b™¡»am_f‹rs
 = 
bsfc
;

1258 ià(
¬g
)

1259 ià(!(
bsfc
->
¬gs
 = 
	`av_¡rdup
(
¬g
))) {

1260 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Bitstream filter memory‡llocation failed\n");

1261 
	`ex™_´og¿m
(1);

1264 
bsfc_´ev
 = 
bsfc
;

1265 
bsf
 = 
Ãxt
;

1268 
	`MATCH_PER_STREAM_OPT
(
codec_gs
, 
¡r
, 
codec_g
, 
oc
, 
¡
);

1269 ià(
codec_g
) {

1270 
ušt32_t
 
g
 = 
	`¡¹Ş
(
codec_g
, &
Ãxt
, 0);

1271 ià(*
Ãxt
)

1272 
g
 = 
	`AV_RL32
(
codec_g
);

1273 
o¡
->
¡
->
codec
->
codec_g
 =

1274 
o¡
->
’c_ùx
->
codec_g
 = 
g
;

1277 
	`MATCH_PER_STREAM_OPT
(
qsÿË
, 
dbl
, qsÿË, 
oc
, 
¡
);

1278 ià(
qsÿË
 >= 0) {

1279 
o¡
->
’c_ùx
->
æags
 |ğ
AV_CODEC_FLAG_QSCALE
;

1280 
o¡
->
’c_ùx
->
glob®_qu®™y
 = 
FF_QP2LAMBDA
 * 
qsÿË
;

1283 
	`MATCH_PER_STREAM_OPT
(
di¥os™iÚ
, 
¡r
, 
o¡
->di¥os™iÚ, 
oc
, 
¡
);

1284 
o¡
->
di¥os™iÚ
 = 
	`av_¡rdup
(ost->disposition);

1286 ià(
oc
->
ofÜm©
->
æags
 & 
AVFMT_GLOBALHEADER
)

1287 
o¡
->
’c_ùx
->
æags
 |ğ
AV_CODEC_FLAG_GLOBAL_HEADER
;

1289 
	`av_diù_cİy
(&
o¡
->
sws_diù
, 
o
->
g
->sws_dict, 0);

1291 
	`av_diù_cİy
(&
o¡
->
swr_İts
, 
o
->
g
->swr_opts, 0);

1292 ià(
o¡
->
’c
 && 
	`av_g‘_exaù_b™s_³r_§m¶e
(o¡->’c->
id
) == 24)

1293 
	`av_diù_£t
(&
o¡
->
swr_İts
, "output_sample_bits", "24", 0);

1295 
	`av_diù_cİy
(&
o¡
->
»§m¶e_İts
, 
o
->
g
->resample_opts, 0);

1297 
o¡
->
sourû_šdex
 = source_index;

1298 ià(
sourû_šdex
 >= 0) {

1299 
o¡
->
sync_i¡
 = 
šput_¡»ams
[
sourû_šdex
];

1300 
šput_¡»ams
[
sourû_šdex
]->
disÿrd
 = 0;

1301 
šput_¡»ams
[
sourû_šdex
]->
¡
->
disÿrd
 = iÅut_¡»ams[sourû_šdex]->
u£r_£t_disÿrd
;

1303 
o¡
->
Ï¡_mux_dts
 = 
AV_NOPTS_VALUE
;

1305  
o¡
;

1306 
	}
}

1308 
	$·r£_m©rix_cÛffs
(
ušt16_t
 *
de¡
, cÚ¡ *
¡r
)

1310 
i
;

1311 cÚ¡ *
p
 = 
¡r
;

1312 
i
 = 0;; i++) {

1313 
de¡
[
i
] = 
	`©oi
(
p
);

1314 ià(
i
 == 63)

1316 
p
 = 
	`¡rchr
(p, ',');

1317 ià(!
p
) {

1318 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "SyÁaxƒ¼Ü iÀm©rix \"%s\"‡ˆcÛfà%d\n", 
¡r
, 
i
);

1319 
	`ex™_´og¿m
(1);

1321 
p
++;

1323 
	}
}

1326 
ušt8_t
 *
	$»ad_fe
(cÚ¡ *
f’ame
)

1328 
AVIOCÚ‹xt
 *
pb
 = 
NULL
;

1329 
AVIOCÚ‹xt
 *
dyn_buf
 = 
NULL
;

1330 
»t
 = 
	`avio_İ’
(&
pb
, 
f’ame
, 
AVIO_FLAG_READ
);

1331 
ušt8_t
 
buf
[1024], *
¡r
;

1333 ià(
»t
 < 0) {

1334 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "E¼Ü o³nšg f%s.\n", 
f’ame
);

1335  
NULL
;

1338 
»t
 = 
	`avio_İ’_dyn_buf
(&
dyn_buf
);

1339 ià(
»t
 < 0) {

1340 
	`avio_şo£p
(&
pb
);

1341  
NULL
;

1343 (
»t
 = 
	`avio_»ad
(
pb
, 
buf
, (buf))) > 0)

1344 
	`avio_wr™e
(
dyn_buf
, 
buf
, 
»t
);

1345 
	`avio_w8
(
dyn_buf
, 0);

1346 
	`avio_şo£p
(&
pb
);

1348 
»t
 = 
	`avio_şo£_dyn_buf
(
dyn_buf
, &
¡r
);

1349 ià(
»t
 < 0)

1350  
NULL
;

1351  
¡r
;

1352 
	}
}

1354 *
	$g‘_o¡_f‹rs
(
O±iÚsCÚ‹xt
 *
o
, 
AVFÜm©CÚ‹xt
 *
oc
,

1355 
OuutSŒ—m
 *
o¡
)

1357 
AVSŒ—m
 *
¡
 = 
o¡
->st;

1359 ià(
o¡
->
f‹rs_süt
 && o¡->
f‹rs
) {

1360 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Both -filter‡nd -filter_script set for "

1361 "ouuˆ¡»am #%d:%d.\n", 
nb_ouut_fes
, 
¡
->
šdex
);

1362 
	`ex™_´og¿m
(1);

1365 ià(
o¡
->
f‹rs_süt
)

1366  
	`»ad_fe
(
o¡
->
f‹rs_süt
);

1367 ià(
o¡
->
f‹rs
)

1368  
	`av_¡rdup
(
o¡
->
f‹rs
);

1370  
	`av_¡rdup
(
¡
->
codec
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
 ?

1372 
	}
}

1374 
	$check_¡»amcİy_f‹rs
(
O±iÚsCÚ‹xt
 *
o
, 
AVFÜm©CÚ‹xt
 *
oc
,

1375 cÚ¡ 
OuutSŒ—m
 *
o¡
, 
AVMedŸTy³
 
ty³
)

1377 ià(
o¡
->
f‹rs_süt
 || o¡->
f‹rs
) {

1378 
	`av_log
(
NULL
, 
AV_LOG_ERROR
,

1381 
o¡
->
f‹rs
 ? "Filtergraph" : "Filtergraph script",

1382 
o¡
->
f‹rs
 ? o¡->f‹r : o¡->
f‹rs_süt
,

1383 
	`av_g‘_medŸ_ty³_¡ršg
(
ty³
), 
o¡
->
fe_šdex
, o¡->
šdex
);

1384 
	`ex™_´og¿m
(1);

1386 
	}
}

1388 
OuutSŒ—m
 *
	$Ãw_video_¡»am
(
O±iÚsCÚ‹xt
 *
o
, 
AVFÜm©CÚ‹xt
 *
oc
, 
sourû_šdex
)

1390 
AVSŒ—m
 *
¡
;

1391 
OuutSŒ—m
 *
o¡
;

1392 
AVCodecCÚ‹xt
 *
video_’c
;

1393 *
äame_¿‹
 = 
NULL
, *
äame_a¥eù_¿tio
 = NULL;

1395 
o¡
 = 
	`Ãw_ouut_¡»am
(
o
, 
oc
, 
AVMEDIA_TYPE_VIDEO
, 
sourû_šdex
);

1396 
¡
 = 
o¡
->st;

1397 
video_’c
 = 
o¡
->
’c_ùx
;

1399 
	`MATCH_PER_STREAM_OPT
(
äame_¿‹s
, 
¡r
, 
äame_¿‹
, 
oc
, 
¡
);

1400 ià(
äame_¿‹
 && 
	`av_·r£_video_¿‹
(&
o¡
->frame_rate, frame_rate) < 0) {

1401 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Inv®id f¿m”©v®ue: %s\n", 
äame_¿‹
);

1402 
	`ex™_´og¿m
(1);

1404 ià(
äame_¿‹
 && 
video_sync_m‘hod
 =ğ
VSYNC_PASSTHROUGH
)

1405 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Using -vsync 0‡nd -r can…roduce invalid output files\n");

1407 
	`MATCH_PER_STREAM_OPT
(
äame_a¥eù_¿tios
, 
¡r
, 
äame_a¥eù_¿tio
, 
oc
, 
¡
);

1408 ià(
äame_a¥eù_¿tio
) {

1409 
AVR©iÚ®
 
q
;

1410 ià(
	`av_·r£_¿tio
(&
q
, 
äame_a¥eù_¿tio
, 255, 0, 
NULL
) < 0 ||

1411 
q
.
num
 <ğ0 || q.
d’
 <= 0) {

1412 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Inv®id‡¥eù„©io: %s\n", 
äame_a¥eù_¿tio
);

1413 
	`ex™_´og¿m
(1);

1415 
o¡
->
äame_a¥eù_¿tio
 = 
q
;

1418 
	`MATCH_PER_STREAM_OPT
(
f‹r_süts
, 
¡r
, 
o¡
->
f‹rs_süt
, 
oc
, 
¡
);

1419 
	`MATCH_PER_STREAM_OPT
(
f‹rs
, 
¡r
, 
o¡
->f‹rs, 
oc
, 
¡
);

1421 ià(!
o¡
->
¡»am_cİy
) {

1422 cÚ¡ *
p
 = 
NULL
;

1423 *
äame_size
 = 
NULL
;

1424 *
äame_pix_fmt
 = 
NULL
;

1425 *
šŒa_m©rix
 = 
NULL
, *
š‹r_m©rix
 = NULL;

1426 *
chroma_šŒa_m©rix
 = 
NULL
;

1427 
do_·ss
 = 0;

1428 
i
;

1430 
	`MATCH_PER_STREAM_OPT
(
äame_sizes
, 
¡r
, 
äame_size
, 
oc
, 
¡
);

1431 ià(
äame_size
 && 
	`av_·r£_video_size
(&
video_’c
->
width
, &video_’c->
height
, frame_size) < 0) {

1432 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Inv®id f¿msize: %s.\n", 
äame_size
);

1433 
	`ex™_´og¿m
(1);

1436 
video_’c
->
b™s_³r_¿w_§m¶e
 = 
äame_b™s_³r_¿w_§m¶e
;

1437 
	`MATCH_PER_STREAM_OPT
(
äame_pix_fmts
, 
¡r
, 
äame_pix_fmt
, 
oc
, 
¡
);

1438 ià(
äame_pix_fmt
 && *frame_pix_fmt == '+') {

1439 
o¡
->
k“p_pix_fmt
 = 1;

1440 ià(!*++
äame_pix_fmt
)

1441 
äame_pix_fmt
 = 
NULL
;

1443 ià(
äame_pix_fmt
 && (
video_’c
->
pix_fmt
 = 
	`av_g‘_pix_fmt
(äame_pix_fmt)è=ğ
AV_PIX_FMT_NONE
) {

1444 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "UnknowÀpix– fÜm©„eque¡ed: %s.\n", 
äame_pix_fmt
);

1445 
	`ex™_´og¿m
(1);

1447 
¡
->
§m¶e_a¥eù_¿tio
 = 
video_’c
->sample_aspect_ratio;

1449 ià(
šŒa_Úly
)

1450 
video_’c
->
gİ_size
 = 0;

1451 
	`MATCH_PER_STREAM_OPT
(
šŒa_m©riûs
, 
¡r
, 
šŒa_m©rix
, 
oc
, 
¡
);

1452 ià(
šŒa_m©rix
) {

1453 ià(!(
video_’c
->
šŒa_m©rix
 = 
	`av_m®locz
((*video_enc->intra_matrix) * 64))) {

1454 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Could‚ot‡llocate memory for intra matrix.\n");

1455 
	`ex™_´og¿m
(1);

1457 
	`·r£_m©rix_cÛffs
(
video_’c
->
šŒa_m©rix
, intra_matrix);

1459 
	`MATCH_PER_STREAM_OPT
(
chroma_šŒa_m©riûs
, 
¡r
, 
chroma_šŒa_m©rix
, 
oc
, 
¡
);

1460 ià(
chroma_šŒa_m©rix
) {

1461 
ušt16_t
 *
p
 = 
	`av_m®locz
((*
video_’c
->
chroma_šŒa_m©rix
) * 64);

1462 ià(!
p
) {

1463 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Could‚ot‡llocate memory for intra matrix.\n");

1464 
	`ex™_´og¿m
(1);

1466 
	`av_codec_£t_chroma_šŒa_m©rix
(
video_’c
, 
p
);

1467 
	`·r£_m©rix_cÛffs
(
p
, 
chroma_šŒa_m©rix
);

1469 
	`MATCH_PER_STREAM_OPT
(
š‹r_m©riûs
, 
¡r
, 
š‹r_m©rix
, 
oc
, 
¡
);

1470 ià(
š‹r_m©rix
) {

1471 ià(!(
video_’c
->
š‹r_m©rix
 = 
	`av_m®locz
((*video_enc->inter_matrix) * 64))) {

1472 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Could‚ot‡llocate memory for inter matrix.\n");

1473 
	`ex™_´og¿m
(1);

1475 
	`·r£_m©rix_cÛffs
(
video_’c
->
š‹r_m©rix
, inter_matrix);

1478 
	`MATCH_PER_STREAM_OPT
(
rc_ov”rides
, 
¡r
, 
p
, 
oc
, 
¡
);

1479 
i
 = 0; 
p
; i++) {

1480 
¡¬t
, 
’d
, 
q
;

1481 
e
 = 
	`ssÿnf
(
p
, "%d,%d,%d", &
¡¬t
, &
’d
, &
q
);

1482 ià(
e
 != 3) {

1483 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "error…arsing„c_override\n");

1484 
	`ex™_´og¿m
(1);

1486 
video_’c
->
rc_ov”ride
 =

1487 
	`av_»®loc_¬¿y
(
video_’c
->
rc_ov”ride
,

1488 
i
 + 1, (
RcOv”ride
));

1489 ià(!
video_’c
->
rc_ov”ride
) {

1490 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Could‚ot (re)allocate memory for„c_override.\n");

1491 
	`ex™_´og¿m
(1);

1493 
video_’c
->
rc_ov”ride
[
i
].
¡¬t_äame
 = 
¡¬t
;

1494 
video_’c
->
rc_ov”ride
[
i
].
’d_äame
 = 
’d
;

1495 ià(
q
 > 0) {

1496 
video_’c
->
rc_ov”ride
[
i
].
qsÿË
 = 
q
;

1497 
video_’c
->
rc_ov”ride
[
i
].
qu®™y_çùÜ
 = 1.0;

1500 
video_’c
->
rc_ov”ride
[
i
].
qsÿË
 = 0;

1501 
video_’c
->
rc_ov”ride
[
i
].
qu®™y_çùÜ
 = -
q
/100.0;

1503 
p
 = 
	`¡rchr
(p, '/');

1504 ià(
p
)…++;

1506 
video_’c
->
rc_ov”ride_couÁ
 = 
i
;

1508 ià(
do_p¢r
)

1509 
video_’c
->
æags
|ğ
AV_CODEC_FLAG_PSNR
;

1512 
	`MATCH_PER_STREAM_OPT
(
·ss
, 
i
, 
do_·ss
, 
oc
, 
¡
);

1513 ià(
do_·ss
) {

1514 ià(
do_·ss
 & 1) {

1515 
video_’c
->
æags
 |ğ
AV_CODEC_FLAG_PASS1
;

1516 
	`av_diù_£t
(&
o¡
->
’cod”_İts
, "æags", "+·ss1", 
AV_DICT_APPEND
);

1518 ià(
do_·ss
 & 2) {

1519 
video_’c
->
æags
 |ğ
AV_CODEC_FLAG_PASS2
;

1520 
	`av_diù_£t
(&
o¡
->
’cod”_İts
, "æags", "+·ss2", 
AV_DICT_APPEND
);

1524 
	`MATCH_PER_STREAM_OPT
(
·s¦ogfes
, 
¡r
, 
o¡
->
logfe_´efix
, 
oc
, 
¡
);

1525 ià(
o¡
->
logfe_´efix
 &&

1526 !(
o¡
->
logfe_´efix
 = 
	`av_¡rdup
(ost->logfile_prefix)))

1527 
	`ex™_´og¿m
(1);

1529 ià(
do_·ss
) {

1530 
logf’ame
[1024];

1531 
FILE
 *
f
;

1533 
	`¢´štf
(
logf’ame
, (logfilename), "%s-%d.log",

1534 
o¡
->
logfe_´efix
 ? ost->logfile_prefix :

1535 
DEFAULT_PASS_LOGFILENAME_PREFIX
,

1536 
i
);

1537 ià(!
	`¡rcmp
(
o¡
->
’c
->
Çme
, "libx264")) {

1538 
	`av_diù_£t
(&
o¡
->
’cod”_İts
, "¡©s", 
logf’ame
, 
AV_DICT_DONT_OVERWRITE
);

1540 ià(
video_’c
->
æags
 & 
AV_CODEC_FLAG_PASS2
) {

1541 *
logbufãr
 = 
	`»ad_fe
(
logf’ame
);

1543 ià(!
logbufãr
) {

1544 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Error„eading†og file '%s' for…ass-2ƒncoding\n",

1545 
logf’ame
);

1546 
	`ex™_´og¿m
(1);

1548 
video_’c
->
¡©s_š
 = 
logbufãr
;

1550 ià(
video_’c
->
æags
 & 
AV_CODEC_FLAG_PASS1
) {

1551 
f
 = 
	`av_fİ’_utf8
(
logf’ame
, "wb");

1552 ià(!
f
) {

1553 
	`av_log
(
NULL
, 
AV_LOG_FATAL
,

1555 
logf’ame
, 
	`¡»¼Ü
(
”ºo
));

1556 
	`ex™_´og¿m
(1);

1558 
o¡
->
logfe
 = 
f
;

1563 
	`MATCH_PER_STREAM_OPT
(
fÜûd_key_äames
, 
¡r
, 
o¡
->
fÜûd_keyäames
, 
oc
, 
¡
);

1564 ià(
o¡
->
fÜûd_keyäames
)

1565 
o¡
->
fÜûd_keyäames
 = 
	`av_¡rdup
(ost->forced_keyframes);

1567 
	`MATCH_PER_STREAM_OPT
(
fÜû_ås
, 
i
, 
o¡
->fÜû_ås, 
oc
, 
¡
);

1569 
o¡
->
tİ_f›ld_fœ¡
 = -1;

1570 
	`MATCH_PER_STREAM_OPT
(
tİ_f›ld_fœ¡
, 
i
, 
o¡
->tİ_f›ld_fœ¡, 
oc
, 
¡
);

1573 
o¡
->
avf‹r
 = 
	`g‘_o¡_f‹rs
(
o
, 
oc
, ost);

1574 ià(!
o¡
->
avf‹r
)

1575 
	`ex™_´og¿m
(1);

1577 
	`MATCH_PER_STREAM_OPT
(
cİy_š™Ÿl_nÚkeyäames
, 
i
, 
o¡
->cİy_š™Ÿl_nÚkeyäames, 
oc
 ,
¡
);

1580 ià(
o¡
->
¡»am_cİy
)

1581 
	`check_¡»amcİy_f‹rs
(
o
, 
oc
, 
o¡
, 
AVMEDIA_TYPE_VIDEO
);

1583  
o¡
;

1584 
	}
}

1586 
OuutSŒ—m
 *
	$Ãw_audio_¡»am
(
O±iÚsCÚ‹xt
 *
o
, 
AVFÜm©CÚ‹xt
 *
oc
, 
sourû_šdex
)

1588 
n
;

1589 
AVSŒ—m
 *
¡
;

1590 
OuutSŒ—m
 *
o¡
;

1591 
AVCodecCÚ‹xt
 *
audio_’c
;

1593 
o¡
 = 
	`Ãw_ouut_¡»am
(
o
, 
oc
, 
AVMEDIA_TYPE_AUDIO
, 
sourû_šdex
);

1594 
¡
 = 
o¡
->st;

1596 
audio_’c
 = 
o¡
->
’c_ùx
;

1597 
audio_’c
->
codec_ty³
 = 
AVMEDIA_TYPE_AUDIO
;

1599 
	`MATCH_PER_STREAM_OPT
(
f‹r_süts
, 
¡r
, 
o¡
->
f‹rs_süt
, 
oc
, 
¡
);

1600 
	`MATCH_PER_STREAM_OPT
(
f‹rs
, 
¡r
, 
o¡
->f‹rs, 
oc
, 
¡
);

1602 ià(!
o¡
->
¡»am_cİy
) {

1603 *
§m¶e_fmt
 = 
NULL
;

1605 
	`MATCH_PER_STREAM_OPT
(
audio_chªÃls
, 
i
, 
audio_’c
->
chªÃls
, 
oc
, 
¡
);

1607 
	`MATCH_PER_STREAM_OPT
(
§m¶e_fmts
, 
¡r
, 
§m¶e_fmt
, 
oc
, 
¡
);

1608 ià(
§m¶e_fmt
 &&

1609 (
audio_’c
->
§m¶e_fmt
 = 
	`av_g‘_§m¶e_fmt
(§m¶e_fmt)è=ğ
AV_SAMPLE_FMT_NONE
) {

1610 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Inv®id sam¶fÜm© '%s'\n", 
§m¶e_fmt
);

1611 
	`ex™_´og¿m
(1);

1614 
	`MATCH_PER_STREAM_OPT
(
audio_§m¶e_¿‹
, 
i
, 
audio_’c
->
§m¶e_¿‹
, 
oc
, 
¡
);

1616 
	`MATCH_PER_STREAM_OPT
(
­ad
, 
¡r
, 
o¡
->­ad, 
oc
, 
¡
);

1617 
o¡
->
­ad
 = 
	`av_¡rdup
(ost->apad);

1619 
o¡
->
avf‹r
 = 
	`g‘_o¡_f‹rs
(
o
, 
oc
, ost);

1620 ià(!
o¡
->
avf‹r
)

1621 
	`ex™_´og¿m
(1);

1624 
n
 = 0;‚ < 
o
->
nb_audio_chªÃl_m­s
;‚++) {

1625 
AudioChªÃlM­
 *
m­
 = &
o
->
audio_chªÃl_m­s
[
n
];

1626 ià((
m­
->
ofe_idx
 =ğ-1 || 
o¡
->
fe_šdex
 == map->ofile_idx) &&

1627 (
m­
->
o¡»am_idx
 =ğ-1 || 
o¡
->
¡
->
šdex
 == map->ostream_idx)) {

1628 
IÅutSŒ—m
 *
i¡
;

1630 ià(
m­
->
chªÃl_idx
 == -1) {

1631 
i¡
 = 
NULL
;

1632 } ià(
o¡
->
sourû_šdex
 < 0) {

1633 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Cannot determine input stream for channel mapping %d.%d\n",

1634 
o¡
->
fe_šdex
, o¡->
¡
->
šdex
);

1637 
i¡
 = 
šput_¡»ams
[
o¡
->
sourû_šdex
];

1640 ià(!
i¡
 || (i¡->
fe_šdex
 =ğ
m­
->
fe_idx
 && i¡->
¡
->
šdex
 =ğm­->
¡»am_idx
)) {

1641 ià(
	`av_»®loı_¬¿y
(&
o¡
->
audio_chªÃls_m­
,

1642 
o¡
->
audio_chªÃls_m­³d
 + 1,

1643 (*
o¡
->
audio_chªÃls_m­
)

1645 
	`ex™_´og¿m
(1);

1647 
o¡
->
audio_chªÃls_m­
[o¡->
audio_chªÃls_m­³d
++] = 
m­
->
chªÃl_idx
;

1653 ià(
o¡
->
¡»am_cİy
)

1654 
	`check_¡»amcİy_f‹rs
(
o
, 
oc
, 
o¡
, 
AVMEDIA_TYPE_AUDIO
);

1656  
o¡
;

1657 
	}
}

1659 
OuutSŒ—m
 *
	$Ãw_d©a_¡»am
(
O±iÚsCÚ‹xt
 *
o
, 
AVFÜm©CÚ‹xt
 *
oc
, 
sourû_šdex
)

1661 
OuutSŒ—m
 *
o¡
;

1663 
o¡
 = 
	`Ãw_ouut_¡»am
(
o
, 
oc
, 
AVMEDIA_TYPE_DATA
, 
sourû_šdex
);

1664 ià(!
o¡
->
¡»am_cİy
) {

1665 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Data streamƒncoding‚ot supported yet (only streamcopy)\n");

1666 
	`ex™_´og¿m
(1);

1669  
o¡
;

1670 
	}
}

1672 
OuutSŒ—m
 *
	$Ãw_unknown_¡»am
(
O±iÚsCÚ‹xt
 *
o
, 
AVFÜm©CÚ‹xt
 *
oc
, 
sourû_šdex
)

1674 
OuutSŒ—m
 *
o¡
;

1676 
o¡
 = 
	`Ãw_ouut_¡»am
(
o
, 
oc
, 
AVMEDIA_TYPE_UNKNOWN
, 
sourû_šdex
);

1677 ià(!
o¡
->
¡»am_cİy
) {

1678 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Unknown streamƒncoding‚ot supported yet (only streamcopy)\n");

1679 
	`ex™_´og¿m
(1);

1682  
o¡
;

1683 
	}
}

1685 
OuutSŒ—m
 *
	$Ãw_©chm’t_¡»am
(
O±iÚsCÚ‹xt
 *
o
, 
AVFÜm©CÚ‹xt
 *
oc
, 
sourû_šdex
)

1687 
OuutSŒ—m
 *
o¡
 = 
	`Ãw_ouut_¡»am
(
o
, 
oc
, 
AVMEDIA_TYPE_ATTACHMENT
, 
sourû_šdex
);

1688 
o¡
->
¡»am_cİy
 = 1;

1689 
o¡
->
fšished
 = 1;

1690  
o¡
;

1691 
	}
}

1693 
OuutSŒ—m
 *
	$Ãw_subt™Ë_¡»am
(
O±iÚsCÚ‹xt
 *
o
, 
AVFÜm©CÚ‹xt
 *
oc
, 
sourû_šdex
)

1695 
AVSŒ—m
 *
¡
;

1696 
OuutSŒ—m
 *
o¡
;

1697 
AVCodecCÚ‹xt
 *
subt™Ë_’c
;

1699 
o¡
 = 
	`Ãw_ouut_¡»am
(
o
, 
oc
, 
AVMEDIA_TYPE_SUBTITLE
, 
sourû_šdex
);

1700 
¡
 = 
o¡
->st;

1701 
subt™Ë_’c
 = 
o¡
->
’c_ùx
;

1703 
subt™Ë_’c
->
codec_ty³
 = 
AVMEDIA_TYPE_SUBTITLE
;

1705 
	`MATCH_PER_STREAM_OPT
(
cİy_š™Ÿl_nÚkeyäames
, 
i
, 
o¡
->cİy_š™Ÿl_nÚkeyäames, 
oc
, 
¡
);

1707 ià(!
o¡
->
¡»am_cİy
) {

1708 *
äame_size
 = 
NULL
;

1710 
	`MATCH_PER_STREAM_OPT
(
äame_sizes
, 
¡r
, 
äame_size
, 
oc
, 
¡
);

1711 ià(
äame_size
 && 
	`av_·r£_video_size
(&
subt™Ë_’c
->
width
, &subt™Ë_’c->
height
, frame_size) < 0) {

1712 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Inv®id f¿msize: %s.\n", 
äame_size
);

1713 
	`ex™_´og¿m
(1);

1717  
o¡
;

1718 
	}
}

1721 
	$İt_¡»amid
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

1723 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

1724 
idx
;

1725 *
p
;

1726 
idx_¡r
[16];

1728 
	`av_¡¾ıy
(
idx_¡r
, 
¬g
, (idx_str));

1729 
p
 = 
	`¡rchr
(
idx_¡r
, ':');

1730 ià(!
p
) {

1731 
	`av_log
(
NULL
, 
AV_LOG_FATAL
,

1733 
¬g
, 
İt
);

1734 
	`ex™_´og¿m
(1);

1736 *
p
++ = '\0';

1737 
idx
 = 
	`·r£_numb”_Ü_d›
(
İt
, 
idx_¡r
, 
OPT_INT
, 0, 
MAX_STREAMS
-1);

1738 
o
->
¡»amid_m­
 = 
	`grow_¬¿y
(o->¡»amid_m­, (*o->¡»amid_m­), &o->
nb_¡»amid_m­
, 
idx
+1);

1739 
o
->
¡»amid_m­
[
idx
] = 
	`·r£_numb”_Ü_d›
(
İt
, 
p
, 
OPT_INT
, 0, 
INT_MAX
);

1741 
	}
}

1743 
	$cİy_ch­‹rs
(
IÅutFe
 *
ife
, 
OuutFe
 *
ofe
, 
cİy_m‘ad©a
)

1745 
AVFÜm©CÚ‹xt
 *
is
 = 
ife
->
ùx
;

1746 
AVFÜm©CÚ‹xt
 *
os
 = 
ofe
->
ùx
;

1747 
AVCh­‹r
 **
tmp
;

1748 
i
;

1750 
tmp
 = 
	`av_»®loc_f
(
os
->
ch­‹rs
, 
is
->
nb_ch­‹rs
 + os->nb_chapters, (*os->chapters));

1751 ià(!
tmp
)

1752  
	`AVERROR
(
ENOMEM
);

1753 
os
->
ch­‹rs
 = 
tmp
;

1755 
i
 = 0; i < 
is
->
nb_ch­‹rs
; i++) {

1756 
AVCh­‹r
 *
š_ch
 = 
is
->
ch­‹rs
[
i
], *
out_ch
;

1757 
št64_t
 
¡¬t_time
 = (
ofe
->¡¬t_tim=ğ
AV_NOPTS_VALUE
) ? 0 : ofile->start_time;

1758 
št64_t
 
ts_off
 = 
	`av_»sÿË_q
(
¡¬t_time
 - 
ife
->
ts_off£t
,

1759 
AV_TIME_BASE_Q
, 
š_ch
->
time_ba£
);

1760 
št64_t
 
¹
 = (
ofe
->
»cÜdšg_time
 =ğ
INT64_MAX
) ? INT64_MAX :

1761 
	`av_»sÿË_q
(
ofe
->
»cÜdšg_time
, 
AV_TIME_BASE_Q
, 
š_ch
->
time_ba£
);

1764 ià(
š_ch
->
’d
 < 
ts_off
)

1766 ià(
¹
 !ğ
INT64_MAX
 && 
š_ch
->
¡¬t
 >„ˆ+ 
ts_off
)

1769 
out_ch
 = 
	`av_m®locz
((
AVCh­‹r
));

1770 ià(!
out_ch
)

1771  
	`AVERROR
(
ENOMEM
);

1773 
out_ch
->
id
 = 
š_ch
->id;

1774 
out_ch
->
time_ba£
 = 
š_ch
->time_base;

1775 
out_ch
->
¡¬t
 = 
	`FFMAX
(0, 
š_ch
->¡¬ˆ- 
ts_off
);

1776 
out_ch
->
’d
 = 
	`FFMIN
(
¹
, 
š_ch
->’d - 
ts_off
);

1778 ià(
cİy_m‘ad©a
)

1779 
	`av_diù_cİy
(&
out_ch
->
m‘ad©a
, 
š_ch
->metadata, 0);

1781 
os
->
ch­‹rs
[os->
nb_ch­‹rs
++] = 
out_ch
;

1784 
	}
}

1786 
	$»ad_ff£rv”_¡»ams
(
O±iÚsCÚ‹xt
 *
o
, 
AVFÜm©CÚ‹xt
 *
s
, cÚ¡ *
f’ame
)

1788 
i
, 
”r
;

1789 
AVFÜm©CÚ‹xt
 *
ic
 = 
	`avfÜm©_®loc_cÚ‹xt
();

1791 
ic
->
š‹¼u±_ÿÎback
 = 
št_cb
;

1792 
”r
 = 
	`avfÜm©_İ’_šput
(&
ic
, 
f’ame
, 
NULL
, NULL);

1793 ià(
”r
 < 0)

1794  
”r
;

1796 
i
=0;i<
ic
->
nb_¡»ams
;i++) {

1797 
AVSŒ—m
 *
¡
;

1798 
OuutSŒ—m
 *
o¡
;

1799 
AVCodec
 *
codec
;

1800 cÚ¡ *
’c_cÚfig
;

1802 
codec
 = 
	`avcodec_fšd_’cod”
(
ic
->
¡»ams
[
i
]->codec->
codec_id
);

1803 ià(!
codec
) {

1804 
	`av_log
(
s
, 
AV_LOG_ERROR
, "nØ’cod” found fÜ codeøid %i\n", 
ic
->
¡»ams
[
i
]->
codec
->
codec_id
);

1805  
	`AVERROR
(
EINVAL
);

1807 ià(
codec
->
ty³
 =ğ
AVMEDIA_TYPE_AUDIO
)

1808 
	`İt_audio_codec
(
o
, "c:a", 
codec
->
Çme
);

1809 ià(
codec
->
ty³
 =ğ
AVMEDIA_TYPE_VIDEO
)

1810 
	`İt_video_codec
(
o
, "c:v", 
codec
->
Çme
);

1811 
o¡
 = 
	`Ãw_ouut_¡»am
(
o
, 
s
, 
codec
->
ty³
, -1);

1812 
¡
 = 
o¡
->st;

1814 
	`avcodec_g‘_cÚ‹xt_deçuÉs3
(
¡
->
codec
, codec);

1815 
’c_cÚfig
 = 
	`av_¡»am_g‘_»comm’ded_’cod”_cÚfigu¿tiÚ
(
ic
->
¡»ams
[
i
]);

1816 ià(
’c_cÚfig
) {

1817 
AVDiùiÚ¬y
 *
İts
 = 
NULL
;

1818 
	`av_diù_·r£_¡ršg
(&
İts
, 
’c_cÚfig
, "=", ",", 0);

1819 
	`av_İt_£t_diù2
(
¡
->
codec
, &
İts
, 
AV_OPT_SEARCH_CHILDREN
);

1820 
	`av_diù_ä“
(&
İts
);

1823 ià(
¡
->
codec
->
codec_ty³
 =ğ
AVMEDIA_TYPE_AUDIO
 && !
o¡
->
¡»am_cİy
)

1824 
	`choo£_§m¶e_fmt
(
¡
, 
codec
);

1825 ià(
¡
->
codec
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
 && !
o¡
->
¡»am_cİy
)

1826 
	`choo£_pix–_fmt
(
¡
, st->
codec
, codec, st->codec->
pix_fmt
);

1827 
	`avcodec_cİy_cÚ‹xt
(
o¡
->
’c_ùx
, 
¡
->
codec
);

1828 ià(
’c_cÚfig
)

1829 
	`av_diù_·r£_¡ršg
(&
o¡
->
’cod”_İts
, 
’c_cÚfig
, "=", ",", 0);

1832 
	`avfÜm©_şo£_šput
(&
ic
);

1833  
”r
;

1834 
	}
}

1836 
	$š™_ouut_f‹r
(
OuutF‹r
 *
of‹r
, 
O±iÚsCÚ‹xt
 *
o
,

1837 
AVFÜm©CÚ‹xt
 *
oc
)

1839 
OuutSŒ—m
 *
o¡
;

1841 
of‹r
->
ty³
) {

1842 
AVMEDIA_TYPE_VIDEO
: 
o¡
 = 
	`Ãw_video_¡»am
(
o
, 
oc
, -1); ;

1843 
AVMEDIA_TYPE_AUDIO
: 
o¡
 = 
	`Ãw_audio_¡»am
(
o
, 
oc
, -1); ;

1845 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Only video‡nd‡udio filters‡re supported "

1847 
	`ex™_´og¿m
(1);

1850 
o¡
->
sourû_šdex
 = -1;

1851 
o¡
->
f‹r
 = 
of‹r
;

1853 
of‹r
->
o¡
 = ost;

1855 ià(
o¡
->
¡»am_cİy
) {

1856 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Streamcopy„equested for output stream %d:%d, "

1858 "ÿÂÙ bu£dog‘h”.\n", 
o¡
->
fe_šdex
, o¡->
šdex
);

1859 
	`ex™_´og¿m
(1);

1862 ià(
o¡
->
avf‹r
 && (o¡->
f‹rs
 || o¡->
f‹rs_süt
)) {

1863 cÚ¡ *
İt
 = 
o¡
->
f‹rs
 ? "-vf/-af/-filter" : "-filter_script";

1864 
	`av_log
(
NULL
, 
AV_LOG_ERROR
,

1868 
o¡
->
f‹rs
 ? "Filtergraph" : "Filtergraph script",

1869 
o¡
->
f‹rs
 ? o¡->f‹r : o¡->
f‹rs_süt
,

1870 
İt
, 
o¡
->
fe_šdex
, o¡->
šdex
, opt);

1871 
	`ex™_´og¿m
(1);

1874 
	`avf‹r_šout_ä“
(&
of‹r
->
out_tmp
);

1875 
	}
}

1877 
	$š™_com¶ex_f‹rs
()

1879 
i
, 
»t
 = 0;

1881 
i
 = 0; i < 
nb_f‹rg¿phs
; i++) {

1882 
»t
 = 
	`š™_com¶ex_f‹rg¿ph
(
f‹rg¿phs
[
i
]);

1883 ià(
»t
 < 0)

1884  
»t
;

1887 
	}
}

1889 
	$cÚfigu»_com¶ex_f‹rs
()

1891 
i
, 
»t
 = 0;

1893 
i
 = 0; i < 
nb_f‹rg¿phs
; i++)

1894 ià(!
f‹rg¿phs
[
i
]->
g¿ph
 &&

1895 (
»t
 = 
	`cÚfigu»_f‹rg¿ph
(
f‹rg¿phs
[
i
])) < 0)

1896  
»t
;

1898 
	}
}

1900 
	$İ’_ouut_fe
(
O±iÚsCÚ‹xt
 *
o
, cÚ¡ *
f’ame
)

1902 
AVFÜm©CÚ‹xt
 *
oc
;

1903 
i
, 
j
, 
”r
;

1904 
AVOuutFÜm©
 *
fe_ofÜm©
;

1905 
OuutFe
 *
of
;

1906 
OuutSŒ—m
 *
o¡
;

1907 
IÅutSŒ—m
 *
i¡
;

1908 
AVDiùiÚ¬y
 *
unu£d_İts
 = 
NULL
;

1909 
AVDiùiÚ¬yEÁry
 *
e
 = 
NULL
;

1912 ià(
o
->
¡İ_time
 !ğ
INT64_MAX
 && o->
»cÜdšg_time
 != INT64_MAX) {

1913 
o
->
¡İ_time
 = 
INT64_MAX
;

1914 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "-t‡nd -to cannot be usedogether; using -t.\n");

1917 ià(
o
->
¡İ_time
 !ğ
INT64_MAX
 && o->
»cÜdšg_time
 == INT64_MAX) {

1918 
št64_t
 
¡¬t_time
 = 
o
->¡¬t_tim=ğ
AV_NOPTS_VALUE
 ? 0 : o->start_time;

1919 ià(
o
->
¡İ_time
 <ğ
¡¬t_time
) {

1920 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "-to value smallerhan -ss;‡borting.\n");

1921 
	`ex™_´og¿m
(1);

1923 
o
->
»cÜdšg_time
 = o->
¡İ_time
 - 
¡¬t_time
;

1927 
	`GROW_ARRAY
(
ouut_fes
, 
nb_ouut_fes
);

1928 
of
 = 
	`av_m®locz
((*of));

1929 ià(!
of
)

1930 
	`ex™_´og¿m
(1);

1931 
ouut_fes
[
nb_ouut_fes
 - 1] = 
of
;

1933 
of
->
o¡_šdex
 = 
nb_ouut_¡»ams
;

1934 
of
->
»cÜdšg_time
 = 
o
->recording_time;

1935 
of
->
¡¬t_time
 = 
o
->start_time;

1936 
of
->
lim™_fesize
 = 
o
->limit_filesize;

1937 
of
->
shÜ‹¡
 = 
o
->shortest;

1938 
	`av_diù_cİy
(&
of
->
İts
, 
o
->
g
->
fÜm©_İts
, 0);

1940 ià(!
	`¡rcmp
(
f’ame
, "-"))

1941 
f’ame
 = "pipe:";

1943 
”r
 = 
	`avfÜm©_®loc_ouut_cÚ‹xt2
(&
oc
, 
NULL
, 
o
->
fÜm©
, 
f’ame
);

1944 ià(!
oc
) {

1945 
	`´št_”rÜ
(
f’ame
, 
”r
);

1946 
	`ex™_´og¿m
(1);

1949 
of
->
ùx
 = 
oc
;

1950 ià(
o
->
»cÜdšg_time
 !ğ
INT64_MAX
)

1951 
oc
->
du¿tiÚ
 = 
o
->
»cÜdšg_time
;

1953 
fe_ofÜm©
ğ
oc
->
ofÜm©
;

1954 
oc
->
š‹¼u±_ÿÎback
 = 
št_cb
;

1957 
i
 = 0; i < 
nb_f‹rg¿phs
; i++) {

1958 
F‹rG¿ph
 *
fg
 = 
f‹rg¿phs
[
i
];

1959 
j
 = 0; j < 
fg
->
nb_ouuts
; j++) {

1960 
OuutF‹r
 *
of‹r
 = 
fg
->
ouuts
[
j
];

1962 ià(!
of‹r
->
out_tmp
 || of‹r->out_tmp->
Çme
)

1965 
of‹r
->
ty³
) {

1966 
AVMEDIA_TYPE_VIDEO
: 
o
->
video_di§bË
 = 1; ;

1967 
AVMEDIA_TYPE_AUDIO
: 
o
->
audio_di§bË
 = 1; ;

1968 
AVMEDIA_TYPE_SUBTITLE
: 
o
->
subt™Ë_di§bË
 = 1; ;

1970 
	`š™_ouut_f‹r
(
of‹r
, 
o
, 
oc
);

1975 ià(!
	`¡rcmp
(
fe_ofÜm©
->
Çme
, "ffm") &&

1976 
	`av_¡r¡¬t
(
f’ame
, "h‰p:", 
NULL
)) {

1977 
”r
 = 
	`·r£_İtiÚ
(
o
, "m‘ad©a", "ü—tiÚ_timeòow", 
İtiÚs
);

1978 ià(
”r
 < 0) {

1979 
	`´št_”rÜ
(
f’ame
, 
”r
);

1980 
	`ex™_´og¿m
(1);

1984 ià(!
	`¡rcmp
(
fe_ofÜm©
->
Çme
, "ffm"è&& !
ov”ride_ff£rv”
 &&

1985 
	`av_¡r¡¬t
(
f’ame
, "h‰p:", 
NULL
)) {

1986 
j
;

1989 
”r
 = 
	`»ad_ff£rv”_¡»ams
(
o
, 
oc
, 
f’ame
);

1990 ià(
”r
 < 0) {

1991 
	`´št_”rÜ
(
f’ame
, 
”r
);

1992 
	`ex™_´og¿m
(1);

1994 
j
 = 
nb_ouut_¡»ams
 - 
oc
->
nb_¡»ams
; j <‚b_output_streams; j++) {

1995 
o¡
 = 
ouut_¡»ams
[
j
];

1996 
i
 = 0; i < 
nb_šput_¡»ams
; i++) {

1997 
i¡
 = 
šput_¡»ams
[
i
];

1998 if(
i¡
->
¡
->
codec
->
codec_ty³
 =ğ
o¡
->st->codec->codec_type){

1999 
o¡
->
sync_i¡
ğ
i¡
;

2000 
o¡
->
sourû_šdex
ğ
i
;

2001 if(
o¡
->
¡
->
codec
->
codec_ty³
 =ğ
AVMEDIA_TYPE_AUDIO
èo¡->
avf‹r
 = 
	`av_¡rdup
("anull");

2002 if(
o¡
->
¡
->
codec
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
èo¡->
avf‹r
 = 
	`av_¡rdup
("null");

2003 
i¡
->
disÿrd
 = 0;

2004 
i¡
->
¡
->
disÿrd
 = i¡->
u£r_£t_disÿrd
;

2008 if(!
o¡
->
sync_i¡
){

2009 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Missšg % ¡»am which i »quœed byhi ffm\n", 
	`av_g‘_medŸ_ty³_¡ršg
(
o¡
->
¡
->
codec
->
codec_ty³
));

2010 
	`ex™_´og¿m
(1);

2013 } ià(!
o
->
nb_¡»am_m­s
) {

2014 *
subt™Ë_codec_Çme
 = 
NULL
;

2018 ià(!
o
->
video_di§bË
 && 
	`av_guess_codec
(
oc
->
ofÜm©
, 
NULL
, 
f’ame
, NULL, 
AVMEDIA_TYPE_VIDEO
è!ğ
AV_CODEC_ID_NONE
) {

2019 
¬—
 = 0, 
idx
 = -1;

2020 
qü
 = 
	`avfÜm©_qu”y_codec
(
oc
->
ofÜm©
, oc->ofÜm©->
video_codec
, 0);

2021 
i
 = 0; i < 
nb_šput_¡»ams
; i++) {

2022 
Ãw_¬—
;

2023 
i¡
 = 
šput_¡»ams
[
i
];

2024 
Ãw_¬—
 = 
i¡
->
¡
->
codec
->
width
 * i¡->¡->codec->
height
 + 100000000*!!i¡->¡->
codec_šfo_nb_äames
;

2025 if((
qü
!=
	`MKTAG
('A', 'P', 'I', 'C')è&& (
i¡
->
¡
->
di¥os™iÚ
 & 
AV_DISPOSITION_ATTACHED_PIC
))

2026 
Ãw_¬—
 = 1;

2027 ià(
i¡
->
¡
->
codec
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
 &&

2028 
Ãw_¬—
 > 
¬—
) {

2029 if((
qü
==
	`MKTAG
('A', 'P', 'I', 'C')è&& !(
i¡
->
¡
->
di¥os™iÚ
 & 
AV_DISPOSITION_ATTACHED_PIC
))

2031 
¬—
 = 
Ãw_¬—
;

2032 
idx
 = 
i
;

2035 ià(
idx
 >= 0)

2036 
	`Ãw_video_¡»am
(
o
, 
oc
, 
idx
);

2040 ià(!
o
->
audio_di§bË
 && 
	`av_guess_codec
(
oc
->
ofÜm©
, 
NULL
, 
f’ame
, NULL, 
AVMEDIA_TYPE_AUDIO
è!ğ
AV_CODEC_ID_NONE
) {

2041 
be¡_scÜe
 = 0, 
idx
 = -1;

2042 
i
 = 0; i < 
nb_šput_¡»ams
; i++) {

2043 
scÜe
;

2044 
i¡
 = 
šput_¡»ams
[
i
];

2045 
scÜe
 = 
i¡
->
¡
->
codec
->
chªÃls
 + 100000000*!!i¡->¡->
codec_šfo_nb_äames
;

2046 ià(
i¡
->
¡
->
codec
->
codec_ty³
 =ğ
AVMEDIA_TYPE_AUDIO
 &&

2047 
scÜe
 > 
be¡_scÜe
) {

2048 
be¡_scÜe
 = 
scÜe
;

2049 
idx
 = 
i
;

2052 ià(
idx
 >= 0)

2053 
	`Ãw_audio_¡»am
(
o
, 
oc
, 
idx
);

2057 
	`MATCH_PER_TYPE_OPT
(
codec_Çmes
, 
¡r
, 
subt™Ë_codec_Çme
, 
oc
, "s");

2058 ià(!
o
->
subt™Ë_di§bË
 && (
	`avcodec_fšd_’cod”
(
oc
->
ofÜm©
->
subt™Ë_codec
è|| 
subt™Ë_codec_Çme
)) {

2059 
i
 = 0; i < 
nb_šput_¡»ams
; i++)

2060 ià(
šput_¡»ams
[
i
]->
¡
->
codec
->
codec_ty³
 =ğ
AVMEDIA_TYPE_SUBTITLE
) {

2061 
AVCodecDesütÜ
 cÚ¡ *
šput_desütÜ
 =

2062 
	`avcodec_desütÜ_g‘
(
šput_¡»ams
[
i
]->
¡
->
codec
->
codec_id
);

2063 
AVCodecDesütÜ
 cÚ¡ *
ouut_desütÜ
 = 
NULL
;

2064 
AVCodec
 cÚ¡ *
ouut_codec
 =

2065 
	`avcodec_fšd_’cod”
(
oc
->
ofÜm©
->
subt™Ë_codec
);

2066 
šput_´İs
 = 0, 
ouut_´İs
 = 0;

2067 ià(
ouut_codec
)

2068 
ouut_desütÜ
 = 
	`avcodec_desütÜ_g‘
(
ouut_codec
->
id
);

2069 ià(
šput_desütÜ
)

2070 
šput_´İs
 = 
šput_desütÜ
->
´İs
 & (
AV_CODEC_PROP_TEXT_SUB
 | 
AV_CODEC_PROP_BITMAP_SUB
);

2071 ià(
ouut_desütÜ
)

2072 
ouut_´İs
 = 
ouut_desütÜ
->
´İs
 & (
AV_CODEC_PROP_TEXT_SUB
 | 
AV_CODEC_PROP_BITMAP_SUB
);

2073 ià(
subt™Ë_codec_Çme
 ||

2074 
šput_´İs
 & 
ouut_´İs
 ||

2076 
šput_desütÜ
 && 
ouut_desütÜ
 &&

2077 (!
šput_desütÜ
->
´İs
 ||

2078 !
ouut_desütÜ
->
´İs
)) {

2079 
	`Ãw_subt™Ë_¡»am
(
o
, 
oc
, 
i
);

2085 ià(!
o
->
d©a_di§bË
 ) {

2086 
AVCodecID
 
codec_id
 = 
	`av_guess_codec
(
oc
->
ofÜm©
, 
NULL
, 
f’ame
, NULL, 
AVMEDIA_TYPE_DATA
);

2087 
i
 = 0; 
codec_id
 !ğ
AV_CODEC_ID_NONE
 && i < 
nb_šput_¡»ams
; i++) {

2088 ià(
šput_¡»ams
[
i
]->
¡
->
codec
->
codec_ty³
 =ğ
AVMEDIA_TYPE_DATA


2089 && 
šput_¡»ams
[
i
]->
¡
->
codec
->
codec_id
 == codec_id )

2090 
	`Ãw_d©a_¡»am
(
o
, 
oc
, 
i
);

2094 
i
 = 0; i < 
o
->
nb_¡»am_m­s
; i++) {

2095 
SŒ—mM­
 *
m­
 = &
o
->
¡»am_m­s
[
i
];

2097 ià(
m­
->
di§bËd
)

2100 ià(
m­
->
lškÏb–
) {

2101 
F‹rG¿ph
 *
fg
;

2102 
OuutF‹r
 *
of‹r
 = 
NULL
;

2103 
j
, 
k
;

2105 
j
 = 0; j < 
nb_f‹rg¿phs
; j++) {

2106 
fg
 = 
f‹rg¿phs
[
j
];

2107 
k
 = 0; k < 
fg
->
nb_ouuts
; k++) {

2108 
AVF‹rInOut
 *
out
 = 
fg
->
ouuts
[
k
]->
out_tmp
;

2109 ià(
out
 && !
	`¡rcmp
(out->
Çme
, 
m­
->
lškÏb–
)) {

2110 
of‹r
 = 
fg
->
ouuts
[
k
];

2111 
loİ_’d
;

2115 
loİ_’d
:

2116 ià(!
of‹r
) {

2117 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Output with†abel '%s' does‚otƒxist "

2118 "š‡ny defšed f‹¸g¿ph, o¸wa ®»ady u£dƒl£wh”e.\n", 
m­
->
lškÏb–
);

2119 
	`ex™_´og¿m
(1);

2121 
	`š™_ouut_f‹r
(
of‹r
, 
o
, 
oc
);

2123 
¤c_idx
 = 
šput_fes
[
m­
->
fe_šdex
]->
i¡_šdex
 + m­->
¡»am_šdex
;

2125 
i¡
 = 
šput_¡»ams
[
šput_fes
[
m­
->
fe_šdex
]->
i¡_šdex
 + m­->
¡»am_šdex
];

2126 if(
o
->
subt™Ë_di§bË
 && 
i¡
->
¡
->
codec
->
codec_ty³
 =ğ
AVMEDIA_TYPE_SUBTITLE
)

2128 if(
o
-> 
audio_di§bË
 && 
i¡
->
¡
->
codec
->
codec_ty³
 =ğ
AVMEDIA_TYPE_AUDIO
)

2130 if(
o
-> 
video_di§bË
 && 
i¡
->
¡
->
codec
->
codec_ty³
 =ğ
AVMEDIA_TYPE_VIDEO
)

2132 if(
o
-> 
d©a_di§bË
 && 
i¡
->
¡
->
codec
->
codec_ty³
 =ğ
AVMEDIA_TYPE_DATA
)

2135 
o¡
 = 
NULL
;

2136 
i¡
->
¡
->
codec
->
codec_ty³
) {

2137 
AVMEDIA_TYPE_VIDEO
: 
o¡
 = 
	`Ãw_video_¡»am
 (
o
, 
oc
, 
¤c_idx
); ;

2138 
AVMEDIA_TYPE_AUDIO
: 
o¡
 = 
	`Ãw_audio_¡»am
 (
o
, 
oc
, 
¤c_idx
); ;

2139 
AVMEDIA_TYPE_SUBTITLE
: 
o¡
 = 
	`Ãw_subt™Ë_¡»am
 (
o
, 
oc
, 
¤c_idx
); ;

2140 
AVMEDIA_TYPE_DATA
: 
o¡
 = 
	`Ãw_d©a_¡»am
 (
o
, 
oc
, 
¤c_idx
); ;

2141 
AVMEDIA_TYPE_ATTACHMENT
: 
o¡
 = 
	`Ãw_©chm’t_¡»am
(
o
, 
oc
, 
¤c_idx
); ;

2142 
AVMEDIA_TYPE_UNKNOWN
:

2143 ià(
cİy_unknown_¡»ams
) {

2144 
o¡
 = 
	`Ãw_unknown_¡»am
 (
o
, 
oc
, 
¤c_idx
);

2148 
	`av_log
(
NULL
, 
ignÜe_unknown_¡»ams
 ? 
AV_LOG_WARNING
 : 
AV_LOG_FATAL
,

2150 
m­
->
fe_šdex
, m­->
¡»am_šdex
);

2151 ià(!
ignÜe_unknown_¡»ams
) {

2152 
	`av_log
(
NULL
, 
AV_LOG_FATAL
,

2156 
	`ex™_´og¿m
(1);

2159 ià(
o¡
)

2160 
o¡
->
sync_i¡
 = 
šput_¡»ams
[ 
šput_fes
[
m­
->
sync_fe_šdex
]->
i¡_šdex


2161 + 
m­
->
sync_¡»am_šdex
];

2167 
i
 = 0; i < 
o
->
nb_©chm’ts
; i++) {

2168 
AVIOCÚ‹xt
 *
pb
;

2169 
ušt8_t
 *
©chm’t
;

2170 cÚ¡ *
p
;

2171 
št64_t
 
Ën
;

2173 ià((
”r
 = 
	`avio_İ’2
(&
pb
, 
o
->
©chm’ts
[
i
], 
AVIO_FLAG_READ
, &
št_cb
, 
NULL
)) < 0) {

2174 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Could‚ot open‡ttachment file %s.\n",

2175 
o
->
©chm’ts
[
i
]);

2176 
	`ex™_´og¿m
(1);

2178 ià((
Ën
 = 
	`avio_size
(
pb
)) <= 0) {

2179 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Could‚ot get size ofhe‡ttachment %s.\n",

2180 
o
->
©chm’ts
[
i
]);

2181 
	`ex™_´og¿m
(1);

2183 ià(!(
©chm’t
 = 
	`av_m®loc
(
Ën
))) {

2184 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Attachment %soo†argeo fit into memory.\n",

2185 
o
->
©chm’ts
[
i
]);

2186 
	`ex™_´og¿m
(1);

2188 
	`avio_»ad
(
pb
, 
©chm’t
, 
Ën
);

2190 
o¡
 = 
	`Ãw_©chm’t_¡»am
(
o
, 
oc
, -1);

2191 
o¡
->
¡»am_cİy
 = 1;

2192 
o¡
->
©chm’t_f’ame
 = 
o
->
©chm’ts
[
i
];

2193 
o¡
->
fšished
 = 1;

2194 
o¡
->
¡
->
codec
->
exŒad©a
 = 
©chm’t
;

2195 
o¡
->
¡
->
codec
->
exŒad©a_size
 = 
Ën
;

2197 
p
 = 
	`¡¼chr
(
o
->
©chm’ts
[
i
], '/');

2198 
	`av_diù_£t
(&
o¡
->
¡
->
m‘ad©a
, "f’ame", (
p
 && *pè?… + 1 : 
o
->
©chm’ts
[
i
], 
AV_DICT_DONT_OVERWRITE
);

2199 
	`avio_şo£p
(&
pb
);

2202 
i
 = 
nb_ouut_¡»ams
 - 
oc
->
nb_¡»ams
; i <‚b_output_streams; i++) {

2203 
AVDiùiÚ¬yEÁry
 *
e
;

2204 
o¡
 = 
ouut_¡»ams
[
i
];

2206 ià((
o¡
->
¡»am_cİy
 || o¡->
©chm’t_f’ame
)

2207 && (
e
 = 
	`av_diù_g‘
(
o
->
g
->
codec_İts
, "æags", 
NULL
, 
AV_DICT_IGNORE_SUFFIX
))

2208 && (!
e
->
key
[5] || 
	`check_¡»am_¥ecif›r
(
oc
, 
o¡
->
¡
,ƒ->key+6)))

2209 ià(
	`av_İt_£t
(
o¡
->
¡
->
codec
, "æags", 
e
->
v®ue
, 0) < 0)

2210 
	`ex™_´og¿m
(1);

2213 ià(!
oc
->
nb_¡»ams
 && !(oc->
ofÜm©
->
æags
 & 
AVFMT_NOSTREAMS
)) {

2214 
	`av_dump_fÜm©
(
oc
, 
nb_ouut_fes
 - 1, oc->
f’ame
, 1);

2215 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Ouuˆf#%d dÛ nÙ cÚš‡ny sŒ—m\n", 
nb_ouut_fes
 - 1);

2216 
	`ex™_´og¿m
(1);

2220 
unu£d_İts
 = 
	`¡r_¥ecif›rs
(
o
->
g
->
codec_İts
);

2221 
i
 = 
of
->
o¡_šdex
; i < 
nb_ouut_¡»ams
; i++) {

2222 
e
 = 
NULL
;

2223 (
e
 = 
	`av_diù_g‘
(
ouut_¡»ams
[
i
]->
’cod”_İts
, "",ƒ,

2224 
AV_DICT_IGNORE_SUFFIX
)))

2225 
	`av_diù_£t
(&
unu£d_İts
, 
e
->
key
, 
NULL
, 0);

2228 
e
 = 
NULL
;

2229 (
e
 = 
	`av_diù_g‘
(
unu£d_İts
, "",ƒ, 
AV_DICT_IGNORE_SUFFIX
))) {

2230 cÚ¡ 
AVCÏss
 *
şass
 = 
	`avcodec_g‘_şass
();

2231 cÚ¡ 
AVO±iÚ
 *
İtiÚ
 = 
	`av_İt_fšd
(&
şass
, 
e
->
key
, 
NULL
, 0,

2232 
AV_OPT_SEARCH_CHILDREN
 | 
AV_OPT_SEARCH_FAKE_OBJ
);

2233 cÚ¡ 
AVCÏss
 *
fşass
 = 
	`avfÜm©_g‘_şass
();

2234 cÚ¡ 
AVO±iÚ
 *
fİtiÚ
 = 
	`av_İt_fšd
(&
fşass
, 
e
->
key
, 
NULL
, 0,

2235 
AV_OPT_SEARCH_CHILDREN
 | 
AV_OPT_SEARCH_FAKE_OBJ
);

2236 ià(!
İtiÚ
 || 
fİtiÚ
)

2240 ià(!(
İtiÚ
->
æags
 & 
AV_OPT_FLAG_ENCODING_PARAM
)) {

2241 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Codec AVOption %s (%s) specified for "

2242 "ouuˆf#%d (%sèi nÙ‡À’codšg o±iÚ.\n", 
e
->
key
,

2243 
İtiÚ
->
h–p
 ? o±iÚ->h–°: "", 
nb_ouut_fes
 - 1,

2244 
f’ame
);

2245 
	`ex™_´og¿m
(1);

2249 ià(!
	`¡rcmp
(
e
->
key
, "gop_timecode"))

2252 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "Codec AVOption %s (%s) specified for "

2256 "which wa nÙ‡ùu®ly u£d fÜ‡ny sŒ—m.\n", 
e
->
key
,

2257 
İtiÚ
->
h–p
 ? o±iÚ->h–°: "", 
nb_ouut_fes
 - 1, 
f’ame
);

2259 
	`av_diù_ä“
(&
unu£d_İts
);

2262 
i
 = 
of
->
o¡_šdex
; i < 
nb_ouut_¡»ams
; i++) {

2263 
OuutSŒ—m
 *
o¡
 = 
ouut_¡»ams
[
i
];

2265 
o¡
->
’codšg_Ãeded
 = !o¡->
¡»am_cİy
;

2266 ià(
o¡
->
’codšg_Ãeded
 && o¡->
sourû_šdex
 >= 0) {

2267 
IÅutSŒ—m
 *
i¡
 = 
šput_¡»ams
[
o¡
->
sourû_šdex
];

2268 
i¡
->
decodšg_Ãeded
 |ğ
DECODING_FOR_OST
;

2273 ià(
oc
->
ofÜm©
->
æags
 & 
AVFMT_NEEDNUMBER
) {

2274 ià(!
	`av_f’ame_numb”_‹¡
(
oc
->
f’ame
)) {

2275 
	`´št_”rÜ
(
oc
->
f’ame
, 
	`AVERROR
(
EINVAL
));

2276 
	`ex™_´og¿m
(1);

2280 ià(!(
oc
->
ofÜm©
->
æags
 & 
AVFMT_NOSTREAMS
è&& !
šput_¡»am_pÙ’tŸÎy_avaabË
) {

2281 
	`av_log
(
NULL
, 
AV_LOG_ERROR
,

2283 
	`ex™_´og¿m
(1);

2286 ià(!(
oc
->
ofÜm©
->
æags
 & 
AVFMT_NOFILE
)) {

2288 
	`as£¹_fe_ov”wr™e
(
f’ame
);

2291 ià((
”r
 = 
	`avio_İ’2
(&
oc
->
pb
, 
f’ame
, 
AVIO_FLAG_WRITE
,

2292 &
oc
->
š‹¼u±_ÿÎback
,

2293 &
of
->
İts
)) < 0) {

2294 
	`´št_”rÜ
(
f’ame
, 
”r
);

2295 
	`ex™_´og¿m
(1);

2297 } ià(
	`¡rcmp
(
oc
->
ofÜm©
->
Çme
, "image2")==0 && !
	`av_f’ame_numb”_‹¡
(
f’ame
))

2298 
	`as£¹_fe_ov”wr™e
(
f’ame
);

2300 ià(
o
->
mux_´–ßd
) {

2301 
	`av_diù_£t_št
(&
of
->
İts
, "´–ßd", 
o
->
mux_´–ßd
*
AV_TIME_BASE
, 0);

2303 
oc
->
max_d–ay
 = ()(
o
->
mux_max_d–ay
 * 
AV_TIME_BASE
);

2306 
i
 = 0; i < 
o
->
nb_m‘ad©a_m­
; i++) {

2307 *
p
;

2308 
š_fe_šdex
 = 
	`¡¹Ş
(
o
->
m‘ad©a_m­
[
i
].
u
.
¡r
, &
p
, 0);

2310 ià(
š_fe_šdex
 >ğ
nb_šput_fes
) {

2311 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Inv®id iÅuˆfšdex %d wh´oûssšg m‘ad©¨m­s\n", 
š_fe_šdex
);

2312 
	`ex™_´og¿m
(1);

2314 
	`cİy_m‘ad©a
(
o
->
m‘ad©a_m­
[
i
].
¥ecif›r
, *
p
 ?… + 1 :…, 
oc
,

2315 
š_fe_šdex
 >= 0 ?

2316 
šput_fes
[
š_fe_šdex
]->
ùx
 : 
NULL
, 
o
);

2320 ià(
o
->
ch­‹rs_šput_fe
 >ğ
nb_šput_fes
) {

2321 ià(
o
->
ch­‹rs_šput_fe
 =ğ
INT_MAX
) {

2323 
o
->
ch­‹rs_šput_fe
 = -1;

2324 
i
 = 0; i < 
nb_šput_fes
; i++)

2325 ià(
šput_fes
[
i
]->
ùx
->
nb_ch­‹rs
) {

2326 
o
->
ch­‹rs_šput_fe
 = 
i
;

2330 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Invalid input file index %d in chapter mapping.\n",

2331 
o
->
ch­‹rs_šput_fe
);

2332 
	`ex™_´og¿m
(1);

2335 ià(
o
->
ch­‹rs_šput_fe
 >= 0)

2336 
	`cİy_ch­‹rs
(
šput_fes
[
o
->
ch­‹rs_šput_fe
], 
of
,

2337 !
o
->
m‘ad©a_ch­‹rs_mªu®
);

2340 ià(!
o
->
m‘ad©a_glob®_mªu®
 && 
nb_šput_fes
){

2341 
	`av_diù_cİy
(&
oc
->
m‘ad©a
, 
šput_fes
[0]->
ùx
->metadata,

2342 
AV_DICT_DONT_OVERWRITE
);

2343 if(
o
->
»cÜdšg_time
 !ğ
INT64_MAX
)

2344 
	`av_diù_£t
(&
oc
->
m‘ad©a
, "du¿tiÚ", 
NULL
, 0);

2345 
	`av_diù_£t
(&
oc
->
m‘ad©a
, "ü—tiÚ_time", 
NULL
, 0);

2347 ià(!
o
->
m‘ad©a_¡»ams_mªu®
)

2348 
i
 = 
of
->
o¡_šdex
; i < 
nb_ouut_¡»ams
; i++) {

2349 
IÅutSŒ—m
 *
i¡
;

2350 ià(
ouut_¡»ams
[
i
]->
sourû_šdex
 < 0)

2352 
i¡
 = 
šput_¡»ams
[
ouut_¡»ams
[
i
]->
sourû_šdex
];

2353 
	`av_diù_cİy
(&
ouut_¡»ams
[
i
]->
¡
->
m‘ad©a
, 
i¡
->¡->m‘ad©a, 
AV_DICT_DONT_OVERWRITE
);

2354 ià(!
ouut_¡»ams
[
i
]->
¡»am_cİy
) {

2355 
	`av_diù_£t
(&
ouut_¡»ams
[
i
]->
¡
->
m‘ad©a
, "’cod”", 
NULL
, 0);

2356 ià(
i¡
->
autÜÙ©e
)

2357 
	`av_diù_£t
(&
ouut_¡»ams
[
i
]->
¡
->
m‘ad©a
, "rÙ©e", 
NULL
, 0);

2362 
i
 = 0; i < 
o
->
nb_´og¿m
; i++) {

2363 cÚ¡ *
p
 = 
o
->
´og¿m
[
i
].
u
.
¡r
;

2364 
´ogid
 = 
i
+1;

2365 
AVProg¿m
 *
´og¿m
;

2367 *
p
) {

2368 cÚ¡ *
p2
 = 
	`av_g‘_tok’
(&
p
, ":");

2369 cÚ¡ *
to_d—Îoc
 = 
p2
;

2370 *
key
;

2371 ià(!
p2
)

2374 if(*
p
)…++;

2376 
key
 = 
	`av_g‘_tok’
(&
p2
, "=");

2377 ià(!
key
 || !*
p2
) {

2378 
	`av_ä“p
(&
to_d—Îoc
);

2379 
	`av_ä“p
(&
key
);

2382 
p2
++;

2384 ià(!
	`¡rcmp
(
key
, "program_num"))

2385 
´ogid
 = 
	`¡¹Ş
(
p2
, 
NULL
, 0);

2386 
	`av_ä“p
(&
to_d—Îoc
);

2387 
	`av_ä“p
(&
key
);

2390 
´og¿m
 = 
	`av_Ãw_´og¿m
(
oc
, 
´ogid
);

2392 
p
 = 
o
->
´og¿m
[
i
].
u
.
¡r
;

2393 *
p
) {

2394 cÚ¡ *
p2
 = 
	`av_g‘_tok’
(&
p
, ":");

2395 cÚ¡ *
to_d—Îoc
 = 
p2
;

2396 *
key
;

2397 ià(!
p2
)

2399 if(*
p
)…++;

2401 
key
 = 
	`av_g‘_tok’
(&
p2
, "=");

2402 ià(!
key
) {

2403 
	`av_log
(
NULL
, 
AV_LOG_FATAL
,

2405 
p2
);

2406 
	`ex™_´og¿m
(1);

2408 ià(!*
p2
)

2409 
	`ex™_´og¿m
(1);

2410 
p2
++;

2412 ià(!
	`¡rcmp
(
key
, "title")) {

2413 
	`av_diù_£t
(&
´og¿m
->
m‘ad©a
, "t™Ë", 
p2
, 0);

2414 } ià(!
	`¡rcmp
(
key
, "program_num")) {

2415 } ià(!
	`¡rcmp
(
key
, "st")) {

2416 
¡_num
 = 
	`¡¹Ş
(
p2
, 
NULL
, 0);

2417 
	`av_´og¿m_add_¡»am_šdex
(
oc
, 
´ogid
, 
¡_num
);

2419 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "UnknowÀ´og¿m key %s.\n", 
key
);

2420 
	`ex™_´og¿m
(1);

2422 
	`av_ä“p
(&
to_d—Îoc
);

2423 
	`av_ä“p
(&
key
);

2428 
i
 = 0; i < 
o
->
nb_m‘ad©a
; i++) {

2429 
AVDiùiÚ¬y
 **
m
;

2430 
ty³
, *
v®
;

2431 cÚ¡ *
¡»am_¥ec
;

2432 
šdex
 = 0, 
j
, 
»t
 = 0;

2433 
now_time
[256];

2435 
v®
 = 
	`¡rchr
(
o
->
m‘ad©a
[
i
].
u
.
¡r
, '=');

2436 ià(!
v®
) {

2437 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "No '=' character in metadata string %s.\n",

2438 
o
->
m‘ad©a
[
i
].
u
.
¡r
);

2439 
	`ex™_´og¿m
(1);

2441 *
v®
++ = 0;

2443 ià(!
	`¡rcmp
(
o
->
m‘ad©a
[
i
].
u
.
¡r
, "creation_time") &&

2444 !
	`¡rcmp
(
v®
, "now")) {

2445 
time_t
 
now
 = 
	`time
(0);

2446 
tm
 *
±m
, 
tmbuf
;

2447 
±m
 = 
	`loÿÉime_r
(&
now
, &
tmbuf
);

2448 ià(
±m
) {

2449 ià(
	`¡ráime
(
now_time
, Òow_time), "%Y-%m-%d %H:%M:%S", 
±m
))

2450 
v®
 = 
now_time
;

2454 
	`·r£_m‘a_ty³
(
o
->
m‘ad©a
[
i
].
¥ecif›r
, &
ty³
, &
šdex
, &
¡»am_¥ec
);

2455 ià(
ty³
 == 's') {

2456 
j
 = 0; j < 
oc
->
nb_¡»ams
; j++) {

2457 
o¡
 = 
ouut_¡»ams
[
nb_ouut_¡»ams
 - 
oc
->
nb_¡»ams
 + 
j
];

2458 ià((
»t
 = 
	`check_¡»am_¥ecif›r
(
oc
, oc->
¡»ams
[
j
], 
¡»am_¥ec
)) > 0) {

2459 
	`av_diù_£t
(&
oc
->
¡»ams
[
j
]->
m‘ad©a
, 
o
->m‘ad©a[
i
].
u
.
¡r
, *
v®
 ? v® : 
NULL
, 0);

2460 ià(!
	`¡rcmp
(
o
->
m‘ad©a
[
i
].
u
.
¡r
, "rotate")) {

2461 
o¡
->
rÙ©e_ov”ridd’
 = 1;

2463 } ià(
»t
 < 0)

2464 
	`ex™_´og¿m
(1);

2468 
ty³
) {

2470 
m
 = &
oc
->
m‘ad©a
;

2473 ià(
šdex
 < 0 || index >ğ
oc
->
nb_ch­‹rs
) {

2474 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Inv®id ch­‹¸šdex %d iÀm‘ad©¨¥ecif›r.\n", 
šdex
);

2475 
	`ex™_´og¿m
(1);

2477 
m
 = &
oc
->
ch­‹rs
[
šdex
]->
m‘ad©a
;

2480 ià(
šdex
 < 0 || index >ğ
oc
->
nb_´og¿ms
) {

2481 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Inv®id…rog¿m index %d iÀm‘ad©¨¥ecif›r.\n", 
šdex
);

2482 
	`ex™_´og¿m
(1);

2484 
m
 = &
oc
->
´og¿ms
[
šdex
]->
m‘ad©a
;

2487 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Inv®id m‘ad©¨¥ecif›¸%s.\n", 
o
->
m‘ad©a
[
i
].
¥ecif›r
);

2488 
	`ex™_´og¿m
(1);

2490 
	`av_diù_£t
(
m
, 
o
->
m‘ad©a
[
i
].
u
.
¡r
, *
v®
 ? v® : 
NULL
, 0);

2495 
	}
}

2497 
	$İt_rg‘
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2499 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

2500 ’um { 
PAL
, 
NTSC
, 
FILM
, 
UNKNOWN
 } 
nÜm
 = UNKNOWN;

2501 cÚ¡ *cÚ¡ 
äame_¿‹s
[] = { "25", "30000/1001", "24000/1001" };

2503 ià(!
	`¡ºcmp
(
¬g
, "pal-", 4)) {

2504 
nÜm
 = 
PAL
;

2505 
¬g
 += 4;

2506 } ià(!
	`¡ºcmp
(
¬g
, "ntsc-", 5)) {

2507 
nÜm
 = 
NTSC
;

2508 
¬g
 += 5;

2509 } ià(!
	`¡ºcmp
(
¬g
, "film-", 5)) {

2510 
nÜm
 = 
FILM
;

2511 
¬g
 += 5;

2514 ià(
nb_šput_fes
) {

2515 
i
, 
j
, 
ä
;

2516 
j
 = 0; j < 
nb_šput_fes
; j++) {

2517 
i
 = 0; i < 
šput_fes
[
j
]->
nb_¡»ams
; i++) {

2518 
AVCodecCÚ‹xt
 *
c
 = 
šput_fes
[
j
]->
ùx
->
¡»ams
[
i
]->
codec
;

2519 ià(
c
->
codec_ty³
 !ğ
AVMEDIA_TYPE_VIDEO
 ||

2520 !
c
->
time_ba£
.
num
)

2522 
ä
 = 
c
->
time_ba£
.
d’
 * 1000 / c->time_ba£.
num
;

2523 ià(
ä
 == 25000) {

2524 
nÜm
 = 
PAL
;

2526 } ià((
ä
 == 29970) || (fr == 23976)) {

2527 
nÜm
 = 
NTSC
;

2531 ià(
nÜm
 !ğ
UNKNOWN
)

2535 ià(
nÜm
 !ğ
UNKNOWN
)

2536 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "Assumšg % fÜ¬g‘.\n", 
nÜm
 =ğ
PAL
 ? "PAL" : "NTSC");

2539 ià(
nÜm
 =ğ
UNKNOWN
) {

2540 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Could‚ot determine‚orm (PAL/NTSC/NTSC-Film) forarget.\n");

2541 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Please…refixarget with \"pal-\", \"ntsc-\" or \"film-\",\n");

2542 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "or set‡ framerate with \"-r xxx\".\n");

2543 
	`ex™_´og¿m
(1);

2546 ià(!
	`¡rcmp
(
¬g
, "vcd")) {

2547 
	`İt_video_codec
(
o
, "c:v", "mpeg1video");

2548 
	`İt_audio_codec
(
o
, "c:a", "mp2");

2549 
	`·r£_İtiÚ
(
o
, "f", "vcd", 
İtiÚs
);

2551 
	`·r£_İtiÚ
(
o
, "s", 
nÜm
 =ğ
PAL
 ? "352x288" : "352x240", 
İtiÚs
);

2552 
	`·r£_İtiÚ
(
o
, "r", 
äame_¿‹s
[
nÜm
], 
İtiÚs
);

2553 
	`İt_deçuÉ
(
NULL
, "g", 
nÜm
 =ğ
PAL
 ? "15" : "18");

2555 
	`İt_deçuÉ
(
NULL
, "b:v", "1150000");

2556 
	`İt_deçuÉ
(
NULL
, "maxrate:v", "1150000");

2557 
	`İt_deçuÉ
(
NULL
, "minrate:v", "1150000");

2558 
	`İt_deçuÉ
(
NULL
, "bufsize:v", "327680");

2560 
	`İt_deçuÉ
(
NULL
, "b:a", "224000");

2561 
	`·r£_İtiÚ
(
o
, "¬", "44100", 
İtiÚs
);

2562 
	`·r£_İtiÚ
(
o
, "ac", "2", 
İtiÚs
);

2564 
	`İt_deçuÉ
(
NULL
, "packetsize", "2324");

2565 
	`İt_deçuÉ
(
NULL
, "muxrate", "1411200");

2572 
o
->
mux_´–ßd
 = (36000 + 3 * 1200) / 90000.0;

2573 } ià(!
	`¡rcmp
(
¬g
, "svcd")) {

2575 
	`İt_video_codec
(
o
, "c:v", "mpeg2video");

2576 
	`İt_audio_codec
(
o
, "c:a", "mp2");

2577 
	`·r£_İtiÚ
(
o
, "f", "svcd", 
İtiÚs
);

2579 
	`·r£_İtiÚ
(
o
, "s", 
nÜm
 =ğ
PAL
 ? "480x576" : "480x480", 
İtiÚs
);

2580 
	`·r£_İtiÚ
(
o
, "r", 
äame_¿‹s
[
nÜm
], 
İtiÚs
);

2581 
	`·r£_İtiÚ
(
o
, "pix_fmt", "yuv420p", 
İtiÚs
);

2582 
	`İt_deçuÉ
(
NULL
, "g", 
nÜm
 =ğ
PAL
 ? "15" : "18");

2584 
	`İt_deçuÉ
(
NULL
, "b:v", "2040000");

2585 
	`İt_deçuÉ
(
NULL
, "maxrate:v", "2516000");

2586 
	`İt_deçuÉ
(
NULL
, "minrate:v", "0");

2587 
	`İt_deçuÉ
(
NULL
, "bufsize:v", "1835008");

2588 
	`İt_deçuÉ
(
NULL
, "scan_offset", "1");

2590 
	`İt_deçuÉ
(
NULL
, "b:a", "224000");

2591 
	`·r£_İtiÚ
(
o
, "¬", "44100", 
İtiÚs
);

2593 
	`İt_deçuÉ
(
NULL
, "packetsize", "2324");

2595 } ià(!
	`¡rcmp
(
¬g
, "dvd")) {

2597 
	`İt_video_codec
(
o
, "c:v", "mpeg2video");

2598 
	`İt_audio_codec
(
o
, "c:a", "ac3");

2599 
	`·r£_İtiÚ
(
o
, "f", "dvd", 
İtiÚs
);

2601 
	`·r£_İtiÚ
(
o
, "s", 
nÜm
 =ğ
PAL
 ? "720x576" : "720x480", 
İtiÚs
);

2602 
	`·r£_İtiÚ
(
o
, "r", 
äame_¿‹s
[
nÜm
], 
İtiÚs
);

2603 
	`·r£_İtiÚ
(
o
, "pix_fmt", "yuv420p", 
İtiÚs
);

2604 
	`İt_deçuÉ
(
NULL
, "g", 
nÜm
 =ğ
PAL
 ? "15" : "18");

2606 
	`İt_deçuÉ
(
NULL
, "b:v", "6000000");

2607 
	`İt_deçuÉ
(
NULL
, "maxrate:v", "9000000");

2608 
	`İt_deçuÉ
(
NULL
, "minrate:v", "0");

2609 
	`İt_deçuÉ
(
NULL
, "bufsize:v", "1835008");

2611 
	`İt_deçuÉ
(
NULL
, "packetsize", "2048");

2612 
	`İt_deçuÉ
(
NULL
, "muxrate", "10080000");

2614 
	`İt_deçuÉ
(
NULL
, "b:a", "448000");

2615 
	`·r£_İtiÚ
(
o
, "¬", "48000", 
İtiÚs
);

2617 } ià(!
	`¡ºcmp
(
¬g
, "dv", 2)) {

2619 
	`·r£_İtiÚ
(
o
, "f", "dv", 
İtiÚs
);

2621 
	`·r£_İtiÚ
(
o
, "s", 
nÜm
 =ğ
PAL
 ? "720x576" : "720x480", 
İtiÚs
);

2622 
	`·r£_İtiÚ
(
o
, "pix_fmt", !
	`¡ºcmp
(
¬g
, "dv50", 4) ? "yuv422p" :

2623 
nÜm
 =ğ
PAL
 ? "yuv420p" : "yuv411p", 
İtiÚs
);

2624 
	`·r£_İtiÚ
(
o
, "r", 
äame_¿‹s
[
nÜm
], 
İtiÚs
);

2626 
	`·r£_İtiÚ
(
o
, "¬", "48000", 
İtiÚs
);

2627 
	`·r£_İtiÚ
(
o
, "ac", "2", 
İtiÚs
);

2630 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "UnknowÀrg‘: %s\n", 
¬g
);

2631  
	`AVERROR
(
EINVAL
);

2634 
	`av_diù_cİy
(&
o
->
g
->
codec_İts
, codec_İts, 
AV_DICT_DONT_OVERWRITE
);

2635 
	`av_diù_cİy
(&
o
->
g
->
fÜm©_İts
, fÜm©_İts, 
AV_DICT_DONT_OVERWRITE
);

2638 
	}
}

2640 
	$İt_v¡©s_fe
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2642 
	`av_ä“
 (
v¡©s_f’ame
);

2643 
v¡©s_f’ame
 = 
	`av_¡rdup
 (
¬g
);

2645 
	}
}

2647 
	$İt_v¡©s
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2649 
f’ame
[40];

2650 
time_t
 
today2
 = 
	`time
(
NULL
);

2651 
tm
 *
today
 = 
	`loÿÉime
(&
today2
);

2653 ià(!
today
) {

2654 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "UÇbËØg‘ cu¼’ˆtime: %s\n", 
	`¡»¼Ü
(
”ºo
));

2655 
	`ex™_´og¿m
(1);

2658 
	`¢´štf
(
f’ame
, (f’ame), "v¡©s_%02d%02d%02d.log", 
today
->
tm_hour
,oday->
tm_mš
,

2659 
today
->
tm_£c
);

2660  
	`İt_v¡©s_fe
(
NULL
, 
İt
, 
f’ame
);

2661 
	}
}

2663 
	$İt_video_äames
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2665 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

2666  
	`·r£_İtiÚ
(
o
, "äames:v", 
¬g
, 
İtiÚs
);

2667 
	}
}

2669 
	$İt_audio_äames
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2671 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

2672  
	`·r£_İtiÚ
(
o
, "äames:a", 
¬g
, 
İtiÚs
);

2673 
	}
}

2675 
	$İt_d©a_äames
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2677 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

2678  
	`·r£_İtiÚ
(
o
, "äames:d", 
¬g
, 
İtiÚs
);

2679 
	}
}

2681 
	$İt_deçuÉ_Ãw
(
O±iÚsCÚ‹xt
 *
o
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2683 
»t
;

2684 
AVDiùiÚ¬y
 *
cbak
 = 
codec_İts
;

2685 
AVDiùiÚ¬y
 *
fbak
 = 
fÜm©_İts
;

2686 
codec_İts
 = 
NULL
;

2687 
fÜm©_İts
 = 
NULL
;

2689 
»t
 = 
	`İt_deçuÉ
(
NULL
, 
İt
, 
¬g
);

2691 
	`av_diù_cİy
(&
o
->
g
->
codec_İts
 , codec_opts, 0);

2692 
	`av_diù_cİy
(&
o
->
g
->
fÜm©_İts
, format_opts, 0);

2693 
	`av_diù_ä“
(&
codec_İts
);

2694 
	`av_diù_ä“
(&
fÜm©_İts
);

2695 
codec_İts
 = 
cbak
;

2696 
fÜm©_İts
 = 
fbak
;

2698  
»t
;

2699 
	}
}

2701 
	$İt_´e£t
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2703 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

2704 
FILE
 *
f
=
NULL
;

2705 
f’ame
[1000], 
lše
[1000], 
tmp_lše
[1000];

2706 cÚ¡ *
codec_Çme
 = 
NULL
;

2708 
tmp_lše
[0] = *
İt
;

2709 
tmp_lše
[1] = 0;

2710 
	`MATCH_PER_TYPE_OPT
(
codec_Çmes
, 
¡r
, 
codec_Çme
, 
NULL
, 
tmp_lše
);

2712 ià(!(
f
 = 
	`g‘_´e£t_fe
(
f’ame
, (f’ame), 
¬g
, *
İt
 =ğ'f', 
codec_Çme
))) {

2713 if(!
	`¡ºcmp
(
¬g
, "libx264-los¦ess", 
	`¡¾’
("libx264-lossless"))){

2714 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Please use -preset <speed> -qp 0\n");

2716 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "FfÜ…»£ˆ'%s'‚Ù found\n", 
¬g
);

2717 
	`ex™_´og¿m
(1);

2720 
	`fg‘s
(
lše
, Öše), 
f
)) {

2721 *
key
 = 
tmp_lše
, *
v®ue
, *
’d±r
;

2723 ià(
	`¡rc¥n
(
lše
, "#\n\r") == 0)

2725 
	`av_¡¾ıy
(
tmp_lše
, 
lše
, (tmp_line));

2726 ià(!
	`av_¡¹ok
(
key
, "=", &
v®ue
) ||

2727 !
	`av_¡¹ok
(
v®ue
, "\r\n", &
’d±r
)) {

2728 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "%s: Inv®id syÁax: '%s'\n", 
f’ame
, 
lše
);

2729 
	`ex™_´og¿m
(1);

2731 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, "få»£t[%s]: s‘ '%s' = '%s'\n", 
f’ame
, 
key
, 
v®ue
);

2733 ià(!
	`¡rcmp
(
key
, "acodec")è
	`İt_audio_codec
 (
o
, key, 
v®ue
);

2734 ià(!
	`¡rcmp
(
key
, "vcodec")è
	`İt_video_codec
 (
o
, key, 
v®ue
);

2735 ià(!
	`¡rcmp
(
key
, "scodec")è
	`İt_subt™Ë_codec
(
o
, key, 
v®ue
);

2736 ià(!
	`¡rcmp
(
key
, "dcodec")è
	`İt_d©a_codec
 (
o
, key, 
v®ue
);

2737 ià(
	`İt_deçuÉ_Ãw
(
o
, 
key
, 
v®ue
) < 0) {

2738 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "%s: Invalid option or‡rgument: '%s',…arsed‡s '%s' = '%s'\n",

2739 
f’ame
, 
lše
, 
key
, 
v®ue
);

2740 
	`ex™_´og¿m
(1);

2744 
	`fşo£
(
f
);

2747 
	}
}

2749 
	$İt_Şd2Ãw
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2751 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

2752 *
s
 = 
	`av_a¥rštf
("%s:%c", 
İt
 + 1, *opt);

2753 
»t
 = 
	`·r£_İtiÚ
(
o
, 
s
, 
¬g
, 
İtiÚs
);

2754 
	`av_ä“
(
s
);

2755  
»t
;

2756 
	}
}

2758 
	$İt_b™¿‹
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2760 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

2762 if(!
	`¡rcmp
(
İt
, "ab")){

2763 
	`av_diù_£t
(&
o
->
g
->
codec_İts
, "b:a", 
¬g
, 0);

2765 } if(!
	`¡rcmp
(
İt
, "b")){

2766 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "Please use -b:a or -b:v, -b is‡mbiguous\n");

2767 
	`av_diù_£t
(&
o
->
g
->
codec_İts
, "b:v", 
¬g
, 0);

2770 
	`av_diù_£t
(&
o
->
g
->
codec_İts
, 
İt
, 
¬g
, 0);

2772 
	}
}

2774 
	$İt_qsÿË
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2776 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

2777 *
s
;

2778 
»t
;

2779 if(!
	`¡rcmp
(
İt
, "qscale")){

2780 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "Please use -q:a or -q:v, -qscale is‡mbiguous\n");

2781  
	`·r£_İtiÚ
(
o
, "q:v", 
¬g
, 
İtiÚs
);

2783 
s
 = 
	`av_a¥rštf
("q%s", 
İt
 + 6);

2784 
»t
 = 
	`·r£_İtiÚ
(
o
, 
s
, 
¬g
, 
İtiÚs
);

2785 
	`av_ä“
(
s
);

2786  
»t
;

2787 
	}
}

2789 
	$İt_´ofe
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2791 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

2792 if(!
	`¡rcmp
(
İt
, "profile")){

2793 
	`av_log
(
NULL
, 
AV_LOG_WARNING
, "Please use -profile:a or -profile:v, -profile is‡mbiguous\n");

2794 
	`av_diù_£t
(&
o
->
g
->
codec_İts
, "´ofe:v", 
¬g
, 0);

2797 
	`av_diù_£t
(&
o
->
g
->
codec_İts
, 
İt
, 
¬g
, 0);

2799 
	}
}

2801 
	$İt_video_f‹rs
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2803 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

2804  
	`·r£_İtiÚ
(
o
, "f‹r:v", 
¬g
, 
İtiÚs
);

2805 
	}
}

2807 
	$İt_audio_f‹rs
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2809 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

2810  
	`·r£_İtiÚ
(
o
, "f‹r:a", 
¬g
, 
İtiÚs
);

2811 
	}
}

2813 
	$İt_vsync
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2815 ià(!
	`av_¡rÿ£cmp
(
¬g
, "cä")è
video_sync_m‘hod
 = 
VSYNC_CFR
;

2816 ià(!
	`av_¡rÿ£cmp
(
¬g
, "vä")è
video_sync_m‘hod
 = 
VSYNC_VFR
;

2817 ià(!
	`av_¡rÿ£cmp
(
¬g
, "·s¡hrough")è
video_sync_m‘hod
 = 
VSYNC_PASSTHROUGH
;

2818 ià(!
	`av_¡rÿ£cmp
(
¬g
, "drİ")è
video_sync_m‘hod
 = 
VSYNC_DROP
;

2820 ià(
video_sync_m‘hod
 =ğ
VSYNC_AUTO
)

2821 
video_sync_m‘hod
 = 
	`·r£_numb”_Ü_d›
("vsync", 
¬g
, 
OPT_INT
, 
VSYNC_AUTO
, 
VSYNC_VFR
);

2823 
	}
}

2825 
	$İt_timecode
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2827 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

2828 *
tü
 = 
	`av_a¥rštf
("timecode=%s", 
¬g
);

2829 
»t
 = 
	`·r£_İtiÚ
(
o
, "m‘ad©a:g", 
tü
, 
İtiÚs
);

2830 ià(
»t
 >= 0)

2831 
»t
 = 
	`av_diù_£t
(&
o
->
g
->
codec_İts
, "gİ_timecode", 
¬g
, 0);

2832 
	`av_ä“
(
tü
);

2834 
	}
}

2836 
	$İt_chªÃl_Ïyout
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2838 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

2839 
Ïyout_¡r
[32];

2840 *
¡»am_¡r
;

2841 *
ac_¡r
;

2842 
»t
, 
chªÃls
, 
ac_¡r_size
;

2843 
ušt64_t
 
Ïyout
;

2845 
Ïyout
 = 
	`av_g‘_chªÃl_Ïyout
(
¬g
);

2846 ià(!
Ïyout
) {

2847 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "UnknowÀchªÃÈÏyout: %s\n", 
¬g
);

2848  
	`AVERROR
(
EINVAL
);

2850 
	`¢´štf
(
Ïyout_¡r
, Öayout_¡r), "%"
PRIu64
, 
Ïyout
);

2851 
»t
 = 
	`İt_deçuÉ_Ãw
(
o
, 
İt
, 
Ïyout_¡r
);

2852 ià(
»t
 < 0)

2853  
»t
;

2856 
chªÃls
 = 
	`av_g‘_chªÃl_Ïyout_nb_chªÃls
(
Ïyout
);

2857 
	`¢´štf
(
Ïyout_¡r
, Öayout_¡r), "%d", 
chªÃls
);

2858 
¡»am_¡r
 = 
	`¡rchr
(
İt
, ':');

2859 
ac_¡r_size
 = 3 + (
¡»am_¡r
 ? 
	`¡¾’
(stream_str) : 0);

2860 
ac_¡r
 = 
	`av_m®locz
(
ac_¡r_size
);

2861 ià(!
ac_¡r
)

2862  
	`AVERROR
(
ENOMEM
);

2863 
	`av_¡¾ıy
(
ac_¡r
, "ac", 3);

2864 ià(
¡»am_¡r
)

2865 
	`av_¡¾ÿt
(
ac_¡r
, 
¡»am_¡r
, 
ac_¡r_size
);

2866 
»t
 = 
	`·r£_İtiÚ
(
o
, 
ac_¡r
, 
Ïyout_¡r
, 
İtiÚs
);

2867 
	`av_ä“
(
ac_¡r
);

2869  
»t
;

2870 
	}
}

2872 
	$İt_audio_qsÿË
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2874 
O±iÚsCÚ‹xt
 *
o
 = 
İtùx
;

2875  
	`·r£_İtiÚ
(
o
, "q:a", 
¬g
, 
İtiÚs
);

2876 
	}
}

2878 
	$İt_f‹r_com¶ex
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2880 
	`GROW_ARRAY
(
f‹rg¿phs
, 
nb_f‹rg¿phs
);

2881 ià(!(
f‹rg¿phs
[
nb_f‹rg¿phs
 - 1] = 
	`av_m®locz
((*filtergraphs[0]))))

2882  
	`AVERROR
(
ENOMEM
);

2883 
f‹rg¿phs
[
nb_f‹rg¿phs
 - 1]->
šdex
 =‚b_filtergraphs - 1;

2884 
f‹rg¿phs
[
nb_f‹rg¿phs
 - 1]->
g¿ph_desc
 = 
	`av_¡rdup
(
¬g
);

2885 ià(!
f‹rg¿phs
[
nb_f‹rg¿phs
 - 1]->
g¿ph_desc
)

2886  
	`AVERROR
(
ENOMEM
);

2888 
šput_¡»am_pÙ’tŸÎy_avaabË
 = 1;

2891 
	}
}

2893 
	$İt_f‹r_com¶ex_süt
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

2895 
ušt8_t
 *
g¿ph_desc
 = 
	`»ad_fe
(
¬g
);

2896 ià(!
g¿ph_desc
)

2897  
	`AVERROR
(
EINVAL
);

2899 
	`GROW_ARRAY
(
f‹rg¿phs
, 
nb_f‹rg¿phs
);

2900 ià(!(
f‹rg¿phs
[
nb_f‹rg¿phs
 - 1] = 
	`av_m®locz
((*filtergraphs[0]))))

2901  
	`AVERROR
(
ENOMEM
);

2902 
f‹rg¿phs
[
nb_f‹rg¿phs
 - 1]->
šdex
 =‚b_filtergraphs - 1;

2903 
f‹rg¿phs
[
nb_f‹rg¿phs
 - 1]->
g¿ph_desc
 = graph_desc;

2905 
šput_¡»am_pÙ’tŸÎy_avaabË
 = 1;

2908 
	}
}

2910 
	$show_h–p_deçuÉ
(cÚ¡ *
İt
, cÚ¡ *
¬g
)

2913 cÚ¡ 
³r_fe
 = 
OPT_SPEC
 | 
OPT_OFFSET
 | 
OPT_PERFILE
;

2914 
show_advªûd
 = 0, 
show_avİtiÚs
 = 0;

2916 ià(
İt
 && *opt) {

2917 ià(!
	`¡rcmp
(
İt
, "long"))

2918 
show_advªûd
 = 1;

2919 ià(!
	`¡rcmp
(
İt
, "full"))

2920 
show_advªûd
 = 
show_avİtiÚs
 = 1;

2922 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "UnknowÀh–°İtiÚ '%s'.\n", 
İt
);

2925 
	`show_u§ge
();

2927 
	`´štf
("Getting help:\n"

2933 "\n", 
´og¿m_Çme
);

2935 
	`show_h–p_İtiÚs
(
İtiÚs
, "Print help / information / capabilities:",

2936 
OPT_EXIT
, 0, 0);

2938 
	`show_h–p_İtiÚs
(
İtiÚs
, "Global options (affect whole…rogram "

2940 0, 
³r_fe
 | 
OPT_EXIT
 | 
OPT_EXPERT
, 0);

2941 ià(
show_advªûd
)

2942 
	`show_h–p_İtiÚs
(
İtiÚs
, "Advªûd glob® o±iÚs:", 
OPT_EXPERT
,

2943 
³r_fe
 | 
OPT_EXIT
, 0);

2945 
	`show_h–p_İtiÚs
(
İtiÚs
, "Per-file main options:", 0,

2946 
OPT_EXPERT
 | 
OPT_AUDIO
 | 
OPT_VIDEO
 | 
OPT_SUBTITLE
 |

2947 
OPT_EXIT
, 
³r_fe
);

2948 ià(
show_advªûd
)

2949 
	`show_h–p_İtiÚs
(
İtiÚs
, "Advanced…er-file options:",

2950 
OPT_EXPERT
, 
OPT_AUDIO
 | 
OPT_VIDEO
 | 
OPT_SUBTITLE
, 
³r_fe
);

2952 
	`show_h–p_İtiÚs
(
İtiÚs
, "Video options:",

2953 
OPT_VIDEO
, 
OPT_EXPERT
 | 
OPT_AUDIO
, 0);

2954 ià(
show_advªûd
)

2955 
	`show_h–p_İtiÚs
(
İtiÚs
, "Advanced Video options:",

2956 
OPT_EXPERT
 | 
OPT_VIDEO
, 
OPT_AUDIO
, 0);

2958 
	`show_h–p_İtiÚs
(
İtiÚs
, "Audio options:",

2959 
OPT_AUDIO
, 
OPT_EXPERT
 | 
OPT_VIDEO
, 0);

2960 ià(
show_advªûd
)

2961 
	`show_h–p_İtiÚs
(
İtiÚs
, "Advanced Audio options:",

2962 
OPT_EXPERT
 | 
OPT_AUDIO
, 
OPT_VIDEO
, 0);

2963 
	`show_h–p_İtiÚs
(
İtiÚs
, "Subtitle options:",

2964 
OPT_SUBTITLE
, 0, 0);

2965 
	`´štf
("\n");

2967 ià(
show_avİtiÚs
) {

2968 
æags
 = 
AV_OPT_FLAG_DECODING_PARAM
 | 
AV_OPT_FLAG_ENCODING_PARAM
;

2969 
	`show_h–p_chd»n
(
	`avcodec_g‘_şass
(), 
æags
);

2970 
	`show_h–p_chd»n
(
	`avfÜm©_g‘_şass
(), 
æags
);

2971 #ià
CONFIG_SWSCALE


2972 
	`show_h–p_chd»n
(
	`sws_g‘_şass
(), 
æags
);

2974 
	`show_h–p_chd»n
(
	`swr_g‘_şass
(), 
AV_OPT_FLAG_AUDIO_PARAM
);

2975 
	`show_h–p_chd»n
(
	`avf‹r_g‘_şass
(), 
AV_OPT_FLAG_VIDEO_PARAM
 | 
AV_OPT_FLAG_AUDIO_PARAM
 | 
AV_OPT_FLAG_FILTERING_PARAM
);

2977 
	}
}

2979 
	$show_u§ge
()

2981 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "Hyper fast Audio‡nd Videoƒncoder\n");

2982 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "u§ge: % [İtiÚs] [[šfİtiÚs] -˜šfe]... {[outfİtiÚs] outfe}...\n", 
´og¿m_Çme
);

2983 
	`av_log
(
NULL
, 
AV_LOG_INFO
, "\n");

2984 
	}
}

2986 
	eO±Group
 {

2987 
	mGROUP_OUTFILE
,

2988 
	mGROUP_INFILE
,

2991 cÚ¡ 
O±iÚGroupDef
 
	ggroups
[] = {

2992 [
GROUP_OUTFILE
] = { "ouuˆfe", 
NULL
, 
OPT_OUTPUT
 },

2993 [
GROUP_INFILE
] = { "špuˆfe", "i", 
OPT_INPUT
 },

2996 
İ’_fes
(
O±iÚGroupLi¡
 *
l
, cÚ¡ *
šout
,

2997 (*
İ’_fe
)(
O±iÚsCÚ‹xt
*, const *))

2999 
i
, 
»t
;

3001 
i
 = 0; i < 
l
->
nb_groups
; i++) {

3002 
O±iÚGroup
 *
g
 = &
l
->
groups
[
i
];

3003 
O±iÚsCÚ‹xt
 
o
;

3005 
	`š™_İtiÚs
(&
o
);

3006 
o
.
g
 = g;

3008 
»t
 = 
	`·r£_İtgroup
(&
o
, 
g
);

3009 ià(
»t
 < 0) {

3010 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Error…arsing options for %s file "

3011 "%s.\n", 
šout
, 
g
->
¬g
);

3012  
»t
;

3015 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, "O³nšg‡À% fe: %s.\n", 
šout
, 
g
->
¬g
);

3016 
»t
 = 
	`İ’_fe
(&
o
, 
g
->
¬g
);

3017 
	`unš™_İtiÚs
(&
o
);

3018 ià(
»t
 < 0) {

3019 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Error opening %s file %s.\n",

3020 
šout
, 
g
->
¬g
);

3021  
»t
;

3023 
	`av_log
(
NULL
, 
AV_LOG_DEBUG
, "Successfully openedhe file.\n");

3027 
	}
}

3029 
	$ffm³g_·r£_İtiÚs
(
¬gc
, **
¬gv
)

3031 
O±iÚP¬£CÚ‹xt
 
oùx
;

3032 
ušt8_t
 
”rÜ
[128];

3033 
»t
;

3035 
	`mem£t
(&
oùx
, 0, (octx));

3038 
»t
 = 
	`¥l™_commªdlše
(&
oùx
, 
¬gc
, 
¬gv
, 
İtiÚs
, 
groups
,

3039 
	`FF_ARRAY_ELEMS
(
groups
));

3040 ià(
»t
 < 0) {

3041 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Error splittinghe‡rgument†ist: ");

3042 
ç
;

3046 
»t
 = 
	`·r£_İtgroup
(
NULL
, &
oùx
.
glob®_İts
);

3047 ià(
»t
 < 0) {

3048 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Error…arsing global options: ");

3049 
ç
;

3053 
»t
 = 
	`İ’_fes
(&
oùx
.
groups
[
GROUP_INFILE
], "šput", 
İ’_šput_fe
);

3054 ià(
»t
 < 0) {

3055 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Error opening input files: ");

3056 
ç
;

3060 
»t
 = 
	`š™_com¶ex_f‹rs
();

3061 ià(
»t
 < 0) {

3062 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Error initializing complex filters.\n");

3063 
ç
;

3067 
»t
 = 
	`İ’_fes
(&
oùx
.
groups
[
GROUP_OUTFILE
], "ouut", 
İ’_ouut_fe
);

3068 ià(
»t
 < 0) {

3069 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Error opening output files: ");

3070 
ç
;

3074 
»t
 = 
	`cÚfigu»_com¶ex_f‹rs
();

3075 ià(
»t
 < 0) {

3076 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "Error configuring complex filters.\n");

3077 
ç
;

3080 
ç
:

3081 
	`unš™_·r£_cÚ‹xt
(&
oùx
);

3082 ià(
»t
 < 0) {

3083 
	`av_¡»¼Ü
(
»t
, 
”rÜ
, (error));

3084 
	`av_log
(
NULL
, 
AV_LOG_FATAL
, "%s\n", 
”rÜ
);

3086  
»t
;

3087 
	}
}

3089 
	$İt_´og»ss
(*
İtùx
, cÚ¡ *
İt
, cÚ¡ *
¬g
)

3091 
AVIOCÚ‹xt
 *
avio
 = 
NULL
;

3092 
»t
;

3094 ià(!
	`¡rcmp
(
¬g
, "-"))

3095 
¬g
 = "pipe:";

3096 
»t
 = 
	`avio_İ’2
(&
avio
, 
¬g
, 
AVIO_FLAG_WRITE
, &
št_cb
, 
NULL
);

3097 ià(
»t
 < 0) {

3098 
	`av_log
(
NULL
, 
AV_LOG_ERROR
, "Failedo open…rogress URL \"%s\": %s\n",

3099 
¬g
, 
	`av_”r2¡r
(
»t
));

3100  
»t
;

3102 
´og»ss_avio
 = 
avio
;

3104 
	}
}

3106 
	#OFFSET
(
x
è
	`off£tof
(
O±iÚsCÚ‹xt
, x)

	)

3107 cÚ¡ 
O±iÚDef
 
	gİtiÚs
[] = {

3109 
	~"cmduts_commÚ_İts.h
"

3110 { "f", 
HAS_ARG
 | 
OPT_STRING
 | 
OPT_OFFSET
 |

3111 
OPT_INPUT
 | 
OPT_OUTPUT
, { .
off
 = 
OFFSET
(
fÜm©
) },

3113 { "y", 
	gOPT_BOOL
, { &
	gfe_ov”wr™e
 },

3115 { "n", 
	gOPT_BOOL
, { &
	gno_fe_ov”wr™e
 },

3117 { "ignÜe_unknown", 
	gOPT_BOOL
, { &
	gignÜe_unknown_¡»ams
 },

3119 { "cİy_unknown", 
	gOPT_BOOL
 | 
	gOPT_EXPERT
, { &
	gcİy_unknown_¡»ams
 },

3121 { "c", 
	gHAS_ARG
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 |

3122 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
codec_Çmes
) },

3124 { "codec", 
	gHAS_ARG
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 |

3125 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
codec_Çmes
) },

3127 { "´e", 
	gHAS_ARG
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 |

3128 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
´e£ts
) },

3130 { "m­", 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_PERFILE
 |

3131 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_m­
 },

3134 { "m­_chªÃl", 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_m­_chªÃl
 },

3136 { "m­_m‘ad©a", 
	gHAS_ARG
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 |

3137 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
m‘ad©a_m­
) },

3140 { "m­_ch­‹rs", 
	gHAS_ARG
 | 
	gOPT_INT
 | 
	gOPT_EXPERT
 | 
	gOPT_OFFSET
 |

3141 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
ch­‹rs_šput_fe
) },

3143 { "t", 
	gHAS_ARG
 | 
	gOPT_TIME
 | 
	gOPT_OFFSET
 |

3144 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
»cÜdšg_time
) },

3147 { "to", 
	gHAS_ARG
 | 
	gOPT_TIME
 | 
	gOPT_OFFSET
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
¡İ_time
) },

3149 { "fs", 
	gHAS_ARG
 | 
	gOPT_INT64
 | 
	gOPT_OFFSET
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
lim™_fesize
) },

3151 { "ss", 
	gHAS_ARG
 | 
	gOPT_TIME
 | 
	gOPT_OFFSET
 |

3152 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
¡¬t_time
) },

3154 { "s£of", 
	gHAS_ARG
 | 
	gOPT_TIME
 | 
	gOPT_OFFSET
 |

3155 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
¡¬t_time_eof
) },

3157 { "£ek_time¡amp", 
	gHAS_ARG
 | 
	gOPT_INT
 | 
	gOPT_OFFSET
 |

3158 
	gOPT_INPUT
, { .
	goff
 = 
OFFSET
(
£ek_time¡amp
) },

3160 { "accu¿‹_£ek", 
	gOPT_BOOL
 | 
	gOPT_OFFSET
 | 
	gOPT_EXPERT
 |

3161 
	gOPT_INPUT
, { .
	goff
 = 
OFFSET
(
accu¿‹_£ek
) },

3163 { "™soff£t", 
	gHAS_ARG
 | 
	gOPT_TIME
 | 
	gOPT_OFFSET
 |

3164 
	gOPT_EXPERT
 | 
	gOPT_INPUT
, { .
	goff
 = 
OFFSET
(
šput_ts_off£t
) },

3166 { "™ssÿË", 
	gHAS_ARG
 | 
	gOPT_DOUBLE
 | 
	gOPT_SPEC
 |

3167 
	gOPT_EXPERT
 | 
	gOPT_INPUT
, { .
	goff
 = 
OFFSET
(
ts_sÿË
) },

3169 { "time¡amp", 
	gHAS_ARG
 | 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_»cÜdšg_time¡amp
 },

3171 { "m‘ad©a", 
	gHAS_ARG
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
m‘ad©a
) },

3173 { "´og¿m", 
	gHAS_ARG
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
´og¿m
) },

3175 { "däames", 
	gHAS_ARG
 | 
	gOPT_PERFILE
 | 
	gOPT_EXPERT
 |

3176 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_d©a_äames
 },

3178 { "b’chm¬k", 
	gOPT_BOOL
 | 
	gOPT_EXPERT
, { &
	gdo_b’chm¬k
 },

3180 { "b’chm¬k_®l", 
	gOPT_BOOL
 | 
	gOPT_EXPERT
, { &
	gdo_b’chm¬k_®l
 },

3182 { "´og»ss", 
	gHAS_ARG
 | 
	gOPT_EXPERT
, { .
	gfunc_¬g
 = 
İt_´og»ss
 },

3184 { "¡dš", 
	gOPT_BOOL
 | 
	gOPT_EXPERT
, { &
	g¡dš_š‹¿ùiÚ
 },

3186 { "tim–im™", 
	gHAS_ARG
 | 
	gOPT_EXPERT
, { .
	gfunc_¬g
 = 
İt_tim–im™
 },

3188 { "dump", 
	gOPT_BOOL
 | 
	gOPT_EXPERT
, { &
	gdo_pkt_dump
 },

3190 { "hex", 
	gOPT_BOOL
 | 
	gOPT_EXPERT
, { &
	gdo_hex_dump
 },

3192 { "»", 
	gOPT_BOOL
 | 
	gOPT_EXPERT
 | 
	gOPT_OFFSET
 |

3193 
	gOPT_INPUT
, { .
	goff
 = 
OFFSET
(
¿‹_emu
) },

3195 { "rg‘", 
	gHAS_ARG
 | 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_rg‘
 },

3198 { "vsync", 
	gHAS_ARG
 | 
	gOPT_EXPERT
, { .
	gfunc_¬g
 = 
İt_vsync
 },

3200 { "äame_drİ_th»shŞd", 
	gHAS_ARG
 | 
	gOPT_FLOAT
 | 
	gOPT_EXPERT
, { &
	gäame_drİ_th»shŞd
 },

3202 { "async", 
	gHAS_ARG
 | 
	gOPT_INT
 | 
	gOPT_EXPERT
, { &
	gaudio_sync_m‘hod
 },

3204 { "adriá_th»shŞd", 
	gHAS_ARG
 | 
	gOPT_FLOAT
 | 
	gOPT_EXPERT
, { &
	gaudio_driá_th»shŞd
 },

3206 { "cİyts", 
	gOPT_BOOL
 | 
	gOPT_EXPERT
, { &
	gcİy_ts
 },

3208 { "¡¬t_©_z”o", 
	gOPT_BOOL
 | 
	gOPT_EXPERT
, { &
	g¡¬t_©_z”o
 },

3210 { "cİytb", 
	gHAS_ARG
 | 
	gOPT_INT
 | 
	gOPT_EXPERT
, { &
	gcİy_tb
 },

3212 { "shÜ‹¡", 
	gOPT_BOOL
 | 
	gOPT_EXPERT
 | 
	gOPT_OFFSET
 |

3213 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
shÜ‹¡
) },

3215 { "­ad", 
	gOPT_STRING
 | 
	gHAS_ARG
 | 
	gOPT_SPEC
 |

3216 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
­ad
) },

3218 { "dts_d–_th»shŞd", 
	gHAS_ARG
 | 
	gOPT_FLOAT
 | 
	gOPT_EXPERT
, { &
	gdts_d–_th»shŞd
 },

3220 { "dts_”rÜ_th»shŞd", 
	gHAS_ARG
 | 
	gOPT_FLOAT
 | 
	gOPT_EXPERT
, { &
	gdts_”rÜ_th»shŞd
 },

3222 { "x”rÜ", 
	gOPT_BOOL
 | 
	gOPT_EXPERT
, { &
	gex™_Ú_”rÜ
 },

3224 { "abÜt_Ú", 
	gHAS_ARG
 | 
	gOPT_EXPERT
, { .
	gfunc_¬g
 = 
İt_abÜt_Ú
 },

3226 { "cİyškf", 
	gOPT_BOOL
 | 
	gOPT_EXPERT
 | 
	gOPT_SPEC
 |

3227 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
cİy_š™Ÿl_nÚkeyäames
) },

3229 { "cİy´iÜss", 
	gOPT_INT
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_SPEC
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
cİy_´iÜ_¡¬t
) },

3231 { "äames", 
	gOPT_INT64
 | 
	gHAS_ARG
 | 
	gOPT_SPEC
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
max_äames
) },

3233 { "g", 
	gOPT_STRING
 | 
	gHAS_ARG
 | 
	gOPT_SPEC
 |

3234 
	gOPT_EXPERT
 | 
	gOPT_OUTPUT
 | 
	gOPT_INPUT
, { .
	goff
 = 
OFFSET
(
codec_gs
) },

3236 { "q", 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_DOUBLE
 |

3237 
	gOPT_SPEC
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
qsÿË
) },

3239 { "qsÿË", 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_PERFILE
 |

3240 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_qsÿË
 },

3242 { "´ofe", 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_´ofe
 },

3244 { "f‹r", 
	gHAS_ARG
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
f‹rs
) },

3246 { "f‹r_süt", 
	gHAS_ARG
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
f‹r_süts
) },

3248 { "»š™_f‹r", 
	gHAS_ARG
 | 
	gOPT_INT
 | 
	gOPT_SPEC
 | 
	gOPT_INPUT
, { .
	goff
 = 
OFFSET
(
»š™_f‹rs
) },

3250 { "f‹r_com¶ex", 
	gHAS_ARG
 | 
	gOPT_EXPERT
, { .
	gfunc_¬g
 = 
İt_f‹r_com¶ex
 },

3252 { "Ïvfi", 
	gHAS_ARG
 | 
	gOPT_EXPERT
, { .
	gfunc_¬g
 = 
İt_f‹r_com¶ex
 },

3254 { "f‹r_com¶ex_süt", 
	gHAS_ARG
 | 
	gOPT_EXPERT
, { .
	gfunc_¬g
 = 
İt_f‹r_com¶ex_süt
 },

3256 { "¡©s", 
	gOPT_BOOL
, { &
	g´št_¡©s
 },

3258 { "©ch", 
	gHAS_ARG
 | 
	gOPT_PERFILE
 | 
	gOPT_EXPERT
 |

3259 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_©ch
 },

3261 { "dump_©chm’t", 
	gHAS_ARG
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 |

3262 
	gOPT_EXPERT
 | 
	gOPT_INPUT
, { .
	goff
 = 
OFFSET
(
dump_©chm’t
) },

3264 { "¡»am_loİ", 
	gOPT_INT
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_INPUT
 |

3265 
	gOPT_OFFSET
, { .
	goff
 = 
OFFSET
(
loİ
) }, "set‚umber ofimes input stream shall be†ooped", "loop count" },

3266 { "debug_ts", 
	gOPT_BOOL
 | 
	gOPT_EXPERT
, { &
	gdebug_ts
 },

3268 { "max_”rÜ_¿‹", 
	gHAS_ARG
 | 
	gOPT_FLOAT
, { &
	gmax_”rÜ_¿‹
 },

3270 { "disÿrd", 
	gOPT_STRING
 | 
	gHAS_ARG
 | 
	gOPT_SPEC
 |

3271 
	gOPT_INPUT
, { .
	goff
 = 
OFFSET
(
disÿrd
) },

3273 { "di¥os™iÚ", 
	gOPT_STRING
 | 
	gHAS_ARG
 | 
	gOPT_SPEC
 |

3274 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
di¥os™iÚ
) },

3276 { "th»ad_queue_size", 
	gHAS_ARG
 | 
	gOPT_INT
 | 
	gOPT_OFFSET
 | 
	gOPT_EXPERT
 | 
	gOPT_INPUT
,

3277 { .
	goff
 = 
OFFSET
(
th»ad_queue_size
) },

3281 { "väames", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_video_äames
 },

3283 { "r", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 |

3284 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
äame_¿‹s
) },

3286 { "s", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_SUBTITLE
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 |

3287 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
äame_sizes
) },

3289 { "a¥eù", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 |

3290 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
äame_a¥eù_¿tios
) },

3292 { "pix_fmt", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 |

3293 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
äame_pix_fmts
) },

3295 { "b™s_³r_¿w_§m¶e", 
	gOPT_VIDEO
 | 
	gOPT_INT
 | 
	gHAS_ARG
, { &
	gäame_b™s_³r_¿w_§m¶e
 },

3297 { "šŒa", 
	gOPT_VIDEO
 | 
	gOPT_BOOL
 | 
	gOPT_EXPERT
, { &
	gšŒa_Úly
 },

3299 { "vn", 
	gOPT_VIDEO
 | 
	gOPT_BOOL
 | 
	gOPT_OFFSET
 | 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
,{ .
	goff
 = 
OFFSET
(
video_di§bË
) },

3301 { "rc_ov”ride", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 |

3302 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
rc_ov”rides
) },

3304 { "vcodec", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_PERFILE
 | 
	gOPT_INPUT
 |

3305 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_video_codec
 },

3307 { "§meq", 
	gOPT_VIDEO
 | 
	gOPT_EXPERT
 , { .
	gfunc_¬g
 = 
İt_§meq
 },

3309 { "§me_quªt", 
	gOPT_VIDEO
 | 
	gOPT_EXPERT
 , { .
	gfunc_¬g
 = 
İt_§meq
 },

3311 { "timecode", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_timecode
 },

3313 { "·ss", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_SPEC
 | 
	gOPT_INT
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
·ss
) },

3315 { "·s¦ogfe", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_STRING
 | 
	gOPT_EXPERT
 | 
	gOPT_SPEC
 |

3316 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
·s¦ogfes
) },

3318 { "deš‹¾aû", 
	gOPT_VIDEO
 | 
	gOPT_BOOL
 | 
	gOPT_EXPERT
, { &
	gdo_deš‹¾aû
 },

3320 { "p¢r", 
	gOPT_VIDEO
 | 
	gOPT_BOOL
 | 
	gOPT_EXPERT
, { &
	gdo_p¢r
 },

3322 { "v¡©s", 
	gOPT_VIDEO
 | 
	gOPT_EXPERT
 , { .
	gfunc_¬g
 = 
İt_v¡©s
 },

3324 { "v¡©s_fe", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 , { .
	gfunc_¬g
 = 
İt_v¡©s_fe
 },

3326 { "vf", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_video_f‹rs
 },

3328 { "šŒa_m©rix", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 |

3329 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
šŒa_m©riûs
) },

3331 { "š‹r_m©rix", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 |

3332 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
š‹r_m©riûs
) },

3334 { "chroma_šŒa_m©rix", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 |

3335 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
chroma_šŒa_m©riûs
) },

3337 { "tİ", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_INT
| 
	gOPT_SPEC
 |

3338 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
tİ_f›ld_fœ¡
) },

3340 { "vg", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_PERFILE
 |

3341 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_Şd2Ãw
 },

3343 { "qphi¡", 
	gOPT_VIDEO
 | 
	gOPT_BOOL
 | 
	gOPT_EXPERT
 , { &
	gqp_hi¡
 },

3345 { "fÜû_ås", 
	gOPT_VIDEO
 | 
	gOPT_BOOL
 | 
	gOPT_EXPERT
 | 
	gOPT_SPEC
 |

3346 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
fÜû_ås
) },

3348 { "¡»amid", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_PERFILE
 |

3349 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_¡»amid
 },

3351 { "fÜû_key_äames", 
	gOPT_VIDEO
 | 
	gOPT_STRING
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 |

3352 
	gOPT_SPEC
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
fÜûd_key_äames
) },

3354 { "ab", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_b™¿‹
 },

3356 { "b", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_b™¿‹
 },

3358 { "hwacûl", 
	gOPT_VIDEO
 | 
	gOPT_STRING
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 |

3359 
	gOPT_SPEC
 | 
	gOPT_INPUT
, { .
	goff
 = 
OFFSET
(
hwacûls
) },

3361 { "hwacûl_deviû", 
	gOPT_VIDEO
 | 
	gOPT_STRING
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 |

3362 
	gOPT_SPEC
 | 
	gOPT_INPUT
, { .
	goff
 = 
OFFSET
(
hwacûl_deviûs
) },

3364 #ià
HAVE_VDPAU_X11


3365 { "vd·u_­i_v”", 
	gHAS_ARG
 | 
	gOPT_INT
 | 
	gOPT_EXPERT
, { &
	gvd·u_­i_v”
 }, "" },

3367 #ià
CONFIG_VDA
 || 
CONFIG_VIDEOTOOLBOX


3368 { "videÙoŞbox_pixfmt", 
	gHAS_ARG
 | 
	gOPT_STRING
 | 
	gOPT_EXPERT
, { &
	gvideÙoŞbox_pixfmt
}, "" },

3370 { "hwacûls", 
	gOPT_EXIT
, { .
	gfunc_¬g
 = 
show_hwacûls
 },

3372 { "autÜÙ©e", 
	gHAS_ARG
 | 
	gOPT_BOOL
 | 
	gOPT_SPEC
 |

3373 
	gOPT_EXPERT
 | 
	gOPT_INPUT
, { .
	goff
 = 
OFFSET
(
autÜÙ©e
) },

3377 { "aäames", 
	gOPT_AUDIO
 | 
	gHAS_ARG
 | 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_audio_äames
 },

3379 { "aq", 
	gOPT_AUDIO
 | 
	gHAS_ARG
 | 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_audio_qsÿË
 },

3381 { "¬", 
	gOPT_AUDIO
 | 
	gHAS_ARG
 | 
	gOPT_INT
 | 
	gOPT_SPEC
 |

3382 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
audio_§m¶e_¿‹
) },

3384 { "ac", 
	gOPT_AUDIO
 | 
	gHAS_ARG
 | 
	gOPT_INT
 | 
	gOPT_SPEC
 |

3385 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
audio_chªÃls
) },

3387 { "ª", 
	gOPT_AUDIO
 | 
	gOPT_BOOL
 | 
	gOPT_OFFSET
 | 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
,{ .
	goff
 = 
OFFSET
(
audio_di§bË
) },

3389 { "acodec", 
	gOPT_AUDIO
 | 
	gHAS_ARG
 | 
	gOPT_PERFILE
 |

3390 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_audio_codec
 },

3392 { "©ag", 
	gOPT_AUDIO
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_PERFILE
 |

3393 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_Şd2Ãw
 },

3395 { "vŞ", 
	gOPT_AUDIO
 | 
	gHAS_ARG
 | 
	gOPT_INT
, { &
	gaudio_vŞume
 },

3397 { "§m¶e_fmt", 
	gOPT_AUDIO
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_SPEC
 |

3398 
	gOPT_STRING
 | 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
§m¶e_fmts
) },

3400 { "chªÃl_Ïyout", 
	gOPT_AUDIO
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_PERFILE
 |

3401 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_chªÃl_Ïyout
 },

3403 { "af", 
	gOPT_AUDIO
 | 
	gHAS_ARG
 | 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_audio_f‹rs
 },

3405 { "guess_Ïyout_max", 
	gOPT_AUDIO
 | 
	gHAS_ARG
 | 
	gOPT_INT
 | 
	gOPT_SPEC
 | 
	gOPT_EXPERT
 | 
	gOPT_INPUT
, { .
	goff
 = 
OFFSET
(
guess_Ïyout_max
) },

3409 { "¢", 
	gOPT_SUBTITLE
 | 
	gOPT_BOOL
 | 
	gOPT_OFFSET
 | 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
subt™Ë_di§bË
) },

3411 { "scodec", 
	gOPT_SUBTITLE
 | 
	gHAS_ARG
 | 
	gOPT_PERFILE
 | 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_subt™Ë_codec
 },

3413 { "¡ag", 
	gOPT_SUBTITLE
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_Şd2Ãw
 }

3415 { "fix_sub_du¿tiÚ", 
	gOPT_BOOL
 | 
	gOPT_EXPERT
 | 
	gOPT_SUBTITLE
 | 
	gOPT_SPEC
 | 
	gOPT_INPUT
, { .
	goff
 = 
OFFSET
(
fix_sub_du¿tiÚ
) },

3417 { "ÿnvas_size", 
	gOPT_SUBTITLE
 | 
	gHAS_ARG
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 | 
	gOPT_INPUT
, { .
	goff
 = 
OFFSET
(
ÿnvas_sizes
) },

3421 { "vc", 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_VIDEO
, { .
	gfunc_¬g
 = 
İt_video_chªÃl
 },

3423 { "tv¡d", 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_VIDEO
, { .
	gfunc_¬g
 = 
İt_video_¡ªd¬d
 },

3425 { "isync", 
	gOPT_BOOL
 | 
	gOPT_EXPERT
, { &
	gšput_sync
 }, "this option is deprecated‡nd does‚othing", "" },

3428 { "muxd–ay", 
	gOPT_FLOAT
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_OFFSET
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
mux_max_d–ay
) },

3430 { "mux´–ßd", 
	gOPT_FLOAT
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_OFFSET
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
mux_´–ßd
) },

3432 { "ov”ride_ff£rv”", 
	gOPT_BOOL
 | 
	gOPT_EXPERT
 | 
	gOPT_OUTPUT
, { &
	gov”ride_ff£rv”
 },

3434 { "sdp_fe", 
	gHAS_ARG
 | 
	gOPT_EXPERT
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_sdp_fe
 },

3437 { "bsf", 
	gHAS_ARG
 | 
	gOPT_STRING
 | 
	gOPT_SPEC
 | 
	gOPT_EXPERT
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
b™¡»am_f‹rs
) },

3439 { "absf", 
	gHAS_ARG
 | 
	gOPT_AUDIO
 | 
	gOPT_EXPERT
| 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_Şd2Ãw
 },

3441 { "vbsf", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
| 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_Şd2Ãw
 },

3444 { "­»", 
	gHAS_ARG
 | 
	gOPT_AUDIO
 | 
	gOPT_EXPERT
| 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_´e£t
 },

3446 { "v´e", 
	gOPT_VIDEO
 | 
	gHAS_ARG
 | 
	gOPT_EXPERT
| 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_´e£t
 },

3448 { "¥»", 
	gHAS_ARG
 | 
	gOPT_SUBTITLE
 | 
	gOPT_EXPERT
| 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_´e£t
 },

3450 { "å»", 
	gHAS_ARG
 | 
	gOPT_EXPERT
| 
	gOPT_PERFILE
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_´e£t
 },

3453 { "dcodec", 
	gHAS_ARG
 | 
	gOPT_DATA
 | 
	gOPT_PERFILE
 | 
	gOPT_EXPERT
 | 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	gfunc_¬g
 = 
İt_d©a_codec
 },

3455 { "dn", 
	gOPT_BOOL
 | 
	gOPT_VIDEO
 | 
	gOPT_OFFSET
 | 
	gOPT_INPUT
 | 
	gOPT_OUTPUT
, { .
	goff
 = 
OFFSET
(
d©a_di§bË
) },

3458 { 
	gNULL
, },

	@main.cpp

1 
	~"mašwšdow.h
"

2 
	~<QAµliÿtiÚ
>

3 
	~<QVeùÜ
>

4 
	~<QSŒšg
>

6 
	~"ffm³g.h
"

9 
	$maš
(
¬gc
, *
¬gv
[])

11 
QAµliÿtiÚ
 
	`a
(
¬gc
, 
¬gv
);

12 
MašWšdow
 
w
;

14 **
ch¬li¡
;

15 
QVeùÜ
<
QSŒšg
> 
vqsArgv
;

16 
vqsArgv
.
	`push_back
("ffmpeg");

17 
vqsArgv
.
	`push_back
("-y");

18 
vqsArgv
.
	`push_back
("-framerate");

19 
vqsArgv
.
	`push_back
("1");

20 
vqsArgv
.
	`push_back
("-i");

21 
vqsArgv
.
	`push_back
("C:\\QtProjects\\qtmovie\\jpg\\img%%3d.jpg");

22 
vqsArgv
.
	`push_back
("C:\\QtProjects\\qtmovie\\myoutput.avi");

23 
ch¬li¡_size
=
vqsArgv
.
	`size
();

24 
ch¬li¡
=(**)
	`m®loc
(
ch¬li¡_size
*(*));

25 
i
=0;i<
ch¬li¡_size
;i++){

26 
¡¾’
=
vqsArgv
[
i
].
	`size
()+1;

27 
ch¬li¡
[
i
]=(*)
	`m®loc
(
¡¾’
);

29 
	`¡rıy
(
ch¬li¡
[
i
],
vqsArgv
[i].
	`toStdSŒšg
().
	`c_¡r
());

31 
	`qt_ffm³g
(
ch¬li¡_size
, 
ch¬li¡
);

32 
w
.
	`show
();

34  
a
.
	`exec
();

35 
	}
}

	@mainwindow.cpp

1 
	~"mašwšdow.h
"

2 
	~"ui_mašwšdow.h
"

4 
	gMašWšdow
::
	$MašWšdow
(
QWidg‘
 *
·»Á
) :

5 
	`QMašWšdow
(
·»Á
),

6 
	$ui
(
Ãw
 
Ui
::
MašWšdow
)

8 
ui
->
	`£tupUi
(
this
);

9 
	}
}

11 
	gMašWšdow
::~
	$MašWšdow
()

13 
d–‘e
 
ui
;

14 
	}
}

	@mainwindow.h

1 #iâdeà
MAINWINDOW_H


2 
	#MAINWINDOW_H


	)

4 
	~<QMašWšdow
>

6 
Çme¥aû
 
	gUi
 {

7 
şass
 
	gMašWšdow
;

10 şas 
	cMašWšdow
 : 
public
 
QMašWšdow


12 
Q_OBJECT


14 
public
:

15 
ex¶ic™
 
MašWšdow
(
QWidg‘
 *
·»Á
 = 0);

16 ~
MašWšdow
();

18 
	m´iv©e
:

19 
Ui
::
MašWšdow
 *
ui
;

	@
1
.
1
/usr/include
12
153
cmdutils.c
cmdutils.h
cmdutils_common_opts.h
config.h
ffmpeg.c
ffmpeg.h
ffmpeg_dxva2.c
ffmpeg_filter.c
ffmpeg_opt.c
main.cpp
mainwindow.cpp
mainwindow.h
